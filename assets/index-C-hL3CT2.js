(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var SI=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function xI(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var D_={exports:{}},Nu={},V_={exports:{}},te={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wa=Symbol.for("react.element"),PI=Symbol.for("react.portal"),AI=Symbol.for("react.fragment"),RI=Symbol.for("react.strict_mode"),CI=Symbol.for("react.profiler"),kI=Symbol.for("react.provider"),bI=Symbol.for("react.context"),DI=Symbol.for("react.forward_ref"),VI=Symbol.for("react.suspense"),NI=Symbol.for("react.memo"),MI=Symbol.for("react.lazy"),Xm=Symbol.iterator;function LI(t){return t===null||typeof t!="object"?null:(t=Xm&&t[Xm]||t["@@iterator"],typeof t=="function"?t:null)}var N_={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},M_=Object.assign,L_={};function Ds(t,e,n){this.props=t,this.context=e,this.refs=L_,this.updater=n||N_}Ds.prototype.isReactComponent={};Ds.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Ds.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function O_(){}O_.prototype=Ds.prototype;function Hd(t,e,n){this.props=t,this.context=e,this.refs=L_,this.updater=n||N_}var Qd=Hd.prototype=new O_;Qd.constructor=Hd;M_(Qd,Ds.prototype);Qd.isPureReactComponent=!0;var Jm=Array.isArray,F_=Object.prototype.hasOwnProperty,Yd={current:null},B_={key:!0,ref:!0,__self:!0,__source:!0};function j_(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)F_.call(e,r)&&!B_.hasOwnProperty(r)&&(i[r]=e[r]);var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){for(var u=Array(l),c=0;c<l;c++)u[c]=arguments[c+2];i.children=u}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)i[r]===void 0&&(i[r]=l[r]);return{$$typeof:wa,type:t,key:s,ref:o,props:i,_owner:Yd.current}}function OI(t,e){return{$$typeof:wa,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Xd(t){return typeof t=="object"&&t!==null&&t.$$typeof===wa}function FI(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Zm=/\/+/g;function Uc(t,e){return typeof t=="object"&&t!==null&&t.key!=null?FI(""+t.key):e.toString(36)}function Sl(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case wa:case PI:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+Uc(o,0):r,Jm(i)?(n="",t!=null&&(n=t.replace(Zm,"$&/")+"/"),Sl(i,e,n,"",function(c){return c})):i!=null&&(Xd(i)&&(i=OI(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(Zm,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",Jm(t))for(var l=0;l<t.length;l++){s=t[l];var u=r+Uc(s,l);o+=Sl(s,e,n,u,i)}else if(u=LI(t),typeof u=="function")for(t=u.call(t),l=0;!(s=t.next()).done;)s=s.value,u=r+Uc(s,l++),o+=Sl(s,e,n,u,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function tl(t,e,n){if(t==null)return t;var r=[],i=0;return Sl(t,r,"","",function(s){return e.call(n,s,i++)}),r}function BI(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var wt={current:null},xl={transition:null},jI={ReactCurrentDispatcher:wt,ReactCurrentBatchConfig:xl,ReactCurrentOwner:Yd};function z_(){throw Error("act(...) is not supported in production builds of React.")}te.Children={map:tl,forEach:function(t,e,n){tl(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return tl(t,function(){e++}),e},toArray:function(t){return tl(t,function(e){return e})||[]},only:function(t){if(!Xd(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};te.Component=Ds;te.Fragment=AI;te.Profiler=CI;te.PureComponent=Hd;te.StrictMode=RI;te.Suspense=VI;te.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=jI;te.act=z_;te.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=M_({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=Yd.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(u in e)F_.call(e,u)&&!B_.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&l!==void 0?l[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){l=Array(u);for(var c=0;c<u;c++)l[c]=arguments[c+2];r.children=l}return{$$typeof:wa,type:t.type,key:i,ref:s,props:r,_owner:o}};te.createContext=function(t){return t={$$typeof:bI,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:kI,_context:t},t.Consumer=t};te.createElement=j_;te.createFactory=function(t){var e=j_.bind(null,t);return e.type=t,e};te.createRef=function(){return{current:null}};te.forwardRef=function(t){return{$$typeof:DI,render:t}};te.isValidElement=Xd;te.lazy=function(t){return{$$typeof:MI,_payload:{_status:-1,_result:t},_init:BI}};te.memo=function(t,e){return{$$typeof:NI,type:t,compare:e===void 0?null:e}};te.startTransition=function(t){var e=xl.transition;xl.transition={};try{t()}finally{xl.transition=e}};te.unstable_act=z_;te.useCallback=function(t,e){return wt.current.useCallback(t,e)};te.useContext=function(t){return wt.current.useContext(t)};te.useDebugValue=function(){};te.useDeferredValue=function(t){return wt.current.useDeferredValue(t)};te.useEffect=function(t,e){return wt.current.useEffect(t,e)};te.useId=function(){return wt.current.useId()};te.useImperativeHandle=function(t,e,n){return wt.current.useImperativeHandle(t,e,n)};te.useInsertionEffect=function(t,e){return wt.current.useInsertionEffect(t,e)};te.useLayoutEffect=function(t,e){return wt.current.useLayoutEffect(t,e)};te.useMemo=function(t,e){return wt.current.useMemo(t,e)};te.useReducer=function(t,e,n){return wt.current.useReducer(t,e,n)};te.useRef=function(t){return wt.current.useRef(t)};te.useState=function(t){return wt.current.useState(t)};te.useSyncExternalStore=function(t,e,n){return wt.current.useSyncExternalStore(t,e,n)};te.useTransition=function(){return wt.current.useTransition()};te.version="18.3.1";V_.exports=te;var ee=V_.exports;const Nt=xI(ee);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zI=ee,UI=Symbol.for("react.element"),$I=Symbol.for("react.fragment"),qI=Object.prototype.hasOwnProperty,GI=zI.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,WI={key:!0,ref:!0,__self:!0,__source:!0};function U_(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)qI.call(e,r)&&!WI.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:UI,type:t,key:s,ref:o,props:i,_owner:GI.current}}Nu.Fragment=$I;Nu.jsx=U_;Nu.jsxs=U_;D_.exports=Nu;var k=D_.exports,Sh={},$_={exports:{}},Bt={},q_={exports:{}},G_={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(G,Y){var Z=G.length;G.push(Y);e:for(;0<Z;){var xe=Z-1>>>1,de=G[xe];if(0<i(de,Y))G[xe]=Y,G[Z]=de,Z=xe;else break e}}function n(G){return G.length===0?null:G[0]}function r(G){if(G.length===0)return null;var Y=G[0],Z=G.pop();if(Z!==Y){G[0]=Z;e:for(var xe=0,de=G.length,Ne=de>>>1;xe<Ne;){var yn=2*(xe+1)-1,_n=G[yn],vn=yn+1,wn=G[vn];if(0>i(_n,Z))vn<de&&0>i(wn,_n)?(G[xe]=wn,G[vn]=Z,xe=vn):(G[xe]=_n,G[yn]=Z,xe=yn);else if(vn<de&&0>i(wn,Z))G[xe]=wn,G[vn]=Z,xe=vn;else break e}}return Y}function i(G,Y){var Z=G.sortIndex-Y.sortIndex;return Z!==0?Z:G.id-Y.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var u=[],c=[],f=1,m=null,v=3,A=!1,D=!1,V=!1,F=typeof setTimeout=="function"?setTimeout:null,C=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function T(G){for(var Y=n(c);Y!==null;){if(Y.callback===null)r(c);else if(Y.startTime<=G)r(c),Y.sortIndex=Y.expirationTime,e(u,Y);else break;Y=n(c)}}function d(G){if(V=!1,T(G),!D)if(n(u)!==null)D=!0,$s(g);else{var Y=n(c);Y!==null&&gn(d,Y.startTime-G)}}function g(G,Y){D=!1,V&&(V=!1,C(y),y=-1),A=!0;var Z=v;try{for(T(Y),m=n(u);m!==null&&(!(m.expirationTime>Y)||G&&!R());){var xe=m.callback;if(typeof xe=="function"){m.callback=null,v=m.priorityLevel;var de=xe(m.expirationTime<=Y);Y=t.unstable_now(),typeof de=="function"?m.callback=de:m===n(u)&&r(u),T(Y)}else r(u);m=n(u)}if(m!==null)var Ne=!0;else{var yn=n(c);yn!==null&&gn(d,yn.startTime-Y),Ne=!1}return Ne}finally{m=null,v=Z,A=!1}}var I=!1,_=null,y=-1,w=5,S=-1;function R(){return!(t.unstable_now()-S<w)}function b(){if(_!==null){var G=t.unstable_now();S=G;var Y=!0;try{Y=_(!0,G)}finally{Y?P():(I=!1,_=null)}}else I=!1}var P;if(typeof x=="function")P=function(){x(b)};else if(typeof MessageChannel<"u"){var Se=new MessageChannel,bt=Se.port2;Se.port1.onmessage=b,P=function(){bt.postMessage(null)}}else P=function(){F(b,0)};function $s(G){_=G,I||(I=!0,P())}function gn(G,Y){y=F(function(){G(t.unstable_now())},Y)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(G){G.callback=null},t.unstable_continueExecution=function(){D||A||(D=!0,$s(g))},t.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):w=0<G?Math.floor(1e3/G):5},t.unstable_getCurrentPriorityLevel=function(){return v},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(G){switch(v){case 1:case 2:case 3:var Y=3;break;default:Y=v}var Z=v;v=Y;try{return G()}finally{v=Z}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(G,Y){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var Z=v;v=G;try{return Y()}finally{v=Z}},t.unstable_scheduleCallback=function(G,Y,Z){var xe=t.unstable_now();switch(typeof Z=="object"&&Z!==null?(Z=Z.delay,Z=typeof Z=="number"&&0<Z?xe+Z:xe):Z=xe,G){case 1:var de=-1;break;case 2:de=250;break;case 5:de=1073741823;break;case 4:de=1e4;break;default:de=5e3}return de=Z+de,G={id:f++,callback:Y,priorityLevel:G,startTime:Z,expirationTime:de,sortIndex:-1},Z>xe?(G.sortIndex=Z,e(c,G),n(u)===null&&G===n(c)&&(V?(C(y),y=-1):V=!0,gn(d,Z-xe))):(G.sortIndex=de,e(u,G),D||A||(D=!0,$s(g))),G},t.unstable_shouldYield=R,t.unstable_wrapCallback=function(G){var Y=v;return function(){var Z=v;v=Y;try{return G.apply(this,arguments)}finally{v=Z}}}})(G_);q_.exports=G_;var KI=q_.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var HI=ee,Ot=KI;function z(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var W_=new Set,zo={};function _i(t,e){ls(t,e),ls(t+"Capture",e)}function ls(t,e){for(zo[t]=e,t=0;t<e.length;t++)W_.add(e[t])}var kn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),xh=Object.prototype.hasOwnProperty,QI=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,eg={},tg={};function YI(t){return xh.call(tg,t)?!0:xh.call(eg,t)?!1:QI.test(t)?tg[t]=!0:(eg[t]=!0,!1)}function XI(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function JI(t,e,n,r){if(e===null||typeof e>"u"||XI(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Et(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var nt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){nt[t]=new Et(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];nt[e]=new Et(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){nt[t]=new Et(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){nt[t]=new Et(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){nt[t]=new Et(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){nt[t]=new Et(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){nt[t]=new Et(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){nt[t]=new Et(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){nt[t]=new Et(t,5,!1,t.toLowerCase(),null,!1,!1)});var Jd=/[\-:]([a-z])/g;function Zd(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Jd,Zd);nt[e]=new Et(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Jd,Zd);nt[e]=new Et(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Jd,Zd);nt[e]=new Et(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){nt[t]=new Et(t,1,!1,t.toLowerCase(),null,!1,!1)});nt.xlinkHref=new Et("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){nt[t]=new Et(t,1,!1,t.toLowerCase(),null,!0,!0)});function ef(t,e,n,r){var i=nt.hasOwnProperty(e)?nt[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(JI(e,n,i,r)&&(n=null),r||i===null?YI(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Ln=HI.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,nl=Symbol.for("react.element"),zi=Symbol.for("react.portal"),Ui=Symbol.for("react.fragment"),tf=Symbol.for("react.strict_mode"),Ph=Symbol.for("react.profiler"),K_=Symbol.for("react.provider"),H_=Symbol.for("react.context"),nf=Symbol.for("react.forward_ref"),Ah=Symbol.for("react.suspense"),Rh=Symbol.for("react.suspense_list"),rf=Symbol.for("react.memo"),Kn=Symbol.for("react.lazy"),Q_=Symbol.for("react.offscreen"),ng=Symbol.iterator;function io(t){return t===null||typeof t!="object"?null:(t=ng&&t[ng]||t["@@iterator"],typeof t=="function"?t:null)}var Ce=Object.assign,$c;function _o(t){if($c===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);$c=e&&e[1]||""}return`
`+$c+t}var qc=!1;function Gc(t,e){if(!t||qc)return"";qc=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,l=s.length-1;1<=o&&0<=l&&i[o]!==s[l];)l--;for(;1<=o&&0<=l;o--,l--)if(i[o]!==s[l]){if(o!==1||l!==1)do if(o--,l--,0>l||i[o]!==s[l]){var u=`
`+i[o].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=o&&0<=l);break}}}finally{qc=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?_o(t):""}function ZI(t){switch(t.tag){case 5:return _o(t.type);case 16:return _o("Lazy");case 13:return _o("Suspense");case 19:return _o("SuspenseList");case 0:case 2:case 15:return t=Gc(t.type,!1),t;case 11:return t=Gc(t.type.render,!1),t;case 1:return t=Gc(t.type,!0),t;default:return""}}function Ch(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Ui:return"Fragment";case zi:return"Portal";case Ph:return"Profiler";case tf:return"StrictMode";case Ah:return"Suspense";case Rh:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case H_:return(t.displayName||"Context")+".Consumer";case K_:return(t._context.displayName||"Context")+".Provider";case nf:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case rf:return e=t.displayName||null,e!==null?e:Ch(t.type)||"Memo";case Kn:e=t._payload,t=t._init;try{return Ch(t(e))}catch{}}return null}function eT(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ch(e);case 8:return e===tf?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function dr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Y_(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function tT(t){var e=Y_(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function rl(t){t._valueTracker||(t._valueTracker=tT(t))}function X_(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Y_(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Gl(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function kh(t,e){var n=e.checked;return Ce({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function rg(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=dr(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function J_(t,e){e=e.checked,e!=null&&ef(t,"checked",e,!1)}function bh(t,e){J_(t,e);var n=dr(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Dh(t,e.type,n):e.hasOwnProperty("defaultValue")&&Dh(t,e.type,dr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function ig(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Dh(t,e,n){(e!=="number"||Gl(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var vo=Array.isArray;function es(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+dr(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Vh(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(z(91));return Ce({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function sg(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(z(92));if(vo(n)){if(1<n.length)throw Error(z(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:dr(n)}}function Z_(t,e){var n=dr(e.value),r=dr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function og(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function e0(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Nh(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?e0(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var il,t0=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(il=il||document.createElement("div"),il.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=il.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Uo(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Po={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},nT=["Webkit","ms","Moz","O"];Object.keys(Po).forEach(function(t){nT.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Po[e]=Po[t]})});function n0(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Po.hasOwnProperty(t)&&Po[t]?(""+e).trim():e+"px"}function r0(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=n0(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var rT=Ce({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Mh(t,e){if(e){if(rT[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(z(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(z(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(z(61))}if(e.style!=null&&typeof e.style!="object")throw Error(z(62))}}function Lh(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Oh=null;function sf(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Fh=null,ts=null,ns=null;function ag(t){if(t=Ta(t)){if(typeof Fh!="function")throw Error(z(280));var e=t.stateNode;e&&(e=Bu(e),Fh(t.stateNode,t.type,e))}}function i0(t){ts?ns?ns.push(t):ns=[t]:ts=t}function s0(){if(ts){var t=ts,e=ns;if(ns=ts=null,ag(t),e)for(t=0;t<e.length;t++)ag(e[t])}}function o0(t,e){return t(e)}function a0(){}var Wc=!1;function l0(t,e,n){if(Wc)return t(e,n);Wc=!0;try{return o0(t,e,n)}finally{Wc=!1,(ts!==null||ns!==null)&&(a0(),s0())}}function $o(t,e){var n=t.stateNode;if(n===null)return null;var r=Bu(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(z(231,e,typeof n));return n}var Bh=!1;if(kn)try{var so={};Object.defineProperty(so,"passive",{get:function(){Bh=!0}}),window.addEventListener("test",so,so),window.removeEventListener("test",so,so)}catch{Bh=!1}function iT(t,e,n,r,i,s,o,l,u){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(f){this.onError(f)}}var Ao=!1,Wl=null,Kl=!1,jh=null,sT={onError:function(t){Ao=!0,Wl=t}};function oT(t,e,n,r,i,s,o,l,u){Ao=!1,Wl=null,iT.apply(sT,arguments)}function aT(t,e,n,r,i,s,o,l,u){if(oT.apply(this,arguments),Ao){if(Ao){var c=Wl;Ao=!1,Wl=null}else throw Error(z(198));Kl||(Kl=!0,jh=c)}}function vi(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function u0(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function lg(t){if(vi(t)!==t)throw Error(z(188))}function lT(t){var e=t.alternate;if(!e){if(e=vi(t),e===null)throw Error(z(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return lg(i),t;if(s===r)return lg(i),e;s=s.sibling}throw Error(z(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o){for(l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o)throw Error(z(189))}}if(n.alternate!==r)throw Error(z(190))}if(n.tag!==3)throw Error(z(188));return n.stateNode.current===n?t:e}function c0(t){return t=lT(t),t!==null?h0(t):null}function h0(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=h0(t);if(e!==null)return e;t=t.sibling}return null}var d0=Ot.unstable_scheduleCallback,ug=Ot.unstable_cancelCallback,uT=Ot.unstable_shouldYield,cT=Ot.unstable_requestPaint,Me=Ot.unstable_now,hT=Ot.unstable_getCurrentPriorityLevel,of=Ot.unstable_ImmediatePriority,f0=Ot.unstable_UserBlockingPriority,Hl=Ot.unstable_NormalPriority,dT=Ot.unstable_LowPriority,p0=Ot.unstable_IdlePriority,Mu=null,cn=null;function fT(t){if(cn&&typeof cn.onCommitFiberRoot=="function")try{cn.onCommitFiberRoot(Mu,t,void 0,(t.current.flags&128)===128)}catch{}}var en=Math.clz32?Math.clz32:gT,pT=Math.log,mT=Math.LN2;function gT(t){return t>>>=0,t===0?32:31-(pT(t)/mT|0)|0}var sl=64,ol=4194304;function wo(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Ql(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var l=o&~i;l!==0?r=wo(l):(s&=o,s!==0&&(r=wo(s)))}else o=n&~i,o!==0?r=wo(o):s!==0&&(r=wo(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-en(e),i=1<<n,r|=t[n],e&=~i;return r}function yT(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function _T(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-en(s),l=1<<o,u=i[o];u===-1?(!(l&n)||l&r)&&(i[o]=yT(l,e)):u<=e&&(t.expiredLanes|=l),s&=~l}}function zh(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function m0(){var t=sl;return sl<<=1,!(sl&4194240)&&(sl=64),t}function Kc(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Ea(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-en(e),t[e]=n}function vT(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-en(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function af(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-en(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var ce=0;function g0(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var y0,lf,_0,v0,w0,Uh=!1,al=[],nr=null,rr=null,ir=null,qo=new Map,Go=new Map,Qn=[],wT="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function cg(t,e){switch(t){case"focusin":case"focusout":nr=null;break;case"dragenter":case"dragleave":rr=null;break;case"mouseover":case"mouseout":ir=null;break;case"pointerover":case"pointerout":qo.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Go.delete(e.pointerId)}}function oo(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Ta(e),e!==null&&lf(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function ET(t,e,n,r,i){switch(e){case"focusin":return nr=oo(nr,t,e,n,r,i),!0;case"dragenter":return rr=oo(rr,t,e,n,r,i),!0;case"mouseover":return ir=oo(ir,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return qo.set(s,oo(qo.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Go.set(s,oo(Go.get(s)||null,t,e,n,r,i)),!0}return!1}function E0(t){var e=Hr(t.target);if(e!==null){var n=vi(e);if(n!==null){if(e=n.tag,e===13){if(e=u0(n),e!==null){t.blockedOn=e,w0(t.priority,function(){_0(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Pl(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=$h(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Oh=r,n.target.dispatchEvent(r),Oh=null}else return e=Ta(n),e!==null&&lf(e),t.blockedOn=n,!1;e.shift()}return!0}function hg(t,e,n){Pl(t)&&n.delete(e)}function IT(){Uh=!1,nr!==null&&Pl(nr)&&(nr=null),rr!==null&&Pl(rr)&&(rr=null),ir!==null&&Pl(ir)&&(ir=null),qo.forEach(hg),Go.forEach(hg)}function ao(t,e){t.blockedOn===e&&(t.blockedOn=null,Uh||(Uh=!0,Ot.unstable_scheduleCallback(Ot.unstable_NormalPriority,IT)))}function Wo(t){function e(i){return ao(i,t)}if(0<al.length){ao(al[0],t);for(var n=1;n<al.length;n++){var r=al[n];r.blockedOn===t&&(r.blockedOn=null)}}for(nr!==null&&ao(nr,t),rr!==null&&ao(rr,t),ir!==null&&ao(ir,t),qo.forEach(e),Go.forEach(e),n=0;n<Qn.length;n++)r=Qn[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Qn.length&&(n=Qn[0],n.blockedOn===null);)E0(n),n.blockedOn===null&&Qn.shift()}var rs=Ln.ReactCurrentBatchConfig,Yl=!0;function TT(t,e,n,r){var i=ce,s=rs.transition;rs.transition=null;try{ce=1,uf(t,e,n,r)}finally{ce=i,rs.transition=s}}function ST(t,e,n,r){var i=ce,s=rs.transition;rs.transition=null;try{ce=4,uf(t,e,n,r)}finally{ce=i,rs.transition=s}}function uf(t,e,n,r){if(Yl){var i=$h(t,e,n,r);if(i===null)rh(t,e,r,Xl,n),cg(t,r);else if(ET(i,t,e,n,r))r.stopPropagation();else if(cg(t,r),e&4&&-1<wT.indexOf(t)){for(;i!==null;){var s=Ta(i);if(s!==null&&y0(s),s=$h(t,e,n,r),s===null&&rh(t,e,r,Xl,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else rh(t,e,r,null,n)}}var Xl=null;function $h(t,e,n,r){if(Xl=null,t=sf(r),t=Hr(t),t!==null)if(e=vi(t),e===null)t=null;else if(n=e.tag,n===13){if(t=u0(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Xl=t,null}function I0(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(hT()){case of:return 1;case f0:return 4;case Hl:case dT:return 16;case p0:return 536870912;default:return 16}default:return 16}}var Zn=null,cf=null,Al=null;function T0(){if(Al)return Al;var t,e=cf,n=e.length,r,i="value"in Zn?Zn.value:Zn.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return Al=i.slice(t,1<r?1-r:void 0)}function Rl(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function ll(){return!0}function dg(){return!1}function jt(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(s):s[l]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?ll:dg,this.isPropagationStopped=dg,this}return Ce(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ll)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ll)},persist:function(){},isPersistent:ll}),e}var Vs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},hf=jt(Vs),Ia=Ce({},Vs,{view:0,detail:0}),xT=jt(Ia),Hc,Qc,lo,Lu=Ce({},Ia,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:df,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==lo&&(lo&&t.type==="mousemove"?(Hc=t.screenX-lo.screenX,Qc=t.screenY-lo.screenY):Qc=Hc=0,lo=t),Hc)},movementY:function(t){return"movementY"in t?t.movementY:Qc}}),fg=jt(Lu),PT=Ce({},Lu,{dataTransfer:0}),AT=jt(PT),RT=Ce({},Ia,{relatedTarget:0}),Yc=jt(RT),CT=Ce({},Vs,{animationName:0,elapsedTime:0,pseudoElement:0}),kT=jt(CT),bT=Ce({},Vs,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),DT=jt(bT),VT=Ce({},Vs,{data:0}),pg=jt(VT),NT={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},MT={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},LT={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function OT(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=LT[t])?!!e[t]:!1}function df(){return OT}var FT=Ce({},Ia,{key:function(t){if(t.key){var e=NT[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Rl(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?MT[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:df,charCode:function(t){return t.type==="keypress"?Rl(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Rl(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),BT=jt(FT),jT=Ce({},Lu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),mg=jt(jT),zT=Ce({},Ia,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:df}),UT=jt(zT),$T=Ce({},Vs,{propertyName:0,elapsedTime:0,pseudoElement:0}),qT=jt($T),GT=Ce({},Lu,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),WT=jt(GT),KT=[9,13,27,32],ff=kn&&"CompositionEvent"in window,Ro=null;kn&&"documentMode"in document&&(Ro=document.documentMode);var HT=kn&&"TextEvent"in window&&!Ro,S0=kn&&(!ff||Ro&&8<Ro&&11>=Ro),gg=" ",yg=!1;function x0(t,e){switch(t){case"keyup":return KT.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function P0(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var $i=!1;function QT(t,e){switch(t){case"compositionend":return P0(e);case"keypress":return e.which!==32?null:(yg=!0,gg);case"textInput":return t=e.data,t===gg&&yg?null:t;default:return null}}function YT(t,e){if($i)return t==="compositionend"||!ff&&x0(t,e)?(t=T0(),Al=cf=Zn=null,$i=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return S0&&e.locale!=="ko"?null:e.data;default:return null}}var XT={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function _g(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!XT[t.type]:e==="textarea"}function A0(t,e,n,r){i0(r),e=Jl(e,"onChange"),0<e.length&&(n=new hf("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Co=null,Ko=null;function JT(t){F0(t,0)}function Ou(t){var e=Wi(t);if(X_(e))return t}function ZT(t,e){if(t==="change")return e}var R0=!1;if(kn){var Xc;if(kn){var Jc="oninput"in document;if(!Jc){var vg=document.createElement("div");vg.setAttribute("oninput","return;"),Jc=typeof vg.oninput=="function"}Xc=Jc}else Xc=!1;R0=Xc&&(!document.documentMode||9<document.documentMode)}function wg(){Co&&(Co.detachEvent("onpropertychange",C0),Ko=Co=null)}function C0(t){if(t.propertyName==="value"&&Ou(Ko)){var e=[];A0(e,Ko,t,sf(t)),l0(JT,e)}}function eS(t,e,n){t==="focusin"?(wg(),Co=e,Ko=n,Co.attachEvent("onpropertychange",C0)):t==="focusout"&&wg()}function tS(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Ou(Ko)}function nS(t,e){if(t==="click")return Ou(e)}function rS(t,e){if(t==="input"||t==="change")return Ou(e)}function iS(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var nn=typeof Object.is=="function"?Object.is:iS;function Ho(t,e){if(nn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!xh.call(e,i)||!nn(t[i],e[i]))return!1}return!0}function Eg(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Ig(t,e){var n=Eg(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Eg(n)}}function k0(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?k0(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function b0(){for(var t=window,e=Gl();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Gl(t.document)}return e}function pf(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function sS(t){var e=b0(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&k0(n.ownerDocument.documentElement,n)){if(r!==null&&pf(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=Ig(n,s);var o=Ig(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var oS=kn&&"documentMode"in document&&11>=document.documentMode,qi=null,qh=null,ko=null,Gh=!1;function Tg(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Gh||qi==null||qi!==Gl(r)||(r=qi,"selectionStart"in r&&pf(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),ko&&Ho(ko,r)||(ko=r,r=Jl(qh,"onSelect"),0<r.length&&(e=new hf("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=qi)))}function ul(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Gi={animationend:ul("Animation","AnimationEnd"),animationiteration:ul("Animation","AnimationIteration"),animationstart:ul("Animation","AnimationStart"),transitionend:ul("Transition","TransitionEnd")},Zc={},D0={};kn&&(D0=document.createElement("div").style,"AnimationEvent"in window||(delete Gi.animationend.animation,delete Gi.animationiteration.animation,delete Gi.animationstart.animation),"TransitionEvent"in window||delete Gi.transitionend.transition);function Fu(t){if(Zc[t])return Zc[t];if(!Gi[t])return t;var e=Gi[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in D0)return Zc[t]=e[n];return t}var V0=Fu("animationend"),N0=Fu("animationiteration"),M0=Fu("animationstart"),L0=Fu("transitionend"),O0=new Map,Sg="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Sr(t,e){O0.set(t,e),_i(e,[t])}for(var eh=0;eh<Sg.length;eh++){var th=Sg[eh],aS=th.toLowerCase(),lS=th[0].toUpperCase()+th.slice(1);Sr(aS,"on"+lS)}Sr(V0,"onAnimationEnd");Sr(N0,"onAnimationIteration");Sr(M0,"onAnimationStart");Sr("dblclick","onDoubleClick");Sr("focusin","onFocus");Sr("focusout","onBlur");Sr(L0,"onTransitionEnd");ls("onMouseEnter",["mouseout","mouseover"]);ls("onMouseLeave",["mouseout","mouseover"]);ls("onPointerEnter",["pointerout","pointerover"]);ls("onPointerLeave",["pointerout","pointerover"]);_i("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));_i("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));_i("onBeforeInput",["compositionend","keypress","textInput","paste"]);_i("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));_i("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));_i("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Eo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),uS=new Set("cancel close invalid load scroll toggle".split(" ").concat(Eo));function xg(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,aT(r,e,void 0,t),t.currentTarget=null}function F0(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var l=r[o],u=l.instance,c=l.currentTarget;if(l=l.listener,u!==s&&i.isPropagationStopped())break e;xg(i,l,c),s=u}else for(o=0;o<r.length;o++){if(l=r[o],u=l.instance,c=l.currentTarget,l=l.listener,u!==s&&i.isPropagationStopped())break e;xg(i,l,c),s=u}}}if(Kl)throw t=jh,Kl=!1,jh=null,t}function ye(t,e){var n=e[Yh];n===void 0&&(n=e[Yh]=new Set);var r=t+"__bubble";n.has(r)||(B0(e,t,2,!1),n.add(r))}function nh(t,e,n){var r=0;e&&(r|=4),B0(n,t,r,e)}var cl="_reactListening"+Math.random().toString(36).slice(2);function Qo(t){if(!t[cl]){t[cl]=!0,W_.forEach(function(n){n!=="selectionchange"&&(uS.has(n)||nh(n,!1,t),nh(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[cl]||(e[cl]=!0,nh("selectionchange",!1,e))}}function B0(t,e,n,r){switch(I0(e)){case 1:var i=TT;break;case 4:i=ST;break;default:i=uf}n=i.bind(null,e,n,t),i=void 0,!Bh||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function rh(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===i||l.nodeType===8&&l.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===i||u.nodeType===8&&u.parentNode===i))return;o=o.return}for(;l!==null;){if(o=Hr(l),o===null)return;if(u=o.tag,u===5||u===6){r=s=o;continue e}l=l.parentNode}}r=r.return}l0(function(){var c=s,f=sf(n),m=[];e:{var v=O0.get(t);if(v!==void 0){var A=hf,D=t;switch(t){case"keypress":if(Rl(n)===0)break e;case"keydown":case"keyup":A=BT;break;case"focusin":D="focus",A=Yc;break;case"focusout":D="blur",A=Yc;break;case"beforeblur":case"afterblur":A=Yc;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":A=fg;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":A=AT;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":A=UT;break;case V0:case N0:case M0:A=kT;break;case L0:A=qT;break;case"scroll":A=xT;break;case"wheel":A=WT;break;case"copy":case"cut":case"paste":A=DT;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":A=mg}var V=(e&4)!==0,F=!V&&t==="scroll",C=V?v!==null?v+"Capture":null:v;V=[];for(var x=c,T;x!==null;){T=x;var d=T.stateNode;if(T.tag===5&&d!==null&&(T=d,C!==null&&(d=$o(x,C),d!=null&&V.push(Yo(x,d,T)))),F)break;x=x.return}0<V.length&&(v=new A(v,D,null,n,f),m.push({event:v,listeners:V}))}}if(!(e&7)){e:{if(v=t==="mouseover"||t==="pointerover",A=t==="mouseout"||t==="pointerout",v&&n!==Oh&&(D=n.relatedTarget||n.fromElement)&&(Hr(D)||D[bn]))break e;if((A||v)&&(v=f.window===f?f:(v=f.ownerDocument)?v.defaultView||v.parentWindow:window,A?(D=n.relatedTarget||n.toElement,A=c,D=D?Hr(D):null,D!==null&&(F=vi(D),D!==F||D.tag!==5&&D.tag!==6)&&(D=null)):(A=null,D=c),A!==D)){if(V=fg,d="onMouseLeave",C="onMouseEnter",x="mouse",(t==="pointerout"||t==="pointerover")&&(V=mg,d="onPointerLeave",C="onPointerEnter",x="pointer"),F=A==null?v:Wi(A),T=D==null?v:Wi(D),v=new V(d,x+"leave",A,n,f),v.target=F,v.relatedTarget=T,d=null,Hr(f)===c&&(V=new V(C,x+"enter",D,n,f),V.target=T,V.relatedTarget=F,d=V),F=d,A&&D)t:{for(V=A,C=D,x=0,T=V;T;T=ki(T))x++;for(T=0,d=C;d;d=ki(d))T++;for(;0<x-T;)V=ki(V),x--;for(;0<T-x;)C=ki(C),T--;for(;x--;){if(V===C||C!==null&&V===C.alternate)break t;V=ki(V),C=ki(C)}V=null}else V=null;A!==null&&Pg(m,v,A,V,!1),D!==null&&F!==null&&Pg(m,F,D,V,!0)}}e:{if(v=c?Wi(c):window,A=v.nodeName&&v.nodeName.toLowerCase(),A==="select"||A==="input"&&v.type==="file")var g=ZT;else if(_g(v))if(R0)g=rS;else{g=tS;var I=eS}else(A=v.nodeName)&&A.toLowerCase()==="input"&&(v.type==="checkbox"||v.type==="radio")&&(g=nS);if(g&&(g=g(t,c))){A0(m,g,n,f);break e}I&&I(t,v,c),t==="focusout"&&(I=v._wrapperState)&&I.controlled&&v.type==="number"&&Dh(v,"number",v.value)}switch(I=c?Wi(c):window,t){case"focusin":(_g(I)||I.contentEditable==="true")&&(qi=I,qh=c,ko=null);break;case"focusout":ko=qh=qi=null;break;case"mousedown":Gh=!0;break;case"contextmenu":case"mouseup":case"dragend":Gh=!1,Tg(m,n,f);break;case"selectionchange":if(oS)break;case"keydown":case"keyup":Tg(m,n,f)}var _;if(ff)e:{switch(t){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else $i?x0(t,n)&&(y="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(y="onCompositionStart");y&&(S0&&n.locale!=="ko"&&($i||y!=="onCompositionStart"?y==="onCompositionEnd"&&$i&&(_=T0()):(Zn=f,cf="value"in Zn?Zn.value:Zn.textContent,$i=!0)),I=Jl(c,y),0<I.length&&(y=new pg(y,t,null,n,f),m.push({event:y,listeners:I}),_?y.data=_:(_=P0(n),_!==null&&(y.data=_)))),(_=HT?QT(t,n):YT(t,n))&&(c=Jl(c,"onBeforeInput"),0<c.length&&(f=new pg("onBeforeInput","beforeinput",null,n,f),m.push({event:f,listeners:c}),f.data=_))}F0(m,e)})}function Yo(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Jl(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=$o(t,n),s!=null&&r.unshift(Yo(t,s,i)),s=$o(t,e),s!=null&&r.push(Yo(t,s,i))),t=t.return}return r}function ki(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Pg(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var l=n,u=l.alternate,c=l.stateNode;if(u!==null&&u===r)break;l.tag===5&&c!==null&&(l=c,i?(u=$o(n,s),u!=null&&o.unshift(Yo(n,u,l))):i||(u=$o(n,s),u!=null&&o.push(Yo(n,u,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var cS=/\r\n?/g,hS=/\u0000|\uFFFD/g;function Ag(t){return(typeof t=="string"?t:""+t).replace(cS,`
`).replace(hS,"")}function hl(t,e,n){if(e=Ag(e),Ag(t)!==e&&n)throw Error(z(425))}function Zl(){}var Wh=null,Kh=null;function Hh(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Qh=typeof setTimeout=="function"?setTimeout:void 0,dS=typeof clearTimeout=="function"?clearTimeout:void 0,Rg=typeof Promise=="function"?Promise:void 0,fS=typeof queueMicrotask=="function"?queueMicrotask:typeof Rg<"u"?function(t){return Rg.resolve(null).then(t).catch(pS)}:Qh;function pS(t){setTimeout(function(){throw t})}function ih(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Wo(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Wo(e)}function sr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Cg(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Ns=Math.random().toString(36).slice(2),an="__reactFiber$"+Ns,Xo="__reactProps$"+Ns,bn="__reactContainer$"+Ns,Yh="__reactEvents$"+Ns,mS="__reactListeners$"+Ns,gS="__reactHandles$"+Ns;function Hr(t){var e=t[an];if(e)return e;for(var n=t.parentNode;n;){if(e=n[bn]||n[an]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Cg(t);t!==null;){if(n=t[an])return n;t=Cg(t)}return e}t=n,n=t.parentNode}return null}function Ta(t){return t=t[an]||t[bn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Wi(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(z(33))}function Bu(t){return t[Xo]||null}var Xh=[],Ki=-1;function xr(t){return{current:t}}function ve(t){0>Ki||(t.current=Xh[Ki],Xh[Ki]=null,Ki--)}function pe(t,e){Ki++,Xh[Ki]=t.current,t.current=e}var fr={},ct=xr(fr),Rt=xr(!1),ni=fr;function us(t,e){var n=t.type.contextTypes;if(!n)return fr;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Ct(t){return t=t.childContextTypes,t!=null}function eu(){ve(Rt),ve(ct)}function kg(t,e,n){if(ct.current!==fr)throw Error(z(168));pe(ct,e),pe(Rt,n)}function j0(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(z(108,eT(t)||"Unknown",i));return Ce({},n,r)}function tu(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||fr,ni=ct.current,pe(ct,t),pe(Rt,Rt.current),!0}function bg(t,e,n){var r=t.stateNode;if(!r)throw Error(z(169));n?(t=j0(t,e,ni),r.__reactInternalMemoizedMergedChildContext=t,ve(Rt),ve(ct),pe(ct,t)):ve(Rt),pe(Rt,n)}var Sn=null,ju=!1,sh=!1;function z0(t){Sn===null?Sn=[t]:Sn.push(t)}function yS(t){ju=!0,z0(t)}function Pr(){if(!sh&&Sn!==null){sh=!0;var t=0,e=ce;try{var n=Sn;for(ce=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Sn=null,ju=!1}catch(i){throw Sn!==null&&(Sn=Sn.slice(t+1)),d0(of,Pr),i}finally{ce=e,sh=!1}}return null}var Hi=[],Qi=0,nu=null,ru=0,zt=[],Ut=0,ri=null,xn=1,Pn="";function Br(t,e){Hi[Qi++]=ru,Hi[Qi++]=nu,nu=t,ru=e}function U0(t,e,n){zt[Ut++]=xn,zt[Ut++]=Pn,zt[Ut++]=ri,ri=t;var r=xn;t=Pn;var i=32-en(r)-1;r&=~(1<<i),n+=1;var s=32-en(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,xn=1<<32-en(e)+i|n<<i|r,Pn=s+t}else xn=1<<s|n<<i|r,Pn=t}function mf(t){t.return!==null&&(Br(t,1),U0(t,1,0))}function gf(t){for(;t===nu;)nu=Hi[--Qi],Hi[Qi]=null,ru=Hi[--Qi],Hi[Qi]=null;for(;t===ri;)ri=zt[--Ut],zt[Ut]=null,Pn=zt[--Ut],zt[Ut]=null,xn=zt[--Ut],zt[Ut]=null}var Lt=null,Mt=null,we=!1,Zt=null;function $0(t,e){var n=$t(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Dg(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Lt=t,Mt=sr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Lt=t,Mt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=ri!==null?{id:xn,overflow:Pn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=$t(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Lt=t,Mt=null,!0):!1;default:return!1}}function Jh(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Zh(t){if(we){var e=Mt;if(e){var n=e;if(!Dg(t,e)){if(Jh(t))throw Error(z(418));e=sr(n.nextSibling);var r=Lt;e&&Dg(t,e)?$0(r,n):(t.flags=t.flags&-4097|2,we=!1,Lt=t)}}else{if(Jh(t))throw Error(z(418));t.flags=t.flags&-4097|2,we=!1,Lt=t}}}function Vg(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Lt=t}function dl(t){if(t!==Lt)return!1;if(!we)return Vg(t),we=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Hh(t.type,t.memoizedProps)),e&&(e=Mt)){if(Jh(t))throw q0(),Error(z(418));for(;e;)$0(t,e),e=sr(e.nextSibling)}if(Vg(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(z(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Mt=sr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Mt=null}}else Mt=Lt?sr(t.stateNode.nextSibling):null;return!0}function q0(){for(var t=Mt;t;)t=sr(t.nextSibling)}function cs(){Mt=Lt=null,we=!1}function yf(t){Zt===null?Zt=[t]:Zt.push(t)}var _S=Ln.ReactCurrentBatchConfig;function uo(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(z(309));var r=n.stateNode}if(!r)throw Error(z(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var l=i.refs;o===null?delete l[s]:l[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(z(284));if(!n._owner)throw Error(z(290,t))}return t}function fl(t,e){throw t=Object.prototype.toString.call(e),Error(z(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Ng(t){var e=t._init;return e(t._payload)}function G0(t){function e(C,x){if(t){var T=C.deletions;T===null?(C.deletions=[x],C.flags|=16):T.push(x)}}function n(C,x){if(!t)return null;for(;x!==null;)e(C,x),x=x.sibling;return null}function r(C,x){for(C=new Map;x!==null;)x.key!==null?C.set(x.key,x):C.set(x.index,x),x=x.sibling;return C}function i(C,x){return C=ur(C,x),C.index=0,C.sibling=null,C}function s(C,x,T){return C.index=T,t?(T=C.alternate,T!==null?(T=T.index,T<x?(C.flags|=2,x):T):(C.flags|=2,x)):(C.flags|=1048576,x)}function o(C){return t&&C.alternate===null&&(C.flags|=2),C}function l(C,x,T,d){return x===null||x.tag!==6?(x=dh(T,C.mode,d),x.return=C,x):(x=i(x,T),x.return=C,x)}function u(C,x,T,d){var g=T.type;return g===Ui?f(C,x,T.props.children,d,T.key):x!==null&&(x.elementType===g||typeof g=="object"&&g!==null&&g.$$typeof===Kn&&Ng(g)===x.type)?(d=i(x,T.props),d.ref=uo(C,x,T),d.return=C,d):(d=Ml(T.type,T.key,T.props,null,C.mode,d),d.ref=uo(C,x,T),d.return=C,d)}function c(C,x,T,d){return x===null||x.tag!==4||x.stateNode.containerInfo!==T.containerInfo||x.stateNode.implementation!==T.implementation?(x=fh(T,C.mode,d),x.return=C,x):(x=i(x,T.children||[]),x.return=C,x)}function f(C,x,T,d,g){return x===null||x.tag!==7?(x=ei(T,C.mode,d,g),x.return=C,x):(x=i(x,T),x.return=C,x)}function m(C,x,T){if(typeof x=="string"&&x!==""||typeof x=="number")return x=dh(""+x,C.mode,T),x.return=C,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case nl:return T=Ml(x.type,x.key,x.props,null,C.mode,T),T.ref=uo(C,null,x),T.return=C,T;case zi:return x=fh(x,C.mode,T),x.return=C,x;case Kn:var d=x._init;return m(C,d(x._payload),T)}if(vo(x)||io(x))return x=ei(x,C.mode,T,null),x.return=C,x;fl(C,x)}return null}function v(C,x,T,d){var g=x!==null?x.key:null;if(typeof T=="string"&&T!==""||typeof T=="number")return g!==null?null:l(C,x,""+T,d);if(typeof T=="object"&&T!==null){switch(T.$$typeof){case nl:return T.key===g?u(C,x,T,d):null;case zi:return T.key===g?c(C,x,T,d):null;case Kn:return g=T._init,v(C,x,g(T._payload),d)}if(vo(T)||io(T))return g!==null?null:f(C,x,T,d,null);fl(C,T)}return null}function A(C,x,T,d,g){if(typeof d=="string"&&d!==""||typeof d=="number")return C=C.get(T)||null,l(x,C,""+d,g);if(typeof d=="object"&&d!==null){switch(d.$$typeof){case nl:return C=C.get(d.key===null?T:d.key)||null,u(x,C,d,g);case zi:return C=C.get(d.key===null?T:d.key)||null,c(x,C,d,g);case Kn:var I=d._init;return A(C,x,T,I(d._payload),g)}if(vo(d)||io(d))return C=C.get(T)||null,f(x,C,d,g,null);fl(x,d)}return null}function D(C,x,T,d){for(var g=null,I=null,_=x,y=x=0,w=null;_!==null&&y<T.length;y++){_.index>y?(w=_,_=null):w=_.sibling;var S=v(C,_,T[y],d);if(S===null){_===null&&(_=w);break}t&&_&&S.alternate===null&&e(C,_),x=s(S,x,y),I===null?g=S:I.sibling=S,I=S,_=w}if(y===T.length)return n(C,_),we&&Br(C,y),g;if(_===null){for(;y<T.length;y++)_=m(C,T[y],d),_!==null&&(x=s(_,x,y),I===null?g=_:I.sibling=_,I=_);return we&&Br(C,y),g}for(_=r(C,_);y<T.length;y++)w=A(_,C,y,T[y],d),w!==null&&(t&&w.alternate!==null&&_.delete(w.key===null?y:w.key),x=s(w,x,y),I===null?g=w:I.sibling=w,I=w);return t&&_.forEach(function(R){return e(C,R)}),we&&Br(C,y),g}function V(C,x,T,d){var g=io(T);if(typeof g!="function")throw Error(z(150));if(T=g.call(T),T==null)throw Error(z(151));for(var I=g=null,_=x,y=x=0,w=null,S=T.next();_!==null&&!S.done;y++,S=T.next()){_.index>y?(w=_,_=null):w=_.sibling;var R=v(C,_,S.value,d);if(R===null){_===null&&(_=w);break}t&&_&&R.alternate===null&&e(C,_),x=s(R,x,y),I===null?g=R:I.sibling=R,I=R,_=w}if(S.done)return n(C,_),we&&Br(C,y),g;if(_===null){for(;!S.done;y++,S=T.next())S=m(C,S.value,d),S!==null&&(x=s(S,x,y),I===null?g=S:I.sibling=S,I=S);return we&&Br(C,y),g}for(_=r(C,_);!S.done;y++,S=T.next())S=A(_,C,y,S.value,d),S!==null&&(t&&S.alternate!==null&&_.delete(S.key===null?y:S.key),x=s(S,x,y),I===null?g=S:I.sibling=S,I=S);return t&&_.forEach(function(b){return e(C,b)}),we&&Br(C,y),g}function F(C,x,T,d){if(typeof T=="object"&&T!==null&&T.type===Ui&&T.key===null&&(T=T.props.children),typeof T=="object"&&T!==null){switch(T.$$typeof){case nl:e:{for(var g=T.key,I=x;I!==null;){if(I.key===g){if(g=T.type,g===Ui){if(I.tag===7){n(C,I.sibling),x=i(I,T.props.children),x.return=C,C=x;break e}}else if(I.elementType===g||typeof g=="object"&&g!==null&&g.$$typeof===Kn&&Ng(g)===I.type){n(C,I.sibling),x=i(I,T.props),x.ref=uo(C,I,T),x.return=C,C=x;break e}n(C,I);break}else e(C,I);I=I.sibling}T.type===Ui?(x=ei(T.props.children,C.mode,d,T.key),x.return=C,C=x):(d=Ml(T.type,T.key,T.props,null,C.mode,d),d.ref=uo(C,x,T),d.return=C,C=d)}return o(C);case zi:e:{for(I=T.key;x!==null;){if(x.key===I)if(x.tag===4&&x.stateNode.containerInfo===T.containerInfo&&x.stateNode.implementation===T.implementation){n(C,x.sibling),x=i(x,T.children||[]),x.return=C,C=x;break e}else{n(C,x);break}else e(C,x);x=x.sibling}x=fh(T,C.mode,d),x.return=C,C=x}return o(C);case Kn:return I=T._init,F(C,x,I(T._payload),d)}if(vo(T))return D(C,x,T,d);if(io(T))return V(C,x,T,d);fl(C,T)}return typeof T=="string"&&T!==""||typeof T=="number"?(T=""+T,x!==null&&x.tag===6?(n(C,x.sibling),x=i(x,T),x.return=C,C=x):(n(C,x),x=dh(T,C.mode,d),x.return=C,C=x),o(C)):n(C,x)}return F}var hs=G0(!0),W0=G0(!1),iu=xr(null),su=null,Yi=null,_f=null;function vf(){_f=Yi=su=null}function wf(t){var e=iu.current;ve(iu),t._currentValue=e}function ed(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function is(t,e){su=t,_f=Yi=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(St=!0),t.firstContext=null)}function Kt(t){var e=t._currentValue;if(_f!==t)if(t={context:t,memoizedValue:e,next:null},Yi===null){if(su===null)throw Error(z(308));Yi=t,su.dependencies={lanes:0,firstContext:t}}else Yi=Yi.next=t;return e}var Qr=null;function Ef(t){Qr===null?Qr=[t]:Qr.push(t)}function K0(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,Ef(e)):(n.next=i.next,i.next=n),e.interleaved=n,Dn(t,r)}function Dn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Hn=!1;function If(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function H0(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Rn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function or(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,oe&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Dn(t,n)}return i=r.interleaved,i===null?(e.next=e,Ef(r)):(e.next=i.next,i.next=e),r.interleaved=e,Dn(t,n)}function Cl(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,af(t,n)}}function Mg(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function ou(t,e,n,r){var i=t.updateQueue;Hn=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var u=l,c=u.next;u.next=null,o===null?s=c:o.next=c,o=u;var f=t.alternate;f!==null&&(f=f.updateQueue,l=f.lastBaseUpdate,l!==o&&(l===null?f.firstBaseUpdate=c:l.next=c,f.lastBaseUpdate=u))}if(s!==null){var m=i.baseState;o=0,f=c=u=null,l=s;do{var v=l.lane,A=l.eventTime;if((r&v)===v){f!==null&&(f=f.next={eventTime:A,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var D=t,V=l;switch(v=e,A=n,V.tag){case 1:if(D=V.payload,typeof D=="function"){m=D.call(A,m,v);break e}m=D;break e;case 3:D.flags=D.flags&-65537|128;case 0:if(D=V.payload,v=typeof D=="function"?D.call(A,m,v):D,v==null)break e;m=Ce({},m,v);break e;case 2:Hn=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,v=i.effects,v===null?i.effects=[l]:v.push(l))}else A={eventTime:A,lane:v,tag:l.tag,payload:l.payload,callback:l.callback,next:null},f===null?(c=f=A,u=m):f=f.next=A,o|=v;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;v=l,l=v.next,v.next=null,i.lastBaseUpdate=v,i.shared.pending=null}}while(!0);if(f===null&&(u=m),i.baseState=u,i.firstBaseUpdate=c,i.lastBaseUpdate=f,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);si|=o,t.lanes=o,t.memoizedState=m}}function Lg(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(z(191,i));i.call(r)}}}var Sa={},hn=xr(Sa),Jo=xr(Sa),Zo=xr(Sa);function Yr(t){if(t===Sa)throw Error(z(174));return t}function Tf(t,e){switch(pe(Zo,e),pe(Jo,t),pe(hn,Sa),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Nh(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Nh(e,t)}ve(hn),pe(hn,e)}function ds(){ve(hn),ve(Jo),ve(Zo)}function Q0(t){Yr(Zo.current);var e=Yr(hn.current),n=Nh(e,t.type);e!==n&&(pe(Jo,t),pe(hn,n))}function Sf(t){Jo.current===t&&(ve(hn),ve(Jo))}var Pe=xr(0);function au(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var oh=[];function xf(){for(var t=0;t<oh.length;t++)oh[t]._workInProgressVersionPrimary=null;oh.length=0}var kl=Ln.ReactCurrentDispatcher,ah=Ln.ReactCurrentBatchConfig,ii=0,Ae=null,ze=null,Ge=null,lu=!1,bo=!1,ea=0,vS=0;function ot(){throw Error(z(321))}function Pf(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!nn(t[n],e[n]))return!1;return!0}function Af(t,e,n,r,i,s){if(ii=s,Ae=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,kl.current=t===null||t.memoizedState===null?TS:SS,t=n(r,i),bo){s=0;do{if(bo=!1,ea=0,25<=s)throw Error(z(301));s+=1,Ge=ze=null,e.updateQueue=null,kl.current=xS,t=n(r,i)}while(bo)}if(kl.current=uu,e=ze!==null&&ze.next!==null,ii=0,Ge=ze=Ae=null,lu=!1,e)throw Error(z(300));return t}function Rf(){var t=ea!==0;return ea=0,t}function on(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ge===null?Ae.memoizedState=Ge=t:Ge=Ge.next=t,Ge}function Ht(){if(ze===null){var t=Ae.alternate;t=t!==null?t.memoizedState:null}else t=ze.next;var e=Ge===null?Ae.memoizedState:Ge.next;if(e!==null)Ge=e,ze=t;else{if(t===null)throw Error(z(310));ze=t,t={memoizedState:ze.memoizedState,baseState:ze.baseState,baseQueue:ze.baseQueue,queue:ze.queue,next:null},Ge===null?Ae.memoizedState=Ge=t:Ge=Ge.next=t}return Ge}function ta(t,e){return typeof e=="function"?e(t):e}function lh(t){var e=Ht(),n=e.queue;if(n===null)throw Error(z(311));n.lastRenderedReducer=t;var r=ze,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var l=o=null,u=null,c=s;do{var f=c.lane;if((ii&f)===f)u!==null&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var m={lane:f,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};u===null?(l=u=m,o=r):u=u.next=m,Ae.lanes|=f,si|=f}c=c.next}while(c!==null&&c!==s);u===null?o=r:u.next=l,nn(r,e.memoizedState)||(St=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,Ae.lanes|=s,si|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function uh(t){var e=Ht(),n=e.queue;if(n===null)throw Error(z(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);nn(s,e.memoizedState)||(St=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function Y0(){}function X0(t,e){var n=Ae,r=Ht(),i=e(),s=!nn(r.memoizedState,i);if(s&&(r.memoizedState=i,St=!0),r=r.queue,Cf(ev.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||Ge!==null&&Ge.memoizedState.tag&1){if(n.flags|=2048,na(9,Z0.bind(null,n,r,i,e),void 0,null),Ke===null)throw Error(z(349));ii&30||J0(n,e,i)}return i}function J0(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Ae.updateQueue,e===null?(e={lastEffect:null,stores:null},Ae.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Z0(t,e,n,r){e.value=n,e.getSnapshot=r,tv(e)&&nv(t)}function ev(t,e,n){return n(function(){tv(e)&&nv(t)})}function tv(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!nn(t,n)}catch{return!0}}function nv(t){var e=Dn(t,1);e!==null&&tn(e,t,1,-1)}function Og(t){var e=on();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ta,lastRenderedState:t},e.queue=t,t=t.dispatch=IS.bind(null,Ae,t),[e.memoizedState,t]}function na(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Ae.updateQueue,e===null?(e={lastEffect:null,stores:null},Ae.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function rv(){return Ht().memoizedState}function bl(t,e,n,r){var i=on();Ae.flags|=t,i.memoizedState=na(1|e,n,void 0,r===void 0?null:r)}function zu(t,e,n,r){var i=Ht();r=r===void 0?null:r;var s=void 0;if(ze!==null){var o=ze.memoizedState;if(s=o.destroy,r!==null&&Pf(r,o.deps)){i.memoizedState=na(e,n,s,r);return}}Ae.flags|=t,i.memoizedState=na(1|e,n,s,r)}function Fg(t,e){return bl(8390656,8,t,e)}function Cf(t,e){return zu(2048,8,t,e)}function iv(t,e){return zu(4,2,t,e)}function sv(t,e){return zu(4,4,t,e)}function ov(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function av(t,e,n){return n=n!=null?n.concat([t]):null,zu(4,4,ov.bind(null,e,t),n)}function kf(){}function lv(t,e){var n=Ht();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Pf(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function uv(t,e){var n=Ht();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Pf(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function cv(t,e,n){return ii&21?(nn(n,e)||(n=m0(),Ae.lanes|=n,si|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,St=!0),t.memoizedState=n)}function wS(t,e){var n=ce;ce=n!==0&&4>n?n:4,t(!0);var r=ah.transition;ah.transition={};try{t(!1),e()}finally{ce=n,ah.transition=r}}function hv(){return Ht().memoizedState}function ES(t,e,n){var r=lr(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},dv(t))fv(e,n);else if(n=K0(t,e,n,r),n!==null){var i=gt();tn(n,t,r,i),pv(n,e,r)}}function IS(t,e,n){var r=lr(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(dv(t))fv(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,l=s(o,n);if(i.hasEagerState=!0,i.eagerState=l,nn(l,o)){var u=e.interleaved;u===null?(i.next=i,Ef(e)):(i.next=u.next,u.next=i),e.interleaved=i;return}}catch{}finally{}n=K0(t,e,i,r),n!==null&&(i=gt(),tn(n,t,r,i),pv(n,e,r))}}function dv(t){var e=t.alternate;return t===Ae||e!==null&&e===Ae}function fv(t,e){bo=lu=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function pv(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,af(t,n)}}var uu={readContext:Kt,useCallback:ot,useContext:ot,useEffect:ot,useImperativeHandle:ot,useInsertionEffect:ot,useLayoutEffect:ot,useMemo:ot,useReducer:ot,useRef:ot,useState:ot,useDebugValue:ot,useDeferredValue:ot,useTransition:ot,useMutableSource:ot,useSyncExternalStore:ot,useId:ot,unstable_isNewReconciler:!1},TS={readContext:Kt,useCallback:function(t,e){return on().memoizedState=[t,e===void 0?null:e],t},useContext:Kt,useEffect:Fg,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,bl(4194308,4,ov.bind(null,e,t),n)},useLayoutEffect:function(t,e){return bl(4194308,4,t,e)},useInsertionEffect:function(t,e){return bl(4,2,t,e)},useMemo:function(t,e){var n=on();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=on();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=ES.bind(null,Ae,t),[r.memoizedState,t]},useRef:function(t){var e=on();return t={current:t},e.memoizedState=t},useState:Og,useDebugValue:kf,useDeferredValue:function(t){return on().memoizedState=t},useTransition:function(){var t=Og(!1),e=t[0];return t=wS.bind(null,t[1]),on().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Ae,i=on();if(we){if(n===void 0)throw Error(z(407));n=n()}else{if(n=e(),Ke===null)throw Error(z(349));ii&30||J0(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,Fg(ev.bind(null,r,s,t),[t]),r.flags|=2048,na(9,Z0.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=on(),e=Ke.identifierPrefix;if(we){var n=Pn,r=xn;n=(r&~(1<<32-en(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=ea++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=vS++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},SS={readContext:Kt,useCallback:lv,useContext:Kt,useEffect:Cf,useImperativeHandle:av,useInsertionEffect:iv,useLayoutEffect:sv,useMemo:uv,useReducer:lh,useRef:rv,useState:function(){return lh(ta)},useDebugValue:kf,useDeferredValue:function(t){var e=Ht();return cv(e,ze.memoizedState,t)},useTransition:function(){var t=lh(ta)[0],e=Ht().memoizedState;return[t,e]},useMutableSource:Y0,useSyncExternalStore:X0,useId:hv,unstable_isNewReconciler:!1},xS={readContext:Kt,useCallback:lv,useContext:Kt,useEffect:Cf,useImperativeHandle:av,useInsertionEffect:iv,useLayoutEffect:sv,useMemo:uv,useReducer:uh,useRef:rv,useState:function(){return uh(ta)},useDebugValue:kf,useDeferredValue:function(t){var e=Ht();return ze===null?e.memoizedState=t:cv(e,ze.memoizedState,t)},useTransition:function(){var t=uh(ta)[0],e=Ht().memoizedState;return[t,e]},useMutableSource:Y0,useSyncExternalStore:X0,useId:hv,unstable_isNewReconciler:!1};function Xt(t,e){if(t&&t.defaultProps){e=Ce({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function td(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Ce({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Uu={isMounted:function(t){return(t=t._reactInternals)?vi(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=gt(),i=lr(t),s=Rn(r,i);s.payload=e,n!=null&&(s.callback=n),e=or(t,s,i),e!==null&&(tn(e,t,i,r),Cl(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=gt(),i=lr(t),s=Rn(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=or(t,s,i),e!==null&&(tn(e,t,i,r),Cl(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=gt(),r=lr(t),i=Rn(n,r);i.tag=2,e!=null&&(i.callback=e),e=or(t,i,r),e!==null&&(tn(e,t,r,n),Cl(e,t,r))}};function Bg(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!Ho(n,r)||!Ho(i,s):!0}function mv(t,e,n){var r=!1,i=fr,s=e.contextType;return typeof s=="object"&&s!==null?s=Kt(s):(i=Ct(e)?ni:ct.current,r=e.contextTypes,s=(r=r!=null)?us(t,i):fr),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Uu,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function jg(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Uu.enqueueReplaceState(e,e.state,null)}function nd(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},If(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Kt(s):(s=Ct(e)?ni:ct.current,i.context=us(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(td(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Uu.enqueueReplaceState(i,i.state,null),ou(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function fs(t,e){try{var n="",r=e;do n+=ZI(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function ch(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function rd(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var PS=typeof WeakMap=="function"?WeakMap:Map;function gv(t,e,n){n=Rn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){hu||(hu=!0,fd=r),rd(t,e)},n}function yv(t,e,n){n=Rn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){rd(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){rd(t,e),typeof r!="function"&&(ar===null?ar=new Set([this]):ar.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function zg(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new PS;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=jS.bind(null,t,e,n),e.then(t,t))}function Ug(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function $g(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Rn(-1,1),e.tag=2,or(n,e,1))),n.lanes|=1),t)}var AS=Ln.ReactCurrentOwner,St=!1;function ft(t,e,n,r){e.child=t===null?W0(e,null,n,r):hs(e,t.child,n,r)}function qg(t,e,n,r,i){n=n.render;var s=e.ref;return is(e,i),r=Af(t,e,n,r,s,i),n=Rf(),t!==null&&!St?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Vn(t,e,i)):(we&&n&&mf(e),e.flags|=1,ft(t,e,r,i),e.child)}function Gg(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!Ff(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,_v(t,e,s,r,i)):(t=Ml(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:Ho,n(o,r)&&t.ref===e.ref)return Vn(t,e,i)}return e.flags|=1,t=ur(s,r),t.ref=e.ref,t.return=e,e.child=t}function _v(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(Ho(s,r)&&t.ref===e.ref)if(St=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(St=!0);else return e.lanes=t.lanes,Vn(t,e,i)}return id(t,e,n,r,i)}function vv(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},pe(Ji,Vt),Vt|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,pe(Ji,Vt),Vt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,pe(Ji,Vt),Vt|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,pe(Ji,Vt),Vt|=r;return ft(t,e,i,n),e.child}function wv(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function id(t,e,n,r,i){var s=Ct(n)?ni:ct.current;return s=us(e,s),is(e,i),n=Af(t,e,n,r,s,i),r=Rf(),t!==null&&!St?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Vn(t,e,i)):(we&&r&&mf(e),e.flags|=1,ft(t,e,n,i),e.child)}function Wg(t,e,n,r,i){if(Ct(n)){var s=!0;tu(e)}else s=!1;if(is(e,i),e.stateNode===null)Dl(t,e),mv(e,n,r),nd(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var u=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=Kt(c):(c=Ct(n)?ni:ct.current,c=us(e,c));var f=n.getDerivedStateFromProps,m=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function";m||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||u!==c)&&jg(e,o,r,c),Hn=!1;var v=e.memoizedState;o.state=v,ou(e,r,o,i),u=e.memoizedState,l!==r||v!==u||Rt.current||Hn?(typeof f=="function"&&(td(e,n,f,r),u=e.memoizedState),(l=Hn||Bg(e,n,l,r,v,u,c))?(m||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),o.props=r,o.state=u,o.context=c,r=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,H0(t,e),l=e.memoizedProps,c=e.type===e.elementType?l:Xt(e.type,l),o.props=c,m=e.pendingProps,v=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=Kt(u):(u=Ct(n)?ni:ct.current,u=us(e,u));var A=n.getDerivedStateFromProps;(f=typeof A=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==m||v!==u)&&jg(e,o,r,u),Hn=!1,v=e.memoizedState,o.state=v,ou(e,r,o,i);var D=e.memoizedState;l!==m||v!==D||Rt.current||Hn?(typeof A=="function"&&(td(e,n,A,r),D=e.memoizedState),(c=Hn||Bg(e,n,c,r,v,D,u)||!1)?(f||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,D,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,D,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&v===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&v===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=D),o.props=r,o.state=D,o.context=u,r=c):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&v===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&v===t.memoizedState||(e.flags|=1024),r=!1)}return sd(t,e,n,r,s,i)}function sd(t,e,n,r,i,s){wv(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&bg(e,n,!1),Vn(t,e,s);r=e.stateNode,AS.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=hs(e,t.child,null,s),e.child=hs(e,null,l,s)):ft(t,e,l,s),e.memoizedState=r.state,i&&bg(e,n,!0),e.child}function Ev(t){var e=t.stateNode;e.pendingContext?kg(t,e.pendingContext,e.pendingContext!==e.context):e.context&&kg(t,e.context,!1),Tf(t,e.containerInfo)}function Kg(t,e,n,r,i){return cs(),yf(i),e.flags|=256,ft(t,e,n,r),e.child}var od={dehydrated:null,treeContext:null,retryLane:0};function ad(t){return{baseLanes:t,cachePool:null,transitions:null}}function Iv(t,e,n){var r=e.pendingProps,i=Pe.current,s=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(i&2)!==0),l?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),pe(Pe,i&1),t===null)return Zh(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Gu(o,r,0,null),t=ei(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=ad(n),e.memoizedState=od,t):bf(e,o));if(i=t.memoizedState,i!==null&&(l=i.dehydrated,l!==null))return RS(t,e,o,r,l,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,l=i.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=ur(i,u),r.subtreeFlags=i.subtreeFlags&14680064),l!==null?s=ur(l,s):(s=ei(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?ad(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=od,r}return s=t.child,t=s.sibling,r=ur(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function bf(t,e){return e=Gu({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function pl(t,e,n,r){return r!==null&&yf(r),hs(e,t.child,null,n),t=bf(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function RS(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=ch(Error(z(422))),pl(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=Gu({mode:"visible",children:r.children},i,0,null),s=ei(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&hs(e,t.child,null,o),e.child.memoizedState=ad(o),e.memoizedState=od,s);if(!(e.mode&1))return pl(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var l=r.dgst;return r=l,s=Error(z(419)),r=ch(s,r,void 0),pl(t,e,o,r)}if(l=(o&t.childLanes)!==0,St||l){if(r=Ke,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Dn(t,i),tn(r,t,i,-1))}return Of(),r=ch(Error(z(421))),pl(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=zS.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,Mt=sr(i.nextSibling),Lt=e,we=!0,Zt=null,t!==null&&(zt[Ut++]=xn,zt[Ut++]=Pn,zt[Ut++]=ri,xn=t.id,Pn=t.overflow,ri=e),e=bf(e,r.children),e.flags|=4096,e)}function Hg(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),ed(t.return,e,n)}function hh(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function Tv(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(ft(t,e,r.children,n),r=Pe.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Hg(t,n,e);else if(t.tag===19)Hg(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(pe(Pe,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&au(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),hh(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&au(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}hh(e,!0,n,null,s);break;case"together":hh(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Dl(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Vn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),si|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(z(153));if(e.child!==null){for(t=e.child,n=ur(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=ur(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function CS(t,e,n){switch(e.tag){case 3:Ev(e),cs();break;case 5:Q0(e);break;case 1:Ct(e.type)&&tu(e);break;case 4:Tf(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;pe(iu,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(pe(Pe,Pe.current&1),e.flags|=128,null):n&e.child.childLanes?Iv(t,e,n):(pe(Pe,Pe.current&1),t=Vn(t,e,n),t!==null?t.sibling:null);pe(Pe,Pe.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Tv(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),pe(Pe,Pe.current),r)break;return null;case 22:case 23:return e.lanes=0,vv(t,e,n)}return Vn(t,e,n)}var Sv,ld,xv,Pv;Sv=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};ld=function(){};xv=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Yr(hn.current);var s=null;switch(n){case"input":i=kh(t,i),r=kh(t,r),s=[];break;case"select":i=Ce({},i,{value:void 0}),r=Ce({},r,{value:void 0}),s=[];break;case"textarea":i=Vh(t,i),r=Vh(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Zl)}Mh(n,r);var o;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var l=i[c];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(zo.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var u=r[c];if(l=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&u!==l&&(u!=null||l!=null))if(c==="style")if(l){for(o in l)!l.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&l[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(s||(s=[]),s.push(c,n)),n=u;else c==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,l=l?l.__html:void 0,u!=null&&l!==u&&(s=s||[]).push(c,u)):c==="children"?typeof u!="string"&&typeof u!="number"||(s=s||[]).push(c,""+u):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(zo.hasOwnProperty(c)?(u!=null&&c==="onScroll"&&ye("scroll",t),s||l===u||(s=[])):(s=s||[]).push(c,u))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};Pv=function(t,e,n,r){n!==r&&(e.flags|=4)};function co(t,e){if(!we)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function at(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function kS(t,e,n){var r=e.pendingProps;switch(gf(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return at(e),null;case 1:return Ct(e.type)&&eu(),at(e),null;case 3:return r=e.stateNode,ds(),ve(Rt),ve(ct),xf(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(dl(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Zt!==null&&(gd(Zt),Zt=null))),ld(t,e),at(e),null;case 5:Sf(e);var i=Yr(Zo.current);if(n=e.type,t!==null&&e.stateNode!=null)xv(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(z(166));return at(e),null}if(t=Yr(hn.current),dl(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[an]=e,r[Xo]=s,t=(e.mode&1)!==0,n){case"dialog":ye("cancel",r),ye("close",r);break;case"iframe":case"object":case"embed":ye("load",r);break;case"video":case"audio":for(i=0;i<Eo.length;i++)ye(Eo[i],r);break;case"source":ye("error",r);break;case"img":case"image":case"link":ye("error",r),ye("load",r);break;case"details":ye("toggle",r);break;case"input":rg(r,s),ye("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},ye("invalid",r);break;case"textarea":sg(r,s),ye("invalid",r)}Mh(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var l=s[o];o==="children"?typeof l=="string"?r.textContent!==l&&(s.suppressHydrationWarning!==!0&&hl(r.textContent,l,t),i=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(s.suppressHydrationWarning!==!0&&hl(r.textContent,l,t),i=["children",""+l]):zo.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&ye("scroll",r)}switch(n){case"input":rl(r),ig(r,s,!0);break;case"textarea":rl(r),og(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Zl)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=e0(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[an]=e,t[Xo]=r,Sv(t,e,!1,!1),e.stateNode=t;e:{switch(o=Lh(n,r),n){case"dialog":ye("cancel",t),ye("close",t),i=r;break;case"iframe":case"object":case"embed":ye("load",t),i=r;break;case"video":case"audio":for(i=0;i<Eo.length;i++)ye(Eo[i],t);i=r;break;case"source":ye("error",t),i=r;break;case"img":case"image":case"link":ye("error",t),ye("load",t),i=r;break;case"details":ye("toggle",t),i=r;break;case"input":rg(t,r),i=kh(t,r),ye("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Ce({},r,{value:void 0}),ye("invalid",t);break;case"textarea":sg(t,r),i=Vh(t,r),ye("invalid",t);break;default:i=r}Mh(n,i),l=i;for(s in l)if(l.hasOwnProperty(s)){var u=l[s];s==="style"?r0(t,u):s==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&t0(t,u)):s==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&Uo(t,u):typeof u=="number"&&Uo(t,""+u):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(zo.hasOwnProperty(s)?u!=null&&s==="onScroll"&&ye("scroll",t):u!=null&&ef(t,s,u,o))}switch(n){case"input":rl(t),ig(t,r,!1);break;case"textarea":rl(t),og(t);break;case"option":r.value!=null&&t.setAttribute("value",""+dr(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?es(t,!!r.multiple,s,!1):r.defaultValue!=null&&es(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Zl)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return at(e),null;case 6:if(t&&e.stateNode!=null)Pv(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(z(166));if(n=Yr(Zo.current),Yr(hn.current),dl(e)){if(r=e.stateNode,n=e.memoizedProps,r[an]=e,(s=r.nodeValue!==n)&&(t=Lt,t!==null))switch(t.tag){case 3:hl(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&hl(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[an]=e,e.stateNode=r}return at(e),null;case 13:if(ve(Pe),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(we&&Mt!==null&&e.mode&1&&!(e.flags&128))q0(),cs(),e.flags|=98560,s=!1;else if(s=dl(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(z(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(z(317));s[an]=e}else cs(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;at(e),s=!1}else Zt!==null&&(gd(Zt),Zt=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Pe.current&1?Ue===0&&(Ue=3):Of())),e.updateQueue!==null&&(e.flags|=4),at(e),null);case 4:return ds(),ld(t,e),t===null&&Qo(e.stateNode.containerInfo),at(e),null;case 10:return wf(e.type._context),at(e),null;case 17:return Ct(e.type)&&eu(),at(e),null;case 19:if(ve(Pe),s=e.memoizedState,s===null)return at(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)co(s,!1);else{if(Ue!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=au(t),o!==null){for(e.flags|=128,co(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return pe(Pe,Pe.current&1|2),e.child}t=t.sibling}s.tail!==null&&Me()>ps&&(e.flags|=128,r=!0,co(s,!1),e.lanes=4194304)}else{if(!r)if(t=au(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),co(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!we)return at(e),null}else 2*Me()-s.renderingStartTime>ps&&n!==1073741824&&(e.flags|=128,r=!0,co(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Me(),e.sibling=null,n=Pe.current,pe(Pe,r?n&1|2:n&1),e):(at(e),null);case 22:case 23:return Lf(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Vt&1073741824&&(at(e),e.subtreeFlags&6&&(e.flags|=8192)):at(e),null;case 24:return null;case 25:return null}throw Error(z(156,e.tag))}function bS(t,e){switch(gf(e),e.tag){case 1:return Ct(e.type)&&eu(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return ds(),ve(Rt),ve(ct),xf(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Sf(e),null;case 13:if(ve(Pe),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(z(340));cs()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return ve(Pe),null;case 4:return ds(),null;case 10:return wf(e.type._context),null;case 22:case 23:return Lf(),null;case 24:return null;default:return null}}var ml=!1,ut=!1,DS=typeof WeakSet=="function"?WeakSet:Set,K=null;function Xi(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){be(t,e,r)}else n.current=null}function ud(t,e,n){try{n()}catch(r){be(t,e,r)}}var Qg=!1;function VS(t,e){if(Wh=Yl,t=b0(),pf(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,l=-1,u=-1,c=0,f=0,m=t,v=null;t:for(;;){for(var A;m!==n||i!==0&&m.nodeType!==3||(l=o+i),m!==s||r!==0&&m.nodeType!==3||(u=o+r),m.nodeType===3&&(o+=m.nodeValue.length),(A=m.firstChild)!==null;)v=m,m=A;for(;;){if(m===t)break t;if(v===n&&++c===i&&(l=o),v===s&&++f===r&&(u=o),(A=m.nextSibling)!==null)break;m=v,v=m.parentNode}m=A}n=l===-1||u===-1?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(Kh={focusedElem:t,selectionRange:n},Yl=!1,K=e;K!==null;)if(e=K,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,K=t;else for(;K!==null;){e=K;try{var D=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(D!==null){var V=D.memoizedProps,F=D.memoizedState,C=e.stateNode,x=C.getSnapshotBeforeUpdate(e.elementType===e.type?V:Xt(e.type,V),F);C.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var T=e.stateNode.containerInfo;T.nodeType===1?T.textContent="":T.nodeType===9&&T.documentElement&&T.removeChild(T.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(z(163))}}catch(d){be(e,e.return,d)}if(t=e.sibling,t!==null){t.return=e.return,K=t;break}K=e.return}return D=Qg,Qg=!1,D}function Do(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&ud(e,n,s)}i=i.next}while(i!==r)}}function $u(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function cd(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Av(t){var e=t.alternate;e!==null&&(t.alternate=null,Av(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[an],delete e[Xo],delete e[Yh],delete e[mS],delete e[gS])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Rv(t){return t.tag===5||t.tag===3||t.tag===4}function Yg(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Rv(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function hd(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Zl));else if(r!==4&&(t=t.child,t!==null))for(hd(t,e,n),t=t.sibling;t!==null;)hd(t,e,n),t=t.sibling}function dd(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(dd(t,e,n),t=t.sibling;t!==null;)dd(t,e,n),t=t.sibling}var Je=null,Jt=!1;function $n(t,e,n){for(n=n.child;n!==null;)Cv(t,e,n),n=n.sibling}function Cv(t,e,n){if(cn&&typeof cn.onCommitFiberUnmount=="function")try{cn.onCommitFiberUnmount(Mu,n)}catch{}switch(n.tag){case 5:ut||Xi(n,e);case 6:var r=Je,i=Jt;Je=null,$n(t,e,n),Je=r,Jt=i,Je!==null&&(Jt?(t=Je,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Je.removeChild(n.stateNode));break;case 18:Je!==null&&(Jt?(t=Je,n=n.stateNode,t.nodeType===8?ih(t.parentNode,n):t.nodeType===1&&ih(t,n),Wo(t)):ih(Je,n.stateNode));break;case 4:r=Je,i=Jt,Je=n.stateNode.containerInfo,Jt=!0,$n(t,e,n),Je=r,Jt=i;break;case 0:case 11:case 14:case 15:if(!ut&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&ud(n,e,o),i=i.next}while(i!==r)}$n(t,e,n);break;case 1:if(!ut&&(Xi(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){be(n,e,l)}$n(t,e,n);break;case 21:$n(t,e,n);break;case 22:n.mode&1?(ut=(r=ut)||n.memoizedState!==null,$n(t,e,n),ut=r):$n(t,e,n);break;default:$n(t,e,n)}}function Xg(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new DS),e.forEach(function(r){var i=US.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Yt(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:Je=l.stateNode,Jt=!1;break e;case 3:Je=l.stateNode.containerInfo,Jt=!0;break e;case 4:Je=l.stateNode.containerInfo,Jt=!0;break e}l=l.return}if(Je===null)throw Error(z(160));Cv(s,o,i),Je=null,Jt=!1;var u=i.alternate;u!==null&&(u.return=null),i.return=null}catch(c){be(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)kv(e,t),e=e.sibling}function kv(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Yt(e,t),sn(t),r&4){try{Do(3,t,t.return),$u(3,t)}catch(V){be(t,t.return,V)}try{Do(5,t,t.return)}catch(V){be(t,t.return,V)}}break;case 1:Yt(e,t),sn(t),r&512&&n!==null&&Xi(n,n.return);break;case 5:if(Yt(e,t),sn(t),r&512&&n!==null&&Xi(n,n.return),t.flags&32){var i=t.stateNode;try{Uo(i,"")}catch(V){be(t,t.return,V)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,l=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{l==="input"&&s.type==="radio"&&s.name!=null&&J_(i,s),Lh(l,o);var c=Lh(l,s);for(o=0;o<u.length;o+=2){var f=u[o],m=u[o+1];f==="style"?r0(i,m):f==="dangerouslySetInnerHTML"?t0(i,m):f==="children"?Uo(i,m):ef(i,f,m,c)}switch(l){case"input":bh(i,s);break;case"textarea":Z_(i,s);break;case"select":var v=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var A=s.value;A!=null?es(i,!!s.multiple,A,!1):v!==!!s.multiple&&(s.defaultValue!=null?es(i,!!s.multiple,s.defaultValue,!0):es(i,!!s.multiple,s.multiple?[]:"",!1))}i[Xo]=s}catch(V){be(t,t.return,V)}}break;case 6:if(Yt(e,t),sn(t),r&4){if(t.stateNode===null)throw Error(z(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(V){be(t,t.return,V)}}break;case 3:if(Yt(e,t),sn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Wo(e.containerInfo)}catch(V){be(t,t.return,V)}break;case 4:Yt(e,t),sn(t);break;case 13:Yt(e,t),sn(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Nf=Me())),r&4&&Xg(t);break;case 22:if(f=n!==null&&n.memoizedState!==null,t.mode&1?(ut=(c=ut)||f,Yt(e,t),ut=c):Yt(e,t),sn(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!f&&t.mode&1)for(K=t,f=t.child;f!==null;){for(m=K=f;K!==null;){switch(v=K,A=v.child,v.tag){case 0:case 11:case 14:case 15:Do(4,v,v.return);break;case 1:Xi(v,v.return);var D=v.stateNode;if(typeof D.componentWillUnmount=="function"){r=v,n=v.return;try{e=r,D.props=e.memoizedProps,D.state=e.memoizedState,D.componentWillUnmount()}catch(V){be(r,n,V)}}break;case 5:Xi(v,v.return);break;case 22:if(v.memoizedState!==null){Zg(m);continue}}A!==null?(A.return=v,K=A):Zg(m)}f=f.sibling}e:for(f=null,m=t;;){if(m.tag===5){if(f===null){f=m;try{i=m.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(l=m.stateNode,u=m.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,l.style.display=n0("display",o))}catch(V){be(t,t.return,V)}}}else if(m.tag===6){if(f===null)try{m.stateNode.nodeValue=c?"":m.memoizedProps}catch(V){be(t,t.return,V)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===t)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===t)break e;for(;m.sibling===null;){if(m.return===null||m.return===t)break e;f===m&&(f=null),m=m.return}f===m&&(f=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:Yt(e,t),sn(t),r&4&&Xg(t);break;case 21:break;default:Yt(e,t),sn(t)}}function sn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Rv(n)){var r=n;break e}n=n.return}throw Error(z(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Uo(i,""),r.flags&=-33);var s=Yg(t);dd(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,l=Yg(t);hd(t,l,o);break;default:throw Error(z(161))}}catch(u){be(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function NS(t,e,n){K=t,bv(t)}function bv(t,e,n){for(var r=(t.mode&1)!==0;K!==null;){var i=K,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||ml;if(!o){var l=i.alternate,u=l!==null&&l.memoizedState!==null||ut;l=ml;var c=ut;if(ml=o,(ut=u)&&!c)for(K=i;K!==null;)o=K,u=o.child,o.tag===22&&o.memoizedState!==null?ey(i):u!==null?(u.return=o,K=u):ey(i);for(;s!==null;)K=s,bv(s),s=s.sibling;K=i,ml=l,ut=c}Jg(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,K=s):Jg(t)}}function Jg(t){for(;K!==null;){var e=K;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:ut||$u(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!ut)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Xt(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&Lg(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Lg(e,o,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var f=c.memoizedState;if(f!==null){var m=f.dehydrated;m!==null&&Wo(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(z(163))}ut||e.flags&512&&cd(e)}catch(v){be(e,e.return,v)}}if(e===t){K=null;break}if(n=e.sibling,n!==null){n.return=e.return,K=n;break}K=e.return}}function Zg(t){for(;K!==null;){var e=K;if(e===t){K=null;break}var n=e.sibling;if(n!==null){n.return=e.return,K=n;break}K=e.return}}function ey(t){for(;K!==null;){var e=K;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{$u(4,e)}catch(u){be(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(u){be(e,i,u)}}var s=e.return;try{cd(e)}catch(u){be(e,s,u)}break;case 5:var o=e.return;try{cd(e)}catch(u){be(e,o,u)}}}catch(u){be(e,e.return,u)}if(e===t){K=null;break}var l=e.sibling;if(l!==null){l.return=e.return,K=l;break}K=e.return}}var MS=Math.ceil,cu=Ln.ReactCurrentDispatcher,Df=Ln.ReactCurrentOwner,Gt=Ln.ReactCurrentBatchConfig,oe=0,Ke=null,Be=null,tt=0,Vt=0,Ji=xr(0),Ue=0,ra=null,si=0,qu=0,Vf=0,Vo=null,Tt=null,Nf=0,ps=1/0,Tn=null,hu=!1,fd=null,ar=null,gl=!1,er=null,du=0,No=0,pd=null,Vl=-1,Nl=0;function gt(){return oe&6?Me():Vl!==-1?Vl:Vl=Me()}function lr(t){return t.mode&1?oe&2&&tt!==0?tt&-tt:_S.transition!==null?(Nl===0&&(Nl=m0()),Nl):(t=ce,t!==0||(t=window.event,t=t===void 0?16:I0(t.type)),t):1}function tn(t,e,n,r){if(50<No)throw No=0,pd=null,Error(z(185));Ea(t,n,r),(!(oe&2)||t!==Ke)&&(t===Ke&&(!(oe&2)&&(qu|=n),Ue===4&&Yn(t,tt)),kt(t,r),n===1&&oe===0&&!(e.mode&1)&&(ps=Me()+500,ju&&Pr()))}function kt(t,e){var n=t.callbackNode;_T(t,e);var r=Ql(t,t===Ke?tt:0);if(r===0)n!==null&&ug(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&ug(n),e===1)t.tag===0?yS(ty.bind(null,t)):z0(ty.bind(null,t)),fS(function(){!(oe&6)&&Pr()}),n=null;else{switch(g0(r)){case 1:n=of;break;case 4:n=f0;break;case 16:n=Hl;break;case 536870912:n=p0;break;default:n=Hl}n=Bv(n,Dv.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Dv(t,e){if(Vl=-1,Nl=0,oe&6)throw Error(z(327));var n=t.callbackNode;if(ss()&&t.callbackNode!==n)return null;var r=Ql(t,t===Ke?tt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=fu(t,r);else{e=r;var i=oe;oe|=2;var s=Nv();(Ke!==t||tt!==e)&&(Tn=null,ps=Me()+500,Zr(t,e));do try{FS();break}catch(l){Vv(t,l)}while(!0);vf(),cu.current=s,oe=i,Be!==null?e=0:(Ke=null,tt=0,e=Ue)}if(e!==0){if(e===2&&(i=zh(t),i!==0&&(r=i,e=md(t,i))),e===1)throw n=ra,Zr(t,0),Yn(t,r),kt(t,Me()),n;if(e===6)Yn(t,r);else{if(i=t.current.alternate,!(r&30)&&!LS(i)&&(e=fu(t,r),e===2&&(s=zh(t),s!==0&&(r=s,e=md(t,s))),e===1))throw n=ra,Zr(t,0),Yn(t,r),kt(t,Me()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(z(345));case 2:jr(t,Tt,Tn);break;case 3:if(Yn(t,r),(r&130023424)===r&&(e=Nf+500-Me(),10<e)){if(Ql(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){gt(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Qh(jr.bind(null,t,Tt,Tn),e);break}jr(t,Tt,Tn);break;case 4:if(Yn(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-en(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=Me()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*MS(r/1960))-r,10<r){t.timeoutHandle=Qh(jr.bind(null,t,Tt,Tn),r);break}jr(t,Tt,Tn);break;case 5:jr(t,Tt,Tn);break;default:throw Error(z(329))}}}return kt(t,Me()),t.callbackNode===n?Dv.bind(null,t):null}function md(t,e){var n=Vo;return t.current.memoizedState.isDehydrated&&(Zr(t,e).flags|=256),t=fu(t,e),t!==2&&(e=Tt,Tt=n,e!==null&&gd(e)),t}function gd(t){Tt===null?Tt=t:Tt.push.apply(Tt,t)}function LS(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!nn(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Yn(t,e){for(e&=~Vf,e&=~qu,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-en(e),r=1<<n;t[n]=-1,e&=~r}}function ty(t){if(oe&6)throw Error(z(327));ss();var e=Ql(t,0);if(!(e&1))return kt(t,Me()),null;var n=fu(t,e);if(t.tag!==0&&n===2){var r=zh(t);r!==0&&(e=r,n=md(t,r))}if(n===1)throw n=ra,Zr(t,0),Yn(t,e),kt(t,Me()),n;if(n===6)throw Error(z(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,jr(t,Tt,Tn),kt(t,Me()),null}function Mf(t,e){var n=oe;oe|=1;try{return t(e)}finally{oe=n,oe===0&&(ps=Me()+500,ju&&Pr())}}function oi(t){er!==null&&er.tag===0&&!(oe&6)&&ss();var e=oe;oe|=1;var n=Gt.transition,r=ce;try{if(Gt.transition=null,ce=1,t)return t()}finally{ce=r,Gt.transition=n,oe=e,!(oe&6)&&Pr()}}function Lf(){Vt=Ji.current,ve(Ji)}function Zr(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,dS(n)),Be!==null)for(n=Be.return;n!==null;){var r=n;switch(gf(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&eu();break;case 3:ds(),ve(Rt),ve(ct),xf();break;case 5:Sf(r);break;case 4:ds();break;case 13:ve(Pe);break;case 19:ve(Pe);break;case 10:wf(r.type._context);break;case 22:case 23:Lf()}n=n.return}if(Ke=t,Be=t=ur(t.current,null),tt=Vt=e,Ue=0,ra=null,Vf=qu=si=0,Tt=Vo=null,Qr!==null){for(e=0;e<Qr.length;e++)if(n=Qr[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}Qr=null}return t}function Vv(t,e){do{var n=Be;try{if(vf(),kl.current=uu,lu){for(var r=Ae.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}lu=!1}if(ii=0,Ge=ze=Ae=null,bo=!1,ea=0,Df.current=null,n===null||n.return===null){Ue=1,ra=e,Be=null;break}e:{var s=t,o=n.return,l=n,u=e;if(e=tt,l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var c=u,f=l,m=f.tag;if(!(f.mode&1)&&(m===0||m===11||m===15)){var v=f.alternate;v?(f.updateQueue=v.updateQueue,f.memoizedState=v.memoizedState,f.lanes=v.lanes):(f.updateQueue=null,f.memoizedState=null)}var A=Ug(o);if(A!==null){A.flags&=-257,$g(A,o,l,s,e),A.mode&1&&zg(s,c,e),e=A,u=c;var D=e.updateQueue;if(D===null){var V=new Set;V.add(u),e.updateQueue=V}else D.add(u);break e}else{if(!(e&1)){zg(s,c,e),Of();break e}u=Error(z(426))}}else if(we&&l.mode&1){var F=Ug(o);if(F!==null){!(F.flags&65536)&&(F.flags|=256),$g(F,o,l,s,e),yf(fs(u,l));break e}}s=u=fs(u,l),Ue!==4&&(Ue=2),Vo===null?Vo=[s]:Vo.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var C=gv(s,u,e);Mg(s,C);break e;case 1:l=u;var x=s.type,T=s.stateNode;if(!(s.flags&128)&&(typeof x.getDerivedStateFromError=="function"||T!==null&&typeof T.componentDidCatch=="function"&&(ar===null||!ar.has(T)))){s.flags|=65536,e&=-e,s.lanes|=e;var d=yv(s,l,e);Mg(s,d);break e}}s=s.return}while(s!==null)}Lv(n)}catch(g){e=g,Be===n&&n!==null&&(Be=n=n.return);continue}break}while(!0)}function Nv(){var t=cu.current;return cu.current=uu,t===null?uu:t}function Of(){(Ue===0||Ue===3||Ue===2)&&(Ue=4),Ke===null||!(si&268435455)&&!(qu&268435455)||Yn(Ke,tt)}function fu(t,e){var n=oe;oe|=2;var r=Nv();(Ke!==t||tt!==e)&&(Tn=null,Zr(t,e));do try{OS();break}catch(i){Vv(t,i)}while(!0);if(vf(),oe=n,cu.current=r,Be!==null)throw Error(z(261));return Ke=null,tt=0,Ue}function OS(){for(;Be!==null;)Mv(Be)}function FS(){for(;Be!==null&&!uT();)Mv(Be)}function Mv(t){var e=Fv(t.alternate,t,Vt);t.memoizedProps=t.pendingProps,e===null?Lv(t):Be=e,Df.current=null}function Lv(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=bS(n,e),n!==null){n.flags&=32767,Be=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Ue=6,Be=null;return}}else if(n=kS(n,e,Vt),n!==null){Be=n;return}if(e=e.sibling,e!==null){Be=e;return}Be=e=t}while(e!==null);Ue===0&&(Ue=5)}function jr(t,e,n){var r=ce,i=Gt.transition;try{Gt.transition=null,ce=1,BS(t,e,n,r)}finally{Gt.transition=i,ce=r}return null}function BS(t,e,n,r){do ss();while(er!==null);if(oe&6)throw Error(z(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(z(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(vT(t,s),t===Ke&&(Be=Ke=null,tt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||gl||(gl=!0,Bv(Hl,function(){return ss(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Gt.transition,Gt.transition=null;var o=ce;ce=1;var l=oe;oe|=4,Df.current=null,VS(t,n),kv(n,t),sS(Kh),Yl=!!Wh,Kh=Wh=null,t.current=n,NS(n),cT(),oe=l,ce=o,Gt.transition=s}else t.current=n;if(gl&&(gl=!1,er=t,du=i),s=t.pendingLanes,s===0&&(ar=null),fT(n.stateNode),kt(t,Me()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(hu)throw hu=!1,t=fd,fd=null,t;return du&1&&t.tag!==0&&ss(),s=t.pendingLanes,s&1?t===pd?No++:(No=0,pd=t):No=0,Pr(),null}function ss(){if(er!==null){var t=g0(du),e=Gt.transition,n=ce;try{if(Gt.transition=null,ce=16>t?16:t,er===null)var r=!1;else{if(t=er,er=null,du=0,oe&6)throw Error(z(331));var i=oe;for(oe|=4,K=t.current;K!==null;){var s=K,o=s.child;if(K.flags&16){var l=s.deletions;if(l!==null){for(var u=0;u<l.length;u++){var c=l[u];for(K=c;K!==null;){var f=K;switch(f.tag){case 0:case 11:case 15:Do(8,f,s)}var m=f.child;if(m!==null)m.return=f,K=m;else for(;K!==null;){f=K;var v=f.sibling,A=f.return;if(Av(f),f===c){K=null;break}if(v!==null){v.return=A,K=v;break}K=A}}}var D=s.alternate;if(D!==null){var V=D.child;if(V!==null){D.child=null;do{var F=V.sibling;V.sibling=null,V=F}while(V!==null)}}K=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,K=o;else e:for(;K!==null;){if(s=K,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Do(9,s,s.return)}var C=s.sibling;if(C!==null){C.return=s.return,K=C;break e}K=s.return}}var x=t.current;for(K=x;K!==null;){o=K;var T=o.child;if(o.subtreeFlags&2064&&T!==null)T.return=o,K=T;else e:for(o=x;K!==null;){if(l=K,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:$u(9,l)}}catch(g){be(l,l.return,g)}if(l===o){K=null;break e}var d=l.sibling;if(d!==null){d.return=l.return,K=d;break e}K=l.return}}if(oe=i,Pr(),cn&&typeof cn.onPostCommitFiberRoot=="function")try{cn.onPostCommitFiberRoot(Mu,t)}catch{}r=!0}return r}finally{ce=n,Gt.transition=e}}return!1}function ny(t,e,n){e=fs(n,e),e=gv(t,e,1),t=or(t,e,1),e=gt(),t!==null&&(Ea(t,1,e),kt(t,e))}function be(t,e,n){if(t.tag===3)ny(t,t,n);else for(;e!==null;){if(e.tag===3){ny(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(ar===null||!ar.has(r))){t=fs(n,t),t=yv(e,t,1),e=or(e,t,1),t=gt(),e!==null&&(Ea(e,1,t),kt(e,t));break}}e=e.return}}function jS(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=gt(),t.pingedLanes|=t.suspendedLanes&n,Ke===t&&(tt&n)===n&&(Ue===4||Ue===3&&(tt&130023424)===tt&&500>Me()-Nf?Zr(t,0):Vf|=n),kt(t,e)}function Ov(t,e){e===0&&(t.mode&1?(e=ol,ol<<=1,!(ol&130023424)&&(ol=4194304)):e=1);var n=gt();t=Dn(t,e),t!==null&&(Ea(t,e,n),kt(t,n))}function zS(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Ov(t,n)}function US(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(z(314))}r!==null&&r.delete(e),Ov(t,n)}var Fv;Fv=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Rt.current)St=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return St=!1,CS(t,e,n);St=!!(t.flags&131072)}else St=!1,we&&e.flags&1048576&&U0(e,ru,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Dl(t,e),t=e.pendingProps;var i=us(e,ct.current);is(e,n),i=Af(null,e,r,t,i,n);var s=Rf();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Ct(r)?(s=!0,tu(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,If(e),i.updater=Uu,e.stateNode=i,i._reactInternals=e,nd(e,r,t,n),e=sd(null,e,r,!0,s,n)):(e.tag=0,we&&s&&mf(e),ft(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Dl(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=qS(r),t=Xt(r,t),i){case 0:e=id(null,e,r,t,n);break e;case 1:e=Wg(null,e,r,t,n);break e;case 11:e=qg(null,e,r,t,n);break e;case 14:e=Gg(null,e,r,Xt(r.type,t),n);break e}throw Error(z(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Xt(r,i),id(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Xt(r,i),Wg(t,e,r,i,n);case 3:e:{if(Ev(e),t===null)throw Error(z(387));r=e.pendingProps,s=e.memoizedState,i=s.element,H0(t,e),ou(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=fs(Error(z(423)),e),e=Kg(t,e,r,n,i);break e}else if(r!==i){i=fs(Error(z(424)),e),e=Kg(t,e,r,n,i);break e}else for(Mt=sr(e.stateNode.containerInfo.firstChild),Lt=e,we=!0,Zt=null,n=W0(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(cs(),r===i){e=Vn(t,e,n);break e}ft(t,e,r,n)}e=e.child}return e;case 5:return Q0(e),t===null&&Zh(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,Hh(r,i)?o=null:s!==null&&Hh(r,s)&&(e.flags|=32),wv(t,e),ft(t,e,o,n),e.child;case 6:return t===null&&Zh(e),null;case 13:return Iv(t,e,n);case 4:return Tf(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=hs(e,null,r,n):ft(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Xt(r,i),qg(t,e,r,i,n);case 7:return ft(t,e,e.pendingProps,n),e.child;case 8:return ft(t,e,e.pendingProps.children,n),e.child;case 12:return ft(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,pe(iu,r._currentValue),r._currentValue=o,s!==null)if(nn(s.value,o)){if(s.children===i.children&&!Rt.current){e=Vn(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var l=s.dependencies;if(l!==null){o=s.child;for(var u=l.firstContext;u!==null;){if(u.context===r){if(s.tag===1){u=Rn(-1,n&-n),u.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var f=c.pending;f===null?u.next=u:(u.next=f.next,f.next=u),c.pending=u}}s.lanes|=n,u=s.alternate,u!==null&&(u.lanes|=n),ed(s.return,n,e),l.lanes|=n;break}u=u.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(z(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),ed(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}ft(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,is(e,n),i=Kt(i),r=r(i),e.flags|=1,ft(t,e,r,n),e.child;case 14:return r=e.type,i=Xt(r,e.pendingProps),i=Xt(r.type,i),Gg(t,e,r,i,n);case 15:return _v(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Xt(r,i),Dl(t,e),e.tag=1,Ct(r)?(t=!0,tu(e)):t=!1,is(e,n),mv(e,r,i),nd(e,r,i,n),sd(null,e,r,!0,t,n);case 19:return Tv(t,e,n);case 22:return vv(t,e,n)}throw Error(z(156,e.tag))};function Bv(t,e){return d0(t,e)}function $S(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function $t(t,e,n,r){return new $S(t,e,n,r)}function Ff(t){return t=t.prototype,!(!t||!t.isReactComponent)}function qS(t){if(typeof t=="function")return Ff(t)?1:0;if(t!=null){if(t=t.$$typeof,t===nf)return 11;if(t===rf)return 14}return 2}function ur(t,e){var n=t.alternate;return n===null?(n=$t(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Ml(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")Ff(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Ui:return ei(n.children,i,s,e);case tf:o=8,i|=8;break;case Ph:return t=$t(12,n,e,i|2),t.elementType=Ph,t.lanes=s,t;case Ah:return t=$t(13,n,e,i),t.elementType=Ah,t.lanes=s,t;case Rh:return t=$t(19,n,e,i),t.elementType=Rh,t.lanes=s,t;case Q_:return Gu(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case K_:o=10;break e;case H_:o=9;break e;case nf:o=11;break e;case rf:o=14;break e;case Kn:o=16,r=null;break e}throw Error(z(130,t==null?t:typeof t,""))}return e=$t(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function ei(t,e,n,r){return t=$t(7,t,r,e),t.lanes=n,t}function Gu(t,e,n,r){return t=$t(22,t,r,e),t.elementType=Q_,t.lanes=n,t.stateNode={isHidden:!1},t}function dh(t,e,n){return t=$t(6,t,null,e),t.lanes=n,t}function fh(t,e,n){return e=$t(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function GS(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Kc(0),this.expirationTimes=Kc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Kc(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Bf(t,e,n,r,i,s,o,l,u){return t=new GS(t,e,n,l,u),e===1?(e=1,s===!0&&(e|=8)):e=0,s=$t(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},If(s),t}function WS(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:zi,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function jv(t){if(!t)return fr;t=t._reactInternals;e:{if(vi(t)!==t||t.tag!==1)throw Error(z(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Ct(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(z(171))}if(t.tag===1){var n=t.type;if(Ct(n))return j0(t,n,e)}return e}function zv(t,e,n,r,i,s,o,l,u){return t=Bf(n,r,!0,t,i,s,o,l,u),t.context=jv(null),n=t.current,r=gt(),i=lr(n),s=Rn(r,i),s.callback=e??null,or(n,s,i),t.current.lanes=i,Ea(t,i,r),kt(t,r),t}function Wu(t,e,n,r){var i=e.current,s=gt(),o=lr(i);return n=jv(n),e.context===null?e.context=n:e.pendingContext=n,e=Rn(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=or(i,e,o),t!==null&&(tn(t,i,o,s),Cl(t,i,o)),o}function pu(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function ry(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function jf(t,e){ry(t,e),(t=t.alternate)&&ry(t,e)}function KS(){return null}var Uv=typeof reportError=="function"?reportError:function(t){console.error(t)};function zf(t){this._internalRoot=t}Ku.prototype.render=zf.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(z(409));Wu(t,e,null,null)};Ku.prototype.unmount=zf.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;oi(function(){Wu(null,t,null,null)}),e[bn]=null}};function Ku(t){this._internalRoot=t}Ku.prototype.unstable_scheduleHydration=function(t){if(t){var e=v0();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Qn.length&&e!==0&&e<Qn[n].priority;n++);Qn.splice(n,0,t),n===0&&E0(t)}};function Uf(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Hu(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function iy(){}function HS(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=pu(o);s.call(c)}}var o=zv(e,r,t,0,null,!1,!1,"",iy);return t._reactRootContainer=o,t[bn]=o.current,Qo(t.nodeType===8?t.parentNode:t),oi(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var l=r;r=function(){var c=pu(u);l.call(c)}}var u=Bf(t,0,!1,null,null,!1,!1,"",iy);return t._reactRootContainer=u,t[bn]=u.current,Qo(t.nodeType===8?t.parentNode:t),oi(function(){Wu(e,u,n,r)}),u}function Qu(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var l=i;i=function(){var u=pu(o);l.call(u)}}Wu(e,o,t,i)}else o=HS(n,e,t,i,r);return pu(o)}y0=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=wo(e.pendingLanes);n!==0&&(af(e,n|1),kt(e,Me()),!(oe&6)&&(ps=Me()+500,Pr()))}break;case 13:oi(function(){var r=Dn(t,1);if(r!==null){var i=gt();tn(r,t,1,i)}}),jf(t,1)}};lf=function(t){if(t.tag===13){var e=Dn(t,134217728);if(e!==null){var n=gt();tn(e,t,134217728,n)}jf(t,134217728)}};_0=function(t){if(t.tag===13){var e=lr(t),n=Dn(t,e);if(n!==null){var r=gt();tn(n,t,e,r)}jf(t,e)}};v0=function(){return ce};w0=function(t,e){var n=ce;try{return ce=t,e()}finally{ce=n}};Fh=function(t,e,n){switch(e){case"input":if(bh(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Bu(r);if(!i)throw Error(z(90));X_(r),bh(r,i)}}}break;case"textarea":Z_(t,n);break;case"select":e=n.value,e!=null&&es(t,!!n.multiple,e,!1)}};o0=Mf;a0=oi;var QS={usingClientEntryPoint:!1,Events:[Ta,Wi,Bu,i0,s0,Mf]},ho={findFiberByHostInstance:Hr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},YS={bundleType:ho.bundleType,version:ho.version,rendererPackageName:ho.rendererPackageName,rendererConfig:ho.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ln.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=c0(t),t===null?null:t.stateNode},findFiberByHostInstance:ho.findFiberByHostInstance||KS,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var yl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!yl.isDisabled&&yl.supportsFiber)try{Mu=yl.inject(YS),cn=yl}catch{}}Bt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=QS;Bt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Uf(e))throw Error(z(200));return WS(t,e,null,n)};Bt.createRoot=function(t,e){if(!Uf(t))throw Error(z(299));var n=!1,r="",i=Uv;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Bf(t,1,!1,null,null,n,!1,r,i),t[bn]=e.current,Qo(t.nodeType===8?t.parentNode:t),new zf(e)};Bt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(z(188)):(t=Object.keys(t).join(","),Error(z(268,t)));return t=c0(e),t=t===null?null:t.stateNode,t};Bt.flushSync=function(t){return oi(t)};Bt.hydrate=function(t,e,n){if(!Hu(e))throw Error(z(200));return Qu(null,t,e,!0,n)};Bt.hydrateRoot=function(t,e,n){if(!Uf(t))throw Error(z(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=Uv;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=zv(e,null,t,1,n??null,i,!1,s,o),t[bn]=e.current,Qo(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Ku(e)};Bt.render=function(t,e,n){if(!Hu(e))throw Error(z(200));return Qu(null,t,e,!1,n)};Bt.unmountComponentAtNode=function(t){if(!Hu(t))throw Error(z(40));return t._reactRootContainer?(oi(function(){Qu(null,null,t,!1,function(){t._reactRootContainer=null,t[bn]=null})}),!0):!1};Bt.unstable_batchedUpdates=Mf;Bt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Hu(n))throw Error(z(200));if(t==null||t._reactInternals===void 0)throw Error(z(38));return Qu(t,e,n,!1,r)};Bt.version="18.3.1-next-f1338f8080-20240426";function $v(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE($v)}catch(t){console.error(t)}}$v(),$_.exports=Bt;var XS=$_.exports,sy=XS;Sh.createRoot=sy.createRoot,Sh.hydrateRoot=sy.hydrateRoot;var yd={exports:{}};(function(t,e){(function(n,r){r(e)})(SI,function(n){class r{constructor(d,g){this.state={angle:0,area:[],position:{x:0,y:0},hardAngle:0,hardDrawingAngle:0},this.createdDensity=g,this.nowDrawingDensity=this.createdDensity,this.render=d}setDensity(d){this.createdDensity=d,this.nowDrawingDensity=d}setDrawingDensity(d){this.nowDrawingDensity=d}setPosition(d){this.state.position=d}setAngle(d){this.state.angle=d}setArea(d){this.state.area=d}setHardDrawingAngle(d){this.state.hardDrawingAngle=d}setHardAngle(d){this.state.hardAngle=d,this.state.hardDrawingAngle=d}setOrientation(d){this.orientation=d}getDrawingDensity(){return this.nowDrawingDensity}getDensity(){return this.createdDensity}getHardAngle(){return this.state.hardAngle}}class i extends r{constructor(d,g,I){super(d,I),this.image=null,this.isLoad=!1,this.loadingAngle=0,this.image=new Image,this.image.src=g}draw(d){const g=this.render.getContext(),I=this.render.convertToGlobal(this.state.position),_=this.render.getRect().pageWidth,y=this.render.getRect().height;g.save(),g.translate(I.x,I.y),g.beginPath();for(let w of this.state.area)w!==null&&(w=this.render.convertToGlobal(w),g.lineTo(w.x-I.x,w.y-I.y));g.rotate(this.state.angle),g.clip(),this.isLoad?g.drawImage(this.image,0,0,_,y):this.drawLoader(g,{x:0,y:0},_,y),g.restore()}simpleDraw(d){const g=this.render.getRect(),I=this.render.getContext(),_=g.pageWidth,y=g.height,w=d===1?g.left+g.pageWidth:g.left,S=g.top;this.isLoad?I.drawImage(this.image,w,S,_,y):this.drawLoader(I,{x:w,y:S},_,y)}drawLoader(d,g,I,_){d.beginPath(),d.strokeStyle="rgb(200, 200, 200)",d.fillStyle="rgb(255, 255, 255)",d.lineWidth=1,d.rect(g.x+1,g.y+1,I-1,_-1),d.stroke(),d.fill();const y={x:g.x+I/2,y:g.y+_/2};d.beginPath(),d.lineWidth=10,d.arc(y.x,y.y,20,this.loadingAngle,3*Math.PI/2+this.loadingAngle),d.stroke(),d.closePath(),this.loadingAngle+=.07,this.loadingAngle>=2*Math.PI&&(this.loadingAngle=0)}load(){this.isLoad||(this.image.onload=()=>{this.isLoad=!0})}newTemporaryCopy(){return this}getTemporaryCopy(){return this}hideTemporaryCopy(){}}class s{constructor(d,g){this.pages=[],this.currentPageIndex=0,this.currentSpreadIndex=0,this.landscapeSpread=[],this.portraitSpread=[],this.render=g,this.app=d,this.currentPageIndex=0,this.isShowCover=this.app.getSettings().showCover}destroy(){this.pages=[]}createSpread(){this.landscapeSpread=[],this.portraitSpread=[];for(let g=0;g<this.pages.length;g++)this.portraitSpread.push([g]);let d=0;this.isShowCover&&(this.pages[0].setDensity("hard"),this.landscapeSpread.push([d]),d++);for(let g=d;g<this.pages.length;g+=2)g<this.pages.length-1?this.landscapeSpread.push([g,g+1]):(this.landscapeSpread.push([g]),this.pages[g].setDensity("hard"))}getSpread(){return this.render.getOrientation()==="landscape"?this.landscapeSpread:this.portraitSpread}getSpreadIndexByPage(d){const g=this.getSpread();for(let I=0;I<g.length;I++)if(d===g[I][0]||d===g[I][1])return I;return null}getPageCount(){return this.pages.length}getPages(){return this.pages}getPage(d){if(d>=0&&d<this.pages.length)return this.pages[d];throw new Error("Invalid page number")}nextBy(d){const g=this.pages.indexOf(d);return g<this.pages.length-1?this.pages[g+1]:null}prevBy(d){const g=this.pages.indexOf(d);return g>0?this.pages[g-1]:null}getFlippingPage(d){const g=this.currentSpreadIndex;if(this.render.getOrientation()==="portrait")return d===0?this.pages[g].newTemporaryCopy():this.pages[g-1];{const I=d===0?this.getSpread()[g+1]:this.getSpread()[g-1];return I.length===1||d===0?this.pages[I[0]]:this.pages[I[1]]}}getBottomPage(d){const g=this.currentSpreadIndex;if(this.render.getOrientation()==="portrait")return d===0?this.pages[g+1]:this.pages[g-1];{const I=d===0?this.getSpread()[g+1]:this.getSpread()[g-1];return I.length===1?this.pages[I[0]]:d===0?this.pages[I[1]]:this.pages[I[0]]}}showNext(){this.currentSpreadIndex<this.getSpread().length&&(this.currentSpreadIndex++,this.showSpread())}showPrev(){this.currentSpreadIndex>0&&(this.currentSpreadIndex--,this.showSpread())}getCurrentPageIndex(){return this.currentPageIndex}show(d=null){if(d===null&&(d=this.currentPageIndex),d<0||d>=this.pages.length)return;const g=this.getSpreadIndexByPage(d);g!==null&&(this.currentSpreadIndex=g,this.showSpread())}getCurrentSpreadIndex(){return this.currentSpreadIndex}setCurrentSpreadIndex(d){if(!(d>=0&&d<this.getSpread().length))throw new Error("Invalid page");this.currentSpreadIndex=d}showSpread(){const d=this.getSpread()[this.currentSpreadIndex];d.length===2?(this.render.setLeftPage(this.pages[d[0]]),this.render.setRightPage(this.pages[d[1]])):this.render.getOrientation()==="landscape"&&d[0]===this.pages.length-1?(this.render.setLeftPage(this.pages[d[0]]),this.render.setRightPage(null)):(this.render.setLeftPage(null),this.render.setRightPage(this.pages[d[0]])),this.currentPageIndex=d[0],this.app.updatePageIndex(this.currentPageIndex)}}class o extends s{constructor(d,g,I){super(d,g),this.imagesHref=I}load(){for(const d of this.imagesHref){const g=new i(this.render,d,"soft");g.load(),this.pages.push(g)}this.createSpread()}}class l{static GetDistanceBetweenTwoPoint(d,g){return d===null||g===null?1/0:Math.sqrt(Math.pow(g.x-d.x,2)+Math.pow(g.y-d.y,2))}static GetSegmentLength(d){return l.GetDistanceBetweenTwoPoint(d[0],d[1])}static GetAngleBetweenTwoLine(d,g){const I=d[0].y-d[1].y,_=g[0].y-g[1].y,y=d[1].x-d[0].x,w=g[1].x-g[0].x;return Math.acos((I*_+y*w)/(Math.sqrt(I*I+y*y)*Math.sqrt(_*_+w*w)))}static PointInRect(d,g){return g===null?null:g.x>=d.left&&g.x<=d.width+d.left&&g.y>=d.top&&g.y<=d.top+d.height?g:null}static GetRotatedPoint(d,g,I){return{x:d.x*Math.cos(I)+d.y*Math.sin(I)+g.x,y:d.y*Math.cos(I)-d.x*Math.sin(I)+g.y}}static LimitPointToCircle(d,g,I){if(l.GetDistanceBetweenTwoPoint(d,I)<=g)return I;const _=d.x,y=d.y,w=I.x,S=I.y;let R=Math.sqrt(Math.pow(g,2)*Math.pow(_-w,2)/(Math.pow(_-w,2)+Math.pow(y-S,2)))+_;I.x<0&&(R*=-1);let b=(R-_)*(y-S)/(_-w)+y;return _-w+y===0&&(b=g),{x:R,y:b}}static GetIntersectBetweenTwoSegment(d,g,I){return l.PointInRect(d,l.GetIntersectBeetwenTwoLine(g,I))}static GetIntersectBeetwenTwoLine(d,g){const I=d[0].y-d[1].y,_=g[0].y-g[1].y,y=d[1].x-d[0].x,w=g[1].x-g[0].x,S=d[0].x*d[1].y-d[1].x*d[0].y,R=g[0].x*g[1].y-g[1].x*g[0].y,b=I*R-_*S,P=y*R-w*S,Se=-(S*w-R*y)/(I*w-_*y),bt=-(I*R-_*S)/(I*w-_*y);if(isFinite(Se)&&isFinite(bt))return{x:Se,y:bt};if(Math.abs(b-P)<.1)throw new Error("Segment included");return null}static GetCordsFromTwoPoint(d,g){const I=Math.abs(d.x-g.x),_=Math.abs(d.y-g.y),y=Math.max(I,_),w=[d];function S(R,b,P,Se,bt){return b>R?R+bt*(P/Se):b<R?R-bt*(P/Se):R}for(let R=1;R<=y;R+=1)w.push({x:S(d.x,g.x,I,y,R),y:S(d.y,g.y,_,y,R)});return w}}class u extends r{constructor(d,g,I){super(d,I),this.copiedElement=null,this.temporaryCopy=null,this.isLoad=!1,this.element=g,this.element.classList.add("stf__item"),this.element.classList.add("--"+I)}newTemporaryCopy(){return this.nowDrawingDensity==="hard"?this:(this.temporaryCopy===null&&(this.copiedElement=this.element.cloneNode(!0),this.element.parentElement.appendChild(this.copiedElement),this.temporaryCopy=new u(this.render,this.copiedElement,this.nowDrawingDensity)),this.getTemporaryCopy())}getTemporaryCopy(){return this.temporaryCopy}hideTemporaryCopy(){this.temporaryCopy!==null&&(this.copiedElement.remove(),this.copiedElement=null,this.temporaryCopy=null)}draw(d){const g=d||this.nowDrawingDensity,I=this.render.convertToGlobal(this.state.position),_=this.render.getRect().pageWidth,y=this.render.getRect().height;this.element.classList.remove("--simple");const w=`
            display: block;
            z-index: ${this.element.style.zIndex};
            left: 0;
            top: 0;
            width: ${_}px;
            height: ${y}px;
        `;g==="hard"?this.drawHard(w):this.drawSoft(I,w)}drawHard(d=""){const g=this.render.getRect().left+this.render.getRect().width/2,I=this.state.hardDrawingAngle,_=d+`
                backface-visibility: hidden;
                -webkit-backface-visibility: hidden;
                clip-path: none;
                -webkit-clip-path: none;
            `+(this.orientation===0?`transform-origin: ${this.render.getRect().pageWidth}px 0; 
                   transform: translate3d(0, 0, 0) rotateY(${I}deg);`:`transform-origin: 0 0; 
                   transform: translate3d(${g}px, 0, 0) rotateY(${I}deg);`);this.element.style.cssText=_}drawSoft(d,g=""){let I="polygon( ";for(const y of this.state.area)if(y!==null){let w=this.render.getDirection()===1?{x:-y.x+this.state.position.x,y:y.y-this.state.position.y}:{x:y.x-this.state.position.x,y:y.y-this.state.position.y};w=l.GetRotatedPoint(w,{x:0,y:0},this.state.angle),I+=w.x+"px "+w.y+"px, "}I=I.slice(0,-2),I+=")";const _=g+`transform-origin: 0 0; clip-path: ${I}; -webkit-clip-path: ${I};`+(this.render.isSafari()&&this.state.angle===0?`transform: translate(${d.x}px, ${d.y}px);`:`transform: translate3d(${d.x}px, ${d.y}px, 0) rotate(${this.state.angle}rad);`);this.element.style.cssText=_}simpleDraw(d){const g=this.render.getRect(),I=g.pageWidth,_=g.height,y=d===1?g.left+g.pageWidth:g.left,w=g.top;this.element.classList.add("--simple"),this.element.style.cssText=`
            position: absolute; 
            display: block; 
            height: ${_}px; 
            left: ${y}px; 
            top: ${w}px; 
            width: ${I}px; 
            z-index: ${this.render.getSettings().startZIndex+1};`}getElement(){return this.element}load(){this.isLoad=!0}setOrientation(d){super.setOrientation(d),this.element.classList.remove("--left","--right"),this.element.classList.add(d===1?"--right":"--left")}setDrawingDensity(d){this.element.classList.remove("--soft","--hard"),this.element.classList.add("--"+d),super.setDrawingDensity(d)}}class c extends s{constructor(d,g,I,_){super(d,g),this.element=I,this.pagesElement=_}load(){for(const d of this.pagesElement){const g=new u(this.render,d,d.dataset.density==="hard"?"hard":"soft");g.load(),this.pages.push(g)}this.createSpread()}}class f{constructor(d,g,I,_){this.direction=d,this.corner=g,this.topIntersectPoint=null,this.sideIntersectPoint=null,this.bottomIntersectPoint=null,this.pageWidth=parseInt(I,10),this.pageHeight=parseInt(_,10)}calc(d){try{return this.position=this.calcAngleAndPosition(d),this.calculateIntersectPoint(this.position),!0}catch{return!1}}getFlippingClipArea(){const d=[];let g=!1;return d.push(this.rect.topLeft),d.push(this.topIntersectPoint),this.sideIntersectPoint===null?g=!0:(d.push(this.sideIntersectPoint),this.bottomIntersectPoint===null&&(g=!1)),d.push(this.bottomIntersectPoint),(g||this.corner==="bottom")&&d.push(this.rect.bottomLeft),d}getBottomClipArea(){const d=[];return d.push(this.topIntersectPoint),this.corner==="top"?d.push({x:this.pageWidth,y:0}):(this.topIntersectPoint!==null&&d.push({x:this.pageWidth,y:0}),d.push({x:this.pageWidth,y:this.pageHeight})),this.sideIntersectPoint!==null?l.GetDistanceBetweenTwoPoint(this.sideIntersectPoint,this.topIntersectPoint)>=10&&d.push(this.sideIntersectPoint):this.corner==="top"&&d.push({x:this.pageWidth,y:this.pageHeight}),d.push(this.bottomIntersectPoint),d.push(this.topIntersectPoint),d}getAngle(){return this.direction===0?-this.angle:this.angle}getRect(){return this.rect}getPosition(){return this.position}getActiveCorner(){return this.direction===0?this.rect.topLeft:this.rect.topRight}getDirection(){return this.direction}getFlippingProgress(){return Math.abs((this.position.x-this.pageWidth)/(2*this.pageWidth)*100)}getCorner(){return this.corner}getBottomPagePosition(){return this.direction===1?{x:this.pageWidth,y:0}:{x:0,y:0}}getShadowStartPoint(){return this.corner==="top"?this.topIntersectPoint:this.sideIntersectPoint!==null?this.sideIntersectPoint:this.topIntersectPoint}getShadowAngle(){const d=l.GetAngleBetweenTwoLine(this.getSegmentToShadowLine(),[{x:0,y:0},{x:this.pageWidth,y:0}]);return this.direction===0?d:Math.PI-d}calcAngleAndPosition(d){let g=d;if(this.updateAngleAndGeometry(g),g=this.corner==="top"?this.checkPositionAtCenterLine(g,{x:0,y:0},{x:0,y:this.pageHeight}):this.checkPositionAtCenterLine(g,{x:0,y:this.pageHeight},{x:0,y:0}),Math.abs(g.x-this.pageWidth)<1&&Math.abs(g.y)<1)throw new Error("Point is too small");return g}updateAngleAndGeometry(d){this.angle=this.calculateAngle(d),this.rect=this.getPageRect(d)}calculateAngle(d){const g=this.pageWidth-d.x+1,I=this.corner==="bottom"?this.pageHeight-d.y:d.y;let _=2*Math.acos(g/Math.sqrt(I*I+g*g));I<0&&(_=-_);const y=Math.PI-_;if(!isFinite(_)||y>=0&&y<.003)throw new Error("The G point is too small");return this.corner==="bottom"&&(_=-_),_}getPageRect(d){return this.corner==="top"?this.getRectFromBasePoint([{x:0,y:0},{x:this.pageWidth,y:0},{x:0,y:this.pageHeight},{x:this.pageWidth,y:this.pageHeight}],d):this.getRectFromBasePoint([{x:0,y:-this.pageHeight},{x:this.pageWidth,y:-this.pageHeight},{x:0,y:0},{x:this.pageWidth,y:0}],d)}getRectFromBasePoint(d,g){return{topLeft:this.getRotatedPoint(d[0],g),topRight:this.getRotatedPoint(d[1],g),bottomLeft:this.getRotatedPoint(d[2],g),bottomRight:this.getRotatedPoint(d[3],g)}}getRotatedPoint(d,g){return{x:d.x*Math.cos(this.angle)+d.y*Math.sin(this.angle)+g.x,y:d.y*Math.cos(this.angle)-d.x*Math.sin(this.angle)+g.y}}calculateIntersectPoint(d){const g={left:-1,top:-1,width:this.pageWidth+2,height:this.pageHeight+2};this.corner==="top"?(this.topIntersectPoint=l.GetIntersectBetweenTwoSegment(g,[d,this.rect.topRight],[{x:0,y:0},{x:this.pageWidth,y:0}]),this.sideIntersectPoint=l.GetIntersectBetweenTwoSegment(g,[d,this.rect.bottomLeft],[{x:this.pageWidth,y:0},{x:this.pageWidth,y:this.pageHeight}]),this.bottomIntersectPoint=l.GetIntersectBetweenTwoSegment(g,[this.rect.bottomLeft,this.rect.bottomRight],[{x:0,y:this.pageHeight},{x:this.pageWidth,y:this.pageHeight}])):(this.topIntersectPoint=l.GetIntersectBetweenTwoSegment(g,[this.rect.topLeft,this.rect.topRight],[{x:0,y:0},{x:this.pageWidth,y:0}]),this.sideIntersectPoint=l.GetIntersectBetweenTwoSegment(g,[d,this.rect.topLeft],[{x:this.pageWidth,y:0},{x:this.pageWidth,y:this.pageHeight}]),this.bottomIntersectPoint=l.GetIntersectBetweenTwoSegment(g,[this.rect.bottomLeft,this.rect.bottomRight],[{x:0,y:this.pageHeight},{x:this.pageWidth,y:this.pageHeight}]))}checkPositionAtCenterLine(d,g,I){let _=d;const y=l.LimitPointToCircle(g,this.pageWidth,_);_!==y&&(_=y,this.updateAngleAndGeometry(_));const w=Math.sqrt(Math.pow(this.pageWidth,2)+Math.pow(this.pageHeight,2));let S=this.rect.bottomRight,R=this.rect.topLeft;if(this.corner==="bottom"&&(S=this.rect.topRight,R=this.rect.bottomLeft),S.x<=0){const b=l.LimitPointToCircle(I,w,R);b!==_&&(_=b,this.updateAngleAndGeometry(_))}return _}getSegmentToShadowLine(){const d=this.getShadowStartPoint();return[d,d!==this.sideIntersectPoint&&this.sideIntersectPoint!==null?this.sideIntersectPoint:this.bottomIntersectPoint]}}class m{constructor(d,g){this.flippingPage=null,this.bottomPage=null,this.calc=null,this.state="read",this.render=d,this.app=g}fold(d){this.setState("user_fold"),this.calc===null&&this.start(d),this.do(this.render.convertToPage(d))}flip(d){if(this.app.getSettings().disableFlipByClick&&!this.isPointOnCorners(d)||(this.calc!==null&&this.render.finishAnimation(),!this.start(d)))return;const g=this.getBoundsRect();this.setState("flipping");const I=g.height/10,_=this.calc.getCorner()==="bottom"?g.height-I:I,y=this.calc.getCorner()==="bottom"?g.height:0;this.calc.calc({x:g.pageWidth-I,y:_}),this.animateFlippingTo({x:g.pageWidth-I,y:_},{x:-g.pageWidth,y},!0)}start(d){this.reset();const g=this.render.convertToBook(d),I=this.getBoundsRect(),_=this.getDirectionByPoint(g),y=g.y>=I.height/2?"bottom":"top";if(!this.checkDirection(_))return!1;try{if(this.flippingPage=this.app.getPageCollection().getFlippingPage(_),this.bottomPage=this.app.getPageCollection().getBottomPage(_),this.render.getOrientation()==="landscape")if(_===1){const w=this.app.getPageCollection().nextBy(this.flippingPage);w!==null&&this.flippingPage.getDensity()!==w.getDensity()&&(this.flippingPage.setDrawingDensity("hard"),w.setDrawingDensity("hard"))}else{const w=this.app.getPageCollection().prevBy(this.flippingPage);w!==null&&this.flippingPage.getDensity()!==w.getDensity()&&(this.flippingPage.setDrawingDensity("hard"),w.setDrawingDensity("hard"))}return this.render.setDirection(_),this.calc=new f(_,y,I.pageWidth.toString(10),I.height.toString(10)),!0}catch{return!1}}do(d){if(this.calc!==null&&this.calc.calc(d)){const g=this.calc.getFlippingProgress();this.bottomPage.setArea(this.calc.getBottomClipArea()),this.bottomPage.setPosition(this.calc.getBottomPagePosition()),this.bottomPage.setAngle(0),this.bottomPage.setHardAngle(0),this.flippingPage.setArea(this.calc.getFlippingClipArea()),this.flippingPage.setPosition(this.calc.getActiveCorner()),this.flippingPage.setAngle(this.calc.getAngle()),this.calc.getDirection()===0?this.flippingPage.setHardAngle(90*(200-2*g)/100):this.flippingPage.setHardAngle(-90*(200-2*g)/100),this.render.setPageRect(this.calc.getRect()),this.render.setBottomPage(this.bottomPage),this.render.setFlippingPage(this.flippingPage),this.render.setShadowData(this.calc.getShadowStartPoint(),this.calc.getShadowAngle(),g,this.calc.getDirection())}}flipToPage(d,g){const I=this.app.getPageCollection().getCurrentSpreadIndex(),_=this.app.getPageCollection().getSpreadIndexByPage(d);try{_>I&&(this.app.getPageCollection().setCurrentSpreadIndex(_-1),this.flipNext(g)),_<I&&(this.app.getPageCollection().setCurrentSpreadIndex(_+1),this.flipPrev(g))}catch{}}flipNext(d){this.flip({x:this.render.getRect().left+2*this.render.getRect().pageWidth-10,y:d==="top"?1:this.render.getRect().height-2})}flipPrev(d){this.flip({x:10,y:d==="top"?1:this.render.getRect().height-2})}stopMove(){if(this.calc===null)return;const d=this.calc.getPosition(),g=this.getBoundsRect(),I=this.calc.getCorner()==="bottom"?g.height:0;d.x<=0?this.animateFlippingTo(d,{x:-g.pageWidth,y:I},!0):this.animateFlippingTo(d,{x:g.pageWidth,y:I},!1)}showCorner(d){if(!this.checkState("read","fold_corner"))return;const g=this.getBoundsRect(),I=g.pageWidth;if(this.isPointOnCorners(d))if(this.calc===null){if(!this.start(d))return;this.setState("fold_corner"),this.calc.calc({x:I-1,y:1});const _=50,y=this.calc.getCorner()==="bottom"?g.height-1:1,w=this.calc.getCorner()==="bottom"?g.height-_:_;this.animateFlippingTo({x:I-1,y},{x:I-_,y:w},!1,!1)}else this.do(this.render.convertToPage(d));else this.setState("read"),this.render.finishAnimation(),this.stopMove()}animateFlippingTo(d,g,I,_=!0){const y=l.GetCordsFromTwoPoint(d,g),w=[];for(const R of y)w.push(()=>this.do(R));const S=this.getAnimationDuration(y.length);this.render.startAnimation(w,S,()=>{this.calc&&(I&&(this.calc.getDirection()===1?this.app.turnToPrevPage():this.app.turnToNextPage()),_&&(this.render.setBottomPage(null),this.render.setFlippingPage(null),this.render.clearShadow(),this.setState("read"),this.reset()))})}getCalculation(){return this.calc}getState(){return this.state}setState(d){this.state!==d&&(this.app.updateState(d),this.state=d)}getDirectionByPoint(d){const g=this.getBoundsRect();if(this.render.getOrientation()==="portrait"){if(d.x-g.pageWidth<=g.width/5)return 1}else if(d.x<g.width/2)return 1;return 0}getAnimationDuration(d){const g=this.app.getSettings().flippingTime;return d>=1e3?g:d/1e3*g}checkDirection(d){return d===0?this.app.getCurrentPageIndex()<this.app.getPageCount()-1:this.app.getCurrentPageIndex()>=1}reset(){this.calc=null,this.flippingPage=null,this.bottomPage=null}getBoundsRect(){return this.render.getRect()}checkState(...d){for(const g of d)if(this.state===g)return!0;return!1}isPointOnCorners(d){const g=this.getBoundsRect(),I=g.pageWidth,_=Math.sqrt(Math.pow(I,2)+Math.pow(g.height,2))/5,y=this.render.convertToBook(d);return y.x>0&&y.y>0&&y.x<g.width&&y.y<g.height&&(y.x<_||y.x>g.width-_)&&(y.y<_||y.y>g.height-_)}}class v{constructor(d,g){this.leftPage=null,this.rightPage=null,this.flippingPage=null,this.bottomPage=null,this.direction=null,this.orientation=null,this.shadow=null,this.animation=null,this.pageRect=null,this.boundsRect=null,this.timer=0,this.safari=!1,this.setting=g,this.app=d;const I=new RegExp("Version\\/[\\d\\.]+.*Safari/");this.safari=I.exec(window.navigator.userAgent)!==null}render(d){if(this.animation!==null){const g=Math.round((d-this.animation.startedAt)/this.animation.durationFrame);g<this.animation.frames.length?this.animation.frames[g]():(this.animation.onAnimateEnd(),this.animation=null)}this.timer=d,this.drawFrame()}start(){this.update();const d=g=>{this.render(g),requestAnimationFrame(d)};requestAnimationFrame(d)}startAnimation(d,g,I){this.finishAnimation(),this.animation={frames:d,duration:g,durationFrame:g/d.length,onAnimateEnd:I,startedAt:this.timer}}finishAnimation(){this.animation!==null&&(this.animation.frames[this.animation.frames.length-1](),this.animation.onAnimateEnd!==null&&this.animation.onAnimateEnd()),this.animation=null}update(){this.boundsRect=null;const d=this.calculateBoundsRect();this.orientation!==d&&(this.orientation=d,this.app.updateOrientation(d))}calculateBoundsRect(){let d="landscape";const g=this.getBlockWidth(),I=g/2,_=this.getBlockHeight()/2,y=this.setting.width/this.setting.height;let w=this.setting.width,S=this.setting.height,R=I-w;return this.setting.size==="stretch"?(g<2*this.setting.minWidth&&this.app.getSettings().usePortrait&&(d="portrait"),w=d==="portrait"?this.getBlockWidth():this.getBlockWidth()/2,w>this.setting.maxWidth&&(w=this.setting.maxWidth),S=w/y,S>this.getBlockHeight()&&(S=this.getBlockHeight(),w=S*y),R=d==="portrait"?I-w/2-w:I-w):g<2*w&&this.app.getSettings().usePortrait&&(d="portrait",R=I-w/2-w),this.boundsRect={left:R,top:_-S/2,width:2*w,height:S,pageWidth:w},d}setShadowData(d,g,I,_){if(!this.app.getSettings().drawShadow)return;const y=100*this.getSettings().maxShadowOpacity;this.shadow={pos:d,angle:g,width:3*this.getRect().pageWidth/4*I/100,opacity:(100-I)*y/100/100,direction:_,progress:2*I}}clearShadow(){this.shadow=null}getBlockWidth(){return this.app.getUI().getDistElement().offsetWidth}getBlockHeight(){return this.app.getUI().getDistElement().offsetHeight}getDirection(){return this.direction}getRect(){return this.boundsRect===null&&this.calculateBoundsRect(),this.boundsRect}getSettings(){return this.app.getSettings()}getOrientation(){return this.orientation}setPageRect(d){this.pageRect=d}setDirection(d){this.direction=d}setRightPage(d){d!==null&&d.setOrientation(1),this.rightPage=d}setLeftPage(d){d!==null&&d.setOrientation(0),this.leftPage=d}setBottomPage(d){d!==null&&d.setOrientation(this.direction===1?0:1),this.bottomPage=d}setFlippingPage(d){d!==null&&d.setOrientation(this.direction===0&&this.orientation!=="portrait"?0:1),this.flippingPage=d}convertToBook(d){const g=this.getRect();return{x:d.x-g.left,y:d.y-g.top}}isSafari(){return this.safari}convertToPage(d,g){g||(g=this.direction);const I=this.getRect();return{x:g===0?d.x-I.left-I.width/2:I.width/2-d.x+I.left,y:d.y-I.top}}convertToGlobal(d,g){if(g||(g=this.direction),d==null)return null;const I=this.getRect();return{x:g===0?d.x+I.left+I.width/2:I.width/2-d.x+I.left,y:d.y+I.top}}convertRectToGlobal(d,g){return g||(g=this.direction),{topLeft:this.convertToGlobal(d.topLeft,g),topRight:this.convertToGlobal(d.topRight,g),bottomLeft:this.convertToGlobal(d.bottomLeft,g),bottomRight:this.convertToGlobal(d.bottomRight,g)}}}class A extends v{constructor(d,g,I){super(d,g),this.canvas=I,this.ctx=I.getContext("2d")}getContext(){return this.ctx}reload(){}drawFrame(){this.clear(),this.orientation!=="portrait"&&this.leftPage!=null&&this.leftPage.simpleDraw(0),this.rightPage!=null&&this.rightPage.simpleDraw(1),this.bottomPage!=null&&this.bottomPage.draw(),this.drawBookShadow(),this.flippingPage!=null&&this.flippingPage.draw(),this.shadow!=null&&(this.drawOuterShadow(),this.drawInnerShadow());const d=this.getRect();this.orientation==="portrait"&&(this.ctx.beginPath(),this.ctx.rect(d.left+d.pageWidth,d.top,d.width,d.height),this.ctx.clip())}drawBookShadow(){const d=this.getRect();this.ctx.save(),this.ctx.beginPath();const g=d.width/20;this.ctx.rect(d.left,d.top,d.width,d.height);const I={x:d.left+d.width/2-g/2,y:0};this.ctx.translate(I.x,I.y);const _=this.ctx.createLinearGradient(0,0,g,0);_.addColorStop(0,"rgba(0, 0, 0, 0)"),_.addColorStop(.4,"rgba(0, 0, 0, 0.2)"),_.addColorStop(.49,"rgba(0, 0, 0, 0.1)"),_.addColorStop(.5,"rgba(0, 0, 0, 0.5)"),_.addColorStop(.51,"rgba(0, 0, 0, 0.4)"),_.addColorStop(1,"rgba(0, 0, 0, 0)"),this.ctx.clip(),this.ctx.fillStyle=_,this.ctx.fillRect(0,0,g,2*d.height),this.ctx.restore()}drawOuterShadow(){const d=this.getRect();this.ctx.save(),this.ctx.beginPath(),this.ctx.rect(d.left,d.top,d.width,d.height);const g=this.convertToGlobal({x:this.shadow.pos.x,y:this.shadow.pos.y});this.ctx.translate(g.x,g.y),this.ctx.rotate(Math.PI+this.shadow.angle+Math.PI/2);const I=this.ctx.createLinearGradient(0,0,this.shadow.width,0);this.shadow.direction===0?(this.ctx.translate(0,-100),I.addColorStop(0,"rgba(0, 0, 0, "+this.shadow.opacity+")"),I.addColorStop(1,"rgba(0, 0, 0, 0)")):(this.ctx.translate(-this.shadow.width,-100),I.addColorStop(0,"rgba(0, 0, 0, 0)"),I.addColorStop(1,"rgba(0, 0, 0, "+this.shadow.opacity+")")),this.ctx.clip(),this.ctx.fillStyle=I,this.ctx.fillRect(0,0,this.shadow.width,2*d.height),this.ctx.restore()}drawInnerShadow(){const d=this.getRect();this.ctx.save(),this.ctx.beginPath();const g=this.convertToGlobal({x:this.shadow.pos.x,y:this.shadow.pos.y}),I=this.convertRectToGlobal(this.pageRect);this.ctx.moveTo(I.topLeft.x,I.topLeft.y),this.ctx.lineTo(I.topRight.x,I.topRight.y),this.ctx.lineTo(I.bottomRight.x,I.bottomRight.y),this.ctx.lineTo(I.bottomLeft.x,I.bottomLeft.y),this.ctx.translate(g.x,g.y),this.ctx.rotate(Math.PI+this.shadow.angle+Math.PI/2);const _=3*this.shadow.width/4,y=this.ctx.createLinearGradient(0,0,_,0);this.shadow.direction===0?(this.ctx.translate(-_,-100),y.addColorStop(1,"rgba(0, 0, 0, "+this.shadow.opacity+")"),y.addColorStop(.9,"rgba(0, 0, 0, 0.05)"),y.addColorStop(.7,"rgba(0, 0, 0, "+this.shadow.opacity+")"),y.addColorStop(0,"rgba(0, 0, 0, 0)")):(this.ctx.translate(0,-100),y.addColorStop(0,"rgba(0, 0, 0, "+this.shadow.opacity+")"),y.addColorStop(.1,"rgba(0, 0, 0, 0.05)"),y.addColorStop(.3,"rgba(0, 0, 0, "+this.shadow.opacity+")"),y.addColorStop(1,"rgba(0, 0, 0, 0)")),this.ctx.clip(),this.ctx.fillStyle=y,this.ctx.fillRect(0,0,_,2*d.height),this.ctx.restore()}clear(){this.ctx.fillStyle="white",this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height)}}class D{constructor(d,g,I){this.touchPoint=null,this.swipeTimeout=250,this.onResize=()=>{this.update()},this.onMouseDown=y=>{if(this.checkTarget(y.target)){const w=this.getMousePos(y.clientX,y.clientY);this.app.startUserTouch(w),y.preventDefault()}},this.onTouchStart=y=>{if(this.checkTarget(y.target)&&y.changedTouches.length>0){const w=y.changedTouches[0],S=this.getMousePos(w.clientX,w.clientY);this.touchPoint={point:S,time:Date.now()},setTimeout(()=>{this.touchPoint!==null&&this.app.startUserTouch(S)},this.swipeTimeout),this.app.getSettings().mobileScrollSupport||y.preventDefault()}},this.onMouseUp=y=>{const w=this.getMousePos(y.clientX,y.clientY);this.app.userStop(w)},this.onMouseMove=y=>{const w=this.getMousePos(y.clientX,y.clientY);this.app.userMove(w,!1)},this.onTouchMove=y=>{if(y.changedTouches.length>0){const w=y.changedTouches[0],S=this.getMousePos(w.clientX,w.clientY);this.app.getSettings().mobileScrollSupport?(this.touchPoint!==null&&(Math.abs(this.touchPoint.point.x-S.x)>10||this.app.getState()!=="read")&&y.cancelable&&this.app.userMove(S,!0),this.app.getState()!=="read"&&y.preventDefault()):this.app.userMove(S,!0)}},this.onTouchEnd=y=>{if(y.changedTouches.length>0){const w=y.changedTouches[0],S=this.getMousePos(w.clientX,w.clientY);let R=!1;if(this.touchPoint!==null){const b=S.x-this.touchPoint.point.x,P=Math.abs(S.y-this.touchPoint.point.y);Math.abs(b)>this.swipeDistance&&P<2*this.swipeDistance&&Date.now()-this.touchPoint.time<this.swipeTimeout&&(b>0?this.app.flipPrev(this.touchPoint.point.y<this.app.getRender().getRect().height/2?"top":"bottom"):this.app.flipNext(this.touchPoint.point.y<this.app.getRender().getRect().height/2?"top":"bottom"),R=!0),this.touchPoint=null}this.app.userStop(S,R)}},this.parentElement=d,d.classList.add("stf__parent"),d.insertAdjacentHTML("afterbegin",'<div class="stf__wrapper"></div>'),this.wrapper=d.querySelector(".stf__wrapper"),this.app=g;const _=this.app.getSettings().usePortrait?1:2;d.style.minWidth=I.minWidth*_+"px",d.style.minHeight=I.minHeight+"px",I.size==="fixed"&&(d.style.minWidth=I.width*_+"px",d.style.minHeight=I.height+"px"),I.autoSize&&(d.style.width="100%",d.style.maxWidth=2*I.maxWidth+"px"),d.style.display="block",window.addEventListener("resize",this.onResize,!1),this.swipeDistance=I.swipeDistance}destroy(){this.app.getSettings().useMouseEvents&&this.removeHandlers(),this.distElement.remove(),this.wrapper.remove()}getDistElement(){return this.distElement}getWrapper(){return this.wrapper}setOrientationStyle(d){this.wrapper.classList.remove("--portrait","--landscape"),d==="portrait"?(this.app.getSettings().autoSize&&(this.wrapper.style.paddingBottom=this.app.getSettings().height/this.app.getSettings().width*100+"%"),this.wrapper.classList.add("--portrait")):(this.app.getSettings().autoSize&&(this.wrapper.style.paddingBottom=this.app.getSettings().height/(2*this.app.getSettings().width)*100+"%"),this.wrapper.classList.add("--landscape")),this.update()}removeHandlers(){window.removeEventListener("resize",this.onResize),this.distElement.removeEventListener("mousedown",this.onMouseDown),this.distElement.removeEventListener("touchstart",this.onTouchStart),window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("touchmove",this.onTouchMove),window.removeEventListener("mouseup",this.onMouseUp),window.removeEventListener("touchend",this.onTouchEnd)}setHandlers(){window.addEventListener("resize",this.onResize,!1),this.app.getSettings().useMouseEvents&&(this.distElement.addEventListener("mousedown",this.onMouseDown),this.distElement.addEventListener("touchstart",this.onTouchStart),window.addEventListener("mousemove",this.onMouseMove),window.addEventListener("touchmove",this.onTouchMove,{passive:!this.app.getSettings().mobileScrollSupport}),window.addEventListener("mouseup",this.onMouseUp),window.addEventListener("touchend",this.onTouchEnd))}getMousePos(d,g){const I=this.distElement.getBoundingClientRect();return{x:d-I.left,y:g-I.top}}checkTarget(d){return!this.app.getSettings().clickEventForward||!["a","button"].includes(d.tagName.toLowerCase())}}class V extends D{constructor(d,g,I,_){super(d,g,I),this.wrapper.insertAdjacentHTML("afterbegin",'<div class="stf__block"></div>'),this.distElement=d.querySelector(".stf__block"),this.items=_;for(const y of _)this.distElement.appendChild(y);this.setHandlers()}clear(){for(const d of this.items)this.parentElement.appendChild(d)}updateItems(d){this.removeHandlers(),this.distElement.innerHTML="";for(const g of d)this.distElement.appendChild(g);this.items=d,this.setHandlers()}update(){this.app.getRender().update()}}class F extends D{constructor(d,g,I){super(d,g,I),this.wrapper.innerHTML='<canvas class="stf__canvas"></canvas>',this.canvas=d.querySelectorAll("canvas")[0],this.distElement=this.canvas,this.resizeCanvas(),this.setHandlers()}resizeCanvas(){const d=getComputedStyle(this.canvas),g=parseInt(d.getPropertyValue("width"),10),I=parseInt(d.getPropertyValue("height"),10);this.canvas.width=g,this.canvas.height=I}getCanvas(){return this.canvas}update(){this.resizeCanvas(),this.app.getRender().update()}}class C extends v{constructor(d,g,I){super(d,g),this.outerShadow=null,this.innerShadow=null,this.hardShadow=null,this.hardInnerShadow=null,this.element=I,this.createShadows()}createShadows(){this.element.insertAdjacentHTML("beforeend",`<div class="stf__outerShadow"></div>
             <div class="stf__innerShadow"></div>
             <div class="stf__hardShadow"></div>
             <div class="stf__hardInnerShadow"></div>`),this.outerShadow=this.element.querySelector(".stf__outerShadow"),this.innerShadow=this.element.querySelector(".stf__innerShadow"),this.hardShadow=this.element.querySelector(".stf__hardShadow"),this.hardInnerShadow=this.element.querySelector(".stf__hardInnerShadow")}clearShadow(){super.clearShadow(),this.outerShadow.style.cssText="display: none",this.innerShadow.style.cssText="display: none",this.hardShadow.style.cssText="display: none",this.hardInnerShadow.style.cssText="display: none"}reload(){this.element.querySelector(".stf__outerShadow")||this.createShadows()}drawHardInnerShadow(){const d=this.getRect(),g=this.shadow.progress>100?200-this.shadow.progress:this.shadow.progress;let I=(100-g)*(2.5*d.pageWidth)/100+20;I>d.pageWidth&&(I=d.pageWidth);let _=`
            display: block;
            z-index: ${(this.getSettings().startZIndex+5).toString(10)};
            width: ${I}px;
            height: ${d.height}px;
            background: linear-gradient(to right,
                rgba(0, 0, 0, ${this.shadow.opacity*g/100}) 5%,
                rgba(0, 0, 0, 0) 100%);
            left: ${d.left+d.width/2}px;
            transform-origin: 0 0;
        `;_+=this.getDirection()===0&&this.shadow.progress>100||this.getDirection()===1&&this.shadow.progress<=100?"transform: translate3d(0, 0, 0);":"transform: translate3d(0, 0, 0) rotateY(180deg);",this.hardInnerShadow.style.cssText=_}drawHardOuterShadow(){const d=this.getRect();let g=(100-(this.shadow.progress>100?200-this.shadow.progress:this.shadow.progress))*(2.5*d.pageWidth)/100+20;g>d.pageWidth&&(g=d.pageWidth);let I=`
            display: block;
            z-index: ${(this.getSettings().startZIndex+4).toString(10)};
            width: ${g}px;
            height: ${d.height}px;
            background: linear-gradient(to left, rgba(0, 0, 0, ${this.shadow.opacity}) 5%, rgba(0, 0, 0, 0) 100%);
            left: ${d.left+d.width/2}px;
            transform-origin: 0 0;
        `;I+=this.getDirection()===0&&this.shadow.progress>100||this.getDirection()===1&&this.shadow.progress<=100?"transform: translate3d(0, 0, 0) rotateY(180deg);":"transform: translate3d(0, 0, 0);",this.hardShadow.style.cssText=I}drawInnerShadow(){const d=this.getRect(),g=3*this.shadow.width/4,I=this.getDirection()===0?g:0,_=this.getDirection()===0?"to left":"to right",y=this.convertToGlobal(this.shadow.pos),w=this.shadow.angle+3*Math.PI/2,S=[this.pageRect.topLeft,this.pageRect.topRight,this.pageRect.bottomRight,this.pageRect.bottomLeft];let R="polygon( ";for(const P of S){let Se=this.getDirection()===1?{x:-P.x+this.shadow.pos.x,y:P.y-this.shadow.pos.y}:{x:P.x-this.shadow.pos.x,y:P.y-this.shadow.pos.y};Se=l.GetRotatedPoint(Se,{x:I,y:100},w),R+=Se.x+"px "+Se.y+"px, "}R=R.slice(0,-2),R+=")";const b=`
            display: block;
            z-index: ${(this.getSettings().startZIndex+10).toString(10)};
            width: ${g}px;
            height: ${2*d.height}px;
            background: linear-gradient(${_},
                rgba(0, 0, 0, ${this.shadow.opacity}) 5%,
                rgba(0, 0, 0, 0.05) 15%,
                rgba(0, 0, 0, ${this.shadow.opacity}) 35%,
                rgba(0, 0, 0, 0) 100%);
            transform-origin: ${I}px 100px;
            transform: translate3d(${y.x-I}px, ${y.y-100}px, 0) rotate(${w}rad);
            clip-path: ${R};
            -webkit-clip-path: ${R};
        `;this.innerShadow.style.cssText=b}drawOuterShadow(){const d=this.getRect(),g=this.convertToGlobal({x:this.shadow.pos.x,y:this.shadow.pos.y}),I=this.shadow.angle+3*Math.PI/2,_=this.getDirection()===1?this.shadow.width:0,y=this.getDirection()===0?"to right":"to left",w=[{x:0,y:0},{x:d.pageWidth,y:0},{x:d.pageWidth,y:d.height},{x:0,y:d.height}];let S="polygon( ";for(const b of w)if(b!==null){let P=this.getDirection()===1?{x:-b.x+this.shadow.pos.x,y:b.y-this.shadow.pos.y}:{x:b.x-this.shadow.pos.x,y:b.y-this.shadow.pos.y};P=l.GetRotatedPoint(P,{x:_,y:100},I),S+=P.x+"px "+P.y+"px, "}S=S.slice(0,-2),S+=")";const R=`
            display: block;
            z-index: ${(this.getSettings().startZIndex+10).toString(10)};
            width: ${this.shadow.width}px;
            height: ${2*d.height}px;
            background: linear-gradient(${y}, rgba(0, 0, 0, ${this.shadow.opacity}), rgba(0, 0, 0, 0));
            transform-origin: ${_}px 100px;
            transform: translate3d(${g.x-_}px, ${g.y-100}px, 0) rotate(${I}rad);
            clip-path: ${S};
            -webkit-clip-path: ${S};
        `;this.outerShadow.style.cssText=R}drawLeftPage(){this.orientation!=="portrait"&&this.leftPage!==null&&(this.direction===1&&this.flippingPage!==null&&this.flippingPage.getDrawingDensity()==="hard"?(this.leftPage.getElement().style.zIndex=(this.getSettings().startZIndex+5).toString(10),this.leftPage.setHardDrawingAngle(180+this.flippingPage.getHardAngle()),this.leftPage.draw(this.flippingPage.getDrawingDensity())):this.leftPage.simpleDraw(0))}drawRightPage(){this.rightPage!==null&&(this.direction===0&&this.flippingPage!==null&&this.flippingPage.getDrawingDensity()==="hard"?(this.rightPage.getElement().style.zIndex=(this.getSettings().startZIndex+5).toString(10),this.rightPage.setHardDrawingAngle(180+this.flippingPage.getHardAngle()),this.rightPage.draw(this.flippingPage.getDrawingDensity())):this.rightPage.simpleDraw(1))}drawBottomPage(){if(this.bottomPage===null)return;const d=this.flippingPage!=null?this.flippingPage.getDrawingDensity():null;this.orientation==="portrait"&&this.direction===1||(this.bottomPage.getElement().style.zIndex=(this.getSettings().startZIndex+3).toString(10),this.bottomPage.draw(d))}drawFrame(){this.clear(),this.drawLeftPage(),this.drawRightPage(),this.drawBottomPage(),this.flippingPage!=null&&(this.flippingPage.getElement().style.zIndex=(this.getSettings().startZIndex+5).toString(10),this.flippingPage.draw()),this.shadow!=null&&this.flippingPage!==null&&(this.flippingPage.getDrawingDensity()==="soft"?(this.drawOuterShadow(),this.drawInnerShadow()):(this.drawHardOuterShadow(),this.drawHardInnerShadow()))}clear(){for(const d of this.app.getPageCollection().getPages())d!==this.leftPage&&d!==this.rightPage&&d!==this.flippingPage&&d!==this.bottomPage&&(d.getElement().style.cssText="display: none"),d.getTemporaryCopy()!==this.flippingPage&&d.hideTemporaryCopy()}update(){super.update(),this.rightPage!==null&&this.rightPage.setOrientation(1),this.leftPage!==null&&this.leftPage.setOrientation(0)}}class x{constructor(){this._default={startPage:0,size:"fixed",width:0,height:0,minWidth:0,maxWidth:0,minHeight:0,maxHeight:0,drawShadow:!0,flippingTime:1e3,usePortrait:!0,startZIndex:0,autoSize:!0,maxShadowOpacity:1,showCover:!1,mobileScrollSupport:!0,swipeDistance:30,clickEventForward:!0,useMouseEvents:!0,showPageCorners:!0,disableFlipByClick:!1}}getSettings(d){const g=this._default;if(Object.assign(g,d),g.size!=="stretch"&&g.size!=="fixed")throw new Error('Invalid size type. Available only "fixed" and "stretch" value');if(g.width<=0||g.height<=0)throw new Error("Invalid width or height");if(g.flippingTime<=0)throw new Error("Invalid flipping time");return g.size==="stretch"?(g.minWidth<=0&&(g.minWidth=100),g.maxWidth<g.minWidth&&(g.maxWidth=2e3),g.minHeight<=0&&(g.minHeight=100),g.maxHeight<g.minHeight&&(g.maxHeight=2e3)):(g.minWidth=g.width,g.maxWidth=g.width,g.minHeight=g.height,g.maxHeight=g.height),g}}(function(T,d){d===void 0&&(d={});var g=d.insertAt;if(typeof document<"u"){var I=document.head||document.getElementsByTagName("head")[0],_=document.createElement("style");_.type="text/css",g==="top"&&I.firstChild?I.insertBefore(_,I.firstChild):I.appendChild(_),_.styleSheet?_.styleSheet.cssText=T:_.appendChild(document.createTextNode(T))}})(`.stf__parent {
  position: relative;
  display: block;
  box-sizing: border-box;
  transform: translateZ(0);

  -ms-touch-action: pan-y;
  touch-action: pan-y;
}

.sft__wrapper {
  position: relative;
  width: 100%;
  box-sizing: border-box;
}

.stf__parent canvas {
  position: absolute;
  width: 100%;
  height: 100%;
  left: 0;
  top: 0;
}

.stf__block {
  position: absolute;
  width: 100%;
  height: 100%;
  box-sizing: border-box;
  perspective: 2000px;
}

.stf__item {
  display: none;
  position: absolute;
  transform-style: preserve-3d;
}

.stf__outerShadow {
  position: absolute;
  left: 0;
  top: 0;
}

.stf__innerShadow {
  position: absolute;
  left: 0;
  top: 0;
}

.stf__hardShadow {
  position: absolute;
  left: 0;
  top: 0;
}

.stf__hardInnerShadow {
  position: absolute;
  left: 0;
  top: 0;
}`),n.PageFlip=class extends class{constructor(){this.events=new Map}on(T,d){return this.events.has(T)?this.events.get(T).push(d):this.events.set(T,[d]),this}off(T){this.events.delete(T)}trigger(T,d,g=null){if(this.events.has(T))for(const I of this.events.get(T))I({data:g,object:d})}}{constructor(T,d){super(),this.isUserTouch=!1,this.isUserMove=!1,this.setting=null,this.pages=null,this.setting=new x().getSettings(d),this.block=T}destroy(){this.ui.destroy(),this.block.remove()}update(){this.render.update(),this.pages.show()}loadFromImages(T){this.ui=new F(this.block,this,this.setting);const d=this.ui.getCanvas();this.render=new A(this,this.setting,d),this.flipController=new m(this.render,this),this.pages=new o(this,this.render,T),this.pages.load(),this.render.start(),this.pages.show(this.setting.startPage),setTimeout(()=>{this.ui.update(),this.trigger("init",this,{page:this.setting.startPage,mode:this.render.getOrientation()})},1)}loadFromHTML(T){this.ui=new V(this.block,this,this.setting,T),this.render=new C(this,this.setting,this.ui.getDistElement()),this.flipController=new m(this.render,this),this.pages=new c(this,this.render,this.ui.getDistElement(),T),this.pages.load(),this.render.start(),this.pages.show(this.setting.startPage),setTimeout(()=>{this.ui.update(),this.trigger("init",this,{page:this.setting.startPage,mode:this.render.getOrientation()})},1)}updateFromImages(T){const d=this.pages.getCurrentPageIndex();this.pages.destroy(),this.pages=new o(this,this.render,T),this.pages.load(),this.pages.show(d),this.trigger("update",this,{page:d,mode:this.render.getOrientation()})}updateFromHtml(T){const d=this.pages.getCurrentPageIndex();this.pages.destroy(),this.pages=new c(this,this.render,this.ui.getDistElement(),T),this.pages.load(),this.ui.updateItems(T),this.render.reload(),this.pages.show(d),this.trigger("update",this,{page:d,mode:this.render.getOrientation()})}clear(){this.pages.destroy(),this.ui.clear()}turnToPrevPage(){this.pages.showPrev()}turnToNextPage(){this.pages.showNext()}turnToPage(T){this.pages.show(T)}flipNext(T="top"){this.flipController.flipNext(T)}flipPrev(T="top"){this.flipController.flipPrev(T)}flip(T,d="top"){this.flipController.flipToPage(T,d)}updateState(T){this.trigger("changeState",this,T)}updatePageIndex(T){this.trigger("flip",this,T)}updateOrientation(T){this.ui.setOrientationStyle(T),this.update(),this.trigger("changeOrientation",this,T)}getPageCount(){return this.pages.getPageCount()}getCurrentPageIndex(){return this.pages.getCurrentPageIndex()}getPage(T){return this.pages.getPage(T)}getRender(){return this.render}getFlipController(){return this.flipController}getOrientation(){return this.render.getOrientation()}getBoundsRect(){return this.render.getRect()}getSettings(){return this.setting}getUI(){return this.ui}getState(){return this.flipController.getState()}getPageCollection(){return this.pages}startUserTouch(T){this.mousePosition=T,this.isUserTouch=!0,this.isUserMove=!1}userMove(T,d){this.isUserTouch||d||!this.setting.showPageCorners?this.isUserTouch&&l.GetDistanceBetweenTwoPoint(this.mousePosition,T)>5&&(this.isUserMove=!0,this.flipController.fold(T)):this.flipController.showCorner(T)}userStop(T,d=!1){this.isUserTouch&&(this.isUserTouch=!1,d||(this.isUserMove?this.flipController.stopMove():this.flipController.flip(T)))}},Object.defineProperty(n,"__esModule",{value:!0})})})(yd,yd.exports);var JS=yd.exports;const ZS=Nt.forwardRef((t,e)=>{const n=ee.useRef(null),r=ee.useRef([]),i=ee.useRef(),[s,o]=ee.useState([]);ee.useImperativeHandle(e,()=>({pageFlip:()=>i.current}));const l=ee.useCallback(()=>{i.current&&i.current.clear()},[]),u=ee.useCallback(()=>{const c=i.current;c&&(c.off("flip"),c.off("changeOrientation"),c.off("changeState"),c.off("init"),c.off("update"))},[]);return ee.useEffect(()=>{if(r.current=[],t.children){const c=Nt.Children.map(t.children,f=>Nt.cloneElement(f,{ref:m=>{m&&r.current.push(m)}}));(!t.renderOnlyPageLengthChange||s.length!==c.length)&&(c.length<s.length&&l(),o(c))}},[t.children]),ee.useEffect(()=>{const c=()=>{const f=i.current;f&&(t.onFlip&&f.on("flip",m=>t.onFlip(m)),t.onChangeOrientation&&f.on("changeOrientation",m=>t.onChangeOrientation(m)),t.onChangeState&&f.on("changeState",m=>t.onChangeState(m)),t.onInit&&f.on("init",m=>t.onInit(m)),t.onUpdate&&f.on("update",m=>t.onUpdate(m)))};s.length>0&&r.current.length>0&&(u(),n.current&&!i.current&&(i.current=new JS.PageFlip(n.current,t)),i.current.getFlipController()?i.current.updateFromHtml(r.current):i.current.loadFromHTML(r.current),c())},[s]),Nt.createElement("div",{ref:n,className:t.className,style:t.style},s)}),ex=Nt.memo(ZS),tx="/undang-aku/assets/book-logo-DTSrELaQ.png",qv=ee.forwardRef((t,e)=>{const r=new URLSearchParams(window.location.search).get("sebagai");return k.jsxs("div",{ref:e,className:"flex flex-col items-center justify-center p-8 border bg-[#F4ECE8] border-gray-300 shadow-lg h-full w-full mx-auto text-center relative",children:[k.jsx("div",{className:"relative w-full max-w-2xl p-4 mx-auto lg:max-w-x",children:k.jsxs("svg",{viewBox:"0 0 500 200",className:"w-full h-auto lg:h-40",children:[k.jsx("path",{id:"curve",d:"M10,150 Q250,50 490,150",fill:"transparent"}),k.jsx("text",{children:k.jsx("textPath",{href:"#curve",startOffset:"50%",textAnchor:"middle",className:"text-5xl font-dancing text-gray-800",children:"Undangan Pernikahan"})})]})}),k.jsx("img",{src:tx,alt:"Wedding Image",className:"mb-6 max-w-[280px] h-auto mx-auto"}),k.jsx("h1",{className:"text-4xl font-bold mb-5 font-dancing",children:"Thariq & Sherly"}),k.jsx("h1",{className:"text-xl font-bold mb-20 font-dancing",children:"24 Agustus 2024"}),k.jsx("h3",{className:"text-xxl mb-2 font-montserrat",children:"Kepada :"}),k.jsx("h3",{className:"text-2xl font-montserrat",children:r||"Orang baik"}),k.jsx("div",{className:"block absolute bottom-4 left-1/2 transform -translate-x-1/2 text-gray-600 text-sm hint lg:right-0",children:k.jsx("p",{children:"Klik untuk buka ..."})})]})});qv.displayName="Cover";const Gv=ee.forwardRef((t,e)=>k.jsxs("div",{ref:e,className:"flex flex-col items-center p-8 border bg-[#F4ECE8] border-gray-300 shadow-lg h-full w-full",children:[k.jsx("h1",{className:"text-3xl font-bold mb-12 font-playfair",children:"Pasangan Penganten"}),k.jsx("div",{className:"w-20 h-[1px] bg-gray-400 mb-12"}),k.jsxs("div",{className:"flex flex-col  w-full space-x-8",children:[k.jsxs("div",{className:"flex-1 flex flex-col items-start text-left mb-10 ",children:[k.jsx("h2",{className:"text-2xl mb-2 font-playfair",children:"Mempelai Pria"}),k.jsx("h3",{className:"text-xl font-extrabold font-montserrat",children:"Thariq Ramadhan"}),k.jsx("h3",{className:"text-xl font-extrabold font-montserrat mb-2",children:"Alchandra Yasrial"}),k.jsx("h4",{className:"text-xs font-semibold mb-1",children:"Putra pertama dari"}),k.jsx("h4",{className:"text-xs",children:"Bpk. Yasrial Yasin & Ibu Teti Chandrayanti"})]}),k.jsxs("div",{className:"flex items-center mb-10",children:[k.jsx("div",{className:"flex-1 h-[1px] bg-gray-400"}),k.jsx("span",{className:"px-4 text-gray-600 font-semibold font-dancing",children:"AND"}),k.jsx("div",{className:"flex-1 h-[1px] bg-gray-400"})]}),k.jsxs("div",{className:"flex-1 flex flex-col items-end text-right mb-6",children:[k.jsx("h2",{className:"text-2xl font-semibold mb-2 font-playfair",children:"Mempelai Wanita"}),k.jsx("h3",{className:"text-xl font-extrabold font-montserrat mb-2",children:"Sherly Ekaputri Arnas"}),k.jsx("h4",{className:"text-xs font-semibold mb-1",children:"Putri pertama dari"}),k.jsx("h4",{className:"text-xs",children:"Bpk. Anasril & Ibu Armaini"})]})]}),k.jsx("div",{className:"block lg:hidden absolute bottom-14 left-5 transform -translate-x-1/2 text-gray-600 text-sm pulse-animation",children:k.jsx("p",{children:"Klik untuk kembali..."})}),k.jsx("div",{className:"block lg:hidden absolute bottom-4 right-5 transform -translate-x-1/2 text-gray-600 text-sm pulse-animation",children:k.jsx("p",{children:"Klik untuk lanjut..."})})]}));Gv.displayName="Couple";var Wv={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},oy=Nt.createContext&&Nt.createContext(Wv),nx=["attr","size","title"];function rx(t,e){if(t==null)return{};var n=ix(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function ix(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function mu(){return mu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},mu.apply(this,arguments)}function ay(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function gu(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ay(Object(n),!0).forEach(function(r){sx(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ay(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function sx(t,e,n){return e=ox(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ox(t){var e=ax(t,"string");return typeof e=="symbol"?e:e+""}function ax(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Kv(t){return t&&t.map((e,n)=>Nt.createElement(e.tag,gu({key:n},e.attr),Kv(e.child)))}function Ar(t){return e=>Nt.createElement(lx,mu({attr:gu({},t.attr)},e),Kv(t.child))}function lx(t){var e=n=>{var{attr:r,size:i,title:s}=t,o=rx(t,nx),l=i||n.size||"1em",u;return n.className&&(u=n.className),t.className&&(u=(u?u+" ":"")+t.className),Nt.createElement("svg",mu({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,o,{className:u,style:gu(gu({color:t.color||n.color},n.style),t.style),height:l,width:l,xmlns:"http://www.w3.org/2000/svg"}),s&&Nt.createElement("title",null,s),t.children)};return oy!==void 0?Nt.createElement(oy.Consumer,null,n=>e(n)):e(Wv)}function ly(t){return Ar({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M320 448v40c0 13.255-10.745 24-24 24H24c-13.255 0-24-10.745-24-24V120c0-13.255 10.745-24 24-24h72v296c0 30.879 25.121 56 56 56h168zm0-344V0H152c-13.255 0-24 10.745-24 24v368c0 13.255 10.745 24 24 24h272c13.255 0 24-10.745 24-24V128H344c-13.2 0-24-10.8-24-24zm120.971-31.029L375.029 7.029A24 24 0 0 0 358.059 0H352v96h96v-6.059a24 24 0 0 0-7.029-16.97z"},child:[]}]})(t)}function ux(t){return Ar({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M462.3 62.6C407.5 15.9 326 24.3 275.7 76.2L256 96.5l-19.7-20.3C186.1 24.3 104.5 15.9 49.7 62.6c-62.8 53.6-66.1 149.8-9.9 207.9l193.5 199.8c12.5 12.9 32.8 12.9 45.3 0l193.5-199.8c56.3-58.1 53-154.3-9.8-207.9z"},child:[]}]})(t)}function _d(t){return Ar({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M288 0c-69.59 0-126 56.41-126 126 0 56.26 82.35 158.8 113.9 196.02 6.39 7.54 17.82 7.54 24.2 0C331.65 284.8 414 182.26 414 126 414 56.41 357.59 0 288 0zm0 168c-23.2 0-42-18.8-42-42s18.8-42 42-42 42 18.8 42 42-18.8 42-42 42zM20.12 215.95A32.006 32.006 0 0 0 0 245.66v250.32c0 11.32 11.43 19.06 21.94 14.86L160 448V214.92c-8.84-15.98-16.07-31.54-21.25-46.42L20.12 215.95zM288 359.67c-14.07 0-27.38-6.18-36.51-16.96-19.66-23.2-40.57-49.62-59.49-76.72v182l192 64V266c-18.92 27.09-39.82 53.52-59.49 76.72-9.13 10.77-22.44 16.95-36.51 16.95zm266.06-198.51L416 224v288l139.88-55.95A31.996 31.996 0 0 0 576 426.34V176.02c0-11.32-11.43-19.06-21.94-14.86z"},child:[]}]})(t)}function cx(t){return Ar({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M215.03 71.05L126.06 160H24c-13.26 0-24 10.74-24 24v144c0 13.25 10.74 24 24 24h102.06l88.97 88.95c15.03 15.03 40.97 4.47 40.97-16.97V88.02c0-21.46-25.96-31.98-40.97-16.97zM461.64 256l45.64-45.64c6.3-6.3 6.3-16.52 0-22.82l-22.82-22.82c-6.3-6.3-16.52-6.3-22.82 0L416 210.36l-45.64-45.64c-6.3-6.3-16.52-6.3-22.82 0l-22.82 22.82c-6.3 6.3-6.3 16.52 0 22.82L370.36 256l-45.63 45.63c-6.3 6.3-6.3 16.52 0 22.82l22.82 22.82c6.3 6.3 16.52 6.3 22.82 0L416 301.64l45.64 45.64c6.3 6.3 16.52 6.3 22.82 0l22.82-22.82c6.3-6.3 6.3-16.52 0-22.82L461.64 256z"},child:[]}]})(t)}function hx(t){return Ar({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M215.03 71.05L126.06 160H24c-13.26 0-24 10.74-24 24v144c0 13.25 10.74 24 24 24h102.06l88.97 88.95c15.03 15.03 40.97 4.47 40.97-16.97V88.02c0-21.46-25.96-31.98-40.97-16.97zm233.32-51.08c-11.17-7.33-26.18-4.24-33.51 6.95-7.34 11.17-4.22 26.18 6.95 33.51 66.27 43.49 105.82 116.6 105.82 195.58 0 78.98-39.55 152.09-105.82 195.58-11.17 7.32-14.29 22.34-6.95 33.5 7.04 10.71 21.93 14.56 33.51 6.95C528.27 439.58 576 351.33 576 256S528.27 72.43 448.35 19.97zM480 256c0-63.53-32.06-121.94-85.77-156.24-11.19-7.14-26.03-3.82-33.12 7.46s-3.78 26.21 7.41 33.36C408.27 165.97 432 209.11 432 256s-23.73 90.03-63.48 115.42c-11.19 7.14-14.5 22.07-7.41 33.36 6.51 10.36 21.12 15.14 33.12 7.46C447.94 377.94 480 319.54 480 256zm-141.77-76.87c-11.58-6.33-26.19-2.16-32.61 9.45-6.39 11.61-2.16 26.2 9.45 32.61C327.98 228.28 336 241.63 336 256c0 14.38-8.02 27.72-20.92 34.81-11.61 6.41-15.84 21-9.45 32.61 6.43 11.66 21.05 15.8 32.61 9.45 28.23-15.55 45.77-45 45.77-76.88s-17.54-61.32-45.78-76.86z"},child:[]}]})(t)}function dx(t){return Ar({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M201.837 53.087L177.547 21h55.676zM278.766 21l30.82 31.465L333.065 21h-54.298zm12.428 38.12L256 23.18l-35.25 35.985h70.5zm82.091 0l-23.511-30.855-23.003 30.9h46.57zM161.096 28.683L138.5 59.188h45.746zm51.248 48.242L256 196.821l43.69-119.896h-87.38zm-73.166 0l90.384 99.017-36.153-99.017h-54.231zm233.712 0h-54.23l-36.076 99.017zm-19.455 48.142l-29.059 31.838a154.298 154.298 0 0 1 85.786 138.119C410.14 380.008 340.995 449.197 256 449.197s-154.14-69.144-154.14-154.14a154.298 154.298 0 0 1 85.787-138.119L158.588 125.1a196.044 196.044 0 0 0-98.53 169.924C60.057 403.056 147.955 491 256 491c108.044 0 195.943-87.899 195.943-195.943a196.044 196.044 0 0 0-98.542-169.99z"},child:[]}]})(t)}function Hv(t){return Ar({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M267.375 14.688c-17.09 6.94-30.576 17.288-38.75 29.593l-14.813-27.593c-9.017 49.344-12.52 95.085 32 109.563-10.734 36.94-17.187 73.9-20.687 110.813l-20.563-38.344c-2.848-14.713-9.618-30.698-17.343-47l-17.376 74.124c-7.214-22.468-16.496-44.677-28.47-66.47 24.46-43.217 16.134-70.568-31.093-79.28-.515 3.04-.56 9.344-.56 9.344l-19.876-8.75L87.5 100.53l-9.344-4.655c-5.433 42.254-.12 74.946 46.625 72.094 3.705 6.717 7.128 13.47 10.314 20.28L29.22 156.312c31.263 45.247 64.173 82.76 112.53 47.094 10.985 26.656 18.485 53.944 23.75 81.72l-64.78-40.188c12.872 36.068 28.203 67.286 66.936 52.437 1.237 7.446 2.306 14.926 3.28 22.438h18.876c-2.757-21.95-6.533-43.82-11.906-65.5 8.208-4.095 14.35-8.853 18.75-14.188 3.693 11.197 11.61 19.643 26.438 23.594-1.097 18.71-1.506 37.414-1.438 56.092h18.688c-.014-4.07-.003-8.12.03-12.187 41.888-6.813 39.48-42.478 32.407-81.188l-31.967 59.625c.765-23.7 2.492-47.326 5.593-70.906 52.515 5.043 61.144-38.783 65.125-87.78l-61.81 65.843c3.47-20.563 8.06-41.09 14-61.564 37.544 4.596 76.884-35.765 75.28-70l-12.438 7.72c-1.053-11.96-6.674-25.51-17.125-40.69-7.535 5.354-14.003 12.573-19.843 20.44L285.5 31.03l-11.688 14.595c-.32-10.47-2.17-20.77-6.437-30.938zm182.22 99.25c-4.994.008-10.98.86-18.25 2.906-13.336 3.754-27.52 12.25-22.376 37.625-24.488 13.127-45.408 31.122-62.25 53.155h-.19c.03.045.067.08.095.125-.8 1.05-1.593 2.09-2.375 3.156l23.063-76.344c-45.938 31.743-83.94 65.165-45.438 114.75-9.69 21.296-16.536 44.94-20.313 70.5h38.032c24.53-7.376 29.6-36.436 32.187-68.25l-48.155 51.282c6.766-30.55 18.424-57.235 34.406-79.47 36.727 42.145 77.18 14.898 118.033-19.81l-104.594 3.28c13.094-14.284 28.35-26.198 45.56-35.5 11.388 14.74 28.402 14.172 40.595 7.812 25.338-13.216 17.442-27.84 38.28-45.906-20.892 5.264-19.352-19.358-46.31-19.313zM152.936 338.5l26.032 154.594h143.593L348.969 338.5H152.936z"},child:[]}]})(t)}const bi={title:"Akad Nikah",location:"Masjid Islamic Center Padang Panjang",mapLink:"https://maps.app.goo.gl/fVgW4v1e6qL9A9kq7",date:"24 Agustus 2024",time:"09:00 - 10:00 WIB",icon:k.jsx(dx,{className:"text-4xl text-[#E0C9C2]"})},Qv=ee.forwardRef((t,e)=>k.jsx("div",{ref:e,className:"flex items-center justify-center p-8 border bg-[#F4ECE8] border-gray-300 shadow-lg h-full w-full",children:k.jsxs("div",{className:"flex flex-col items-center justify-center text-center",children:[k.jsx("h1",{className:"text-3xl font-bold mb-5 font-playfair",children:"Save The Date"}),k.jsx("div",{className:"w-20 h-[1px] bg-gray-400 mb-5"}),k.jsx("div",{className:"relative p-4 shadow-md border border-gray-300 bg-white rounded-t-full",children:k.jsxs("div",{className:"bg-white mt-20",children:[k.jsxs("div",{className:"flex flex-col items-center",children:[k.jsx("h2",{className:"text-4xl font-semibold font-playfair mb-8",children:bi.title}),k.jsx("div",{className:"mb-6",children:bi.icon}),k.jsx("p",{className:"text-2xl mb-3 font-serif",children:bi.location}),k.jsx("p",{className:"text-xl mb-3 font-serif",children:bi.date}),k.jsx("p",{className:"text-xl mb-16 font-serif",children:bi.time})]}),k.jsx("div",{children:k.jsx("button",{className:"bg-[#E0C9C2] text-black btn btn-wide border border-gray-300 rounded-lg p-2 mb-10",children:k.jsxs("a",{href:bi.mapLink,target:"_blank",rel:"noopener noreferrer",className:"flex items-center",children:["Buka di Google Maps",k.jsx(_d,{className:"ml-2 text-2xl"})]})})})]})})]})}));Qv.displayName="AgendaWeddContract";const Lr={title:"Resepsi Pernikahan I",location:"Rumah Keluarga Sherly",locationDetail:"JL. A R Hakim Balai-Balai Padang Panjang Barat",mapLink:"https://maps.app.goo.gl/vS93X6Y4bkUkqxGe7",date:"24 Agustus 2024",time:"11:00 - 16:00 WIB",icon:k.jsx(Hv,{className:"text-xl text-[#E0C9C2]"})},Or={title:"Resepsi Pernikahan II",location:"Gedung Engku Syafe'i",mapLink:"https://maps.app.goo.gl/RitypTG4tTfu9QMA7",locationDetail:"BBPMP SUMBAR, Komplek Perguruan Tinggi UNP, Air Tawar Bar., Kec. Padang Utara",date:"25 Agustus 2024",time:"11:00 - 14:00 WIB",icon:k.jsx(Hv,{className:"text-xl text-[#E0C9C2]"})},Yv=ee.forwardRef((t,e)=>k.jsx("div",{ref:e,className:"flex items-center justify-center p-8 border bg-[#F4ECE8] border-gray-300 shadow-lg h-full w-full",children:k.jsxs("div",{className:"flex flex-col items-center justify-center text-center",children:[k.jsx("h1",{className:"text-3xl font-bold mb-5 font-playfair",children:"Save The Date"}),k.jsx("div",{className:"w-20 h-[1px] bg-gray-400 mb-5"}),k.jsx("div",{className:"relative p-4 shadow-md border border-gray-300 bg-white rounded-t-3xl  w-72",children:k.jsxs("div",{className:"flex flex-col items-center",children:[k.jsx("h2",{className:"text-2xl font-semibold font-playfair mb-2",children:Lr.title}),k.jsx("div",{className:"mb-2",children:Lr.icon}),k.jsx("p",{className:"text-xs mb-1 font-semibold font-serif",children:Lr.location}),k.jsx("p",{className:"text-xs mb-1 mx-10 font-serif",children:Lr.locationDetail}),k.jsx("p",{className:"text-xs mb-1 font-serif",children:Lr.date}),k.jsx("p",{className:"text-xs mb-5 font-serif",children:Lr.time}),k.jsx("button",{className:"bg-[#E0C9C2] text-black btn btn-wide border border-gray-300 rounded-lg p-2 mb-1",children:k.jsxs("a",{href:Lr.mapLink,target:"_blank",rel:"noopener noreferrer",className:"flex items-center",children:["Buka di Google Maps",k.jsx(_d,{className:"ml-2 text-2xl"})]})})]})}),k.jsx("div",{className:"relative p-4 shadow-md border border-gray-300 bg-white rounded-b-3xl w-72  mt-5",children:k.jsxs("div",{className:"flex flex-col items-center",children:[k.jsx("h2",{className:"text-2xl font-semibold font-playfair mb-2",children:Or.title}),k.jsx("div",{className:"mb-2",children:Or.icon}),k.jsx("p",{className:"text-xs mb-1 font-semibold font-serif",children:Or.location}),k.jsx("p",{className:"text-xs mb-1 mx-5 font-serif",children:Or.locationDetail}),k.jsx("p",{className:"text-xs mb-1 font-serif",children:Or.date}),k.jsx("p",{className:"text-xs mb-5 font-serif",children:Or.time}),k.jsx("button",{className:"bg-[#E0C9C2] text-black btn btn-wide border border-gray-300 rounded-lg p-2",children:k.jsxs("a",{href:Or.mapLink,target:"_blank",rel:"noopener noreferrer",className:"flex items-center",children:["Buka di Google Maps",k.jsx(_d,{className:"ml-2 text-2xl"})]})})]})})]})}));Yv.displayName="AgendaWeddReception";const fx="/undang-aku/assets/illustration-DqdqqhmN.png",Xv=ee.forwardRef((t,e)=>k.jsxs("div",{ref:e,className:"flex flex-col items-center justify-center p-8 border bg-[#F4ECE8] border-gray-300 shadow-lg h-full w-full",children:[k.jsxs("p",{className:"text-center text-lg font-serif leading-relaxed mt-24 mb-10",children:["***",k.jsx("br",{}),"Hari ini kau membuka buku.",k.jsx("br",{}),"Tidak ada susunan kata.",k.jsx("br",{}),"Melainkan semerbak aroma dari hamparan bunga.",k.jsx("br",{}),"Di halaman kedua kau bertanya, orang gila mana yang menanam mawar merah di alenia pertama.",k.jsx("br",{}),"Tapi kau tetap membaca.",k.jsx("br",{}),"***"]}),k.jsx("img",{src:fx,alt:"Ilustration Image",className:"max-w-[200px] h-auto mx-auto"})]}));Xv.displayName="Poem";const px="/undang-aku/assets/ocbc-logo-BvNnMprH.jpg",mx="/undang-aku/assets/bni-logo-C7LRVx0C.png",gx="/undang-aku/assets/bri-logo-1iw9aMQc.png",yx="/undang-aku/assets/gopay-logo-D99SnMz1.png",Jv=ee.forwardRef((t,e)=>{const n=s=>{navigator.clipboard.writeText(s),alert("Alamat berhasil dicopy: "+s)},r=s=>{navigator.clipboard.writeText(s),alert("No Akun berhasil dicopy: "+s)},i=({accountLogo:s,accountNumber:o,accountType:l})=>k.jsxs("div",{className:"border p-4 rounded-lg mb-4 flex items-center justify-between bg-white",children:[k.jsx("img",{src:s,alt:"Bank Logo",className:"w-10"}),k.jsx("div",{className:"flex items-center justify-center",children:k.jsxs("div",{children:[k.jsxs("h3",{className:"text-xs font-semibold",children:[l,":"]}),k.jsx("p",{className:"text-xs font-semibold",children:o})]})}),k.jsx(ly,{className:"cursor-pointer text-gray-500",onClick:()=>r(o)})]});return k.jsx("div",{ref:e,className:"flex flex-col items-center justify-center p-8 border bg-[#F4ECE8] border-gray-300 shadow-lg h-full w-full",children:k.jsxs("div",{className:"flex flex-col items-center justify-center text-center",children:[k.jsx("h1",{className:"text-3xl font-bold mb-5 font-playfair",children:"Hadiah Pernikahan"}),k.jsx("div",{className:"w-20 h-[1px] bg-gray-400 mb-5"}),k.jsxs("div",{className:"mb-2",children:[k.jsx("h2",{className:"text-2xl font-semibold mb-4 font-playfair",children:"Tranfer Bank / E-Wallet"}),k.jsx(i,{accountLogo:px,accountNumber:"6938-1398-9623",accountType:"Thariq Ramadhan"}),k.jsx(i,{accountLogo:mx,accountNumber:"0455053170",accountType:"Thariq Ramadhan"}),k.jsx(i,{accountLogo:gx,accountNumber:"5460-0101-3623-539",accountType:"Sherly Ekaputri"}),k.jsx(i,{accountLogo:yx,accountNumber:"081266654235",accountType:"Sherly Ekaputri"})]}),k.jsx("div",{className:"w-20 h-[1px] bg-gray-400 mb-2"}),k.jsxs("div",{children:[k.jsx("h2",{className:"text-2xl font-semibold m-4 font-playfair",children:"Kirim ke Alamat"}),k.jsxs("div",{className:"border bg-white p-3 rounded-lg mb-4 flex items-center justify-between text-xs",children:[k.jsx("p",{children:"Rumah Keluarga Sherly, JL. A R Hakim Balai-Balai Padang Panjang Barat"}),k.jsx(ly,{className:"cursor-pointer text-gray-500",onClick:()=>n("123 Main Street, City, Country")})]})]})]})})});Jv.displayName="Gift";function _x(t){return Ar({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{fill:"none",strokeLinecap:"round",strokeMiterlimit:"10",strokeWidth:"32",d:"M87.48 380c1.2-4.38-1.43-10.47-3.94-14.86a42.63 42.63 0 0 0-2.54-3.8 199.81 199.81 0 0 1-33-110C47.64 139.09 140.72 48 255.82 48 356.2 48 440 117.54 459.57 209.85a199 199 0 0 1 4.43 41.64c0 112.41-89.49 204.93-204.59 204.93-18.31 0-43-4.6-56.47-8.37s-26.92-8.77-30.39-10.11a31.14 31.14 0 0 0-11.13-2.07 30.7 30.7 0 0 0-12.08 2.43L81.5 462.78a15.92 15.92 0 0 1-4.66 1.22 9.61 9.61 0 0 1-9.58-9.74 15.85 15.85 0 0 1 .6-3.29z"},child:[]},{tag:"circle",attr:{cx:"160",cy:"256",r:"32"},child:[]},{tag:"circle",attr:{cx:"256",cy:"256",r:"32"},child:[]},{tag:"circle",attr:{cx:"352",cy:"256",r:"32"},child:[]}]})(t)}var uy={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zv=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},vx=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],l=t[n++],u=((i&7)<<18|(s&63)<<12|(o&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},ew={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,l=o?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,f=s>>2,m=(s&3)<<4|l>>4;let v=(l&15)<<2|c>>6,A=c&63;u||(A=64,o||(v=64)),r.push(n[f],n[m],n[v],n[A])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Zv(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):vx(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],l=i<t.length?n[t.charAt(i)]:0;++i;const c=i<t.length?n[t.charAt(i)]:64;++i;const m=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||l==null||c==null||m==null)throw new wx;const v=s<<2|l>>4;if(r.push(v),c!==64){const A=l<<4&240|c>>2;if(r.push(A),m!==64){const D=c<<6&192|m;r.push(D)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class wx extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Ex=function(t){const e=Zv(t);return ew.encodeByteArray(e,!0)},yu=function(t){return Ex(t).replace(/\./g,"")},Ix=function(t){try{return ew.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function _u(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!Tx(n)||(t[n]=_u(t[n],e[n]));return t}function Tx(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sx(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xx=()=>Sx().__FIREBASE_DEFAULTS__,Px=()=>{if(typeof process>"u"||typeof uy>"u")return;const t=uy.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},Ax=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Ix(t[1]);return e&&JSON.parse(e)},tw=()=>{try{return xx()||Px()||Ax()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},nw=()=>{var t;return(t=tw())===null||t===void 0?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rx{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cx(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[yu(JSON.stringify(n)),yu(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vu(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function kx(){var t;const e=(t=tw())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function rw(){return typeof window<"u"||iw()}function iw(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function sw(){return!kx()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ow(){try{return typeof indexedDB=="object"}catch{return!1}}function bx(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dx="FirebaseError";class wi extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=Dx,Object.setPrototypeOf(this,wi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Yu.prototype.create)}}class Yu{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?Vx(s,r):"Error",l=`${this.serviceName}: ${o} (${i}).`;return new wi(i,l,r)}}function Vx(t,e){return t.replace(Nx,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const Nx=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cy(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function ia(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(hy(s)&&hy(o)){if(!ia(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function hy(t){return t!==null&&typeof t=="object"}function Mx(t,e){const n=new Lx(t,e);return n.subscribe.bind(n)}class Lx{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");Ox(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=ph),i.error===void 0&&(i.error=ph),i.complete===void 0&&(i.complete=ph);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Ox(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function ph(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function je(t){return t&&t._delegate?t._delegate:t}class ai{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fx{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new Rx;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(jx(e))try{this.getOrInitializeService({instanceIdentifier:zr})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=zr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=zr){return this.instances.has(e)}getOptions(e=zr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(s);r===l&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Bx(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=zr){return this.component?this.component.multipleInstances?e:zr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Bx(t){return t===zr?void 0:t}function jx(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aw{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new Fx(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $f=[];var ie;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ie||(ie={}));const lw={debug:ie.DEBUG,verbose:ie.VERBOSE,info:ie.INFO,warn:ie.WARN,error:ie.ERROR,silent:ie.SILENT},zx=ie.INFO,Ux={[ie.DEBUG]:"log",[ie.VERBOSE]:"log",[ie.INFO]:"info",[ie.WARN]:"warn",[ie.ERROR]:"error"},$x=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=Ux[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class qf{constructor(e){this.name=e,this._logLevel=zx,this._logHandler=$x,this._userLogHandler=null,$f.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ie))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?lw[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ie.DEBUG,...e),this._logHandler(this,ie.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ie.VERBOSE,...e),this._logHandler(this,ie.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ie.INFO,...e),this._logHandler(this,ie.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ie.WARN,...e),this._logHandler(this,ie.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ie.ERROR,...e),this._logHandler(this,ie.ERROR,...e)}}function qx(t){$f.forEach(e=>{e.setLogLevel(t)})}function Gx(t,e){for(const n of $f){let r=null;e&&e.level&&(r=lw[e.level]),t===null?n.userLogHandler=null:n.userLogHandler=(i,s,...o)=>{const l=o.map(u=>{if(u==null)return null;if(typeof u=="string")return u;if(typeof u=="number"||typeof u=="boolean")return u.toString();if(u instanceof Error)return u.message;try{return JSON.stringify(u)}catch{return null}}).filter(u=>u).join(" ");s>=(r??i.logLevel)&&t({level:ie[s].toLowerCase(),message:l,args:o,type:i.name})}}}const Wx=(t,e)=>e.some(n=>t instanceof n);let dy,fy;function Kx(){return dy||(dy=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Hx(){return fy||(fy=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const uw=new WeakMap,vd=new WeakMap,cw=new WeakMap,mh=new WeakMap,Gf=new WeakMap;function Qx(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(cr(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&uw.set(n,t)}).catch(()=>{}),Gf.set(e,t),e}function Yx(t){if(vd.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});vd.set(t,e)}let wd={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return vd.get(t);if(e==="objectStoreNames")return t.objectStoreNames||cw.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return cr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function Xx(t){wd=t(wd)}function Jx(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(gh(this),e,...n);return cw.set(r,e.sort?e.sort():[e]),cr(r)}:Hx().includes(t)?function(...e){return t.apply(gh(this),e),cr(uw.get(this))}:function(...e){return cr(t.apply(gh(this),e))}}function Zx(t){return typeof t=="function"?Jx(t):(t instanceof IDBTransaction&&Yx(t),Wx(t,Kx())?new Proxy(t,wd):t)}function cr(t){if(t instanceof IDBRequest)return Qx(t);if(mh.has(t))return mh.get(t);const e=Zx(t);return e!==t&&(mh.set(t,e),Gf.set(e,t)),e}const gh=t=>Gf.get(t);function eP(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),l=cr(o);return r&&o.addEventListener("upgradeneeded",u=>{r(cr(o.result),u.oldVersion,u.newVersion,cr(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),l.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),l}const tP=["get","getKey","getAll","getAllKeys","count"],nP=["put","add","delete","clear"],yh=new Map;function py(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(yh.get(e))return yh.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=nP.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||tP.includes(n)))return;const s=async function(o,...l){const u=this.transaction(o,i?"readwrite":"readonly");let c=u.store;return r&&(c=c.index(l.shift())),(await Promise.all([c[n](...l),i&&u.done]))[0]};return yh.set(e,s),s}Xx(t=>({...t,get:(e,n,r)=>py(e,n)||t.get(e,n,r),has:(e,n)=>!!py(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rP{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(iP(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function iP(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const wu="@firebase/app",Ed="0.10.7";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const li=new qf("@firebase/app"),sP="@firebase/app-compat",oP="@firebase/analytics-compat",aP="@firebase/analytics",lP="@firebase/app-check-compat",uP="@firebase/app-check",cP="@firebase/auth",hP="@firebase/auth-compat",dP="@firebase/database",fP="@firebase/database-compat",pP="@firebase/functions",mP="@firebase/functions-compat",gP="@firebase/installations",yP="@firebase/installations-compat",_P="@firebase/messaging",vP="@firebase/messaging-compat",wP="@firebase/performance",EP="@firebase/performance-compat",IP="@firebase/remote-config",TP="@firebase/remote-config-compat",SP="@firebase/storage",xP="@firebase/storage-compat",PP="@firebase/firestore",AP="@firebase/vertexai-preview",RP="@firebase/firestore-compat",CP="firebase",kP="10.12.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pr="[DEFAULT]",bP={[wu]:"fire-core",[sP]:"fire-core-compat",[aP]:"fire-analytics",[oP]:"fire-analytics-compat",[uP]:"fire-app-check",[lP]:"fire-app-check-compat",[cP]:"fire-auth",[hP]:"fire-auth-compat",[dP]:"fire-rtdb",[fP]:"fire-rtdb-compat",[pP]:"fire-fn",[mP]:"fire-fn-compat",[gP]:"fire-iid",[yP]:"fire-iid-compat",[_P]:"fire-fcm",[vP]:"fire-fcm-compat",[wP]:"fire-perf",[EP]:"fire-perf-compat",[IP]:"fire-rc",[TP]:"fire-rc-compat",[SP]:"fire-gcs",[xP]:"fire-gcs-compat",[PP]:"fire-fst",[RP]:"fire-fst-compat",[AP]:"fire-vertex","fire-js":"fire-js",[CP]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mr=new Map,ms=new Map,gs=new Map;function sa(t,e){try{t.container.addComponent(e)}catch(n){li.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function hw(t,e){t.container.addOrOverwriteComponent(e)}function ys(t){const e=t.name;if(gs.has(e))return li.debug(`There were multiple attempts to register component ${e}.`),!1;gs.set(e,t);for(const n of mr.values())sa(n,t);for(const n of ms.values())sa(n,t);return!0}function dw(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function DP(t,e,n=pr){dw(t,e).clearInstance(n)}function fw(t){return t.options!==void 0}function VP(t){return t.settings!==void 0}function NP(){gs.clear()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MP={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Wt=new Yu("app","Firebase",MP);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let pw=class{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ai("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Wt.create("app-deleted",{appName:this._name})}};/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LP extends pw{constructor(e,n,r,i){const s=n.automaticDataCollectionEnabled!==void 0?n.automaticDataCollectionEnabled:!1,o={name:r,automaticDataCollectionEnabled:s};if(e.apiKey!==void 0)super(e,o,i);else{const l=e;super(l.options,o,i)}this._serverConfig=Object.assign({automaticDataCollectionEnabled:s},n),this._finalizationRegistry=null,typeof FinalizationRegistry<"u"&&(this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,n.releaseOnDeref=void 0,Cn(wu,Ed,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(e){this.isDeleted||(this._refCount++,e!==void 0&&this._finalizationRegistry!==null&&this._finalizationRegistry.register(e,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){Hf(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw Wt.create("server-app-deleted")}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wf=kP;function Kf(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:pr,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Wt.create("bad-app-name",{appName:String(i)});if(n||(n=nw()),!n)throw Wt.create("no-options");const s=mr.get(i);if(s){if(ia(n,s.options)&&ia(r,s.config))return s;throw Wt.create("duplicate-app",{appName:i})}const o=new aw(i);for(const u of gs.values())o.addComponent(u);const l=new pw(n,r,o);return mr.set(i,l),l}function OP(t,e){if(rw()&&!iw())throw Wt.create("invalid-server-app-environment");e.automaticDataCollectionEnabled===void 0&&(e.automaticDataCollectionEnabled=!1);let n;fw(t)?n=t.options:n=t;const r=Object.assign(Object.assign({},e),n);r.releaseOnDeref!==void 0&&delete r.releaseOnDeref;const i=c=>[...c].reduce((f,m)=>Math.imul(31,f)+m.charCodeAt(0)|0,0);if(e.releaseOnDeref!==void 0&&typeof FinalizationRegistry>"u")throw Wt.create("finalization-registry-not-supported",{});const s=""+i(JSON.stringify(r)),o=ms.get(s);if(o)return o.incRefCount(e.releaseOnDeref),o;const l=new aw(s);for(const c of gs.values())l.addComponent(c);const u=new LP(n,e,s,l);return ms.set(s,u),u}function FP(t=pr){const e=mr.get(t);if(!e&&t===pr&&nw())return Kf();if(!e)throw Wt.create("no-app",{appName:t});return e}function BP(){return Array.from(mr.values())}async function Hf(t){let e=!1;const n=t.name;mr.has(n)?(e=!0,mr.delete(n)):ms.has(n)&&t.decRefCount()<=0&&(ms.delete(n),e=!0),e&&(await Promise.all(t.container.getProviders().map(r=>r.delete())),t.isDeleted=!0)}function Cn(t,e,n){var r;let i=(r=bP[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const l=[`Unable to register library "${i}" with version "${e}":`];s&&l.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&l.push("and"),o&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),li.warn(l.join(" "));return}ys(new ai(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}function mw(t,e){if(t!==null&&typeof t!="function")throw Wt.create("invalid-log-argument");Gx(t,e)}function gw(t){qx(t)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jP="firebase-heartbeat-database",zP=1,oa="firebase-heartbeat-store";let _h=null;function yw(){return _h||(_h=eP(jP,zP,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(oa)}catch(n){console.warn(n)}}}}).catch(t=>{throw Wt.create("idb-open",{originalErrorMessage:t.message})})),_h}async function UP(t){try{const n=(await yw()).transaction(oa),r=await n.objectStore(oa).get(_w(t));return await n.done,r}catch(e){if(e instanceof wi)li.warn(e.message);else{const n=Wt.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});li.warn(n.message)}}}async function my(t,e){try{const r=(await yw()).transaction(oa,"readwrite");await r.objectStore(oa).put(e,_w(t)),await r.done}catch(n){if(n instanceof wi)li.warn(n.message);else{const r=Wt.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});li.warn(r.message)}}}function _w(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $P=1024,qP=30*24*60*60*1e3;class GP{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new KP(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=gy();if(!(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)))return this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const l=new Date(o.date).valueOf();return Date.now()-l<=qP}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var e;if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=gy(),{heartbeatsToSend:r,unsentEntries:i}=WP(this._heartbeatsCache.heartbeats),s=yu(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}}function gy(){return new Date().toISOString().substring(0,10)}function WP(t,e=$P){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),yy(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),yy(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class KP{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return ow()?bx().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await UP(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return my(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return my(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function yy(t){return yu(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HP(t){ys(new ai("platform-logger",e=>new rP(e),"PRIVATE")),ys(new ai("heartbeat",e=>new GP(e),"PRIVATE")),Cn(wu,Ed,t),Cn(wu,Ed,"esm2017"),Cn("fire-js","")}HP("");const QP=Object.freeze(Object.defineProperty({__proto__:null,FirebaseError:wi,SDK_VERSION:Wf,_DEFAULT_ENTRY_NAME:pr,_addComponent:sa,_addOrOverwriteComponent:hw,_apps:mr,_clearComponents:NP,_components:gs,_getProvider:dw,_isFirebaseApp:fw,_isFirebaseServerApp:VP,_registerComponent:ys,_removeServiceInstance:DP,_serverApps:ms,deleteApp:Hf,getApp:FP,getApps:BP,initializeApp:Kf,initializeServerApp:OP,onLog:mw,registerVersion:Cn,setLogLevel:gw},Symbol.toStringTag,{value:"Module"}));var _y=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ti,vw;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(_,y){function w(){}w.prototype=y.prototype,_.D=y.prototype,_.prototype=new w,_.prototype.constructor=_,_.C=function(S,R,b){for(var P=Array(arguments.length-2),Se=2;Se<arguments.length;Se++)P[Se-2]=arguments[Se];return y.prototype[R].apply(S,P)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(_,y,w){w||(w=0);var S=Array(16);if(typeof y=="string")for(var R=0;16>R;++R)S[R]=y.charCodeAt(w++)|y.charCodeAt(w++)<<8|y.charCodeAt(w++)<<16|y.charCodeAt(w++)<<24;else for(R=0;16>R;++R)S[R]=y[w++]|y[w++]<<8|y[w++]<<16|y[w++]<<24;y=_.g[0],w=_.g[1],R=_.g[2];var b=_.g[3],P=y+(b^w&(R^b))+S[0]+3614090360&4294967295;y=w+(P<<7&4294967295|P>>>25),P=b+(R^y&(w^R))+S[1]+3905402710&4294967295,b=y+(P<<12&4294967295|P>>>20),P=R+(w^b&(y^w))+S[2]+606105819&4294967295,R=b+(P<<17&4294967295|P>>>15),P=w+(y^R&(b^y))+S[3]+3250441966&4294967295,w=R+(P<<22&4294967295|P>>>10),P=y+(b^w&(R^b))+S[4]+4118548399&4294967295,y=w+(P<<7&4294967295|P>>>25),P=b+(R^y&(w^R))+S[5]+1200080426&4294967295,b=y+(P<<12&4294967295|P>>>20),P=R+(w^b&(y^w))+S[6]+2821735955&4294967295,R=b+(P<<17&4294967295|P>>>15),P=w+(y^R&(b^y))+S[7]+4249261313&4294967295,w=R+(P<<22&4294967295|P>>>10),P=y+(b^w&(R^b))+S[8]+1770035416&4294967295,y=w+(P<<7&4294967295|P>>>25),P=b+(R^y&(w^R))+S[9]+2336552879&4294967295,b=y+(P<<12&4294967295|P>>>20),P=R+(w^b&(y^w))+S[10]+4294925233&4294967295,R=b+(P<<17&4294967295|P>>>15),P=w+(y^R&(b^y))+S[11]+2304563134&4294967295,w=R+(P<<22&4294967295|P>>>10),P=y+(b^w&(R^b))+S[12]+1804603682&4294967295,y=w+(P<<7&4294967295|P>>>25),P=b+(R^y&(w^R))+S[13]+4254626195&4294967295,b=y+(P<<12&4294967295|P>>>20),P=R+(w^b&(y^w))+S[14]+2792965006&4294967295,R=b+(P<<17&4294967295|P>>>15),P=w+(y^R&(b^y))+S[15]+1236535329&4294967295,w=R+(P<<22&4294967295|P>>>10),P=y+(R^b&(w^R))+S[1]+4129170786&4294967295,y=w+(P<<5&4294967295|P>>>27),P=b+(w^R&(y^w))+S[6]+3225465664&4294967295,b=y+(P<<9&4294967295|P>>>23),P=R+(y^w&(b^y))+S[11]+643717713&4294967295,R=b+(P<<14&4294967295|P>>>18),P=w+(b^y&(R^b))+S[0]+3921069994&4294967295,w=R+(P<<20&4294967295|P>>>12),P=y+(R^b&(w^R))+S[5]+3593408605&4294967295,y=w+(P<<5&4294967295|P>>>27),P=b+(w^R&(y^w))+S[10]+38016083&4294967295,b=y+(P<<9&4294967295|P>>>23),P=R+(y^w&(b^y))+S[15]+3634488961&4294967295,R=b+(P<<14&4294967295|P>>>18),P=w+(b^y&(R^b))+S[4]+3889429448&4294967295,w=R+(P<<20&4294967295|P>>>12),P=y+(R^b&(w^R))+S[9]+568446438&4294967295,y=w+(P<<5&4294967295|P>>>27),P=b+(w^R&(y^w))+S[14]+3275163606&4294967295,b=y+(P<<9&4294967295|P>>>23),P=R+(y^w&(b^y))+S[3]+4107603335&4294967295,R=b+(P<<14&4294967295|P>>>18),P=w+(b^y&(R^b))+S[8]+1163531501&4294967295,w=R+(P<<20&4294967295|P>>>12),P=y+(R^b&(w^R))+S[13]+2850285829&4294967295,y=w+(P<<5&4294967295|P>>>27),P=b+(w^R&(y^w))+S[2]+4243563512&4294967295,b=y+(P<<9&4294967295|P>>>23),P=R+(y^w&(b^y))+S[7]+1735328473&4294967295,R=b+(P<<14&4294967295|P>>>18),P=w+(b^y&(R^b))+S[12]+2368359562&4294967295,w=R+(P<<20&4294967295|P>>>12),P=y+(w^R^b)+S[5]+4294588738&4294967295,y=w+(P<<4&4294967295|P>>>28),P=b+(y^w^R)+S[8]+2272392833&4294967295,b=y+(P<<11&4294967295|P>>>21),P=R+(b^y^w)+S[11]+1839030562&4294967295,R=b+(P<<16&4294967295|P>>>16),P=w+(R^b^y)+S[14]+4259657740&4294967295,w=R+(P<<23&4294967295|P>>>9),P=y+(w^R^b)+S[1]+2763975236&4294967295,y=w+(P<<4&4294967295|P>>>28),P=b+(y^w^R)+S[4]+1272893353&4294967295,b=y+(P<<11&4294967295|P>>>21),P=R+(b^y^w)+S[7]+4139469664&4294967295,R=b+(P<<16&4294967295|P>>>16),P=w+(R^b^y)+S[10]+3200236656&4294967295,w=R+(P<<23&4294967295|P>>>9),P=y+(w^R^b)+S[13]+681279174&4294967295,y=w+(P<<4&4294967295|P>>>28),P=b+(y^w^R)+S[0]+3936430074&4294967295,b=y+(P<<11&4294967295|P>>>21),P=R+(b^y^w)+S[3]+3572445317&4294967295,R=b+(P<<16&4294967295|P>>>16),P=w+(R^b^y)+S[6]+76029189&4294967295,w=R+(P<<23&4294967295|P>>>9),P=y+(w^R^b)+S[9]+3654602809&4294967295,y=w+(P<<4&4294967295|P>>>28),P=b+(y^w^R)+S[12]+3873151461&4294967295,b=y+(P<<11&4294967295|P>>>21),P=R+(b^y^w)+S[15]+530742520&4294967295,R=b+(P<<16&4294967295|P>>>16),P=w+(R^b^y)+S[2]+3299628645&4294967295,w=R+(P<<23&4294967295|P>>>9),P=y+(R^(w|~b))+S[0]+4096336452&4294967295,y=w+(P<<6&4294967295|P>>>26),P=b+(w^(y|~R))+S[7]+1126891415&4294967295,b=y+(P<<10&4294967295|P>>>22),P=R+(y^(b|~w))+S[14]+2878612391&4294967295,R=b+(P<<15&4294967295|P>>>17),P=w+(b^(R|~y))+S[5]+4237533241&4294967295,w=R+(P<<21&4294967295|P>>>11),P=y+(R^(w|~b))+S[12]+1700485571&4294967295,y=w+(P<<6&4294967295|P>>>26),P=b+(w^(y|~R))+S[3]+2399980690&4294967295,b=y+(P<<10&4294967295|P>>>22),P=R+(y^(b|~w))+S[10]+4293915773&4294967295,R=b+(P<<15&4294967295|P>>>17),P=w+(b^(R|~y))+S[1]+2240044497&4294967295,w=R+(P<<21&4294967295|P>>>11),P=y+(R^(w|~b))+S[8]+1873313359&4294967295,y=w+(P<<6&4294967295|P>>>26),P=b+(w^(y|~R))+S[15]+4264355552&4294967295,b=y+(P<<10&4294967295|P>>>22),P=R+(y^(b|~w))+S[6]+2734768916&4294967295,R=b+(P<<15&4294967295|P>>>17),P=w+(b^(R|~y))+S[13]+1309151649&4294967295,w=R+(P<<21&4294967295|P>>>11),P=y+(R^(w|~b))+S[4]+4149444226&4294967295,y=w+(P<<6&4294967295|P>>>26),P=b+(w^(y|~R))+S[11]+3174756917&4294967295,b=y+(P<<10&4294967295|P>>>22),P=R+(y^(b|~w))+S[2]+718787259&4294967295,R=b+(P<<15&4294967295|P>>>17),P=w+(b^(R|~y))+S[9]+3951481745&4294967295,_.g[0]=_.g[0]+y&4294967295,_.g[1]=_.g[1]+(R+(P<<21&4294967295|P>>>11))&4294967295,_.g[2]=_.g[2]+R&4294967295,_.g[3]=_.g[3]+b&4294967295}r.prototype.u=function(_,y){y===void 0&&(y=_.length);for(var w=y-this.blockSize,S=this.B,R=this.h,b=0;b<y;){if(R==0)for(;b<=w;)i(this,_,b),b+=this.blockSize;if(typeof _=="string"){for(;b<y;)if(S[R++]=_.charCodeAt(b++),R==this.blockSize){i(this,S),R=0;break}}else for(;b<y;)if(S[R++]=_[b++],R==this.blockSize){i(this,S),R=0;break}}this.h=R,this.o+=y},r.prototype.v=function(){var _=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);_[0]=128;for(var y=1;y<_.length-8;++y)_[y]=0;var w=8*this.o;for(y=_.length-8;y<_.length;++y)_[y]=w&255,w/=256;for(this.u(_),_=Array(16),y=w=0;4>y;++y)for(var S=0;32>S;S+=8)_[w++]=this.g[y]>>>S&255;return _};function s(_,y){var w=l;return Object.prototype.hasOwnProperty.call(w,_)?w[_]:w[_]=y(_)}function o(_,y){this.h=y;for(var w=[],S=!0,R=_.length-1;0<=R;R--){var b=_[R]|0;S&&b==y||(w[R]=b,S=!1)}this.g=w}var l={};function u(_){return-128<=_&&128>_?s(_,function(y){return new o([y|0],0>y?-1:0)}):new o([_|0],0>_?-1:0)}function c(_){if(isNaN(_)||!isFinite(_))return m;if(0>_)return F(c(-_));for(var y=[],w=1,S=0;_>=w;S++)y[S]=_/w|0,w*=4294967296;return new o(y,0)}function f(_,y){if(_.length==0)throw Error("number format error: empty string");if(y=y||10,2>y||36<y)throw Error("radix out of range: "+y);if(_.charAt(0)=="-")return F(f(_.substring(1),y));if(0<=_.indexOf("-"))throw Error('number format error: interior "-" character');for(var w=c(Math.pow(y,8)),S=m,R=0;R<_.length;R+=8){var b=Math.min(8,_.length-R),P=parseInt(_.substring(R,R+b),y);8>b?(b=c(Math.pow(y,b)),S=S.j(b).add(c(P))):(S=S.j(w),S=S.add(c(P)))}return S}var m=u(0),v=u(1),A=u(16777216);t=o.prototype,t.m=function(){if(V(this))return-F(this).m();for(var _=0,y=1,w=0;w<this.g.length;w++){var S=this.i(w);_+=(0<=S?S:4294967296+S)*y,y*=4294967296}return _},t.toString=function(_){if(_=_||10,2>_||36<_)throw Error("radix out of range: "+_);if(D(this))return"0";if(V(this))return"-"+F(this).toString(_);for(var y=c(Math.pow(_,6)),w=this,S="";;){var R=d(w,y).g;w=C(w,R.j(y));var b=((0<w.g.length?w.g[0]:w.h)>>>0).toString(_);if(w=R,D(w))return b+S;for(;6>b.length;)b="0"+b;S=b+S}},t.i=function(_){return 0>_?0:_<this.g.length?this.g[_]:this.h};function D(_){if(_.h!=0)return!1;for(var y=0;y<_.g.length;y++)if(_.g[y]!=0)return!1;return!0}function V(_){return _.h==-1}t.l=function(_){return _=C(this,_),V(_)?-1:D(_)?0:1};function F(_){for(var y=_.g.length,w=[],S=0;S<y;S++)w[S]=~_.g[S];return new o(w,~_.h).add(v)}t.abs=function(){return V(this)?F(this):this},t.add=function(_){for(var y=Math.max(this.g.length,_.g.length),w=[],S=0,R=0;R<=y;R++){var b=S+(this.i(R)&65535)+(_.i(R)&65535),P=(b>>>16)+(this.i(R)>>>16)+(_.i(R)>>>16);S=P>>>16,b&=65535,P&=65535,w[R]=P<<16|b}return new o(w,w[w.length-1]&-2147483648?-1:0)};function C(_,y){return _.add(F(y))}t.j=function(_){if(D(this)||D(_))return m;if(V(this))return V(_)?F(this).j(F(_)):F(F(this).j(_));if(V(_))return F(this.j(F(_)));if(0>this.l(A)&&0>_.l(A))return c(this.m()*_.m());for(var y=this.g.length+_.g.length,w=[],S=0;S<2*y;S++)w[S]=0;for(S=0;S<this.g.length;S++)for(var R=0;R<_.g.length;R++){var b=this.i(S)>>>16,P=this.i(S)&65535,Se=_.i(R)>>>16,bt=_.i(R)&65535;w[2*S+2*R]+=P*bt,x(w,2*S+2*R),w[2*S+2*R+1]+=b*bt,x(w,2*S+2*R+1),w[2*S+2*R+1]+=P*Se,x(w,2*S+2*R+1),w[2*S+2*R+2]+=b*Se,x(w,2*S+2*R+2)}for(S=0;S<y;S++)w[S]=w[2*S+1]<<16|w[2*S];for(S=y;S<2*y;S++)w[S]=0;return new o(w,0)};function x(_,y){for(;(_[y]&65535)!=_[y];)_[y+1]+=_[y]>>>16,_[y]&=65535,y++}function T(_,y){this.g=_,this.h=y}function d(_,y){if(D(y))throw Error("division by zero");if(D(_))return new T(m,m);if(V(_))return y=d(F(_),y),new T(F(y.g),F(y.h));if(V(y))return y=d(_,F(y)),new T(F(y.g),y.h);if(30<_.g.length){if(V(_)||V(y))throw Error("slowDivide_ only works with positive integers.");for(var w=v,S=y;0>=S.l(_);)w=g(w),S=g(S);var R=I(w,1),b=I(S,1);for(S=I(S,2),w=I(w,2);!D(S);){var P=b.add(S);0>=P.l(_)&&(R=R.add(w),b=P),S=I(S,1),w=I(w,1)}return y=C(_,R.j(y)),new T(R,y)}for(R=m;0<=_.l(y);){for(w=Math.max(1,Math.floor(_.m()/y.m())),S=Math.ceil(Math.log(w)/Math.LN2),S=48>=S?1:Math.pow(2,S-48),b=c(w),P=b.j(y);V(P)||0<P.l(_);)w-=S,b=c(w),P=b.j(y);D(b)&&(b=v),R=R.add(b),_=C(_,P)}return new T(R,_)}t.A=function(_){return d(this,_).h},t.and=function(_){for(var y=Math.max(this.g.length,_.g.length),w=[],S=0;S<y;S++)w[S]=this.i(S)&_.i(S);return new o(w,this.h&_.h)},t.or=function(_){for(var y=Math.max(this.g.length,_.g.length),w=[],S=0;S<y;S++)w[S]=this.i(S)|_.i(S);return new o(w,this.h|_.h)},t.xor=function(_){for(var y=Math.max(this.g.length,_.g.length),w=[],S=0;S<y;S++)w[S]=this.i(S)^_.i(S);return new o(w,this.h^_.h)};function g(_){for(var y=_.g.length+1,w=[],S=0;S<y;S++)w[S]=_.i(S)<<1|_.i(S-1)>>>31;return new o(w,_.h)}function I(_,y){var w=y>>5;y%=32;for(var S=_.g.length-w,R=[],b=0;b<S;b++)R[b]=0<y?_.i(b+w)>>>y|_.i(b+w+1)<<32-y:_.i(b+w);return new o(R,_.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,vw=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=f,ti=o}).apply(typeof _y<"u"?_y:typeof self<"u"?self:typeof window<"u"?window:{});var _l=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ww,Ew,Io,Iw,Ll,Id,Tw,Sw,xw;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,h,p){return a==Array.prototype||a==Object.prototype||(a[h]=p.value),a};function n(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof _l=="object"&&_l];for(var h=0;h<a.length;++h){var p=a[h];if(p&&p.Math==Math)return p}throw Error("Cannot find global object")}var r=n(this);function i(a,h){if(h)e:{var p=r;a=a.split(".");for(var E=0;E<a.length-1;E++){var N=a[E];if(!(N in p))break e;p=p[N]}a=a[a.length-1],E=p[a],h=h(E),h!=E&&h!=null&&e(p,a,{configurable:!0,writable:!0,value:h})}}function s(a,h){a instanceof String&&(a+="");var p=0,E=!1,N={next:function(){if(!E&&p<a.length){var O=p++;return{value:h(O,a[O]),done:!1}}return E=!0,{done:!0,value:void 0}}};return N[Symbol.iterator]=function(){return N},N}i("Array.prototype.values",function(a){return a||function(){return s(this,function(h,p){return p})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},l=this||self;function u(a){var h=typeof a;return h=h!="object"?h:a?Array.isArray(a)?"array":h:"null",h=="array"||h=="object"&&typeof a.length=="number"}function c(a){var h=typeof a;return h=="object"&&a!=null||h=="function"}function f(a,h,p){return a.call.apply(a.bind,arguments)}function m(a,h,p){if(!a)throw Error();if(2<arguments.length){var E=Array.prototype.slice.call(arguments,2);return function(){var N=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(N,E),a.apply(h,N)}}return function(){return a.apply(h,arguments)}}function v(a,h,p){return v=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?f:m,v.apply(null,arguments)}function A(a,h){var p=Array.prototype.slice.call(arguments,1);return function(){var E=p.slice();return E.push.apply(E,arguments),a.apply(this,E)}}function D(a,h){function p(){}p.prototype=h.prototype,a.aa=h.prototype,a.prototype=new p,a.prototype.constructor=a,a.Qb=function(E,N,O){for(var U=Array(arguments.length-2),fe=2;fe<arguments.length;fe++)U[fe-2]=arguments[fe];return h.prototype[N].apply(E,U)}}function V(a){const h=a.length;if(0<h){const p=Array(h);for(let E=0;E<h;E++)p[E]=a[E];return p}return[]}function F(a,h){for(let p=1;p<arguments.length;p++){const E=arguments[p];if(u(E)){const N=a.length||0,O=E.length||0;a.length=N+O;for(let U=0;U<O;U++)a[N+U]=E[U]}else a.push(E)}}class C{constructor(h,p){this.i=h,this.j=p,this.h=0,this.g=null}get(){let h;return 0<this.h?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function x(a){return/^[\s\xa0]*$/.test(a)}function T(){var a=l.navigator;return a&&(a=a.userAgent)?a:""}function d(a){return d[" "](a),a}d[" "]=function(){};var g=T().indexOf("Gecko")!=-1&&!(T().toLowerCase().indexOf("webkit")!=-1&&T().indexOf("Edge")==-1)&&!(T().indexOf("Trident")!=-1||T().indexOf("MSIE")!=-1)&&T().indexOf("Edge")==-1;function I(a,h,p){for(const E in a)h.call(p,a[E],E,a)}function _(a,h){for(const p in a)h.call(void 0,a[p],p,a)}function y(a){const h={};for(const p in a)h[p]=a[p];return h}const w="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function S(a,h){let p,E;for(let N=1;N<arguments.length;N++){E=arguments[N];for(p in E)a[p]=E[p];for(let O=0;O<w.length;O++)p=w[O],Object.prototype.hasOwnProperty.call(E,p)&&(a[p]=E[p])}}function R(a){var h=1;a=a.split(":");const p=[];for(;0<h&&a.length;)p.push(a.shift()),h--;return a.length&&p.push(a.join(":")),p}function b(a){l.setTimeout(()=>{throw a},0)}function P(){var a=Y;let h=null;return a.g&&(h=a.g,a.g=a.g.next,a.g||(a.h=null),h.next=null),h}class Se{constructor(){this.h=this.g=null}add(h,p){const E=bt.get();E.set(h,p),this.h?this.h.next=E:this.g=E,this.h=E}}var bt=new C(()=>new $s,a=>a.reset());class $s{constructor(){this.next=this.g=this.h=null}set(h,p){this.h=h,this.g=p,this.next=null}reset(){this.next=this.g=this.h=null}}let gn,G=!1,Y=new Se,Z=()=>{const a=l.Promise.resolve(void 0);gn=()=>{a.then(xe)}};var xe=()=>{for(var a;a=P();){try{a.h.call(a.g)}catch(p){b(p)}var h=bt;h.j(a),100>h.h&&(h.h++,a.next=h.g,h.g=a)}G=!1};function de(){this.s=this.s,this.C=this.C}de.prototype.s=!1,de.prototype.ma=function(){this.s||(this.s=!0,this.N())},de.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Ne(a,h){this.type=a,this.g=this.target=h,this.defaultPrevented=!1}Ne.prototype.h=function(){this.defaultPrevented=!0};var yn=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var a=!1,h=Object.defineProperty({},"passive",{get:function(){a=!0}});try{const p=()=>{};l.addEventListener("test",p,h),l.removeEventListener("test",p,h)}catch{}return a}();function _n(a,h){if(Ne.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a){var p=this.type=a.type,E=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.g=h,h=a.relatedTarget){if(g){e:{try{d(h.nodeName);var N=!0;break e}catch{}N=!1}N||(h=null)}}else p=="mouseover"?h=a.fromElement:p=="mouseout"&&(h=a.toElement);this.relatedTarget=h,E?(this.clientX=E.clientX!==void 0?E.clientX:E.pageX,this.clientY=E.clientY!==void 0?E.clientY:E.pageY,this.screenX=E.screenX||0,this.screenY=E.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=typeof a.pointerType=="string"?a.pointerType:vn[a.pointerType]||"",this.state=a.state,this.i=a,a.defaultPrevented&&_n.aa.h.call(this)}}D(_n,Ne);var vn={2:"touch",3:"pen",4:"mouse"};_n.prototype.h=function(){_n.aa.h.call(this);var a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var wn="closure_listenable_"+(1e6*Math.random()|0),KE=0;function HE(a,h,p,E,N){this.listener=a,this.proxy=null,this.src=h,this.type=p,this.capture=!!E,this.ha=N,this.key=++KE,this.da=this.fa=!1}function Fa(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function Ba(a){this.src=a,this.g={},this.h=0}Ba.prototype.add=function(a,h,p,E,N){var O=a.toString();a=this.g[O],a||(a=this.g[O]=[],this.h++);var U=wc(a,h,E,N);return-1<U?(h=a[U],p||(h.fa=!1)):(h=new HE(h,this.src,O,!!E,N),h.fa=p,a.push(h)),h};function vc(a,h){var p=h.type;if(p in a.g){var E=a.g[p],N=Array.prototype.indexOf.call(E,h,void 0),O;(O=0<=N)&&Array.prototype.splice.call(E,N,1),O&&(Fa(h),a.g[p].length==0&&(delete a.g[p],a.h--))}}function wc(a,h,p,E){for(var N=0;N<a.length;++N){var O=a[N];if(!O.da&&O.listener==h&&O.capture==!!p&&O.ha==E)return N}return-1}var Ec="closure_lm_"+(1e6*Math.random()|0),Ic={};function Jp(a,h,p,E,N){if(Array.isArray(h)){for(var O=0;O<h.length;O++)Jp(a,h[O],p,E,N);return null}return p=tm(p),a&&a[wn]?a.K(h,p,c(E)?!!E.capture:!!E,N):QE(a,h,p,!1,E,N)}function QE(a,h,p,E,N,O){if(!h)throw Error("Invalid event type");var U=c(N)?!!N.capture:!!N,fe=Sc(a);if(fe||(a[Ec]=fe=new Ba(a)),p=fe.add(h,p,E,U,O),p.proxy)return p;if(E=YE(),p.proxy=E,E.src=a,E.listener=p,a.addEventListener)yn||(N=U),N===void 0&&(N=!1),a.addEventListener(h.toString(),E,N);else if(a.attachEvent)a.attachEvent(em(h.toString()),E);else if(a.addListener&&a.removeListener)a.addListener(E);else throw Error("addEventListener and attachEvent are unavailable.");return p}function YE(){function a(p){return h.call(a.src,a.listener,p)}const h=XE;return a}function Zp(a,h,p,E,N){if(Array.isArray(h))for(var O=0;O<h.length;O++)Zp(a,h[O],p,E,N);else E=c(E)?!!E.capture:!!E,p=tm(p),a&&a[wn]?(a=a.i,h=String(h).toString(),h in a.g&&(O=a.g[h],p=wc(O,p,E,N),-1<p&&(Fa(O[p]),Array.prototype.splice.call(O,p,1),O.length==0&&(delete a.g[h],a.h--)))):a&&(a=Sc(a))&&(h=a.g[h.toString()],a=-1,h&&(a=wc(h,p,E,N)),(p=-1<a?h[a]:null)&&Tc(p))}function Tc(a){if(typeof a!="number"&&a&&!a.da){var h=a.src;if(h&&h[wn])vc(h.i,a);else{var p=a.type,E=a.proxy;h.removeEventListener?h.removeEventListener(p,E,a.capture):h.detachEvent?h.detachEvent(em(p),E):h.addListener&&h.removeListener&&h.removeListener(E),(p=Sc(h))?(vc(p,a),p.h==0&&(p.src=null,h[Ec]=null)):Fa(a)}}}function em(a){return a in Ic?Ic[a]:Ic[a]="on"+a}function XE(a,h){if(a.da)a=!0;else{h=new _n(h,this);var p=a.listener,E=a.ha||a.src;a.fa&&Tc(a),a=p.call(E,h)}return a}function Sc(a){return a=a[Ec],a instanceof Ba?a:null}var xc="__closure_events_fn_"+(1e9*Math.random()>>>0);function tm(a){return typeof a=="function"?a:(a[xc]||(a[xc]=function(h){return a.handleEvent(h)}),a[xc])}function rt(){de.call(this),this.i=new Ba(this),this.M=this,this.F=null}D(rt,de),rt.prototype[wn]=!0,rt.prototype.removeEventListener=function(a,h,p,E){Zp(this,a,h,p,E)};function ht(a,h){var p,E=a.F;if(E)for(p=[];E;E=E.F)p.push(E);if(a=a.M,E=h.type||h,typeof h=="string")h=new Ne(h,a);else if(h instanceof Ne)h.target=h.target||a;else{var N=h;h=new Ne(E,a),S(h,N)}if(N=!0,p)for(var O=p.length-1;0<=O;O--){var U=h.g=p[O];N=ja(U,E,!0,h)&&N}if(U=h.g=a,N=ja(U,E,!0,h)&&N,N=ja(U,E,!1,h)&&N,p)for(O=0;O<p.length;O++)U=h.g=p[O],N=ja(U,E,!1,h)&&N}rt.prototype.N=function(){if(rt.aa.N.call(this),this.i){var a=this.i,h;for(h in a.g){for(var p=a.g[h],E=0;E<p.length;E++)Fa(p[E]);delete a.g[h],a.h--}}this.F=null},rt.prototype.K=function(a,h,p,E){return this.i.add(String(a),h,!1,p,E)},rt.prototype.L=function(a,h,p,E){return this.i.add(String(a),h,!0,p,E)};function ja(a,h,p,E){if(h=a.i.g[String(h)],!h)return!0;h=h.concat();for(var N=!0,O=0;O<h.length;++O){var U=h[O];if(U&&!U.da&&U.capture==p){var fe=U.listener,Xe=U.ha||U.src;U.fa&&vc(a.i,U),N=fe.call(Xe,E)!==!1&&N}}return N&&!E.defaultPrevented}function nm(a,h,p){if(typeof a=="function")p&&(a=v(a,p));else if(a&&typeof a.handleEvent=="function")a=v(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(h)?-1:l.setTimeout(a,h||0)}function rm(a){a.g=nm(()=>{a.g=null,a.i&&(a.i=!1,rm(a))},a.l);const h=a.h;a.h=null,a.m.apply(null,h)}class JE extends de{constructor(h,p){super(),this.m=h,this.l=p,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:rm(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function qs(a){de.call(this),this.h=a,this.g={}}D(qs,de);var im=[];function sm(a){I(a.g,function(h,p){this.g.hasOwnProperty(p)&&Tc(h)},a),a.g={}}qs.prototype.N=function(){qs.aa.N.call(this),sm(this)},qs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Pc=l.JSON.stringify,ZE=l.JSON.parse,eI=class{stringify(a){return l.JSON.stringify(a,void 0)}parse(a){return l.JSON.parse(a,void 0)}};function Ac(){}Ac.prototype.h=null;function om(a){return a.h||(a.h=a.i())}function am(){}var Gs={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Rc(){Ne.call(this,"d")}D(Rc,Ne);function Cc(){Ne.call(this,"c")}D(Cc,Ne);var Dr={},lm=null;function za(){return lm=lm||new rt}Dr.La="serverreachability";function um(a){Ne.call(this,Dr.La,a)}D(um,Ne);function Ws(a){const h=za();ht(h,new um(h))}Dr.STAT_EVENT="statevent";function cm(a,h){Ne.call(this,Dr.STAT_EVENT,a),this.stat=h}D(cm,Ne);function dt(a){const h=za();ht(h,new cm(h,a))}Dr.Ma="timingevent";function hm(a,h){Ne.call(this,Dr.Ma,a),this.size=h}D(hm,Ne);function Ks(a,h){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){a()},h)}function Hs(){this.g=!0}Hs.prototype.xa=function(){this.g=!1};function tI(a,h,p,E,N,O){a.info(function(){if(a.g)if(O)for(var U="",fe=O.split("&"),Xe=0;Xe<fe.length;Xe++){var le=fe[Xe].split("=");if(1<le.length){var it=le[0];le=le[1];var st=it.split("_");U=2<=st.length&&st[1]=="type"?U+(it+"="+le+"&"):U+(it+"=redacted&")}}else U=null;else U=O;return"XMLHTTP REQ ("+E+") [attempt "+N+"]: "+h+`
`+p+`
`+U})}function nI(a,h,p,E,N,O,U){a.info(function(){return"XMLHTTP RESP ("+E+") [ attempt "+N+"]: "+h+`
`+p+`
`+O+" "+U})}function Pi(a,h,p,E){a.info(function(){return"XMLHTTP TEXT ("+h+"): "+iI(a,p)+(E?" "+E:"")})}function rI(a,h){a.info(function(){return"TIMEOUT: "+h})}Hs.prototype.info=function(){};function iI(a,h){if(!a.g)return h;if(!h)return null;try{var p=JSON.parse(h);if(p){for(a=0;a<p.length;a++)if(Array.isArray(p[a])){var E=p[a];if(!(2>E.length)){var N=E[1];if(Array.isArray(N)&&!(1>N.length)){var O=N[0];if(O!="noop"&&O!="stop"&&O!="close")for(var U=1;U<N.length;U++)N[U]=""}}}}return Pc(p)}catch{return h}}var Ua={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},dm={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},kc;function $a(){}D($a,Ac),$a.prototype.g=function(){return new XMLHttpRequest},$a.prototype.i=function(){return{}},kc=new $a;function jn(a,h,p,E){this.j=a,this.i=h,this.l=p,this.R=E||1,this.U=new qs(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new fm}function fm(){this.i=null,this.g="",this.h=!1}var pm={},bc={};function Dc(a,h,p){a.L=1,a.v=Ka(En(h)),a.m=p,a.P=!0,mm(a,null)}function mm(a,h){a.F=Date.now(),qa(a),a.A=En(a.v);var p=a.A,E=a.R;Array.isArray(E)||(E=[String(E)]),Cm(p.i,"t",E),a.C=0,p=a.j.J,a.h=new fm,a.g=Km(a.j,p?h:null,!a.m),0<a.O&&(a.M=new JE(v(a.Y,a,a.g),a.O)),h=a.U,p=a.g,E=a.ca;var N="readystatechange";Array.isArray(N)||(N&&(im[0]=N.toString()),N=im);for(var O=0;O<N.length;O++){var U=Jp(p,N[O],E||h.handleEvent,!1,h.h||h);if(!U)break;h.g[U.key]=U}h=a.H?y(a.H):{},a.m?(a.u||(a.u="POST"),h["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.A,a.u,a.m,h)):(a.u="GET",a.g.ea(a.A,a.u,null,h)),Ws(),tI(a.i,a.u,a.A,a.l,a.R,a.m)}jn.prototype.ca=function(a){a=a.target;const h=this.M;h&&In(a)==3?h.j():this.Y(a)},jn.prototype.Y=function(a){try{if(a==this.g)e:{const st=In(this.g);var h=this.g.Ba();const Ci=this.g.Z();if(!(3>st)&&(st!=3||this.g&&(this.h.h||this.g.oa()||Lm(this.g)))){this.J||st!=4||h==7||(h==8||0>=Ci?Ws(3):Ws(2)),Vc(this);var p=this.g.Z();this.X=p;t:if(gm(this)){var E=Lm(this.g);a="";var N=E.length,O=In(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Vr(this),Qs(this);var U="";break t}this.h.i=new l.TextDecoder}for(h=0;h<N;h++)this.h.h=!0,a+=this.h.i.decode(E[h],{stream:!(O&&h==N-1)});E.length=0,this.h.g+=a,this.C=0,U=this.h.g}else U=this.g.oa();if(this.o=p==200,nI(this.i,this.u,this.A,this.l,this.R,st,p),this.o){if(this.T&&!this.K){t:{if(this.g){var fe,Xe=this.g;if((fe=Xe.g?Xe.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!x(fe)){var le=fe;break t}}le=null}if(p=le)Pi(this.i,this.l,p,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Nc(this,p);else{this.o=!1,this.s=3,dt(12),Vr(this),Qs(this);break e}}if(this.P){p=!0;let Qt;for(;!this.J&&this.C<U.length;)if(Qt=sI(this,U),Qt==bc){st==4&&(this.s=4,dt(14),p=!1),Pi(this.i,this.l,null,"[Incomplete Response]");break}else if(Qt==pm){this.s=4,dt(15),Pi(this.i,this.l,U,"[Invalid Chunk]"),p=!1;break}else Pi(this.i,this.l,Qt,null),Nc(this,Qt);if(gm(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),st!=4||U.length!=0||this.h.h||(this.s=1,dt(16),p=!1),this.o=this.o&&p,!p)Pi(this.i,this.l,U,"[Invalid Chunked Response]"),Vr(this),Qs(this);else if(0<U.length&&!this.W){this.W=!0;var it=this.j;it.g==this&&it.ba&&!it.M&&(it.j.info("Great, no buffering proxy detected. Bytes received: "+U.length),jc(it),it.M=!0,dt(11))}}else Pi(this.i,this.l,U,null),Nc(this,U);st==4&&Vr(this),this.o&&!this.J&&(st==4?$m(this.j,this):(this.o=!1,qa(this)))}else II(this.g),p==400&&0<U.indexOf("Unknown SID")?(this.s=3,dt(12)):(this.s=0,dt(13)),Vr(this),Qs(this)}}}catch{}finally{}};function gm(a){return a.g?a.u=="GET"&&a.L!=2&&a.j.Ca:!1}function sI(a,h){var p=a.C,E=h.indexOf(`
`,p);return E==-1?bc:(p=Number(h.substring(p,E)),isNaN(p)?pm:(E+=1,E+p>h.length?bc:(h=h.slice(E,E+p),a.C=E+p,h)))}jn.prototype.cancel=function(){this.J=!0,Vr(this)};function qa(a){a.S=Date.now()+a.I,ym(a,a.I)}function ym(a,h){if(a.B!=null)throw Error("WatchDog timer not null");a.B=Ks(v(a.ba,a),h)}function Vc(a){a.B&&(l.clearTimeout(a.B),a.B=null)}jn.prototype.ba=function(){this.B=null;const a=Date.now();0<=a-this.S?(rI(this.i,this.A),this.L!=2&&(Ws(),dt(17)),Vr(this),this.s=2,Qs(this)):ym(this,this.S-a)};function Qs(a){a.j.G==0||a.J||$m(a.j,a)}function Vr(a){Vc(a);var h=a.M;h&&typeof h.ma=="function"&&h.ma(),a.M=null,sm(a.U),a.g&&(h=a.g,a.g=null,h.abort(),h.ma())}function Nc(a,h){try{var p=a.j;if(p.G!=0&&(p.g==a||Mc(p.h,a))){if(!a.K&&Mc(p.h,a)&&p.G==3){try{var E=p.Da.g.parse(h)}catch{E=null}if(Array.isArray(E)&&E.length==3){var N=E;if(N[0]==0){e:if(!p.u){if(p.g)if(p.g.F+3e3<a.F)Ja(p),Ya(p);else break e;Bc(p),dt(18)}}else p.za=N[1],0<p.za-p.T&&37500>N[2]&&p.F&&p.v==0&&!p.C&&(p.C=Ks(v(p.Za,p),6e3));if(1>=wm(p.h)&&p.ca){try{p.ca()}catch{}p.ca=void 0}}else Mr(p,11)}else if((a.K||p.g==a)&&Ja(p),!x(h))for(N=p.Da.g.parse(h),h=0;h<N.length;h++){let le=N[h];if(p.T=le[0],le=le[1],p.G==2)if(le[0]=="c"){p.K=le[1],p.ia=le[2];const it=le[3];it!=null&&(p.la=it,p.j.info("VER="+p.la));const st=le[4];st!=null&&(p.Aa=st,p.j.info("SVER="+p.Aa));const Ci=le[5];Ci!=null&&typeof Ci=="number"&&0<Ci&&(E=1.5*Ci,p.L=E,p.j.info("backChannelRequestTimeoutMs_="+E)),E=p;const Qt=a.g;if(Qt){const el=Qt.g?Qt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(el){var O=E.h;O.g||el.indexOf("spdy")==-1&&el.indexOf("quic")==-1&&el.indexOf("h2")==-1||(O.j=O.l,O.g=new Set,O.h&&(Lc(O,O.h),O.h=null))}if(E.D){const zc=Qt.g?Qt.g.getResponseHeader("X-HTTP-Session-Id"):null;zc&&(E.ya=zc,ge(E.I,E.D,zc))}}p.G=3,p.l&&p.l.ua(),p.ba&&(p.R=Date.now()-a.F,p.j.info("Handshake RTT: "+p.R+"ms")),E=p;var U=a;if(E.qa=Wm(E,E.J?E.ia:null,E.W),U.K){Em(E.h,U);var fe=U,Xe=E.L;Xe&&(fe.I=Xe),fe.B&&(Vc(fe),qa(fe)),E.g=U}else zm(E);0<p.i.length&&Xa(p)}else le[0]!="stop"&&le[0]!="close"||Mr(p,7);else p.G==3&&(le[0]=="stop"||le[0]=="close"?le[0]=="stop"?Mr(p,7):Fc(p):le[0]!="noop"&&p.l&&p.l.ta(le),p.v=0)}}Ws(4)}catch{}}var oI=class{constructor(a,h){this.g=a,this.map=h}};function _m(a){this.l=a||10,l.PerformanceNavigationTiming?(a=l.performance.getEntriesByType("navigation"),a=0<a.length&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function vm(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function wm(a){return a.h?1:a.g?a.g.size:0}function Mc(a,h){return a.h?a.h==h:a.g?a.g.has(h):!1}function Lc(a,h){a.g?a.g.add(h):a.h=h}function Em(a,h){a.h&&a.h==h?a.h=null:a.g&&a.g.has(h)&&a.g.delete(h)}_m.prototype.cancel=function(){if(this.i=Im(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const a of this.g.values())a.cancel();this.g.clear()}};function Im(a){if(a.h!=null)return a.i.concat(a.h.D);if(a.g!=null&&a.g.size!==0){let h=a.i;for(const p of a.g.values())h=h.concat(p.D);return h}return V(a.i)}function aI(a){if(a.V&&typeof a.V=="function")return a.V();if(typeof Map<"u"&&a instanceof Map||typeof Set<"u"&&a instanceof Set)return Array.from(a.values());if(typeof a=="string")return a.split("");if(u(a)){for(var h=[],p=a.length,E=0;E<p;E++)h.push(a[E]);return h}h=[],p=0;for(E in a)h[p++]=a[E];return h}function lI(a){if(a.na&&typeof a.na=="function")return a.na();if(!a.V||typeof a.V!="function"){if(typeof Map<"u"&&a instanceof Map)return Array.from(a.keys());if(!(typeof Set<"u"&&a instanceof Set)){if(u(a)||typeof a=="string"){var h=[];a=a.length;for(var p=0;p<a;p++)h.push(p);return h}h=[],p=0;for(const E in a)h[p++]=E;return h}}}function Tm(a,h){if(a.forEach&&typeof a.forEach=="function")a.forEach(h,void 0);else if(u(a)||typeof a=="string")Array.prototype.forEach.call(a,h,void 0);else for(var p=lI(a),E=aI(a),N=E.length,O=0;O<N;O++)h.call(void 0,E[O],p&&p[O],a)}var Sm=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function uI(a,h){if(a){a=a.split("&");for(var p=0;p<a.length;p++){var E=a[p].indexOf("="),N=null;if(0<=E){var O=a[p].substring(0,E);N=a[p].substring(E+1)}else O=a[p];h(O,N?decodeURIComponent(N.replace(/\+/g," ")):"")}}}function Nr(a){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,a instanceof Nr){this.h=a.h,Ga(this,a.j),this.o=a.o,this.g=a.g,Wa(this,a.s),this.l=a.l;var h=a.i,p=new Js;p.i=h.i,h.g&&(p.g=new Map(h.g),p.h=h.h),xm(this,p),this.m=a.m}else a&&(h=String(a).match(Sm))?(this.h=!1,Ga(this,h[1]||"",!0),this.o=Ys(h[2]||""),this.g=Ys(h[3]||"",!0),Wa(this,h[4]),this.l=Ys(h[5]||"",!0),xm(this,h[6]||"",!0),this.m=Ys(h[7]||"")):(this.h=!1,this.i=new Js(null,this.h))}Nr.prototype.toString=function(){var a=[],h=this.j;h&&a.push(Xs(h,Pm,!0),":");var p=this.g;return(p||h=="file")&&(a.push("//"),(h=this.o)&&a.push(Xs(h,Pm,!0),"@"),a.push(encodeURIComponent(String(p)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p=this.s,p!=null&&a.push(":",String(p))),(p=this.l)&&(this.g&&p.charAt(0)!="/"&&a.push("/"),a.push(Xs(p,p.charAt(0)=="/"?dI:hI,!0))),(p=this.i.toString())&&a.push("?",p),(p=this.m)&&a.push("#",Xs(p,pI)),a.join("")};function En(a){return new Nr(a)}function Ga(a,h,p){a.j=p?Ys(h,!0):h,a.j&&(a.j=a.j.replace(/:$/,""))}function Wa(a,h){if(h){if(h=Number(h),isNaN(h)||0>h)throw Error("Bad port number "+h);a.s=h}else a.s=null}function xm(a,h,p){h instanceof Js?(a.i=h,mI(a.i,a.h)):(p||(h=Xs(h,fI)),a.i=new Js(h,a.h))}function ge(a,h,p){a.i.set(h,p)}function Ka(a){return ge(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),a}function Ys(a,h){return a?h?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function Xs(a,h,p){return typeof a=="string"?(a=encodeURI(a).replace(h,cI),p&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function cI(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var Pm=/[#\/\?@]/g,hI=/[#\?:]/g,dI=/[#\?]/g,fI=/[#\?@]/g,pI=/#/g;function Js(a,h){this.h=this.g=null,this.i=a||null,this.j=!!h}function zn(a){a.g||(a.g=new Map,a.h=0,a.i&&uI(a.i,function(h,p){a.add(decodeURIComponent(h.replace(/\+/g," ")),p)}))}t=Js.prototype,t.add=function(a,h){zn(this),this.i=null,a=Ai(this,a);var p=this.g.get(a);return p||this.g.set(a,p=[]),p.push(h),this.h+=1,this};function Am(a,h){zn(a),h=Ai(a,h),a.g.has(h)&&(a.i=null,a.h-=a.g.get(h).length,a.g.delete(h))}function Rm(a,h){return zn(a),h=Ai(a,h),a.g.has(h)}t.forEach=function(a,h){zn(this),this.g.forEach(function(p,E){p.forEach(function(N){a.call(h,N,E,this)},this)},this)},t.na=function(){zn(this);const a=Array.from(this.g.values()),h=Array.from(this.g.keys()),p=[];for(let E=0;E<h.length;E++){const N=a[E];for(let O=0;O<N.length;O++)p.push(h[E])}return p},t.V=function(a){zn(this);let h=[];if(typeof a=="string")Rm(this,a)&&(h=h.concat(this.g.get(Ai(this,a))));else{a=Array.from(this.g.values());for(let p=0;p<a.length;p++)h=h.concat(a[p])}return h},t.set=function(a,h){return zn(this),this.i=null,a=Ai(this,a),Rm(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[h]),this.h+=1,this},t.get=function(a,h){return a?(a=this.V(a),0<a.length?String(a[0]):h):h};function Cm(a,h,p){Am(a,h),0<p.length&&(a.i=null,a.g.set(Ai(a,h),V(p)),a.h+=p.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const a=[],h=Array.from(this.g.keys());for(var p=0;p<h.length;p++){var E=h[p];const O=encodeURIComponent(String(E)),U=this.V(E);for(E=0;E<U.length;E++){var N=O;U[E]!==""&&(N+="="+encodeURIComponent(String(U[E]))),a.push(N)}}return this.i=a.join("&")};function Ai(a,h){return h=String(h),a.j&&(h=h.toLowerCase()),h}function mI(a,h){h&&!a.j&&(zn(a),a.i=null,a.g.forEach(function(p,E){var N=E.toLowerCase();E!=N&&(Am(this,E),Cm(this,N,p))},a)),a.j=h}function gI(a,h){const p=new Hs;if(l.Image){const E=new Image;E.onload=A(Un,p,"TestLoadImage: loaded",!0,h,E),E.onerror=A(Un,p,"TestLoadImage: error",!1,h,E),E.onabort=A(Un,p,"TestLoadImage: abort",!1,h,E),E.ontimeout=A(Un,p,"TestLoadImage: timeout",!1,h,E),l.setTimeout(function(){E.ontimeout&&E.ontimeout()},1e4),E.src=a}else h(!1)}function yI(a,h){const p=new Hs,E=new AbortController,N=setTimeout(()=>{E.abort(),Un(p,"TestPingServer: timeout",!1,h)},1e4);fetch(a,{signal:E.signal}).then(O=>{clearTimeout(N),O.ok?Un(p,"TestPingServer: ok",!0,h):Un(p,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(N),Un(p,"TestPingServer: error",!1,h)})}function Un(a,h,p,E,N){try{N&&(N.onload=null,N.onerror=null,N.onabort=null,N.ontimeout=null),E(p)}catch{}}function _I(){this.g=new eI}function vI(a,h,p){const E=p||"";try{Tm(a,function(N,O){let U=N;c(N)&&(U=Pc(N)),h.push(E+O+"="+encodeURIComponent(U))})}catch(N){throw h.push(E+"type="+encodeURIComponent("_badmap")),N}}function Zs(a){this.l=a.Ub||null,this.j=a.eb||!1}D(Zs,Ac),Zs.prototype.g=function(){return new Ha(this.l,this.j)},Zs.prototype.i=function(a){return function(){return a}}({});function Ha(a,h){rt.call(this),this.D=a,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}D(Ha,rt),t=Ha.prototype,t.open=function(a,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=a,this.A=h,this.readyState=1,to(this)},t.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const h={headers:this.u,method:this.B,credentials:this.m,cache:void 0};a&&(h.body=a),(this.D||l).fetch(new Request(this.A,h)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,eo(this)),this.readyState=0},t.Sa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,to(this)),this.g&&(this.readyState=3,to(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;km(this)}else a.text().then(this.Ra.bind(this),this.ga.bind(this))};function km(a){a.j.read().then(a.Pa.bind(a)).catch(a.ga.bind(a))}t.Pa=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var h=a.value?a.value:new Uint8Array(0);(h=this.v.decode(h,{stream:!a.done}))&&(this.response=this.responseText+=h)}a.done?eo(this):to(this),this.readyState==3&&km(this)}},t.Ra=function(a){this.g&&(this.response=this.responseText=a,eo(this))},t.Qa=function(a){this.g&&(this.response=a,eo(this))},t.ga=function(){this.g&&eo(this)};function eo(a){a.readyState=4,a.l=null,a.j=null,a.v=null,to(a)}t.setRequestHeader=function(a,h){this.u.append(a,h)},t.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const a=[],h=this.h.entries();for(var p=h.next();!p.done;)p=p.value,a.push(p[0]+": "+p[1]),p=h.next();return a.join(`\r
`)};function to(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(Ha.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function bm(a){let h="";return I(a,function(p,E){h+=E,h+=":",h+=p,h+=`\r
`}),h}function Oc(a,h,p){e:{for(E in p){var E=!1;break e}E=!0}E||(p=bm(p),typeof a=="string"?p!=null&&encodeURIComponent(String(p)):ge(a,h,p))}function ke(a){rt.call(this),this.headers=new Map,this.o=a||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}D(ke,rt);var wI=/^https?$/i,EI=["POST","PUT"];t=ke.prototype,t.Ha=function(a){this.J=a},t.ea=function(a,h,p,E){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);h=h?h.toUpperCase():"GET",this.D=a,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():kc.g(),this.v=this.o?om(this.o):om(kc),this.g.onreadystatechange=v(this.Ea,this);try{this.B=!0,this.g.open(h,String(a),!0),this.B=!1}catch(O){Dm(this,O);return}if(a=p||"",p=new Map(this.headers),E)if(Object.getPrototypeOf(E)===Object.prototype)for(var N in E)p.set(N,E[N]);else if(typeof E.keys=="function"&&typeof E.get=="function")for(const O of E.keys())p.set(O,E.get(O));else throw Error("Unknown input type for opt_headers: "+String(E));E=Array.from(p.keys()).find(O=>O.toLowerCase()=="content-type"),N=l.FormData&&a instanceof l.FormData,!(0<=Array.prototype.indexOf.call(EI,h,void 0))||E||N||p.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[O,U]of p)this.g.setRequestHeader(O,U);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Mm(this),this.u=!0,this.g.send(a),this.u=!1}catch(O){Dm(this,O)}};function Dm(a,h){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=h,a.m=5,Vm(a),Qa(a)}function Vm(a){a.A||(a.A=!0,ht(a,"complete"),ht(a,"error"))}t.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=a||7,ht(this,"complete"),ht(this,"abort"),Qa(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Qa(this,!0)),ke.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Nm(this):this.bb())},t.bb=function(){Nm(this)};function Nm(a){if(a.h&&typeof o<"u"&&(!a.v[1]||In(a)!=4||a.Z()!=2)){if(a.u&&In(a)==4)nm(a.Ea,0,a);else if(ht(a,"readystatechange"),In(a)==4){a.h=!1;try{const U=a.Z();e:switch(U){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var p;if(!(p=h)){var E;if(E=U===0){var N=String(a.D).match(Sm)[1]||null;!N&&l.self&&l.self.location&&(N=l.self.location.protocol.slice(0,-1)),E=!wI.test(N?N.toLowerCase():"")}p=E}if(p)ht(a,"complete"),ht(a,"success");else{a.m=6;try{var O=2<In(a)?a.g.statusText:""}catch{O=""}a.l=O+" ["+a.Z()+"]",Vm(a)}}finally{Qa(a)}}}}function Qa(a,h){if(a.g){Mm(a);const p=a.g,E=a.v[0]?()=>{}:null;a.g=null,a.v=null,h||ht(a,"ready");try{p.onreadystatechange=E}catch{}}}function Mm(a){a.I&&(l.clearTimeout(a.I),a.I=null)}t.isActive=function(){return!!this.g};function In(a){return a.g?a.g.readyState:0}t.Z=function(){try{return 2<In(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(a){if(this.g){var h=this.g.responseText;return a&&h.indexOf(a)==0&&(h=h.substring(a.length)),ZE(h)}};function Lm(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.H){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function II(a){const h={};a=(a.g&&2<=In(a)&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let E=0;E<a.length;E++){if(x(a[E]))continue;var p=R(a[E]);const N=p[0];if(p=p[1],typeof p!="string")continue;p=p.trim();const O=h[N]||[];h[N]=O,O.push(p)}_(h,function(E){return E.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function no(a,h,p){return p&&p.internalChannelParams&&p.internalChannelParams[a]||h}function Om(a){this.Aa=0,this.i=[],this.j=new Hs,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=no("failFast",!1,a),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=no("baseRetryDelayMs",5e3,a),this.cb=no("retryDelaySeedMs",1e4,a),this.Wa=no("forwardChannelMaxRetries",2,a),this.wa=no("forwardChannelRequestTimeoutMs",2e4,a),this.pa=a&&a.xmlHttpFactory||void 0,this.Xa=a&&a.Tb||void 0,this.Ca=a&&a.useFetchStreams||!1,this.L=void 0,this.J=a&&a.supportsCrossDomainXhr||!1,this.K="",this.h=new _m(a&&a.concurrentRequestLimit),this.Da=new _I,this.P=a&&a.fastHandshake||!1,this.O=a&&a.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=a&&a.Rb||!1,a&&a.xa&&this.j.xa(),a&&a.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&a&&a.detectBufferingProxy||!1,this.ja=void 0,a&&a.longPollingTimeout&&0<a.longPollingTimeout&&(this.ja=a.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Om.prototype,t.la=8,t.G=1,t.connect=function(a,h,p,E){dt(0),this.W=a,this.H=h||{},p&&E!==void 0&&(this.H.OSID=p,this.H.OAID=E),this.F=this.X,this.I=Wm(this,null,this.W),Xa(this)};function Fc(a){if(Fm(a),a.G==3){var h=a.U++,p=En(a.I);if(ge(p,"SID",a.K),ge(p,"RID",h),ge(p,"TYPE","terminate"),ro(a,p),h=new jn(a,a.j,h),h.L=2,h.v=Ka(En(p)),p=!1,l.navigator&&l.navigator.sendBeacon)try{p=l.navigator.sendBeacon(h.v.toString(),"")}catch{}!p&&l.Image&&(new Image().src=h.v,p=!0),p||(h.g=Km(h.j,null),h.g.ea(h.v)),h.F=Date.now(),qa(h)}Gm(a)}function Ya(a){a.g&&(jc(a),a.g.cancel(),a.g=null)}function Fm(a){Ya(a),a.u&&(l.clearTimeout(a.u),a.u=null),Ja(a),a.h.cancel(),a.s&&(typeof a.s=="number"&&l.clearTimeout(a.s),a.s=null)}function Xa(a){if(!vm(a.h)&&!a.s){a.s=!0;var h=a.Ga;gn||Z(),G||(gn(),G=!0),Y.add(h,a),a.B=0}}function TI(a,h){return wm(a.h)>=a.h.j-(a.s?1:0)?!1:a.s?(a.i=h.D.concat(a.i),!0):a.G==1||a.G==2||a.B>=(a.Va?0:a.Wa)?!1:(a.s=Ks(v(a.Ga,a,h),qm(a,a.B)),a.B++,!0)}t.Ga=function(a){if(this.s)if(this.s=null,this.G==1){if(!a){this.U=Math.floor(1e5*Math.random()),a=this.U++;const N=new jn(this,this.j,a);let O=this.o;if(this.S&&(O?(O=y(O),S(O,this.S)):O=this.S),this.m!==null||this.O||(N.H=O,O=null),this.P)e:{for(var h=0,p=0;p<this.i.length;p++){t:{var E=this.i[p];if("__data__"in E.map&&(E=E.map.__data__,typeof E=="string")){E=E.length;break t}E=void 0}if(E===void 0)break;if(h+=E,4096<h){h=p;break e}if(h===4096||p===this.i.length-1){h=p+1;break e}}h=1e3}else h=1e3;h=jm(this,N,h),p=En(this.I),ge(p,"RID",a),ge(p,"CVER",22),this.D&&ge(p,"X-HTTP-Session-Id",this.D),ro(this,p),O&&(this.O?h="headers="+encodeURIComponent(String(bm(O)))+"&"+h:this.m&&Oc(p,this.m,O)),Lc(this.h,N),this.Ua&&ge(p,"TYPE","init"),this.P?(ge(p,"$req",h),ge(p,"SID","null"),N.T=!0,Dc(N,p,null)):Dc(N,p,h),this.G=2}}else this.G==3&&(a?Bm(this,a):this.i.length==0||vm(this.h)||Bm(this))};function Bm(a,h){var p;h?p=h.l:p=a.U++;const E=En(a.I);ge(E,"SID",a.K),ge(E,"RID",p),ge(E,"AID",a.T),ro(a,E),a.m&&a.o&&Oc(E,a.m,a.o),p=new jn(a,a.j,p,a.B+1),a.m===null&&(p.H=a.o),h&&(a.i=h.D.concat(a.i)),h=jm(a,p,1e3),p.I=Math.round(.5*a.wa)+Math.round(.5*a.wa*Math.random()),Lc(a.h,p),Dc(p,E,h)}function ro(a,h){a.H&&I(a.H,function(p,E){ge(h,E,p)}),a.l&&Tm({},function(p,E){ge(h,E,p)})}function jm(a,h,p){p=Math.min(a.i.length,p);var E=a.l?v(a.l.Na,a.l,a):null;e:{var N=a.i;let O=-1;for(;;){const U=["count="+p];O==-1?0<p?(O=N[0].g,U.push("ofs="+O)):O=0:U.push("ofs="+O);let fe=!0;for(let Xe=0;Xe<p;Xe++){let le=N[Xe].g;const it=N[Xe].map;if(le-=O,0>le)O=Math.max(0,N[Xe].g-100),fe=!1;else try{vI(it,U,"req"+le+"_")}catch{E&&E(it)}}if(fe){E=U.join("&");break e}}}return a=a.i.splice(0,p),h.D=a,E}function zm(a){if(!a.g&&!a.u){a.Y=1;var h=a.Fa;gn||Z(),G||(gn(),G=!0),Y.add(h,a),a.v=0}}function Bc(a){return a.g||a.u||3<=a.v?!1:(a.Y++,a.u=Ks(v(a.Fa,a),qm(a,a.v)),a.v++,!0)}t.Fa=function(){if(this.u=null,Um(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var a=2*this.R;this.j.info("BP detection timer enabled: "+a),this.A=Ks(v(this.ab,this),a)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,dt(10),Ya(this),Um(this))};function jc(a){a.A!=null&&(l.clearTimeout(a.A),a.A=null)}function Um(a){a.g=new jn(a,a.j,"rpc",a.Y),a.m===null&&(a.g.H=a.o),a.g.O=0;var h=En(a.qa);ge(h,"RID","rpc"),ge(h,"SID",a.K),ge(h,"AID",a.T),ge(h,"CI",a.F?"0":"1"),!a.F&&a.ja&&ge(h,"TO",a.ja),ge(h,"TYPE","xmlhttp"),ro(a,h),a.m&&a.o&&Oc(h,a.m,a.o),a.L&&(a.g.I=a.L);var p=a.g;a=a.ia,p.L=1,p.v=Ka(En(h)),p.m=null,p.P=!0,mm(p,a)}t.Za=function(){this.C!=null&&(this.C=null,Ya(this),Bc(this),dt(19))};function Ja(a){a.C!=null&&(l.clearTimeout(a.C),a.C=null)}function $m(a,h){var p=null;if(a.g==h){Ja(a),jc(a),a.g=null;var E=2}else if(Mc(a.h,h))p=h.D,Em(a.h,h),E=1;else return;if(a.G!=0){if(h.o)if(E==1){p=h.m?h.m.length:0,h=Date.now()-h.F;var N=a.B;E=za(),ht(E,new hm(E,p)),Xa(a)}else zm(a);else if(N=h.s,N==3||N==0&&0<h.X||!(E==1&&TI(a,h)||E==2&&Bc(a)))switch(p&&0<p.length&&(h=a.h,h.i=h.i.concat(p)),N){case 1:Mr(a,5);break;case 4:Mr(a,10);break;case 3:Mr(a,6);break;default:Mr(a,2)}}}function qm(a,h){let p=a.Ta+Math.floor(Math.random()*a.cb);return a.isActive()||(p*=2),p*h}function Mr(a,h){if(a.j.info("Error code "+h),h==2){var p=v(a.fb,a),E=a.Xa;const N=!E;E=new Nr(E||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||Ga(E,"https"),Ka(E),N?gI(E.toString(),p):yI(E.toString(),p)}else dt(2);a.G=0,a.l&&a.l.sa(h),Gm(a),Fm(a)}t.fb=function(a){a?(this.j.info("Successfully pinged google.com"),dt(2)):(this.j.info("Failed to ping google.com"),dt(1))};function Gm(a){if(a.G=0,a.ka=[],a.l){const h=Im(a.h);(h.length!=0||a.i.length!=0)&&(F(a.ka,h),F(a.ka,a.i),a.h.i.length=0,V(a.i),a.i.length=0),a.l.ra()}}function Wm(a,h,p){var E=p instanceof Nr?En(p):new Nr(p);if(E.g!="")h&&(E.g=h+"."+E.g),Wa(E,E.s);else{var N=l.location;E=N.protocol,h=h?h+"."+N.hostname:N.hostname,N=+N.port;var O=new Nr(null);E&&Ga(O,E),h&&(O.g=h),N&&Wa(O,N),p&&(O.l=p),E=O}return p=a.D,h=a.ya,p&&h&&ge(E,p,h),ge(E,"VER",a.la),ro(a,E),E}function Km(a,h,p){if(h&&!a.J)throw Error("Can't create secondary domain capable XhrIo object.");return h=a.Ca&&!a.pa?new ke(new Zs({eb:p})):new ke(a.pa),h.Ha(a.J),h}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Hm(){}t=Hm.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Za(){}Za.prototype.g=function(a,h){return new Dt(a,h)};function Dt(a,h){rt.call(this),this.g=new Om(h),this.l=a,this.h=h&&h.messageUrlParams||null,a=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(a?a["X-WebChannel-Content-Type"]=h.messageContentType:a={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.va&&(a?a["X-WebChannel-Client-Profile"]=h.va:a={"X-WebChannel-Client-Profile":h.va}),this.g.S=a,(a=h&&h.Sb)&&!x(a)&&(this.g.m=a),this.v=h&&h.supportsCrossDomainXhr||!1,this.u=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!x(h)&&(this.g.D=h,a=this.h,a!==null&&h in a&&(a=this.h,h in a&&delete a[h])),this.j=new Ri(this)}D(Dt,rt),Dt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Dt.prototype.close=function(){Fc(this.g)},Dt.prototype.o=function(a){var h=this.g;if(typeof a=="string"){var p={};p.__data__=a,a=p}else this.u&&(p={},p.__data__=Pc(a),a=p);h.i.push(new oI(h.Ya++,a)),h.G==3&&Xa(h)},Dt.prototype.N=function(){this.g.l=null,delete this.j,Fc(this.g),delete this.g,Dt.aa.N.call(this)};function Qm(a){Rc.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var h=a.__sm__;if(h){e:{for(const p in h){a=p;break e}a=void 0}(this.i=a)&&(a=this.i,h=h!==null&&a in h?h[a]:void 0),this.data=h}else this.data=a}D(Qm,Rc);function Ym(){Cc.call(this),this.status=1}D(Ym,Cc);function Ri(a){this.g=a}D(Ri,Hm),Ri.prototype.ua=function(){ht(this.g,"a")},Ri.prototype.ta=function(a){ht(this.g,new Qm(a))},Ri.prototype.sa=function(a){ht(this.g,new Ym)},Ri.prototype.ra=function(){ht(this.g,"b")},Za.prototype.createWebChannel=Za.prototype.g,Dt.prototype.send=Dt.prototype.o,Dt.prototype.open=Dt.prototype.m,Dt.prototype.close=Dt.prototype.close,xw=function(){return new Za},Sw=function(){return za()},Tw=Dr,Id={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ua.NO_ERROR=0,Ua.TIMEOUT=8,Ua.HTTP_ERROR=6,Ll=Ua,dm.COMPLETE="complete",Iw=dm,am.EventType=Gs,Gs.OPEN="a",Gs.CLOSE="b",Gs.ERROR="c",Gs.MESSAGE="d",rt.prototype.listen=rt.prototype.K,Io=am,Ew=Zs,ke.prototype.listenOnce=ke.prototype.L,ke.prototype.getLastError=ke.prototype.Ka,ke.prototype.getLastErrorCode=ke.prototype.Ba,ke.prototype.getStatus=ke.prototype.Z,ke.prototype.getResponseJson=ke.prototype.Oa,ke.prototype.getResponseText=ke.prototype.oa,ke.prototype.send=ke.prototype.ea,ke.prototype.setWithCredentials=ke.prototype.Ha,ww=ke}).apply(typeof _l<"u"?_l:typeof self<"u"?self:typeof window<"u"?window:{});const vy="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class We{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}We.UNAUTHENTICATED=new We(null),We.GOOGLE_CREDENTIALS=new We("google-credentials-uid"),We.FIRST_PARTY=new We("first-party-uid"),We.MOCK_USER=new We("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ms="10.12.3";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gr=new qf("@firebase/firestore");function Li(){return gr.logLevel}function YP(t){gr.setLogLevel(t)}function j(t,...e){if(gr.logLevel<=ie.DEBUG){const n=e.map(Qf);gr.debug(`Firestore (${Ms}): ${t}`,...n)}}function Le(t,...e){if(gr.logLevel<=ie.ERROR){const n=e.map(Qf);gr.error(`Firestore (${Ms}): ${t}`,...n)}}function rn(t,...e){if(gr.logLevel<=ie.WARN){const n=e.map(Qf);gr.warn(`Firestore (${Ms}): ${t}`,...n)}}function Qf(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W(t="Unexpected state"){const e=`FIRESTORE (${Ms}) INTERNAL ASSERTION FAILED: `+t;throw Le(e),new Error(e)}function H(t,e){t||W()}function XP(t,e){t||W()}function q(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class B extends wi{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class He{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pw{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class JP{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(We.UNAUTHENTICATED))}shutdown(){}}class ZP{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class eA{constructor(e){this.t=e,this.currentUser=We.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i;const i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let s=new He;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new He,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const u=s;e.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},l=u=>{j("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):(j("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new He)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(j("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(H(typeof r.accessToken=="string"),new Pw(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return H(e===null||typeof e=="string"),new We(e)}}class tA{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=We.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class nA{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new tA(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(We.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class rA{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class iA{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){const r=s=>{s.error!=null&&j("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,j("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{j("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):j("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(H(typeof n.token=="string"),this.R=n.token,new rA(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sA(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aw{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=sA(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}}function X(t,e){return t<e?-1:t>e?1:0}function _s(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}function Rw(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Te{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new B(L.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new B(L.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new B(L.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new B(L.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Te.fromMillis(Date.now())}static fromDate(e){return Te.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Te(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?X(this.nanoseconds,e.nanoseconds):X(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Q(e)}static min(){return new Q(new Te(0,0))}static max(){return new Q(new Te(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aa{constructor(e,n,r){n===void 0?n=0:n>e.length&&W(),r===void 0?r=e.length-n:r>e.length-n&&W(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return aa.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof aa?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class ne extends aa{construct(e,n,r){return new ne(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new B(L.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new ne(n)}static emptyPath(){return new ne([])}}const oA=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ee extends aa{construct(e,n,r){return new Ee(e,n,r)}static isValidIdentifier(e){return oA.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ee.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Ee(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new B(L.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const l=e[i];if(l==="\\"){if(i+1===e.length)throw new B(L.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new B(L.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else l==="`"?(o=!o,i++):l!=="."||o?(r+=l,i++):(s(),i++)}if(s(),o)throw new B(L.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ee(n)}static emptyPath(){return new Ee([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ${constructor(e){this.path=e}static fromPath(e){return new $(ne.fromString(e))}static fromName(e){return new $(ne.fromString(e).popFirst(5))}static empty(){return new $(ne.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ne.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return ne.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new $(new ne(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eu{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}}function Td(t){return t.fields.find(e=>e.kind===2)}function Ur(t){return t.fields.filter(e=>e.kind!==2)}Eu.UNKNOWN_ID=-1;class Ol{constructor(e,n){this.fieldPath=e,this.kind=n}}class la{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new la(0,Ft.min())}}function Cw(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=Q.fromTimestamp(r===1e9?new Te(n+1,0):new Te(n,r));return new Ft(i,$.empty(),e)}function kw(t){return new Ft(t.readTime,t.key,-1)}class Ft{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Ft(Q.min(),$.empty(),-1)}static max(){return new Ft(Q.max(),$.empty(),-1)}}function Yf(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=$.comparator(t.documentKey,e.documentKey),n!==0?n:X(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bw="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Dw{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Rr(t){if(t.code!==L.FAILED_PRECONDITION||t.message!==bw)throw t;j("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&W(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new M((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof M?n:M.resolve(n)}catch(n){return M.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):M.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):M.reject(n)}static resolve(e){return new M((n,r)=>{n(e)})}static reject(e){return new M((n,r)=>{r(e)})}static waitFor(e){return new M((n,r)=>{let i=0,s=0,o=!1;e.forEach(l=>{++i,l.next(()=>{++s,o&&s===i&&n()},u=>r(u))}),o=!0,s===i&&n()})}static or(e){let n=M.resolve(!1);for(const r of e)n=n.next(i=>i?M.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new M((r,i)=>{const s=e.length,o=new Array(s);let l=0;for(let u=0;u<s;u++){const c=u;n(e[c]).next(f=>{o[c]=f,++l,l===s&&r(o)},f=>i(f))}})}static doWhile(e,n){return new M((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xu{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.V=new He,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{n.error?this.V.reject(new Mo(e,n.error)):this.V.resolve()},this.transaction.onerror=r=>{const i=Xf(r.target.error);this.V.reject(new Mo(e,i))}}static open(e,n,r,i){try{return new Xu(n,e.transaction(i,r))}catch(s){throw new Mo(n,s)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(j("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const n=this.transaction.objectStore(e);return new lA(n)}}class dn{constructor(e,n,r){this.name=e,this.version=n,this.p=r,dn.S(vu())===12.2&&Le("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return j("SimpleDb","Removing database:",e),$r(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!ow())return!1;if(dn.C())return!0;const e=vu(),n=dn.S(e),r=0<n&&n<10,i=Vw(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static C(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.v)==="YES"}static F(e,n){return e.store(n)}static S(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}async M(e){return this.db||(j("SimpleDb","Opening database:",this.name),this.db=await new Promise((n,r)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=s=>{const o=s.target.result;n(o)},i.onblocked=()=>{r(new Mo(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=s=>{const o=s.target.error;o.name==="VersionError"?r(new B(L.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?r(new B(L.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):r(new Mo(e,o))},i.onupgradeneeded=s=>{j("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);const o=s.target.result;this.p.O(o,i.transaction,s.oldVersion,this.version).next(()=>{j("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=n=>this.N(n)),this.db}L(e){this.N=e,this.db&&(this.db.onversionchange=n=>e(n))}async runTransaction(e,n,r,i){const s=n==="readonly";let o=0;for(;;){++o;try{this.db=await this.M(e);const l=Xu.open(this.db,e,s?"readonly":"readwrite",r),u=i(l).next(c=>(l.g(),c)).catch(c=>(l.abort(c),M.reject(c))).toPromise();return u.catch(()=>{}),await l.m,u}catch(l){const u=l,c=u.name!=="FirebaseError"&&o<3;if(j("SimpleDb","Transaction failed with error:",u.message,"Retrying:",c),this.close(),!c)return Promise.reject(u)}}}close(){this.db&&this.db.close(),this.db=void 0}}function Vw(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}class aA{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return $r(this.B.delete())}}class Mo extends B{constructor(e,n){super(L.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function Cr(t){return t.name==="IndexedDbTransactionError"}class lA{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(j("SimpleDb","PUT",this.store.name,e,n),r=this.store.put(n,e)):(j("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),$r(r)}add(e){return j("SimpleDb","ADD",this.store.name,e,e),$r(this.store.add(e))}get(e){return $r(this.store.get(e)).next(n=>(n===void 0&&(n=null),j("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return j("SimpleDb","DELETE",this.store.name,e),$r(this.store.delete(e))}count(){return j("SimpleDb","COUNT",this.store.name),$r(this.store.count())}U(e,n){const r=this.options(e,n),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){const s=i.getAll(r.range);return new M((o,l)=>{s.onerror=u=>{l(u.target.error)},s.onsuccess=u=>{o(u.target.result)}})}{const s=this.cursor(r),o=[];return this.W(s,(l,u)=>{o.push(u)}).next(()=>o)}}G(e,n){const r=this.store.getAll(e,n===null?void 0:n);return new M((i,s)=>{r.onerror=o=>{s(o.target.error)},r.onsuccess=o=>{i(o.target.result)}})}j(e,n){j("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,n);r.H=!1;const i=this.cursor(r);return this.W(i,(s,o,l)=>l.delete())}J(e,n){let r;n?r=e:(r={},n=e);const i=this.cursor(r);return this.W(i,n)}Y(e){const n=this.cursor({});return new M((r,i)=>{n.onerror=s=>{const o=Xf(s.target.error);i(o)},n.onsuccess=s=>{const o=s.target.result;o?e(o.primaryKey,o.value).next(l=>{l?o.continue():r()}):r()}})}W(e,n){const r=[];return new M((i,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{const l=o.target.result;if(!l)return void i();const u=new aA(l),c=n(l.primaryKey,l.value,u);if(c instanceof M){const f=c.catch(m=>(u.done(),M.reject(m)));r.push(f)}u.isDone?i():u.K===null?l.continue():l.continue(u.K)}}).next(()=>M.waitFor(r))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function $r(t){return new M((e,n)=>{t.onsuccess=r=>{const i=r.target.result;e(i)},t.onerror=r=>{const i=Xf(r.target.error);n(i)}})}let wy=!1;function Xf(t){const e=dn.S(vu());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const r=new B("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return wy||(wy=!0,setTimeout(()=>{throw r},0)),r}}return t}class uA{constructor(e,n){this.asyncQueue=e,this.Z=n,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){j("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{j("IndexBackfiller",`Documents written: ${await this.Z.ee()}`)}catch(n){Cr(n)?j("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",n):await Rr(n)}await this.X(6e4)})}}class cA{constructor(e,n){this.localStore=e,this.persistence=n}async ee(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>this.te(n,e))}te(e,n){const r=new Set;let i=n,s=!0;return M.doWhile(()=>s===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(o!==null&&!r.has(o))return j("IndexBackfiller",`Processing collection: ${o}`),this.ne(e,o,i).next(l=>{i-=l,r.add(o)});s=!1})).next(()=>n-i)}ne(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(i=>this.localStore.localDocuments.getNextDocuments(e,n,i,r).next(s=>{const o=s.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this.re(i,s)).next(l=>(j("IndexBackfiller",`Updating offset: ${l}`),this.localStore.indexManager.updateCollectionGroup(e,n,l))).next(()=>o.size)}))}re(e,n){let r=e;return n.changes.forEach((i,s)=>{const o=kw(s);Yf(o,r)>0&&(r=o)}),new Ft(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xt{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}xt.oe=-1;function xa(t){return t==null}function ua(t){return t===0&&1/t==-1/0}function Nw(t){return typeof t=="number"&&Number.isInteger(t)&&!ua(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yt(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=Ey(e)),e=hA(t.get(n),e);return Ey(e)}function hA(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const s=t.charAt(i);switch(s){case"\0":n+="";break;case"":n+="";break;default:n+=s}}return n}function Ey(t){return t+""}function ln(t){const e=t.length;if(H(e>=2),e===2)return H(t.charAt(0)===""&&t.charAt(1)===""),ne.emptyPath();const n=e-2,r=[];let i="";for(let s=0;s<e;){const o=t.indexOf("",s);switch((o<0||o>n)&&W(),t.charAt(o+1)){case"":const l=t.substring(s,o);let u;i.length===0?u=l:(i+=l,u=i,i=""),r.push(u);break;case"":i+=t.substring(s,o),i+="\0";break;case"":i+=t.substring(s,o+1);break;default:W()}s=o+2}return new ne(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iy=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fl(t,e){return[t,yt(e)]}function Mw(t,e,n){return[t,yt(e),n]}const dA={},fA=["prefixPath","collectionGroup","readTime","documentId"],pA=["prefixPath","collectionGroup","documentId"],mA=["collectionGroup","readTime","prefixPath","documentId"],gA=["canonicalId","targetId"],yA=["targetId","path"],_A=["path","targetId"],vA=["collectionId","parent"],wA=["indexId","uid"],EA=["uid","sequenceNumber"],IA=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],TA=["indexId","uid","orderedDocumentKey"],SA=["userId","collectionPath","documentId"],xA=["userId","collectionPath","largestBatchId"],PA=["userId","collectionGroup","largestBatchId"],Lw=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],AA=[...Lw,"documentOverlays"],Ow=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Fw=Ow,Bw=[...Fw,"indexConfiguration","indexState","indexEntries"],RA=Bw;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sd extends Dw{constructor(e,n){super(),this._e=e,this.currentSequenceNumber=n}}function Qe(t,e){const n=q(t);return dn.F(n._e,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ty(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Ei(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function jw(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class me{constructor(e,n){this.comparator=e,this.root=n||Ze.EMPTY}insert(e,n){return new me(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Ze.BLACK,null,null))}remove(e){return new me(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ze.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new vl(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new vl(this.root,e,this.comparator,!1)}getReverseIterator(){return new vl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new vl(this.root,e,this.comparator,!0)}}class vl{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ze{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??Ze.RED,this.left=i??Ze.EMPTY,this.right=s??Ze.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new Ze(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Ze.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return Ze.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ze.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ze.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw W();const e=this.left.check();if(e!==this.right.check())throw W();return e+(this.isRed()?0:1)}}Ze.EMPTY=null,Ze.RED=!0,Ze.BLACK=!1;Ze.EMPTY=new class{constructor(){this.size=0}get key(){throw W()}get value(){throw W()}get color(){throw W()}get left(){throw W()}get right(){throw W()}copy(e,n,r,i,s){return this}insert(e,n,r){return new Ze(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class he{constructor(e){this.comparator=e,this.data=new me(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Sy(this.data.getIterator())}getIteratorFrom(e){return new Sy(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof he)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new he(this.comparator);return n.data=e,n}}class Sy{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Di(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pt{constructor(e){this.fields=e,e.sort(Ee.comparator)}static empty(){return new Pt([])}unionWith(e){let n=new he(Ee.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Pt(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return _s(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zw extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CA(){return typeof atob<"u"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $e{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new zw("Invalid base64 string: "+s):s}}(e);return new $e(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new $e(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return X(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}$e.EMPTY_BYTE_STRING=new $e("");const kA=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Nn(t){if(H(!!t),typeof t=="string"){let e=0;const n=kA.exec(t);if(H(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:De(t.seconds),nanos:De(t.nanos)}}function De(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function yr(t){return typeof t=="string"?$e.fromBase64String(t):$e.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ju(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Jf(t){const e=t.mapValue.fields.__previous_value__;return Ju(e)?Jf(e):e}function ca(t){const e=Nn(t.mapValue.fields.__local_write_time__.timestampValue);return new Te(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bA{constructor(e,n,r,i,s,o,l,u,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=c}}class _r{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new _r("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof _r&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tr={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Bl={nullValue:"NULL_VALUE"};function ui(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Ju(t)?4:Uw(t)?9007199254740991:10:W()}function pn(t,e){if(t===e)return!0;const n=ui(t);if(n!==ui(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return ca(t).isEqual(ca(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=Nn(i.timestampValue),l=Nn(s.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return yr(i.bytesValue).isEqual(yr(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return De(i.geoPointValue.latitude)===De(s.geoPointValue.latitude)&&De(i.geoPointValue.longitude)===De(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return De(i.integerValue)===De(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=De(i.doubleValue),l=De(s.doubleValue);return o===l?ua(o)===ua(l):isNaN(o)&&isNaN(l)}return!1}(t,e);case 9:return _s(t.arrayValue.values||[],e.arrayValue.values||[],pn);case 10:return function(i,s){const o=i.mapValue.fields||{},l=s.mapValue.fields||{};if(Ty(o)!==Ty(l))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(l[u]===void 0||!pn(o[u],l[u])))return!1;return!0}(t,e);default:return W()}}function ha(t,e){return(t.values||[]).find(n=>pn(n,e))!==void 0}function vr(t,e){if(t===e)return 0;const n=ui(t),r=ui(e);if(n!==r)return X(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return X(t.booleanValue,e.booleanValue);case 2:return function(s,o){const l=De(s.integerValue||s.doubleValue),u=De(o.integerValue||o.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1}(t,e);case 3:return xy(t.timestampValue,e.timestampValue);case 4:return xy(ca(t),ca(e));case 5:return X(t.stringValue,e.stringValue);case 6:return function(s,o){const l=yr(s),u=yr(o);return l.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const l=s.split("/"),u=o.split("/");for(let c=0;c<l.length&&c<u.length;c++){const f=X(l[c],u[c]);if(f!==0)return f}return X(l.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const l=X(De(s.latitude),De(o.latitude));return l!==0?l:X(De(s.longitude),De(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(s,o){const l=s.values||[],u=o.values||[];for(let c=0;c<l.length&&c<u.length;++c){const f=vr(l[c],u[c]);if(f)return f}return X(l.length,u.length)}(t.arrayValue,e.arrayValue);case 10:return function(s,o){if(s===tr.mapValue&&o===tr.mapValue)return 0;if(s===tr.mapValue)return 1;if(o===tr.mapValue)return-1;const l=s.fields||{},u=Object.keys(l),c=o.fields||{},f=Object.keys(c);u.sort(),f.sort();for(let m=0;m<u.length&&m<f.length;++m){const v=X(u[m],f[m]);if(v!==0)return v;const A=vr(l[u[m]],c[f[m]]);if(A!==0)return A}return X(u.length,f.length)}(t.mapValue,e.mapValue);default:throw W()}}function xy(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return X(t,e);const n=Nn(t),r=Nn(e),i=X(n.seconds,r.seconds);return i!==0?i:X(n.nanos,r.nanos)}function vs(t){return xd(t)}function xd(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Nn(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return yr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return $.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=xd(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${xd(n.fields[o])}`;return i+"}"}(t.mapValue):W()}function ci(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Pd(t){return!!t&&"integerValue"in t}function da(t){return!!t&&"arrayValue"in t}function Py(t){return!!t&&"nullValue"in t}function Ay(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function jl(t){return!!t&&"mapValue"in t}function Lo(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Ei(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Lo(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Lo(t.arrayValue.values[n]);return e}return Object.assign({},t)}function Uw(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}function DA(t){return"nullValue"in t?Bl:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?ci(_r.empty(),$.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?{mapValue:{}}:W()}function VA(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?ci(_r.empty(),$.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?{mapValue:{}}:"mapValue"in t?tr:W()}function Ry(t,e){const n=vr(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function Cy(t,e){const n=vr(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class et{constructor(e){this.value=e}static empty(){return new et({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!jl(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Lo(n)}setAll(e){let n=Ee.emptyPath(),r={},i=[];e.forEach((o,l)=>{if(!n.isImmediateParentOf(l)){const u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=l.popLast()}o?r[l.lastSegment()]=Lo(o):i.push(l.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());jl(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return pn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];jl(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Ei(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new et(Lo(this.value))}}function $w(t){const e=[];return Ei(t.fields,(n,r)=>{const i=new Ee([n]);if(jl(r)){const s=$w(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new Pt(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _e{constructor(e,n,r,i,s,o,l){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=l}static newInvalidDocument(e){return new _e(e,0,Q.min(),Q.min(),Q.min(),et.empty(),0)}static newFoundDocument(e,n,r,i){return new _e(e,1,n,Q.min(),r,i,0)}static newNoDocument(e,n){return new _e(e,2,n,Q.min(),Q.min(),et.empty(),0)}static newUnknownDocument(e,n){return new _e(e,3,n,Q.min(),Q.min(),et.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Q.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=et.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=et.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Q.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof _e&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new _e(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wr{constructor(e,n){this.position=e,this.inclusive=n}}function ky(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=$.comparator($.fromName(o.referenceValue),n.key):r=vr(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function by(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!pn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fa{constructor(e,n="asc"){this.field=e,this.dir=n}}function NA(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qw{}class re extends qw{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new MA(e,n,r):n==="array-contains"?new FA(e,r):n==="in"?new Yw(e,r):n==="not-in"?new BA(e,r):n==="array-contains-any"?new jA(e,r):new re(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new LA(e,r):new OA(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(vr(n,this.value)):n!==null&&ui(this.value)===ui(n)&&this.matchesComparison(vr(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return W()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ue extends qw{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new ue(e,n)}matches(e){return ws(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function ws(t){return t.op==="and"}function Ad(t){return t.op==="or"}function Zf(t){return Gw(t)&&ws(t)}function Gw(t){for(const e of t.filters)if(e instanceof ue)return!1;return!0}function Rd(t){if(t instanceof re)return t.field.canonicalString()+t.op.toString()+vs(t.value);if(Zf(t))return t.filters.map(e=>Rd(e)).join(",");{const e=t.filters.map(n=>Rd(n)).join(",");return`${t.op}(${e})`}}function Ww(t,e){return t instanceof re?function(r,i){return i instanceof re&&r.op===i.op&&r.field.isEqual(i.field)&&pn(r.value,i.value)}(t,e):t instanceof ue?function(r,i){return i instanceof ue&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,l)=>s&&Ww(o,i.filters[l]),!0):!1}(t,e):void W()}function Kw(t,e){const n=t.filters.concat(e);return ue.create(n,t.op)}function Hw(t){return t instanceof re?function(n){return`${n.field.canonicalString()} ${n.op} ${vs(n.value)}`}(t):t instanceof ue?function(n){return n.op.toString()+" {"+n.getFilters().map(Hw).join(" ,")+"}"}(t):"Filter"}class MA extends re{constructor(e,n,r){super(e,n,r),this.key=$.fromName(r.referenceValue)}matches(e){const n=$.comparator(e.key,this.key);return this.matchesComparison(n)}}class LA extends re{constructor(e,n){super(e,"in",n),this.keys=Qw("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class OA extends re{constructor(e,n){super(e,"not-in",n),this.keys=Qw("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function Qw(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>$.fromName(r.referenceValue))}class FA extends re{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return da(n)&&ha(n.arrayValue,this.value)}}class Yw extends re{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&ha(this.value.arrayValue,n)}}class BA extends re{constructor(e,n){super(e,"not-in",n)}matches(e){if(ha(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!ha(this.value.arrayValue,n)}}class jA extends re{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!da(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>ha(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zA{constructor(e,n=null,r=[],i=[],s=null,o=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=l,this.ue=null}}function Cd(t,e=null,n=[],r=[],i=null,s=null,o=null){return new zA(t,e,n,r,i,s,o)}function hi(t){const e=q(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Rd(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),xa(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>vs(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>vs(r)).join(",")),e.ue=n}return e.ue}function Pa(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!NA(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!Ww(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!by(t.startAt,e.startAt)&&by(t.endAt,e.endAt)}function Iu(t){return $.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function Tu(t,e){return t.filters.filter(n=>n instanceof re&&n.field.isEqual(e))}function Dy(t,e,n){let r=Bl,i=!0;for(const s of Tu(t,e)){let o=Bl,l=!0;switch(s.op){case"<":case"<=":o=DA(s.value);break;case"==":case"in":case">=":o=s.value;break;case">":o=s.value,l=!1;break;case"!=":case"not-in":o=Bl}Ry({value:r,inclusive:i},{value:o,inclusive:l})<0&&(r=o,i=l)}if(n!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const o=n.position[s];Ry({value:r,inclusive:i},{value:o,inclusive:n.inclusive})<0&&(r=o,i=n.inclusive);break}}return{value:r,inclusive:i}}function Vy(t,e,n){let r=tr,i=!0;for(const s of Tu(t,e)){let o=tr,l=!0;switch(s.op){case">=":case">":o=VA(s.value),l=!1;break;case"==":case"in":case"<=":o=s.value;break;case"<":o=s.value,l=!1;break;case"!=":case"not-in":o=tr}Cy({value:r,inclusive:i},{value:o,inclusive:l})>0&&(r=o,i=l)}if(n!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const o=n.position[s];Cy({value:r,inclusive:i},{value:o,inclusive:n.inclusive})>0&&(r=o,i=n.inclusive);break}}return{value:r,inclusive:i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class On{constructor(e,n=null,r=[],i=[],s=null,o="F",l=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=l,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function Xw(t,e,n,r,i,s,o,l){return new On(t,e,n,r,i,s,o,l)}function Ls(t){return new On(t)}function Ny(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function ep(t){return t.collectionGroup!==null}function os(t){const e=q(t);if(e.ce===null){e.ce=[];const n=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new he(Ee.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(c=>{c.isInequality()&&(l=l.add(c.field))})}),l})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new fa(s,r))}),n.has(Ee.keyField().canonicalString())||e.ce.push(new fa(Ee.keyField(),r))}return e.ce}function _t(t){const e=q(t);return e.le||(e.le=UA(e,os(t))),e.le}function UA(t,e){if(t.limitType==="F")return Cd(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new fa(i.field,s)});const n=t.endAt?new wr(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new wr(t.startAt.position,t.startAt.inclusive):null;return Cd(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function kd(t,e){const n=t.filters.concat([e]);return new On(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Su(t,e,n){return new On(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Aa(t,e){return Pa(_t(t),_t(e))&&t.limitType===e.limitType}function Jw(t){return`${hi(_t(t))}|lt:${t.limitType}`}function Oi(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>Hw(i)).join(", ")}]`),xa(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>vs(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>vs(i)).join(",")),`Target(${r})`}(_t(t))}; limitType=${t.limitType})`}function Ra(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):$.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of os(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,l,u){const c=ky(o,l,u);return o.inclusive?c<=0:c<0}(r.startAt,os(r),i)||r.endAt&&!function(o,l,u){const c=ky(o,l,u);return o.inclusive?c>=0:c>0}(r.endAt,os(r),i))}(t,e)}function Zw(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function e1(t){return(e,n)=>{let r=!1;for(const i of os(t)){const s=$A(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function $A(t,e,n){const r=t.field.isKeyField()?$.comparator(e.key,n.key):function(s,o,l){const u=o.data.field(s),c=l.data.field(s);return u!==null&&c!==null?vr(u,c):W()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return W()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kr{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Ei(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return jw(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qA=new me($.comparator);function At(){return qA}const t1=new me($.comparator);function To(...t){let e=t1;for(const n of t)e=e.insert(n.key,n);return e}function n1(t){let e=t1;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function un(){return Oo()}function r1(){return Oo()}function Oo(){return new kr(t=>t.toString(),(t,e)=>t.isEqual(e))}const GA=new me($.comparator),WA=new he($.comparator);function J(...t){let e=WA;for(const n of t)e=e.add(n);return e}const KA=new he(X);function tp(){return KA}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i1(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ua(e)?"-0":e}}function s1(t){return{integerValue:""+t}}function o1(t,e){return Nw(e)?s1(e):i1(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zu{constructor(){this._=void 0}}function HA(t,e,n){return t instanceof Es?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&Ju(s)&&(s=Jf(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof di?l1(t,e):t instanceof fi?u1(t,e):function(i,s){const o=a1(i,s),l=My(o)+My(i.Pe);return Pd(o)&&Pd(i.Pe)?s1(l):i1(i.serializer,l)}(t,e)}function QA(t,e,n){return t instanceof di?l1(t,e):t instanceof fi?u1(t,e):n}function a1(t,e){return t instanceof Is?function(r){return Pd(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class Es extends Zu{}class di extends Zu{constructor(e){super(),this.elements=e}}function l1(t,e){const n=c1(e);for(const r of t.elements)n.some(i=>pn(i,r))||n.push(r);return{arrayValue:{values:n}}}class fi extends Zu{constructor(e){super(),this.elements=e}}function u1(t,e){let n=c1(e);for(const r of t.elements)n=n.filter(i=>!pn(i,r));return{arrayValue:{values:n}}}class Is extends Zu{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function My(t){return De(t.integerValue||t.doubleValue)}function c1(t){return da(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ca{constructor(e,n){this.field=e,this.transform=n}}function YA(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof di&&i instanceof di||r instanceof fi&&i instanceof fi?_s(r.elements,i.elements,pn):r instanceof Is&&i instanceof Is?pn(r.Pe,i.Pe):r instanceof Es&&i instanceof Es}(t.transform,e.transform)}class XA{constructor(e,n){this.version=e,this.transformResults=n}}class Ie{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Ie}static exists(e){return new Ie(void 0,e)}static updateTime(e){return new Ie(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function zl(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class ec{}function h1(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Fs(t.key,Ie.none()):new Os(t.key,t.data,Ie.none());{const n=t.data,r=et.empty();let i=new he(Ee.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Fn(t.key,r,new Pt(i.toArray()),Ie.none())}}function JA(t,e,n){t instanceof Os?function(i,s,o){const l=i.value.clone(),u=Oy(i.fieldTransforms,s,o.transformResults);l.setAll(u),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):t instanceof Fn?function(i,s,o){if(!zl(i.precondition,s))return void s.convertToUnknownDocument(o.version);const l=Oy(i.fieldTransforms,s,o.transformResults),u=s.data;u.setAll(d1(i)),u.setAll(l),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Fo(t,e,n,r){return t instanceof Os?function(s,o,l,u){if(!zl(s.precondition,o))return l;const c=s.value.clone(),f=Fy(s.fieldTransforms,u,o);return c.setAll(f),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof Fn?function(s,o,l,u){if(!zl(s.precondition,o))return l;const c=Fy(s.fieldTransforms,u,o),f=o.data;return f.setAll(d1(s)),f.setAll(c),o.convertToFoundDocument(o.version,f).setHasLocalMutations(),l===null?null:l.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(m=>m.field))}(t,e,n,r):function(s,o,l){return zl(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(t,e,n)}function ZA(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=a1(r.transform,i||null);s!=null&&(n===null&&(n=et.empty()),n.set(r.field,s))}return n||null}function Ly(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&_s(r,i,(s,o)=>YA(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Os extends ec{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Fn extends ec{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function d1(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function Oy(t,e,n){const r=new Map;H(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,l=e.data.field(s.field);r.set(s.field,QA(o,l,n[i]))}return r}function Fy(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,HA(s,o,e))}return r}class Fs extends ec{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class np extends ec{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rp{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&JA(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Fo(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Fo(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=r1();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let l=this.applyToLocalView(o,s.mutatedFields);l=n.has(i.key)?null:l;const u=h1(o,l);u!==null&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(Q.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),J())}isEqual(e){return this.batchId===e.batchId&&_s(this.mutations,e.mutations,(n,r)=>Ly(n,r))&&_s(this.baseMutations,e.baseMutations,(n,r)=>Ly(n,r))}}class ip{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){H(e.mutations.length===r.length);let i=function(){return GA}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new ip(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sp{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e2{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Fe,se;function f1(t){switch(t){default:return W();case L.CANCELLED:case L.UNKNOWN:case L.DEADLINE_EXCEEDED:case L.RESOURCE_EXHAUSTED:case L.INTERNAL:case L.UNAVAILABLE:case L.UNAUTHENTICATED:return!1;case L.INVALID_ARGUMENT:case L.NOT_FOUND:case L.ALREADY_EXISTS:case L.PERMISSION_DENIED:case L.FAILED_PRECONDITION:case L.ABORTED:case L.OUT_OF_RANGE:case L.UNIMPLEMENTED:case L.DATA_LOSS:return!0}}function p1(t){if(t===void 0)return Le("GRPC error has no .code"),L.UNKNOWN;switch(t){case Fe.OK:return L.OK;case Fe.CANCELLED:return L.CANCELLED;case Fe.UNKNOWN:return L.UNKNOWN;case Fe.DEADLINE_EXCEEDED:return L.DEADLINE_EXCEEDED;case Fe.RESOURCE_EXHAUSTED:return L.RESOURCE_EXHAUSTED;case Fe.INTERNAL:return L.INTERNAL;case Fe.UNAVAILABLE:return L.UNAVAILABLE;case Fe.UNAUTHENTICATED:return L.UNAUTHENTICATED;case Fe.INVALID_ARGUMENT:return L.INVALID_ARGUMENT;case Fe.NOT_FOUND:return L.NOT_FOUND;case Fe.ALREADY_EXISTS:return L.ALREADY_EXISTS;case Fe.PERMISSION_DENIED:return L.PERMISSION_DENIED;case Fe.FAILED_PRECONDITION:return L.FAILED_PRECONDITION;case Fe.ABORTED:return L.ABORTED;case Fe.OUT_OF_RANGE:return L.OUT_OF_RANGE;case Fe.UNIMPLEMENTED:return L.UNIMPLEMENTED;case Fe.DATA_LOSS:return L.DATA_LOSS;default:return W()}}(se=Fe||(Fe={}))[se.OK=0]="OK",se[se.CANCELLED=1]="CANCELLED",se[se.UNKNOWN=2]="UNKNOWN",se[se.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",se[se.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",se[se.NOT_FOUND=5]="NOT_FOUND",se[se.ALREADY_EXISTS=6]="ALREADY_EXISTS",se[se.PERMISSION_DENIED=7]="PERMISSION_DENIED",se[se.UNAUTHENTICATED=16]="UNAUTHENTICATED",se[se.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",se[se.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",se[se.ABORTED=10]="ABORTED",se[se.OUT_OF_RANGE=11]="OUT_OF_RANGE",se[se.UNIMPLEMENTED=12]="UNIMPLEMENTED",se[se.INTERNAL=13]="INTERNAL",se[se.UNAVAILABLE=14]="UNAVAILABLE",se[se.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m1(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t2=new ti([4294967295,4294967295],0);function By(t){const e=m1().encode(t),n=new vw;return n.update(e),new Uint8Array(n.digest())}function jy(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new ti([n,r],0),new ti([i,s],0)]}class op{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new So(`Invalid padding: ${n}`);if(r<0)throw new So(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new So(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new So(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=ti.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(ti.fromNumber(r)));return i.compare(t2)===1&&(i=new ti([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=By(e),[r,i]=jy(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new op(s,i,n);return r.forEach(l=>o.insert(l)),o}insert(e){if(this.Ie===0)return;const n=By(e),[r,i]=jy(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class So extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ka{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,ba.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new ka(Q.min(),i,new me(X),At(),J())}}class ba{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new ba(r,n,J(),J(),J())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ul{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}}class g1{constructor(e,n){this.targetId=e,this.me=n}}class y1{constructor(e,n,r=$e.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class zy{constructor(){this.fe=0,this.ge=$y(),this.pe=$e.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}Ce(){let e=J(),n=J(),r=J();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:W()}}),new ba(this.pe,this.ye,e,n,r)}ve(){this.we=!1,this.ge=$y()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,H(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class n2{constructor(e){this.Le=e,this.Be=new Map,this.ke=At(),this.qe=Uy(),this.Qe=new me(X)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.ve(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:W()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){const n=e.targetId,r=e.me.count,i=this.Je(n);if(i){const s=i.target;if(Iu(s))if(r===0){const o=new $(s.path);this.Ue(n,o,_e.newNoDocument(o,Q.min()))}else H(r===1);else{const o=this.Ye(n);if(o!==r){const l=this.Ze(e),u=l?this.Xe(l,e,o):1;if(u!==0){this.je(n);const c=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,c)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,l;try{o=yr(r).toUint8Array()}catch(u){if(u instanceof zw)return rn("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{l=new op(o,i,s)}catch(u){return rn(u instanceof So?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return l.Ie===0?null:l}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Le.tt(),l=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(l)||(this.Ue(n,s,null),i++)}),i}rt(e){const n=new Map;this.Be.forEach((s,o)=>{const l=this.Je(o);if(l){if(s.current&&Iu(l.target)){const u=new $(l.target.path);this.ke.get(u)!==null||this.it(o,u)||this.Ue(o,u,_e.newNoDocument(u,e))}s.be&&(n.set(o,s.Ce()),s.ve())}});let r=J();this.qe.forEach((s,o)=>{let l=!0;o.forEachWhile(u=>{const c=this.Je(u);return!c||c.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));const i=new ka(e,n,this.Qe,this.ke,r);return this.ke=At(),this.qe=Uy(),this.Qe=new me(X),i}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).Ce();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new zy,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new he(X),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||j("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new zy),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function Uy(){return new me($.comparator)}function $y(){return new me($.comparator)}const r2={asc:"ASCENDING",desc:"DESCENDING"},i2={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},s2={and:"AND",or:"OR"};class o2{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function bd(t,e){return t.useProto3Json||xa(e)?e:{value:e}}function Ts(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function _1(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function a2(t,e){return Ts(t,e.toTimestamp())}function Oe(t){return H(!!t),Q.fromTimestamp(function(n){const r=Nn(n);return new Te(r.seconds,r.nanos)}(t))}function ap(t,e){return Dd(t,e).canonicalString()}function Dd(t,e){const n=function(i){return new ne(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function v1(t){const e=ne.fromString(t);return H(C1(e)),e}function pa(t,e){return ap(t.databaseId,e.path)}function fn(t,e){const n=v1(e);if(n.get(1)!==t.databaseId.projectId)throw new B(L.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new B(L.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new $(I1(n))}function w1(t,e){return ap(t.databaseId,e)}function E1(t){const e=v1(t);return e.length===4?ne.emptyPath():I1(e)}function Vd(t){return new ne(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function I1(t){return H(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function qy(t,e,n){return{name:pa(t,e),fields:n.value.mapValue.fields}}function T1(t,e,n){const r=fn(t,e.name),i=Oe(e.updateTime),s=e.createTime?Oe(e.createTime):Q.min(),o=new et({mapValue:{fields:e.fields}}),l=_e.newFoundDocument(r,i,s,o);return n&&l.setHasCommittedMutations(),n?l.setHasCommittedMutations():l}function l2(t,e){return"found"in e?function(r,i){H(!!i.found),i.found.name,i.found.updateTime;const s=fn(r,i.found.name),o=Oe(i.found.updateTime),l=i.found.createTime?Oe(i.found.createTime):Q.min(),u=new et({mapValue:{fields:i.found.fields}});return _e.newFoundDocument(s,o,l,u)}(t,e):"missing"in e?function(r,i){H(!!i.missing),H(!!i.readTime);const s=fn(r,i.missing),o=Oe(i.readTime);return _e.newNoDocument(s,o)}(t,e):W()}function u2(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:W()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(c,f){return c.useProto3Json?(H(f===void 0||typeof f=="string"),$e.fromBase64String(f||"")):(H(f===void 0||f instanceof Buffer||f instanceof Uint8Array),$e.fromUint8Array(f||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&function(c){const f=c.code===void 0?L.UNKNOWN:p1(c.code);return new B(f,c.message||"")}(o);n=new y1(r,i,s,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=fn(t,r.document.name),s=Oe(r.document.updateTime),o=r.document.createTime?Oe(r.document.createTime):Q.min(),l=new et({mapValue:{fields:r.document.fields}}),u=_e.newFoundDocument(i,s,o,l),c=r.targetIds||[],f=r.removedTargetIds||[];n=new Ul(c,f,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=fn(t,r.document),s=r.readTime?Oe(r.readTime):Q.min(),o=_e.newNoDocument(i,s),l=r.removedTargetIds||[];n=new Ul([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=fn(t,r.document),s=r.removedTargetIds||[];n=new Ul([],s,i,null)}else{if(!("filter"in e))return W();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new e2(i,s),l=r.targetId;n=new g1(l,o)}}return n}function ma(t,e){let n;if(e instanceof Os)n={update:qy(t,e.key,e.value)};else if(e instanceof Fs)n={delete:pa(t,e.key)};else if(e instanceof Fn)n={update:qy(t,e.key,e.data),updateMask:m2(e.fieldMask)};else{if(!(e instanceof np))return W();n={verify:pa(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const l=o.transform;if(l instanceof Es)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof di)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof fi)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Is)return{fieldPath:o.field.canonicalString(),increment:l.Pe};throw W()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:a2(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:W()}(t,e.precondition)),n}function Nd(t,e){const n=e.currentDocument?function(s){return s.updateTime!==void 0?Ie.updateTime(Oe(s.updateTime)):s.exists!==void 0?Ie.exists(s.exists):Ie.none()}(e.currentDocument):Ie.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(o,l){let u=null;if("setToServerValue"in l)H(l.setToServerValue==="REQUEST_TIME"),u=new Es;else if("appendMissingElements"in l){const f=l.appendMissingElements.values||[];u=new di(f)}else if("removeAllFromArray"in l){const f=l.removeAllFromArray.values||[];u=new fi(f)}else"increment"in l?u=new Is(o,l.increment):W();const c=Ee.fromServerFormat(l.fieldPath);return new Ca(c,u)}(t,i)):[];if(e.update){e.update.name;const i=fn(t,e.update.name),s=new et({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=function(u){const c=u.fieldPaths||[];return new Pt(c.map(f=>Ee.fromServerFormat(f)))}(e.updateMask);return new Fn(i,s,o,n,r)}return new Os(i,s,n,r)}if(e.delete){const i=fn(t,e.delete);return new Fs(i,n)}if(e.verify){const i=fn(t,e.verify);return new np(i,n)}return W()}function c2(t,e){return t&&t.length>0?(H(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?Oe(i.updateTime):Oe(s);return o.isEqual(Q.min())&&(o=Oe(s)),new XA(o,i.transformResults||[])}(n,e))):[]}function S1(t,e){return{documents:[w1(t,e.path)]}}function x1(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=w1(t,i);const s=function(c){if(c.length!==0)return R1(ue.create(c,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(c){if(c.length!==0)return c.map(f=>function(v){return{field:Fi(v.field),direction:d2(v.dir)}}(f))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const l=bd(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{_t:n,parent:i}}function P1(t){let e=E1(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){H(r===1);const f=n.from[0];f.allDescendants?i=f.collectionId:e=e.child(f.collectionId)}let s=[];n.where&&(s=function(m){const v=A1(m);return v instanceof ue&&Zf(v)?v.getFilters():[v]}(n.where));let o=[];n.orderBy&&(o=function(m){return m.map(v=>function(D){return new fa(Bi(D.field),function(F){switch(F){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(D.direction))}(v))}(n.orderBy));let l=null;n.limit&&(l=function(m){let v;return v=typeof m=="object"?m.value:m,xa(v)?null:v}(n.limit));let u=null;n.startAt&&(u=function(m){const v=!!m.before,A=m.values||[];return new wr(A,v)}(n.startAt));let c=null;return n.endAt&&(c=function(m){const v=!m.before,A=m.values||[];return new wr(A,v)}(n.endAt)),Xw(e,i,o,s,l,"F",u,c)}function h2(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return W()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function A1(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Bi(n.unaryFilter.field);return re.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Bi(n.unaryFilter.field);return re.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Bi(n.unaryFilter.field);return re.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Bi(n.unaryFilter.field);return re.create(o,"!=",{nullValue:"NULL_VALUE"});default:return W()}}(t):t.fieldFilter!==void 0?function(n){return re.create(Bi(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return W()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return ue.create(n.compositeFilter.filters.map(r=>A1(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return W()}}(n.compositeFilter.op))}(t):W()}function d2(t){return r2[t]}function f2(t){return i2[t]}function p2(t){return s2[t]}function Fi(t){return{fieldPath:t.canonicalString()}}function Bi(t){return Ee.fromServerFormat(t.fieldPath)}function R1(t){return t instanceof re?function(n){if(n.op==="=="){if(Ay(n.value))return{unaryFilter:{field:Fi(n.field),op:"IS_NAN"}};if(Py(n.value))return{unaryFilter:{field:Fi(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Ay(n.value))return{unaryFilter:{field:Fi(n.field),op:"IS_NOT_NAN"}};if(Py(n.value))return{unaryFilter:{field:Fi(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Fi(n.field),op:f2(n.op),value:n.value}}}(t):t instanceof ue?function(n){const r=n.getFilters().map(i=>R1(i));return r.length===1?r[0]:{compositeFilter:{op:p2(n.op),filters:r}}}(t):W()}function m2(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function C1(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class An{constructor(e,n,r,i,s=Q.min(),o=Q.min(),l=$e.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(e){return new An(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new An(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new An(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new An(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k1{constructor(e){this.ct=e}}function g2(t,e){let n;if(e.document)n=T1(t.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=$.fromSegments(e.noDocument.path),i=mi(e.noDocument.readTime);n=_e.newNoDocument(r,i),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return W();{const r=$.fromSegments(e.unknownDocument.path),i=mi(e.unknownDocument.version);n=_e.newUnknownDocument(r,i)}}return e.readTime&&n.setReadTime(function(i){const s=new Te(i[0],i[1]);return Q.fromTimestamp(s)}(e.readTime)),n}function Gy(t,e){const n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:xu(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(s,o){return{name:pa(s,o.key),fields:o.data.value.mapValue.fields,updateTime:Ts(s,o.version.toTimestamp()),createTime:Ts(s,o.createTime.toTimestamp())}}(t.ct,e);else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:pi(e.version)};else{if(!e.isUnknownDocument())return W();r.unknownDocument={path:n.path.toArray(),version:pi(e.version)}}return r}function xu(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function pi(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function mi(t){const e=new Te(t.seconds,t.nanoseconds);return Q.fromTimestamp(e)}function qr(t,e){const n=(e.baseMutations||[]).map(s=>Nd(t.ct,s));for(let s=0;s<e.mutations.length-1;++s){const o=e.mutations[s];if(s+1<e.mutations.length&&e.mutations[s+1].transform!==void 0){const l=e.mutations[s+1];o.updateTransforms=l.transform.fieldTransforms,e.mutations.splice(s+1,1),++s}}const r=e.mutations.map(s=>Nd(t.ct,s)),i=Te.fromMillis(e.localWriteTimeMs);return new rp(e.batchId,i,n,r)}function xo(t){const e=mi(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?mi(t.lastLimboFreeSnapshotVersion):Q.min();let r;return r=function(s){return s.documents!==void 0}(t.query)?function(s){return H(s.documents.length===1),_t(Ls(E1(s.documents[0])))}(t.query):function(s){return _t(P1(s))}(t.query),new An(r,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,$e.fromBase64String(t.resumeToken))}function b1(t,e){const n=pi(e.snapshotVersion),r=pi(e.lastLimboFreeSnapshotVersion);let i;i=Iu(e.target)?S1(t.ct,e.target):x1(t.ct,e.target)._t;const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:hi(e.target),readTime:n,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function lp(t){const e=P1({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Su(e,e.limit,"L"):e}function vh(t,e){return new sp(e.largestBatchId,Nd(t.ct,e.overlayMutation))}function Wy(t,e){const n=e.path.lastSegment();return[t,yt(e.path.popLast()),n]}function Ky(t,e,n,r){return{indexId:t,uid:e,sequenceNumber:n,readTime:pi(r.readTime),documentKey:yt(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y2{getBundleMetadata(e,n){return Hy(e).get(n).next(r=>{if(r)return function(s){return{id:s.bundleId,createTime:mi(s.createTime),version:s.version}}(r)})}saveBundleMetadata(e,n){return Hy(e).put(function(i){return{bundleId:i.id,createTime:pi(Oe(i.createTime)),version:i.version}}(n))}getNamedQuery(e,n){return Qy(e).get(n).next(r=>{if(r)return function(s){return{name:s.name,query:lp(s.bundledQuery),readTime:mi(s.readTime)}}(r)})}saveNamedQuery(e,n){return Qy(e).put(function(i){return{name:i.name,readTime:pi(Oe(i.readTime)),bundledQuery:i.bundledQuery}}(n))}}function Hy(t){return Qe(t,"bundles")}function Qy(t){return Qe(t,"namedQueries")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tc{constructor(e,n){this.serializer=e,this.userId=n}static lt(e,n){const r=n.uid||"";return new tc(e,r)}getOverlay(e,n){return fo(e).get(Wy(this.userId,n)).next(r=>r?vh(this.serializer,r):null)}getOverlays(e,n){const r=un();return M.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){const i=[];return r.forEach((s,o)=>{const l=new sp(n,o);i.push(this.ht(e,l))}),M.waitFor(i)}removeOverlaysForBatchId(e,n,r){const i=new Set;n.forEach(o=>i.add(yt(o.getCollectionPath())));const s=[];return i.forEach(o=>{const l=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);s.push(fo(e).j("collectionPathOverlayIndex",l))}),M.waitFor(s)}getOverlaysForCollection(e,n,r){const i=un(),s=yt(n),o=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return fo(e).U("collectionPathOverlayIndex",o).next(l=>{for(const u of l){const c=vh(this.serializer,u);i.set(c.getKey(),c)}return i})}getOverlaysForCollectionGroup(e,n,r,i){const s=un();let o;const l=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return fo(e).J({index:"collectionGroupOverlayIndex",range:l},(u,c,f)=>{const m=vh(this.serializer,c);s.size()<i||m.largestBatchId===o?(s.set(m.getKey(),m),o=m.largestBatchId):f.done()}).next(()=>s)}ht(e,n){return fo(e).put(function(i,s,o){const[l,u,c]=Wy(s,o.mutation.key);return{userId:s,collectionPath:u,documentId:c,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:ma(i.ct,o.mutation)}}(this.serializer,this.userId,n))}}function fo(t){return Qe(t,"documentOverlays")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gr{constructor(){}Pt(e,n){this.It(e,n),n.Tt()}It(e,n){if("nullValue"in e)this.Et(n,5);else if("booleanValue"in e)this.Et(n,10),n.dt(e.booleanValue?1:0);else if("integerValue"in e)this.Et(n,15),n.dt(De(e.integerValue));else if("doubleValue"in e){const r=De(e.doubleValue);isNaN(r)?this.Et(n,13):(this.Et(n,15),ua(r)?n.dt(0):n.dt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Et(n,20),typeof r=="string"&&(r=Nn(r)),n.At(`${r.seconds||""}`),n.dt(r.nanos||0)}else if("stringValue"in e)this.Rt(e.stringValue,n),this.Vt(n);else if("bytesValue"in e)this.Et(n,30),n.ft(yr(e.bytesValue)),this.Vt(n);else if("referenceValue"in e)this.gt(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.Et(n,45),n.dt(r.latitude||0),n.dt(r.longitude||0)}else"mapValue"in e?Uw(e)?this.Et(n,Number.MAX_SAFE_INTEGER):(this.yt(e.mapValue,n),this.Vt(n)):"arrayValue"in e?(this.wt(e.arrayValue,n),this.Vt(n)):W()}Rt(e,n){this.Et(n,25),this.St(e,n)}St(e,n){n.At(e)}yt(e,n){const r=e.fields||{};this.Et(n,55);for(const i of Object.keys(r))this.Rt(i,n),this.It(r[i],n)}wt(e,n){const r=e.values||[];this.Et(n,50);for(const i of r)this.It(i,n)}gt(e,n){this.Et(n,37),$.fromName(e).path.forEach(r=>{this.Et(n,60),this.St(r,n)})}Et(e,n){e.dt(n)}Vt(e){e.dt(2)}}Gr.bt=new Gr;function _2(t){if(t===0)return 8;let e=0;return!(t>>4)&&(e+=4,t<<=4),!(t>>6)&&(e+=2,t<<=2),!(t>>7)&&(e+=1),e}function Yy(t){const e=64-function(r){let i=0;for(let s=0;s<8;++s){const o=_2(255&r[s]);if(i+=o,o!==8)break}return i}(t);return Math.ceil(e/8)}class v2{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Dt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Ct(r.value),r=n.next();this.vt()}Ft(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Mt(r.value),r=n.next();this.xt()}Ot(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Ct(r);else if(r<2048)this.Ct(960|r>>>6),this.Ct(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Ct(480|r>>>12),this.Ct(128|63&r>>>6),this.Ct(128|63&r);else{const i=n.codePointAt(0);this.Ct(240|i>>>18),this.Ct(128|63&i>>>12),this.Ct(128|63&i>>>6),this.Ct(128|63&i)}}this.vt()}Nt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Mt(r);else if(r<2048)this.Mt(960|r>>>6),this.Mt(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Mt(480|r>>>12),this.Mt(128|63&r>>>6),this.Mt(128|63&r);else{const i=n.codePointAt(0);this.Mt(240|i>>>18),this.Mt(128|63&i>>>12),this.Mt(128|63&i>>>6),this.Mt(128|63&i)}}this.xt()}Lt(e){const n=this.Bt(e),r=Yy(n);this.kt(1+r),this.buffer[this.position++]=255&r;for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=255&n[i]}qt(e){const n=this.Bt(e),r=Yy(n);this.kt(1+r),this.buffer[this.position++]=~(255&r);for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=~(255&n[i])}Qt(){this.Kt(255),this.Kt(255)}$t(){this.Ut(255),this.Ut(255)}reset(){this.position=0}seed(e){this.kt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Wt(){return this.buffer.slice(0,this.position)}Bt(e){const n=function(s){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,s,!1),new Uint8Array(o.buffer)}(e),r=(128&n[0])!=0;n[0]^=r?255:128;for(let i=1;i<n.length;++i)n[i]^=r?255:0;return n}Ct(e){const n=255&e;n===0?(this.Kt(0),this.Kt(255)):n===255?(this.Kt(255),this.Kt(0)):this.Kt(n)}Mt(e){const n=255&e;n===0?(this.Ut(0),this.Ut(255)):n===255?(this.Ut(255),this.Ut(0)):this.Ut(e)}vt(){this.Kt(0),this.Kt(1)}xt(){this.Ut(0),this.Ut(1)}Kt(e){this.kt(1),this.buffer[this.position++]=e}Ut(e){this.kt(1),this.buffer[this.position++]=~e}kt(e){const n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class w2{constructor(e){this.Gt=e}ft(e){this.Gt.Dt(e)}At(e){this.Gt.Ot(e)}dt(e){this.Gt.Lt(e)}Tt(){this.Gt.Qt()}}class E2{constructor(e){this.Gt=e}ft(e){this.Gt.Ft(e)}At(e){this.Gt.Nt(e)}dt(e){this.Gt.qt(e)}Tt(){this.Gt.$t()}}class po{constructor(){this.Gt=new v2,this.zt=new w2(this.Gt),this.jt=new E2(this.Gt)}seed(e){this.Gt.seed(e)}Ht(e){return e===0?this.zt:this.jt}Wt(){return this.Gt.Wt()}reset(){this.Gt.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wr{constructor(e,n,r,i){this.indexId=e,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}Jt(){const e=this.directionalValue.length,n=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Wr(this.indexId,this.documentKey,this.arrayValue,r)}}function qn(t,e){let n=t.indexId-e.indexId;return n!==0?n:(n=Xy(t.arrayValue,e.arrayValue),n!==0?n:(n=Xy(t.directionalValue,e.directionalValue),n!==0?n:$.comparator(t.documentKey,e.documentKey)))}function Xy(t,e){for(let n=0;n<t.length&&n<e.length;++n){const r=t[n]-e[n];if(r!==0)return r}return t.length-e.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jy{constructor(e){this.Yt=new he((n,r)=>Ee.comparator(n.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.Zt=e.orderBy,this.Xt=[];for(const n of e.filters){const r=n;r.isInequality()?this.Yt=this.Yt.add(r):this.Xt.push(r)}}get en(){return this.Yt.size>1}tn(e){if(H(e.collectionGroup===this.collectionId),this.en)return!1;const n=Td(e);if(n!==void 0&&!this.nn(n))return!1;const r=Ur(e);let i=new Set,s=0,o=0;for(;s<r.length&&this.nn(r[s]);++s)i=i.add(r[s].fieldPath.canonicalString());if(s===r.length)return!0;if(this.Yt.size>0){const l=this.Yt.getIterator().getNext();if(!i.has(l.field.canonicalString())){const u=r[s];if(!this.rn(l,u)||!this.sn(this.Zt[o++],u))return!1}++s}for(;s<r.length;++s){const l=r[s];if(o>=this.Zt.length||!this.sn(this.Zt[o++],l))return!1}return!0}on(){if(this.en)return null;let e=new he(Ee.comparator);const n=[];for(const r of this.Xt)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")n.push(new Ol(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),n.push(new Ol(r.field,0))}for(const r of this.Zt)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),n.push(new Ol(r.field,r.dir==="asc"?0:1)));return new Eu(Eu.UNKNOWN_ID,this.collectionId,n,la.empty())}nn(e){for(const n of this.Xt)if(this.rn(n,e))return!0;return!1}rn(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===r}sn(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D1(t){var e,n;if(H(t instanceof re||t instanceof ue),t instanceof re){if(t instanceof Yw){const i=((n=(e=t.value.arrayValue)===null||e===void 0?void 0:e.values)===null||n===void 0?void 0:n.map(s=>re.create(t.field,"==",s)))||[];return ue.create(i,"or")}return t}const r=t.filters.map(i=>D1(i));return ue.create(r,t.op)}function I2(t){if(t.getFilters().length===0)return[];const e=Od(D1(t));return H(V1(e)),Md(e)||Ld(e)?[e]:e.getFilters()}function Md(t){return t instanceof re}function Ld(t){return t instanceof ue&&Zf(t)}function V1(t){return Md(t)||Ld(t)||function(n){if(n instanceof ue&&Ad(n)){for(const r of n.getFilters())if(!Md(r)&&!Ld(r))return!1;return!0}return!1}(t)}function Od(t){if(H(t instanceof re||t instanceof ue),t instanceof re)return t;if(t.filters.length===1)return Od(t.filters[0]);const e=t.filters.map(r=>Od(r));let n=ue.create(e,t.op);return n=Pu(n),V1(n)?n:(H(n instanceof ue),H(ws(n)),H(n.filters.length>1),n.filters.reduce((r,i)=>up(r,i)))}function up(t,e){let n;return H(t instanceof re||t instanceof ue),H(e instanceof re||e instanceof ue),n=t instanceof re?e instanceof re?function(i,s){return ue.create([i,s],"and")}(t,e):Zy(t,e):e instanceof re?Zy(e,t):function(i,s){if(H(i.filters.length>0&&s.filters.length>0),ws(i)&&ws(s))return Kw(i,s.getFilters());const o=Ad(i)?i:s,l=Ad(i)?s:i,u=o.filters.map(c=>up(c,l));return ue.create(u,"or")}(t,e),Pu(n)}function Zy(t,e){if(ws(e))return Kw(e,t.getFilters());{const n=e.filters.map(r=>up(t,r));return ue.create(n,"or")}}function Pu(t){if(H(t instanceof re||t instanceof ue),t instanceof re)return t;const e=t.getFilters();if(e.length===1)return Pu(e[0]);if(Gw(t))return t;const n=e.map(i=>Pu(i)),r=[];return n.forEach(i=>{i instanceof re?r.push(i):i instanceof ue&&(i.op===t.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:ue.create(r,t.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T2{constructor(){this._n=new cp}addToCollectionParentIndex(e,n){return this._n.add(n),M.resolve()}getCollectionParents(e,n){return M.resolve(this._n.getEntries(n))}addFieldIndex(e,n){return M.resolve()}deleteFieldIndex(e,n){return M.resolve()}deleteAllFieldIndexes(e){return M.resolve()}createTargetIndexes(e,n){return M.resolve()}getDocumentsMatchingTarget(e,n){return M.resolve(null)}getIndexType(e,n){return M.resolve(0)}getFieldIndexes(e,n){return M.resolve([])}getNextCollectionGroupToUpdate(e){return M.resolve(null)}getMinOffset(e,n){return M.resolve(Ft.min())}getMinOffsetFromCollectionGroup(e,n){return M.resolve(Ft.min())}updateCollectionGroup(e,n,r){return M.resolve()}updateIndexEntries(e,n){return M.resolve()}}class cp{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new he(ne.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new he(ne.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wl=new Uint8Array(0);class S2{constructor(e,n){this.databaseId=n,this.an=new cp,this.un=new kr(r=>hi(r),(r,i)=>Pa(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.an.has(n)){const r=n.lastSegment(),i=n.popLast();e.addOnCommittedListener(()=>{this.an.add(n)});const s={collectionId:r,parent:yt(i)};return e_(e).put(s)}return M.resolve()}getCollectionParents(e,n){const r=[],i=IDBKeyRange.bound([n,""],[Rw(n),""],!1,!0);return e_(e).U(i).next(s=>{for(const o of s){if(o.collectionId!==n)break;r.push(ln(o.parent))}return r})}addFieldIndex(e,n){const r=mo(e),i=function(l){return{indexId:l.indexId,collectionGroup:l.collectionGroup,fields:l.fields.map(u=>[u.fieldPath.canonicalString(),u.kind])}}(n);delete i.indexId;const s=r.add(i);if(n.indexState){const o=Ni(e);return s.next(l=>{o.put(Ky(l,this.uid,n.indexState.sequenceNumber,n.indexState.offset))})}return s.next()}deleteFieldIndex(e,n){const r=mo(e),i=Ni(e),s=Vi(e);return r.delete(n.indexId).next(()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const n=mo(e),r=Vi(e),i=Ni(e);return n.j().next(()=>r.j()).next(()=>i.j())}createTargetIndexes(e,n){return M.forEach(this.cn(n),r=>this.getIndexType(e,r).next(i=>{if(i===0||i===1){const s=new Jy(r).on();if(s!=null)return this.addFieldIndex(e,s)}}))}getDocumentsMatchingTarget(e,n){const r=Vi(e);let i=!0;const s=new Map;return M.forEach(this.cn(n),o=>this.ln(e,o).next(l=>{i&&(i=!!l),s.set(o,l)})).next(()=>{if(i){let o=J();const l=[];return M.forEach(s,(u,c)=>{j("IndexedDbIndexManager",`Using index ${function(T){return`id=${T.indexId}|cg=${T.collectionGroup}|f=${T.fields.map(d=>`${d.fieldPath}:${d.kind}`).join(",")}`}(u)} to execute ${hi(n)}`);const f=function(T,d){const g=Td(d);if(g===void 0)return null;for(const I of Tu(T,g.fieldPath))switch(I.op){case"array-contains-any":return I.value.arrayValue.values||[];case"array-contains":return[I.value]}return null}(c,u),m=function(T,d){const g=new Map;for(const I of Ur(d))for(const _ of Tu(T,I.fieldPath))switch(_.op){case"==":case"in":g.set(I.fieldPath.canonicalString(),_.value);break;case"not-in":case"!=":return g.set(I.fieldPath.canonicalString(),_.value),Array.from(g.values())}return null}(c,u),v=function(T,d){const g=[];let I=!0;for(const _ of Ur(d)){const y=_.kind===0?Dy(T,_.fieldPath,T.startAt):Vy(T,_.fieldPath,T.startAt);g.push(y.value),I&&(I=y.inclusive)}return new wr(g,I)}(c,u),A=function(T,d){const g=[];let I=!0;for(const _ of Ur(d)){const y=_.kind===0?Vy(T,_.fieldPath,T.endAt):Dy(T,_.fieldPath,T.endAt);g.push(y.value),I&&(I=y.inclusive)}return new wr(g,I)}(c,u),D=this.hn(u,c,v),V=this.hn(u,c,A),F=this.Pn(u,c,m),C=this.In(u.indexId,f,D,v.inclusive,V,A.inclusive,F);return M.forEach(C,x=>r.G(x,n.limit).next(T=>{T.forEach(d=>{const g=$.fromSegments(d.documentKey);o.has(g)||(o=o.add(g),l.push(g))})}))}).next(()=>l)}return M.resolve(null)})}cn(e){let n=this.un.get(e);return n||(e.filters.length===0?n=[e]:n=I2(ue.create(e.filters,"and")).map(r=>Cd(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,n),n)}In(e,n,r,i,s,o,l){const u=(n!=null?n.length:1)*Math.max(r.length,s.length),c=u/(n!=null?n.length:1),f=[];for(let m=0;m<u;++m){const v=n?this.Tn(n[m/c]):wl,A=this.En(e,v,r[m%c],i),D=this.dn(e,v,s[m%c],o),V=l.map(F=>this.En(e,v,F,!0));f.push(...this.createRange(A,D,V))}return f}En(e,n,r,i){const s=new Wr(e,$.empty(),n,r);return i?s:s.Jt()}dn(e,n,r,i){const s=new Wr(e,$.empty(),n,r);return i?s.Jt():s}ln(e,n){const r=new Jy(n),i=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,i).next(s=>{let o=null;for(const l of s)r.tn(l)&&(!o||l.fields.length>o.fields.length)&&(o=l);return o})}getIndexType(e,n){let r=2;const i=this.cn(n);return M.forEach(i,s=>this.ln(e,s).next(o=>{o?r!==0&&o.fields.length<function(u){let c=new he(Ee.comparator),f=!1;for(const m of u.filters)for(const v of m.getFlattenedFilters())v.field.isKeyField()||(v.op==="array-contains"||v.op==="array-contains-any"?f=!0:c=c.add(v.field));for(const m of u.orderBy)m.field.isKeyField()||(c=c.add(m.field));return c.size+(f?1:0)}(s)&&(r=1):r=0})).next(()=>function(o){return o.limit!==null}(n)&&i.length>1&&r===2?1:r)}An(e,n){const r=new po;for(const i of Ur(e)){const s=n.data.field(i.fieldPath);if(s==null)return null;const o=r.Ht(i.kind);Gr.bt.Pt(s,o)}return r.Wt()}Tn(e){const n=new po;return Gr.bt.Pt(e,n.Ht(0)),n.Wt()}Rn(e,n){const r=new po;return Gr.bt.Pt(ci(this.databaseId,n),r.Ht(function(s){const o=Ur(s);return o.length===0?0:o[o.length-1].kind}(e))),r.Wt()}Pn(e,n,r){if(r===null)return[];let i=[];i.push(new po);let s=0;for(const o of Ur(e)){const l=r[s++];for(const u of i)if(this.Vn(n,o.fieldPath)&&da(l))i=this.mn(i,o,l);else{const c=u.Ht(o.kind);Gr.bt.Pt(l,c)}}return this.fn(i)}hn(e,n,r){return this.Pn(e,n,r.position)}fn(e){const n=[];for(let r=0;r<e.length;++r)n[r]=e[r].Wt();return n}mn(e,n,r){const i=[...e],s=[];for(const o of r.arrayValue.values||[])for(const l of i){const u=new po;u.seed(l.Wt()),Gr.bt.Pt(o,u.Ht(n.kind)),s.push(u)}return s}Vn(e,n){return!!e.filters.find(r=>r instanceof re&&r.field.isEqual(n)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,n){const r=mo(e),i=Ni(e);return(n?r.U("collectionGroupIndex",IDBKeyRange.bound(n,n)):r.U()).next(s=>{const o=[];return M.forEach(s,l=>i.get([l.indexId,this.uid]).next(u=>{o.push(function(f,m){const v=m?new la(m.sequenceNumber,new Ft(mi(m.readTime),new $(ln(m.documentKey)),m.largestBatchId)):la.empty(),A=f.fields.map(([D,V])=>new Ol(Ee.fromServerFormat(D),V));return new Eu(f.indexId,f.collectionGroup,A,v)}(l,u))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>n.length===0?null:(n.sort((r,i)=>{const s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return s!==0?s:X(r.collectionGroup,i.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,r){const i=mo(e),s=Ni(e);return this.gn(e).next(o=>i.U("collectionGroupIndex",IDBKeyRange.bound(n,n)).next(l=>M.forEach(l,u=>s.put(Ky(u.indexId,this.uid,o,r)))))}updateIndexEntries(e,n){const r=new Map;return M.forEach(n,(i,s)=>{const o=r.get(i.collectionGroup);return(o?M.resolve(o):this.getFieldIndexes(e,i.collectionGroup)).next(l=>(r.set(i.collectionGroup,l),M.forEach(l,u=>this.pn(e,i,u).next(c=>{const f=this.yn(s,u);return c.isEqual(f)?M.resolve():this.wn(e,s,u,c,f)}))))})}Sn(e,n,r,i){return Vi(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.Rn(r,n.key),documentKey:n.key.path.toArray()})}bn(e,n,r,i){return Vi(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.Rn(r,n.key),n.key.path.toArray()])}pn(e,n,r){const i=Vi(e);let s=new he(qn);return i.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.Rn(r,n)])},(o,l)=>{s=s.add(new Wr(r.indexId,n,l.arrayValue,l.directionalValue))}).next(()=>s)}yn(e,n){let r=new he(qn);const i=this.An(n,e);if(i==null)return r;const s=Td(n);if(s!=null){const o=e.data.field(s.fieldPath);if(da(o))for(const l of o.arrayValue.values||[])r=r.add(new Wr(n.indexId,e.key,this.Tn(l),i))}else r=r.add(new Wr(n.indexId,e.key,wl,i));return r}wn(e,n,r,i,s){j("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);const o=[];return function(u,c,f,m,v){const A=u.getIterator(),D=c.getIterator();let V=Di(A),F=Di(D);for(;V||F;){let C=!1,x=!1;if(V&&F){const T=f(V,F);T<0?x=!0:T>0&&(C=!0)}else V!=null?x=!0:C=!0;C?(m(F),F=Di(D)):x?(v(V),V=Di(A)):(V=Di(A),F=Di(D))}}(i,s,qn,l=>{o.push(this.Sn(e,n,r,l))},l=>{o.push(this.bn(e,n,r,l))}),M.waitFor(o)}gn(e){let n=1;return Ni(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,s)=>{s.done(),n=i.sequenceNumber+1}).next(()=>n)}createRange(e,n,r){r=r.sort((o,l)=>qn(o,l)).filter((o,l,u)=>!l||qn(o,u[l-1])!==0);const i=[];i.push(e);for(const o of r){const l=qn(o,e),u=qn(o,n);if(l===0)i[0]=e.Jt();else if(l>0&&u<0)i.push(o),i.push(o.Jt());else if(u>0)break}i.push(n);const s=[];for(let o=0;o<i.length;o+=2){if(this.Dn(i[o],i[o+1]))return[];const l=[i[o].indexId,this.uid,i[o].arrayValue,i[o].directionalValue,wl,[]],u=[i[o+1].indexId,this.uid,i[o+1].arrayValue,i[o+1].directionalValue,wl,[]];s.push(IDBKeyRange.bound(l,u))}return s}Dn(e,n){return qn(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(t_)}getMinOffset(e,n){return M.mapArray(this.cn(n),r=>this.ln(e,r).next(i=>i||W())).next(t_)}}function e_(t){return Qe(t,"collectionParents")}function Vi(t){return Qe(t,"indexEntries")}function mo(t){return Qe(t,"indexConfiguration")}function Ni(t){return Qe(t,"indexState")}function t_(t){H(t.length!==0);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){const i=t[r].indexState.offset;Yf(i,e)<0&&(e=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new Ft(e.readTime,e.documentKey,n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n_={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class It{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new It(e,It.DEFAULT_COLLECTION_PERCENTILE,It.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N1(t,e,n){const r=t.store("mutations"),i=t.store("documentMutations"),s=[],o=IDBKeyRange.only(n.batchId);let l=0;const u=r.J({range:o},(f,m,v)=>(l++,v.delete()));s.push(u.next(()=>{H(l===1)}));const c=[];for(const f of n.mutations){const m=Mw(e,f.key.path,n.batchId);s.push(i.delete(m)),c.push(f.key)}return M.waitFor(s).next(()=>c)}function Au(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw W();e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */It.DEFAULT_COLLECTION_PERCENTILE=10,It.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,It.DEFAULT=new It(41943040,It.DEFAULT_COLLECTION_PERCENTILE,It.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),It.DISABLED=new It(-1,0,0);class nc{constructor(e,n,r,i){this.userId=e,this.serializer=n,this.indexManager=r,this.referenceDelegate=i,this.Cn={}}static lt(e,n,r,i){H(e.uid!=="");const s=e.isAuthenticated()?e.uid:"";return new nc(s,n,r,i)}checkEmpty(e){let n=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Gn(e).J({index:"userMutationsIndex",range:r},(i,s,o)=>{n=!1,o.done()}).next(()=>n)}addMutationBatch(e,n,r,i){const s=ji(e),o=Gn(e);return o.add({}).next(l=>{H(typeof l=="number");const u=new rp(l,n,r,i),c=function(A,D,V){const F=V.baseMutations.map(x=>ma(A.ct,x)),C=V.mutations.map(x=>ma(A.ct,x));return{userId:D,batchId:V.batchId,localWriteTimeMs:V.localWriteTime.toMillis(),baseMutations:F,mutations:C}}(this.serializer,this.userId,u),f=[];let m=new he((v,A)=>X(v.canonicalString(),A.canonicalString()));for(const v of i){const A=Mw(this.userId,v.key.path,l);m=m.add(v.key.path.popLast()),f.push(o.put(c)),f.push(s.put(A,dA))}return m.forEach(v=>{f.push(this.indexManager.addToCollectionParentIndex(e,v))}),e.addOnCommittedListener(()=>{this.Cn[l]=u.keys()}),M.waitFor(f).next(()=>u)})}lookupMutationBatch(e,n){return Gn(e).get(n).next(r=>r?(H(r.userId===this.userId),qr(this.serializer,r)):null)}vn(e,n){return this.Cn[n]?M.resolve(this.Cn[n]):this.lookupMutationBatch(e,n).next(r=>{if(r){const i=r.keys();return this.Cn[n]=i,i}return null})}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=IDBKeyRange.lowerBound([this.userId,r]);let s=null;return Gn(e).J({index:"userMutationsIndex",range:i},(o,l,u)=>{l.userId===this.userId&&(H(l.batchId>=r),s=qr(this.serializer,l)),u.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Gn(e).J({index:"userMutationsIndex",range:n,reverse:!0},(i,s,o)=>{r=s.batchId,o.done()}).next(()=>r)}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Gn(e).U("userMutationsIndex",n).next(r=>r.map(i=>qr(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,n){const r=Fl(this.userId,n.path),i=IDBKeyRange.lowerBound(r),s=[];return ji(e).J({range:i},(o,l,u)=>{const[c,f,m]=o,v=ln(f);if(c===this.userId&&n.path.isEqual(v))return Gn(e).get(m).next(A=>{if(!A)throw W();H(A.userId===this.userId),s.push(qr(this.serializer,A))});u.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new he(X);const i=[];return n.forEach(s=>{const o=Fl(this.userId,s.path),l=IDBKeyRange.lowerBound(o),u=ji(e).J({range:l},(c,f,m)=>{const[v,A,D]=c,V=ln(A);v===this.userId&&s.path.isEqual(V)?r=r.add(D):m.done()});i.push(u)}),M.waitFor(i).next(()=>this.Fn(e,r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1,s=Fl(this.userId,r),o=IDBKeyRange.lowerBound(s);let l=new he(X);return ji(e).J({range:o},(u,c,f)=>{const[m,v,A]=u,D=ln(v);m===this.userId&&r.isPrefixOf(D)?D.length===i&&(l=l.add(A)):f.done()}).next(()=>this.Fn(e,l))}Fn(e,n){const r=[],i=[];return n.forEach(s=>{i.push(Gn(e).get(s).next(o=>{if(o===null)throw W();H(o.userId===this.userId),r.push(qr(this.serializer,o))}))}),M.waitFor(i).next(()=>r)}removeMutationBatch(e,n){return N1(e._e,this.userId,n).next(r=>(e.addOnCommittedListener(()=>{this.Mn(n.batchId)}),M.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}Mn(e){delete this.Cn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return M.resolve();const r=IDBKeyRange.lowerBound(function(o){return[o]}(this.userId)),i=[];return ji(e).J({range:r},(s,o,l)=>{if(s[0]===this.userId){const u=ln(s[1]);i.push(u)}else l.done()}).next(()=>{H(i.length===0)})})}containsKey(e,n){return M1(e,this.userId,n)}xn(e){return L1(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function M1(t,e,n){const r=Fl(e,n.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return ji(t).J({range:s,H:!0},(l,u,c)=>{const[f,m,v]=l;f===e&&m===i&&(o=!0),c.done()}).next(()=>o)}function Gn(t){return Qe(t,"mutations")}function ji(t){return Qe(t,"documentMutations")}function L1(t){return Qe(t,"mutationQueues")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gi{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new gi(0)}static Ln(){return new gi(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x2{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.Bn(e).next(n=>{const r=new gi(n.highestTargetId);return n.highestTargetId=r.next(),this.kn(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Bn(e).next(n=>Q.fromTimestamp(new Te(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Bn(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,r){return this.Bn(e).next(i=>(i.highestListenSequenceNumber=n,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),n>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=n),this.kn(e,i)))}addTargetData(e,n){return this.qn(e,n).next(()=>this.Bn(e).next(r=>(r.targetCount+=1,this.Qn(n,r),this.kn(e,r))))}updateTargetData(e,n){return this.qn(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>Mi(e).delete(n.targetId)).next(()=>this.Bn(e)).next(r=>(H(r.targetCount>0),r.targetCount-=1,this.kn(e,r)))}removeTargets(e,n,r){let i=0;const s=[];return Mi(e).J((o,l)=>{const u=xo(l);u.sequenceNumber<=n&&r.get(u.targetId)===null&&(i++,s.push(this.removeTargetData(e,u)))}).next(()=>M.waitFor(s)).next(()=>i)}forEachTarget(e,n){return Mi(e).J((r,i)=>{const s=xo(i);n(s)})}Bn(e){return r_(e).get("targetGlobalKey").next(n=>(H(n!==null),n))}kn(e,n){return r_(e).put("targetGlobalKey",n)}qn(e,n){return Mi(e).put(b1(this.serializer,n))}Qn(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Bn(e).next(n=>n.targetCount)}getTargetData(e,n){const r=hi(n),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let s=null;return Mi(e).J({range:i,index:"queryTargetsIndex"},(o,l,u)=>{const c=xo(l);Pa(n,c.target)&&(s=c,u.done())}).next(()=>s)}addMatchingKeys(e,n,r){const i=[],s=Xn(e);return n.forEach(o=>{const l=yt(o.path);i.push(s.put({targetId:r,path:l})),i.push(this.referenceDelegate.addReference(e,r,o))}),M.waitFor(i)}removeMatchingKeys(e,n,r){const i=Xn(e);return M.forEach(n,s=>{const o=yt(s.path);return M.waitFor([i.delete([r,o]),this.referenceDelegate.removeReference(e,r,s)])})}removeMatchingKeysForTargetId(e,n){const r=Xn(e),i=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,n){const r=IDBKeyRange.bound([n],[n+1],!1,!0),i=Xn(e);let s=J();return i.J({range:r,H:!0},(o,l,u)=>{const c=ln(o[1]),f=new $(c);s=s.add(f)}).next(()=>s)}containsKey(e,n){const r=yt(n.path),i=IDBKeyRange.bound([r],[Rw(r)],!1,!0);let s=0;return Xn(e).J({index:"documentTargetsIndex",H:!0,range:i},([o,l],u,c)=>{o!==0&&(s++,c.done())}).next(()=>s>0)}ot(e,n){return Mi(e).get(n).next(r=>r?xo(r):null)}}function Mi(t){return Qe(t,"targets")}function r_(t){return Qe(t,"targetGlobal")}function Xn(t){return Qe(t,"targetDocuments")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i_([t,e],[n,r]){const i=X(t,n);return i===0?X(e,r):i}class P2{constructor(e){this.Kn=e,this.buffer=new he(i_),this.$n=0}Un(){return++this.$n}Wn(e){const n=[e,this.Un()];if(this.buffer.size<this.Kn)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();i_(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class A2{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Gn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.zn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return this.Gn!==null}zn(e){j("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Gn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Cr(n)?j("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n):await Rr(n)}await this.zn(3e5)})}}class R2{constructor(e,n){this.jn=e,this.params=n}calculateTargetCount(e,n){return this.jn.Hn(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return M.resolve(xt.oe);const r=new P2(n);return this.jn.forEachTarget(e,i=>r.Wn(i.sequenceNumber)).next(()=>this.jn.Jn(e,i=>r.Wn(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.jn.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.jn.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(j("LruGarbageCollector","Garbage collection skipped; disabled"),M.resolve(n_)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(j("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),n_):this.Yn(e,n))}getCacheSize(e){return this.jn.getCacheSize(e)}Yn(e,n){let r,i,s,o,l,u,c;const f=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(m=>(m>this.params.maximumSequenceNumbersToCollect?(j("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${m}`),i=this.params.maximumSequenceNumbersToCollect):i=m,o=Date.now(),this.nthSequenceNumber(e,i))).next(m=>(r=m,l=Date.now(),this.removeTargets(e,r,n))).next(m=>(s=m,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(m=>(c=Date.now(),Li()<=ie.DEBUG&&j("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-f}ms
	Determined least recently used ${i} in `+(l-o)+`ms
	Removed ${s} targets in `+(u-l)+`ms
	Removed ${m} documents in `+(c-u)+`ms
Total Duration: ${c-f}ms`),M.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:m})))}}function C2(t,e){return new R2(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k2{constructor(e,n){this.db=e,this.garbageCollector=C2(this,n)}Hn(e){const n=this.Zn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}Zn(e){let n=0;return this.Jn(e,r=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}Jn(e,n){return this.Xn(e,(r,i)=>n(i))}addReference(e,n,r){return El(e,r)}removeReference(e,n,r){return El(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return El(e,n)}er(e,n){return function(i,s){let o=!1;return L1(i).Y(l=>M1(i,l,s).next(u=>(u&&(o=!0),M.resolve(!u)))).next(()=>o)}(e,n)}removeOrphanedDocuments(e,n){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.Xn(e,(o,l)=>{if(l<=n){const u=this.er(e,o).next(c=>{if(!c)return s++,r.getEntry(e,o).next(()=>(r.removeEntry(o,Q.min()),Xn(e).delete(function(m){return[0,yt(m.path)]}(o))))});i.push(u)}}).next(()=>M.waitFor(i)).next(()=>r.apply(e)).next(()=>s)}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return El(e,n)}Xn(e,n){const r=Xn(e);let i,s=xt.oe;return r.J({index:"documentTargetsIndex"},([o,l],{path:u,sequenceNumber:c})=>{o===0?(s!==xt.oe&&n(new $(ln(i)),s),s=c,i=u):s=xt.oe}).next(()=>{s!==xt.oe&&n(new $(ln(i)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function El(t,e){return Xn(t).put(function(r,i){return{targetId:0,path:yt(r.path),sequenceNumber:i}}(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O1{constructor(){this.changes=new kr(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,_e.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?M.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b2{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return Fr(e).put(r)}removeEntry(e,n,r){return Fr(e).delete(function(s,o){const l=s.path.toArray();return[l.slice(0,l.length-2),l[l.length-2],xu(o),l[l.length-1]]}(n,r))}updateMetadata(e,n){return this.getMetadata(e).next(r=>(r.byteSize+=n,this.tr(e,r)))}getEntry(e,n){let r=_e.newInvalidDocument(n);return Fr(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(go(n))},(i,s)=>{r=this.nr(n,s)}).next(()=>r)}rr(e,n){let r={size:0,document:_e.newInvalidDocument(n)};return Fr(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(go(n))},(i,s)=>{r={document:this.nr(n,s),size:Au(s)}}).next(()=>r)}getEntries(e,n){let r=At();return this.ir(e,n,(i,s)=>{const o=this.nr(i,s);r=r.insert(i,o)}).next(()=>r)}sr(e,n){let r=At(),i=new me($.comparator);return this.ir(e,n,(s,o)=>{const l=this.nr(s,o);r=r.insert(s,l),i=i.insert(s,Au(o))}).next(()=>({documents:r,_r:i}))}ir(e,n,r){if(n.isEmpty())return M.resolve();let i=new he(a_);n.forEach(u=>i=i.add(u));const s=IDBKeyRange.bound(go(i.first()),go(i.last())),o=i.getIterator();let l=o.getNext();return Fr(e).J({index:"documentKeyIndex",range:s},(u,c,f)=>{const m=$.fromSegments([...c.prefixPath,c.collectionGroup,c.documentId]);for(;l&&a_(l,m)<0;)r(l,null),l=o.getNext();l&&l.isEqual(m)&&(r(l,c),l=o.hasNext()?o.getNext():null),l?f.$(go(l)):f.done()}).next(()=>{for(;l;)r(l,null),l=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,n,r,i,s){const o=n.path,l=[o.popLast().toArray(),o.lastSegment(),xu(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Fr(e).U(IDBKeyRange.bound(l,u,!0)).next(c=>{s==null||s.incrementDocumentReadCount(c.length);let f=At();for(const m of c){const v=this.nr($.fromSegments(m.prefixPath.concat(m.collectionGroup,m.documentId)),m);v.isFoundDocument()&&(Ra(n,v)||i.has(v.key))&&(f=f.insert(v.key,v))}return f})}getAllFromCollectionGroup(e,n,r,i){let s=At();const o=o_(n,r),l=o_(n,Ft.max());return Fr(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,l,!0)},(u,c,f)=>{const m=this.nr($.fromSegments(c.prefixPath.concat(c.collectionGroup,c.documentId)),c);s=s.insert(m.key,m),s.size===i&&f.done()}).next(()=>s)}newChangeBuffer(e){return new D2(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return s_(e).get("remoteDocumentGlobalKey").next(n=>(H(!!n),n))}tr(e,n){return s_(e).put("remoteDocumentGlobalKey",n)}nr(e,n){if(n){const r=g2(this.serializer,n);if(!(r.isNoDocument()&&r.version.isEqual(Q.min())))return r}return _e.newInvalidDocument(e)}}function F1(t){return new b2(t)}class D2 extends O1{constructor(e,n){super(),this.ar=e,this.trackRemovals=n,this.ur=new kr(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const n=[];let r=0,i=new he((s,o)=>X(s.canonicalString(),o.canonicalString()));return this.changes.forEach((s,o)=>{const l=this.ur.get(s);if(n.push(this.ar.removeEntry(e,s,l.readTime)),o.isValidDocument()){const u=Gy(this.ar.serializer,o);i=i.add(s.path.popLast());const c=Au(u);r+=c-l.size,n.push(this.ar.addEntry(e,s,u))}else if(r-=l.size,this.trackRemovals){const u=Gy(this.ar.serializer,o.convertToNoDocument(Q.min()));n.push(this.ar.addEntry(e,s,u))}}),i.forEach(s=>{n.push(this.ar.indexManager.addToCollectionParentIndex(e,s))}),n.push(this.ar.updateMetadata(e,r)),M.waitFor(n)}getFromCache(e,n){return this.ar.rr(e,n).next(r=>(this.ur.set(n,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,n){return this.ar.sr(e,n).next(({documents:r,_r:i})=>(i.forEach((s,o)=>{this.ur.set(s,{size:o,readTime:r.get(s).readTime})}),r))}}function s_(t){return Qe(t,"remoteDocumentGlobal")}function Fr(t){return Qe(t,"remoteDocumentsV14")}function go(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function o_(t,e){const n=e.documentKey.path.toArray();return[t,xu(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function a_(t,e){const n=t.path.toArray(),r=e.path.toArray();let i=0;for(let s=0;s<n.length-2&&s<r.length-2;++s)if(i=X(n[s],r[s]),i)return i;return i=X(n.length,r.length),i||(i=X(n[n.length-2],r[r.length-2]),i||X(n[n.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V2{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B1{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Fo(r.mutation,i,Pt.empty(),Te.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,J()).next(()=>r))}getLocalViewOfDocuments(e,n,r=J()){const i=un();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=To();return s.forEach((l,u)=>{o=o.insert(l,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=un();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,J()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,l)=>{n.set(o,l)})})}computeViews(e,n,r,i){let s=At();const o=Oo(),l=function(){return Oo()}();return n.forEach((u,c)=>{const f=r.get(c.key);i.has(c.key)&&(f===void 0||f.mutation instanceof Fn)?s=s.insert(c.key,c):f!==void 0?(o.set(c.key,f.mutation.getFieldMask()),Fo(f.mutation,c,f.mutation.getFieldMask(),Te.now())):o.set(c.key,Pt.empty())}),this.recalculateAndSaveOverlays(e,s).next(u=>(u.forEach((c,f)=>o.set(c,f)),n.forEach((c,f)=>{var m;return l.set(c,new V2(f,(m=o.get(c))!==null&&m!==void 0?m:null))}),l))}recalculateAndSaveOverlays(e,n){const r=Oo();let i=new me((o,l)=>o-l),s=J();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const l of o)l.keys().forEach(u=>{const c=n.get(u);if(c===null)return;let f=r.get(u)||Pt.empty();f=l.applyToLocalView(c,f),r.set(u,f);const m=(i.get(l.batchId)||J()).add(u);i=i.insert(l.batchId,m)})}).next(()=>{const o=[],l=i.getReverseIterator();for(;l.hasNext();){const u=l.getNext(),c=u.key,f=u.value,m=r1();f.forEach(v=>{if(!s.has(v)){const A=h1(n.get(v),r.get(v));A!==null&&m.set(v,A),s=s.add(v)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,m))}return M.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return $.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):ep(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):M.resolve(un());let l=-1,u=s;return o.next(c=>M.forEach(c,(f,m)=>(l<m.largestBatchId&&(l=m.largestBatchId),s.get(f)?M.resolve():this.remoteDocumentCache.getEntry(e,f).next(v=>{u=u.insert(f,v)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,u,c,J())).next(f=>({batchId:l,changes:n1(f)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new $(n)).next(r=>{let i=To();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=To();return this.indexManager.getCollectionParents(e,s).next(l=>M.forEach(l,u=>{const c=function(m,v){return new On(v,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)}(n,u.child(s));return this.getDocumentsMatchingCollectionQuery(e,c,r,i).next(f=>{f.forEach((m,v)=>{o=o.insert(m,v)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((u,c)=>{const f=c.getKey();o.get(f)===null&&(o=o.insert(f,_e.newInvalidDocument(f)))});let l=To();return o.forEach((u,c)=>{const f=s.get(u);f!==void 0&&Fo(f.mutation,c,Pt.empty(),Te.now()),Ra(n,c)&&(l=l.insert(u,c))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N2{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,n){return M.resolve(this.cr.get(n))}saveBundleMetadata(e,n){return this.cr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Oe(i.createTime)}}(n)),M.resolve()}getNamedQuery(e,n){return M.resolve(this.lr.get(n))}saveNamedQuery(e,n){return this.lr.set(n.name,function(i){return{name:i.name,query:lp(i.bundledQuery),readTime:Oe(i.readTime)}}(n)),M.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M2{constructor(){this.overlays=new me($.comparator),this.hr=new Map}getOverlay(e,n){return M.resolve(this.overlays.get(n))}getOverlays(e,n){const r=un();return M.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ht(e,n,s)}),M.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.hr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.hr.delete(r)),M.resolve()}getOverlaysForCollection(e,n,r){const i=un(),s=n.length+1,o=new $(n.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const u=l.getNext().value,c=u.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return M.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new me((c,f)=>c-f);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let f=s.get(c.largestBatchId);f===null&&(f=un(),s=s.insert(c.largestBatchId,f)),f.set(c.getKey(),c)}}const l=un(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((c,f)=>l.set(c,f)),!(l.size()>=i)););return M.resolve(l)}ht(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.hr.get(i.largestBatchId).delete(r.key);this.hr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new sp(n,r));let s=this.hr.get(n);s===void 0&&(s=J(),this.hr.set(n,s)),this.hr.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hp{constructor(){this.Pr=new he(qe.Ir),this.Tr=new he(qe.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,n){const r=new qe(e,n);this.Pr=this.Pr.add(r),this.Tr=this.Tr.add(r)}dr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Ar(new qe(e,n))}Rr(e,n){e.forEach(r=>this.removeReference(r,n))}Vr(e){const n=new $(new ne([])),r=new qe(n,e),i=new qe(n,e+1),s=[];return this.Tr.forEachInRange([r,i],o=>{this.Ar(o),s.push(o.key)}),s}mr(){this.Pr.forEach(e=>this.Ar(e))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){const n=new $(new ne([])),r=new qe(n,e),i=new qe(n,e+1);let s=J();return this.Tr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new qe(e,0),r=this.Pr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class qe{constructor(e,n){this.key=e,this.pr=n}static Ir(e,n){return $.comparator(e.key,n.key)||X(e.pr,n.pr)}static Er(e,n){return X(e.pr,n.pr)||$.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L2{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.yr=1,this.wr=new he(qe.Ir)}checkEmpty(e){return M.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new rp(s,n,r,i);this.mutationQueue.push(o);for(const l of i)this.wr=this.wr.add(new qe(l.key,s)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return M.resolve(o)}lookupMutationBatch(e,n){return M.resolve(this.Sr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.br(r),s=i<0?0:i;return M.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return M.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(e){return M.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new qe(n,0),i=new qe(n,Number.POSITIVE_INFINITY),s=[];return this.wr.forEachInRange([r,i],o=>{const l=this.Sr(o.pr);s.push(l)}),M.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new he(X);return n.forEach(i=>{const s=new qe(i,0),o=new qe(i,Number.POSITIVE_INFINITY);this.wr.forEachInRange([s,o],l=>{r=r.add(l.pr)})}),M.resolve(this.Dr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;$.isDocumentKey(s)||(s=s.child(""));const o=new qe(new $(s),0);let l=new he(X);return this.wr.forEachWhile(u=>{const c=u.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(l=l.add(u.pr)),!0)},o),M.resolve(this.Dr(l))}Dr(e){const n=[];return e.forEach(r=>{const i=this.Sr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){H(this.Cr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.wr;return M.forEach(n.mutations,i=>{const s=new qe(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.wr=r})}Mn(e){}containsKey(e,n){const r=new qe(n,0),i=this.wr.firstAfterOrEqual(r);return M.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,M.resolve()}Cr(e,n){return this.br(e)}br(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Sr(e){const n=this.br(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O2{constructor(e){this.vr=e,this.docs=function(){return new me($.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.vr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return M.resolve(r?r.document.mutableCopy():_e.newInvalidDocument(n))}getEntries(e,n){let r=At();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():_e.newInvalidDocument(i))}),M.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=At();const o=n.path,l=new $(o.child("")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:c,value:{document:f}}=u.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||Yf(kw(f),r)<=0||(i.has(f.key)||Ra(n,f))&&(s=s.insert(f.key,f.mutableCopy()))}return M.resolve(s)}getAllFromCollectionGroup(e,n,r,i){W()}Fr(e,n){return M.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new F2(this)}getSize(e){return M.resolve(this.size)}}class F2 extends O1{constructor(e){super(),this.ar=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.ar.addEntry(e,i)):this.ar.removeEntry(r)}),M.waitFor(n)}getFromCache(e,n){return this.ar.getEntry(e,n)}getAllFromCache(e,n){return this.ar.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B2{constructor(e){this.persistence=e,this.Mr=new kr(n=>hi(n),Pa),this.lastRemoteSnapshotVersion=Q.min(),this.highestTargetId=0,this.Or=0,this.Nr=new hp,this.targetCount=0,this.Lr=gi.Nn()}forEachTarget(e,n){return this.Mr.forEach((r,i)=>n(i)),M.resolve()}getLastRemoteSnapshotVersion(e){return M.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return M.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Lr.next(),M.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Or&&(this.Or=n),M.resolve()}qn(e){this.Mr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Lr=new gi(n),this.highestTargetId=n),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,n){return this.qn(n),this.targetCount+=1,M.resolve()}updateTargetData(e,n){return this.qn(n),M.resolve()}removeTargetData(e,n){return this.Mr.delete(n.target),this.Nr.Vr(n.targetId),this.targetCount-=1,M.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Mr.forEach((o,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.Mr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,l.targetId)),i++)}),M.waitFor(s).next(()=>i)}getTargetCount(e){return M.resolve(this.targetCount)}getTargetData(e,n){const r=this.Mr.get(n)||null;return M.resolve(r)}addMatchingKeys(e,n,r){return this.Nr.dr(n,r),M.resolve()}removeMatchingKeys(e,n,r){this.Nr.Rr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),M.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Nr.Vr(n),M.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Nr.gr(n);return M.resolve(r)}containsKey(e,n){return M.resolve(this.Nr.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j1{constructor(e,n){this.Br={},this.overlays={},this.kr=new xt(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new B2(this),this.indexManager=new T2,this.remoteDocumentCache=function(i){return new O2(i)}(r=>this.referenceDelegate.Kr(r)),this.serializer=new k1(n),this.$r=new N2(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new M2,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Br[e.toKey()];return r||(r=new L2(n,this.referenceDelegate),this.Br[e.toKey()]=r),r}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,n,r){j("MemoryPersistence","Starting transaction:",e);const i=new j2(this.kr.next());return this.referenceDelegate.Ur(),r(i).next(s=>this.referenceDelegate.Wr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Gr(e,n){return M.or(Object.values(this.Br).map(r=>()=>r.containsKey(e,n)))}}class j2 extends Dw{constructor(e){super(),this.currentSequenceNumber=e}}class rc{constructor(e){this.persistence=e,this.zr=new hp,this.jr=null}static Hr(e){return new rc(e)}get Jr(){if(this.jr)return this.jr;throw W()}addReference(e,n,r){return this.zr.addReference(r,n),this.Jr.delete(r.toString()),M.resolve()}removeReference(e,n,r){return this.zr.removeReference(r,n),this.Jr.add(r.toString()),M.resolve()}markPotentiallyOrphaned(e,n){return this.Jr.add(n.toString()),M.resolve()}removeTarget(e,n){this.zr.Vr(n.targetId).forEach(i=>this.Jr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Jr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}Ur(){this.jr=new Set}Wr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return M.forEach(this.Jr,r=>{const i=$.fromPath(r);return this.Yr(e,i).next(s=>{s||n.removeEntry(i,Q.min())})}).next(()=>(this.jr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Yr(e,n).next(r=>{r?this.Jr.delete(n.toString()):this.Jr.add(n.toString())})}Kr(e){return 0}Yr(e,n){return M.or([()=>M.resolve(this.zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Gr(e,n)])}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z2{constructor(e){this.serializer=e}O(e,n,r,i){const s=new Xu("createOrUpgrade",n);r<1&&i>=1&&(function(u){u.createObjectStore("owner")}(e),function(u){u.createObjectStore("mutationQueues",{keyPath:"userId"}),u.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Iy,{unique:!0}),u.createObjectStore("documentMutations")}(e),l_(e),function(u){u.createObjectStore("remoteDocuments")}(e));let o=M.resolve();return r<3&&i>=3&&(r!==0&&(function(u){u.deleteObjectStore("targetDocuments"),u.deleteObjectStore("targets"),u.deleteObjectStore("targetGlobal")}(e),l_(e)),o=o.next(()=>function(u){const c=u.store("targetGlobal"),f={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Q.min().toTimestamp(),targetCount:0};return c.put("targetGlobalKey",f)}(s))),r<4&&i>=4&&(r!==0&&(o=o.next(()=>function(u,c){return c.store("mutations").U().next(f=>{u.deleteObjectStore("mutations"),u.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Iy,{unique:!0});const m=c.store("mutations"),v=f.map(A=>m.put(A));return M.waitFor(v)})}(e,s))),o=o.next(()=>{(function(u){u.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),r<5&&i>=5&&(o=o.next(()=>this.Xr(s))),r<6&&i>=6&&(o=o.next(()=>(function(u){u.createObjectStore("remoteDocumentGlobal")}(e),this.ei(s)))),r<7&&i>=7&&(o=o.next(()=>this.ti(s))),r<8&&i>=8&&(o=o.next(()=>this.ni(e,s))),r<9&&i>=9&&(o=o.next(()=>{(function(u){u.objectStoreNames.contains("remoteDocumentChanges")&&u.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(o=o.next(()=>this.ri(s))),r<11&&i>=11&&(o=o.next(()=>{(function(u){u.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(u){u.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(o=o.next(()=>{(function(u){const c=u.createObjectStore("documentOverlays",{keyPath:SA});c.createIndex("collectionPathOverlayIndex",xA,{unique:!1}),c.createIndex("collectionGroupOverlayIndex",PA,{unique:!1})})(e)})),r<13&&i>=13&&(o=o.next(()=>function(u){const c=u.createObjectStore("remoteDocumentsV14",{keyPath:fA});c.createIndex("documentKeyIndex",pA),c.createIndex("collectionGroupIndex",mA)}(e)).next(()=>this.ii(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(o=o.next(()=>this.si(e,s))),r<15&&i>=15&&(o=o.next(()=>function(u){u.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),u.createObjectStore("indexState",{keyPath:wA}).createIndex("sequenceNumberIndex",EA,{unique:!1}),u.createObjectStore("indexEntries",{keyPath:IA}).createIndex("documentKeyIndex",TA,{unique:!1})}(e))),r<16&&i>=16&&(o=o.next(()=>{n.objectStore("indexState").clear()}).next(()=>{n.objectStore("indexEntries").clear()})),o}ei(e){let n=0;return e.store("remoteDocuments").J((r,i)=>{n+=Au(i)}).next(()=>{const r={byteSize:n};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Xr(e){const n=e.store("mutationQueues"),r=e.store("mutations");return n.U().next(i=>M.forEach(i,s=>{const o=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return r.U("userMutationsIndex",o).next(l=>M.forEach(l,u=>{H(u.userId===s.userId);const c=qr(this.serializer,u);return N1(e,s.userId,c).next(()=>{})}))}))}ti(e){const n=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const s=[];return r.J((o,l)=>{const u=new ne(o),c=function(m){return[0,yt(m)]}(u);s.push(n.get(c).next(f=>f?M.resolve():(m=>n.put({targetId:0,path:yt(m),sequenceNumber:i.highestListenSequenceNumber}))(u)))}).next(()=>M.waitFor(s))})}ni(e,n){e.createObjectStore("collectionParents",{keyPath:vA});const r=n.store("collectionParents"),i=new cp,s=o=>{if(i.add(o)){const l=o.lastSegment(),u=o.popLast();return r.put({collectionId:l,parent:yt(u)})}};return n.store("remoteDocuments").J({H:!0},(o,l)=>{const u=new ne(o);return s(u.popLast())}).next(()=>n.store("documentMutations").J({H:!0},([o,l,u],c)=>{const f=ln(l);return s(f.popLast())}))}ri(e){const n=e.store("targets");return n.J((r,i)=>{const s=xo(i),o=b1(this.serializer,s);return n.put(o)})}ii(e,n){const r=n.store("remoteDocuments"),i=[];return r.J((s,o)=>{const l=n.store("remoteDocumentsV14"),u=function(m){return m.document?new $(ne.fromString(m.document.name).popFirst(5)):m.noDocument?$.fromSegments(m.noDocument.path):m.unknownDocument?$.fromSegments(m.unknownDocument.path):W()}(o).path.toArray(),c={prefixPath:u.slice(0,u.length-2),collectionGroup:u[u.length-2],documentId:u[u.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};i.push(l.put(c))}).next(()=>M.waitFor(i))}si(e,n){const r=n.store("mutations"),i=F1(this.serializer),s=new j1(rc.Hr,this.serializer.ct);return r.U().next(o=>{const l=new Map;return o.forEach(u=>{var c;let f=(c=l.get(u.userId))!==null&&c!==void 0?c:J();qr(this.serializer,u).keys().forEach(m=>f=f.add(m)),l.set(u.userId,f)}),M.forEach(l,(u,c)=>{const f=new We(c),m=tc.lt(this.serializer,f),v=s.getIndexManager(f),A=nc.lt(f,this.serializer,v,s.referenceDelegate);return new B1(i,A,m,v).recalculateAndSaveOverlaysForDocumentKeys(new Sd(n,xt.oe),u).next()})})}}function l_(t){t.createObjectStore("targetDocuments",{keyPath:yA}).createIndex("documentTargetsIndex",_A,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",gA,{unique:!0}),t.createObjectStore("targetGlobal")}const wh="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class dp{constructor(e,n,r,i,s,o,l,u,c,f,m=16){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.oi=s,this.window=o,this.document=l,this._i=c,this.ai=f,this.ui=m,this.kr=null,this.qr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.li=null,this.hi=null,this.Pi=Number.NEGATIVE_INFINITY,this.Ii=v=>Promise.resolve(),!dp.D())throw new B(L.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new k2(this,i),this.Ti=n+"main",this.serializer=new k1(u),this.Ei=new dn(this.Ti,this.ui,new z2(this.serializer)),this.Qr=new x2(this.referenceDelegate,this.serializer),this.remoteDocumentCache=F1(this.serializer),this.$r=new y2,this.window&&this.window.localStorage?this.di=this.window.localStorage:(this.di=null,f===!1&&Le("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Ai().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new B(L.FAILED_PRECONDITION,wh);return this.Ri(),this.Vi(),this.mi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Qr.getHighestSequenceNumber(e))}).then(e=>{this.kr=new xt(e,this._i)}).then(()=>{this.qr=!0}).catch(e=>(this.Ei&&this.Ei.close(),Promise.reject(e)))}fi(e){return this.Ii=async n=>{if(this.started)return e(n)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ei.L(async n=>{n.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.oi.enqueueAndForget(async()=>{this.started&&await this.Ai()}))}Ai(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Il(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.gi(e).next(n=>{n||(this.isPrimary=!1,this.oi.enqueueRetryable(()=>this.Ii(!1)))})}).next(()=>this.pi(e)).next(n=>this.isPrimary&&!n?this.yi(e).next(()=>!1):!!n&&this.wi(e).next(()=>!0))).catch(e=>{if(Cr(e))return j("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return j("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.oi.enqueueRetryable(()=>this.Ii(e)),this.isPrimary=e})}gi(e){return yo(e).get("owner").next(n=>M.resolve(this.Si(n)))}bi(e){return Il(e).delete(this.clientId)}async Di(){if(this.isPrimary&&!this.Ci(this.Pi,18e5)){this.Pi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{const r=Qe(n,"clientMetadata");return r.U().next(i=>{const s=this.vi(i,18e5),o=i.filter(l=>s.indexOf(l)===-1);return M.forEach(o,l=>r.delete(l.clientId)).next(()=>o)})}).catch(()=>[]);if(this.di)for(const n of e)this.di.removeItem(this.Fi(n.clientId))}}mi(){this.hi=this.oi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Ai().then(()=>this.Di()).then(()=>this.mi()))}Si(e){return!!e&&e.ownerId===this.clientId}pi(e){return this.ai?M.resolve(!0):yo(e).get("owner").next(n=>{if(n!==null&&this.Ci(n.leaseTimestampMs,5e3)&&!this.Mi(n.ownerId)){if(this.Si(n)&&this.networkEnabled)return!0;if(!this.Si(n)){if(!n.allowTabSynchronization)throw new B(L.FAILED_PRECONDITION,wh);return!1}}return!(!this.networkEnabled||!this.inForeground)||Il(e).U().next(r=>this.vi(r,5e3).find(i=>{if(this.clientId!==i.clientId){const s=!this.networkEnabled&&i.networkEnabled,o=!this.inForeground&&i.inForeground,l=this.networkEnabled===i.networkEnabled;if(s||o&&l)return!0}return!1})===void 0)}).next(n=>(this.isPrimary!==n&&j("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}async shutdown(){this.qr=!1,this.xi(),this.hi&&(this.hi.cancel(),this.hi=null),this.Oi(),this.Ni(),await this.Ei.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{const n=new Sd(e,xt.oe);return this.yi(n).next(()=>this.bi(n))}),this.Ei.close(),this.Li()}vi(e,n){return e.filter(r=>this.Ci(r.updateTimeMs,n)&&!this.Mi(r.clientId))}Bi(){return this.runTransaction("getActiveClients","readonly",e=>Il(e).U().next(n=>this.vi(n,18e5).map(r=>r.clientId)))}get started(){return this.qr}getMutationQueue(e,n){return nc.lt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new S2(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return tc.lt(this.serializer,e)}getBundleCache(){return this.$r}runTransaction(e,n,r){j("IndexedDbPersistence","Starting transaction:",e);const i=n==="readonly"?"readonly":"readwrite",s=function(u){return u===16?RA:u===15?Bw:u===14?Fw:u===13?Ow:u===12?AA:u===11?Lw:void W()}(this.ui);let o;return this.Ei.runTransaction(e,i,s,l=>(o=new Sd(l,this.kr?this.kr.next():xt.oe),n==="readwrite-primary"?this.gi(o).next(u=>!!u||this.pi(o)).next(u=>{if(!u)throw Le(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.oi.enqueueRetryable(()=>this.Ii(!1)),new B(L.FAILED_PRECONDITION,bw);return r(o)}).next(u=>this.wi(o).next(()=>u)):this.ki(o).next(()=>r(o)))).then(l=>(o.raiseOnCommittedEvent(),l))}ki(e){return yo(e).get("owner").next(n=>{if(n!==null&&this.Ci(n.leaseTimestampMs,5e3)&&!this.Mi(n.ownerId)&&!this.Si(n)&&!(this.ai||this.allowTabSynchronization&&n.allowTabSynchronization))throw new B(L.FAILED_PRECONDITION,wh)})}wi(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return yo(e).put("owner",n)}static D(){return dn.D()}yi(e){const n=yo(e);return n.get("owner").next(r=>this.Si(r)?(j("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):M.resolve())}Ci(e,n){const r=Date.now();return!(e<r-n)&&(!(e>r)||(Le(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Ri(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.li=()=>{this.oi.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.Ai()))},this.document.addEventListener("visibilitychange",this.li),this.inForeground=this.document.visibilityState==="visible")}Oi(){this.li&&(this.document.removeEventListener("visibilitychange",this.li),this.li=null)}Vi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.ci=()=>{this.xi();const n=/(?:Version|Mobile)\/1[456]/;sw()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.oi.enterRestrictedMode(!0),this.oi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}Ni(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Mi(e){var n;try{const r=((n=this.di)===null||n===void 0?void 0:n.getItem(this.Fi(e)))!==null;return j("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Le("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}xi(){if(this.di)try{this.di.setItem(this.Fi(this.clientId),String(Date.now()))}catch(e){Le("Failed to set zombie client id.",e)}}Li(){if(this.di)try{this.di.removeItem(this.Fi(this.clientId))}catch{}}Fi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function yo(t){return Qe(t,"owner")}function Il(t){return Qe(t,"clientMetadata")}function fp(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pp{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.qi=r,this.Qi=i}static Ki(e,n){let r=J(),i=J();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new pp(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U2{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z1{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=function(){return sw()?8:Vw(vu())>0?6:4}()}initialize(e,n){this.zi=e,this.indexManager=n,this.$i=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.ji(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Hi(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new U2;return this.Ji(e,n,o).next(l=>{if(s.result=l,this.Ui)return this.Yi(e,n,o,l.size)})}).next(()=>s.result)}Yi(e,n,r,i){return r.documentReadCount<this.Wi?(Li()<=ie.DEBUG&&j("QueryEngine","SDK will not create cache indexes for query:",Oi(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),M.resolve()):(Li()<=ie.DEBUG&&j("QueryEngine","Query:",Oi(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Gi*i?(Li()<=ie.DEBUG&&j("QueryEngine","The SDK decides to create cache indexes for query:",Oi(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,_t(n))):M.resolve())}ji(e,n){if(Ny(n))return M.resolve(null);let r=_t(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=Su(n,null,"F"),r=_t(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=J(...s);return this.zi.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,r).next(u=>{const c=this.Zi(n,l);return this.Xi(n,c,o,u.readTime)?this.ji(e,Su(n,null,"F")):this.es(e,c,n,u)}))})))}Hi(e,n,r,i){return Ny(n)||i.isEqual(Q.min())?M.resolve(null):this.zi.getDocuments(e,r).next(s=>{const o=this.Zi(n,s);return this.Xi(n,o,r,i)?M.resolve(null):(Li()<=ie.DEBUG&&j("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Oi(n)),this.es(e,o,n,Cw(i,-1)).next(l=>l))})}Zi(e,n){let r=new he(e1(e));return n.forEach((i,s)=>{Ra(e,s)&&(r=r.add(s))}),r}Xi(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ji(e,n,r){return Li()<=ie.DEBUG&&j("QueryEngine","Using full collection scan to execute query:",Oi(n)),this.zi.getDocumentsMatchingQuery(e,n,Ft.min(),r)}es(e,n,r,i){return this.zi.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $2{constructor(e,n,r,i){this.persistence=e,this.ts=n,this.serializer=i,this.ns=new me(X),this.rs=new kr(s=>hi(s),Pa),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(r)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new B1(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.ns))}}function U1(t,e,n,r){return new $2(t,e,n,r)}async function $1(t,e){const n=q(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n._s(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],l=[];let u=J();for(const c of i){o.push(c.batchId);for(const f of c.mutations)u=u.add(f.key)}for(const c of s){l.push(c.batchId);for(const f of c.mutations)u=u.add(f.key)}return n.localDocuments.getDocuments(r,u).next(c=>({us:c,removedBatchIds:o,addedBatchIds:l}))})})}function q2(t,e){const n=q(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.os.newChangeBuffer({trackRemovals:!0});return function(l,u,c,f){const m=c.batch,v=m.keys();let A=M.resolve();return v.forEach(D=>{A=A.next(()=>f.getEntry(u,D)).next(V=>{const F=c.docVersions.get(D);H(F!==null),V.version.compareTo(F)<0&&(m.applyToRemoteDocument(V,c),V.isValidDocument()&&(V.setReadTime(c.commitVersion),f.addEntry(V)))})}),A.next(()=>l.mutationQueue.removeMutationBatch(u,m))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let u=J();for(let c=0;c<l.mutationResults.length;++c)l.mutationResults[c].transformResults.length>0&&(u=u.add(l.batch.mutations[c].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function q1(t){const e=q(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Qr.getLastRemoteSnapshotVersion(n))}function G2(t,e){const n=q(t),r=e.snapshotVersion;let i=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.os.newChangeBuffer({trackRemovals:!0});i=n.ns;const l=[];e.targetChanges.forEach((f,m)=>{const v=i.get(m);if(!v)return;l.push(n.Qr.removeMatchingKeys(s,f.removedDocuments,m).next(()=>n.Qr.addMatchingKeys(s,f.addedDocuments,m)));let A=v.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(m)!==null?A=A.withResumeToken($e.EMPTY_BYTE_STRING,Q.min()).withLastLimboFreeSnapshotVersion(Q.min()):f.resumeToken.approximateByteSize()>0&&(A=A.withResumeToken(f.resumeToken,r)),i=i.insert(m,A),function(V,F,C){return V.resumeToken.approximateByteSize()===0||F.snapshotVersion.toMicroseconds()-V.snapshotVersion.toMicroseconds()>=3e8?!0:C.addedDocuments.size+C.modifiedDocuments.size+C.removedDocuments.size>0}(v,A,f)&&l.push(n.Qr.updateTargetData(s,A))});let u=At(),c=J();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(s,f))}),l.push(G1(s,o,e.documentUpdates).next(f=>{u=f.cs,c=f.ls})),!r.isEqual(Q.min())){const f=n.Qr.getLastRemoteSnapshotVersion(s).next(m=>n.Qr.setTargetsMetadata(s,s.currentSequenceNumber,r));l.push(f)}return M.waitFor(l).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,u,c)).next(()=>u)}).then(s=>(n.ns=i,s))}function G1(t,e,n){let r=J(),i=J();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=At();return n.forEach((l,u)=>{const c=s.get(l);u.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(l)),u.isNoDocument()&&u.version.isEqual(Q.min())?(e.removeEntry(l,u.readTime),o=o.insert(l,u)):!c.isValidDocument()||u.version.compareTo(c.version)>0||u.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(u),o=o.insert(l,u)):j("LocalStore","Ignoring outdated watch update for ",l,". Current version:",c.version," Watch version:",u.version)}),{cs:o,ls:i}})}function W2(t,e){const n=q(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Ss(t,e){const n=q(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Qr.getTargetData(r,e).next(s=>s?(i=s,M.resolve(i)):n.Qr.allocateTargetId(r).next(o=>(i=new An(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Qr.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.ns.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.ns=n.ns.insert(r.targetId,r),n.rs.set(e,r.targetId)),r})}async function xs(t,e,n){const r=q(t),i=r.ns.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!Cr(o))throw o;j("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.ns=r.ns.remove(e),r.rs.delete(i.target)}function Ru(t,e,n){const r=q(t);let i=Q.min(),s=J();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,c,f){const m=q(u),v=m.rs.get(f);return v!==void 0?M.resolve(m.ns.get(v)):m.Qr.getTargetData(c,f)}(r,o,_t(e)).next(l=>{if(l)return i=l.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(o,l.targetId).next(u=>{s=u})}).next(()=>r.ts.getDocumentsMatchingQuery(o,e,n?i:Q.min(),n?s:J())).next(l=>(H1(r,Zw(e),l),{documents:l,hs:s})))}function W1(t,e){const n=q(t),r=q(n.Qr),i=n.ns.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",s=>r.ot(s,e).next(o=>o?o.target:null))}function K1(t,e){const n=q(t),r=n.ss.get(e)||Q.min();return n.persistence.runTransaction("Get new document changes","readonly",i=>n.os.getAllFromCollectionGroup(i,e,Cw(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(H1(n,e,i),i))}function H1(t,e,n){let r=t.ss.get(e)||Q.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.ss.set(e,r)}async function K2(t,e,n,r){const i=q(t);let s=J(),o=At();for(const c of n){const f=e.Ps(c.metadata.name);c.document&&(s=s.add(f));const m=e.Is(c);m.setReadTime(e.Ts(c.metadata.readTime)),o=o.insert(f,m)}const l=i.os.newChangeBuffer({trackRemovals:!0}),u=await Ss(i,function(f){return _t(Ls(ne.fromString(`__bundle__/docs/${f}`)))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",c=>G1(c,l,o).next(f=>(l.apply(c),f)).next(f=>i.Qr.removeMatchingKeysForTargetId(c,u.targetId).next(()=>i.Qr.addMatchingKeys(c,s,u.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(c,f.cs,f.ls)).next(()=>f.cs)))}async function H2(t,e,n=J()){const r=await Ss(t,_t(lp(e.bundledQuery))),i=q(t);return i.persistence.runTransaction("Save named query","readwrite",s=>{const o=Oe(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.$r.saveNamedQuery(s,e);const l=r.withResumeToken($e.EMPTY_BYTE_STRING,o);return i.ns=i.ns.insert(l.targetId,l),i.Qr.updateTargetData(s,l).next(()=>i.Qr.removeMatchingKeysForTargetId(s,r.targetId)).next(()=>i.Qr.addMatchingKeys(s,n,r.targetId)).next(()=>i.$r.saveNamedQuery(s,e))})}function u_(t,e){return`firestore_clients_${t}_${e}`}function c_(t,e,n){let r=`firestore_mutations_${t}_${n}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function Eh(t,e){return`firestore_targets_${t}_${e}`}class Cu{constructor(e,n,r,i){this.user=e,this.batchId=n,this.state=r,this.error=i}static Es(e,n,r){const i=JSON.parse(r);let s,o=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return o&&i.error&&(o=typeof i.error.message=="string"&&typeof i.error.code=="string",o&&(s=new B(i.error.code,i.error.message))),o?new Cu(e,n,i.state,s):(Le("SharedClientState",`Failed to parse mutation state for ID '${n}': ${r}`),null)}ds(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Bo{constructor(e,n,r){this.targetId=e,this.state=n,this.error=r}static Es(e,n){const r=JSON.parse(n);let i,s=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return s&&r.error&&(s=typeof r.error.message=="string"&&typeof r.error.code=="string",s&&(i=new B(r.error.code,r.error.message))),s?new Bo(e,r.state,i):(Le("SharedClientState",`Failed to parse target state for ID '${e}': ${n}`),null)}ds(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class ku{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Es(e,n){const r=JSON.parse(n);let i=typeof r=="object"&&r.activeTargetIds instanceof Array,s=tp();for(let o=0;i&&o<r.activeTargetIds.length;++o)i=Nw(r.activeTargetIds[o]),s=s.add(r.activeTargetIds[o]);return i?new ku(e,s):(Le("SharedClientState",`Failed to parse client data for instance '${e}': ${n}`),null)}}class mp{constructor(e,n){this.clientId=e,this.onlineState=n}static Es(e){const n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new mp(n.clientId,n.onlineState):(Le("SharedClientState",`Failed to parse online state: ${e}`),null)}}class Fd{constructor(){this.activeTargetIds=tp()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Ih{constructor(e,n,r,i,s){this.window=e,this.oi=n,this.persistenceKey=r,this.Vs=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.fs=this.gs.bind(this),this.ps=new me(X),this.started=!1,this.ys=[];const o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.ws=u_(this.persistenceKey,this.Vs),this.Ss=function(u){return`firestore_sequence_number_${u}`}(this.persistenceKey),this.ps=this.ps.insert(this.Vs,new Fd),this.bs=new RegExp(`^firestore_clients_${o}_([^_]*)$`),this.Ds=new RegExp(`^firestore_mutations_${o}_(\\d+)(?:_(.*))?$`),this.Cs=new RegExp(`^firestore_targets_${o}_(\\d+)$`),this.vs=function(u){return`firestore_online_state_${u}`}(this.persistenceKey),this.Fs=function(u){return`firestore_bundle_loaded_v2_${u}`}(this.persistenceKey),this.window.addEventListener("storage",this.fs)}static D(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Bi();for(const r of e){if(r===this.Vs)continue;const i=this.getItem(u_(this.persistenceKey,r));if(i){const s=ku.Es(r,i);s&&(this.ps=this.ps.insert(s.clientId,s))}}this.Ms();const n=this.storage.getItem(this.vs);if(n){const r=this.xs(n);r&&this.Os(r)}for(const r of this.ys)this.gs(r);this.ys=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.Ss,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ns(this.ps)}isActiveQueryTarget(e){let n=!1;return this.ps.forEach((r,i)=>{i.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.Ls(e,"pending")}updateMutationState(e,n,r){this.Ls(e,n,r),this.Bs(e)}addLocalQueryTarget(e){let n="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(Eh(this.persistenceKey,e));if(r){const i=Bo.Es(e,r);i&&(n=i.state)}}return this.ks.As(e),this.Ms(),n}removeLocalQueryTarget(e){this.ks.Rs(e),this.Ms()}isLocalQueryTarget(e){return this.ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Eh(this.persistenceKey,e))}updateQueryState(e,n,r){this.qs(e,n,r)}handleUserChange(e,n,r){n.forEach(i=>{this.Bs(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Qs(e)}notifyBundleLoaded(e){this.Ks(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.fs),this.removeItem(this.ws),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return j("SharedClientState","READ",e,n),n}setItem(e,n){j("SharedClientState","SET",e,n),this.storage.setItem(e,n)}removeItem(e){j("SharedClientState","REMOVE",e),this.storage.removeItem(e)}gs(e){const n=e;if(n.storageArea===this.storage){if(j("SharedClientState","EVENT",n.key,n.newValue),n.key===this.ws)return void Le("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.oi.enqueueRetryable(async()=>{if(this.started){if(n.key!==null){if(this.bs.test(n.key)){if(n.newValue==null){const r=this.$s(n.key);return this.Us(r,null)}{const r=this.Ws(n.key,n.newValue);if(r)return this.Us(r.clientId,r)}}else if(this.Ds.test(n.key)){if(n.newValue!==null){const r=this.Gs(n.key,n.newValue);if(r)return this.zs(r)}}else if(this.Cs.test(n.key)){if(n.newValue!==null){const r=this.js(n.key,n.newValue);if(r)return this.Hs(r)}}else if(n.key===this.vs){if(n.newValue!==null){const r=this.xs(n.newValue);if(r)return this.Os(r)}}else if(n.key===this.Ss){const r=function(s){let o=xt.oe;if(s!=null)try{const l=JSON.parse(s);H(typeof l=="number"),o=l}catch(l){Le("SharedClientState","Failed to read sequence number from WebStorage",l)}return o}(n.newValue);r!==xt.oe&&this.sequenceNumberHandler(r)}else if(n.key===this.Fs){const r=this.Js(n.newValue);await Promise.all(r.map(i=>this.syncEngine.Ys(i)))}}}else this.ys.push(n)})}}get ks(){return this.ps.get(this.Vs)}Ms(){this.setItem(this.ws,this.ks.ds())}Ls(e,n,r){const i=new Cu(this.currentUser,e,n,r),s=c_(this.persistenceKey,this.currentUser,e);this.setItem(s,i.ds())}Bs(e){const n=c_(this.persistenceKey,this.currentUser,e);this.removeItem(n)}Qs(e){const n={clientId:this.Vs,onlineState:e};this.storage.setItem(this.vs,JSON.stringify(n))}qs(e,n,r){const i=Eh(this.persistenceKey,e),s=new Bo(e,n,r);this.setItem(i,s.ds())}Ks(e){const n=JSON.stringify(Array.from(e));this.setItem(this.Fs,n)}$s(e){const n=this.bs.exec(e);return n?n[1]:null}Ws(e,n){const r=this.$s(e);return ku.Es(r,n)}Gs(e,n){const r=this.Ds.exec(e),i=Number(r[1]),s=r[2]!==void 0?r[2]:null;return Cu.Es(new We(s),i,n)}js(e,n){const r=this.Cs.exec(e),i=Number(r[1]);return Bo.Es(i,n)}xs(e){return mp.Es(e)}Js(e){return JSON.parse(e)}async zs(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Zs(e.batchId,e.state,e.error);j("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)}Hs(e){return this.syncEngine.Xs(e.targetId,e.state,e.error)}Us(e,n){const r=n?this.ps.insert(e,n):this.ps.remove(e),i=this.Ns(this.ps),s=this.Ns(r),o=[],l=[];return s.forEach(u=>{i.has(u)||o.push(u)}),i.forEach(u=>{s.has(u)||l.push(u)}),this.syncEngine.eo(o,l).then(()=>{this.ps=r})}Os(e){this.ps.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ns(e){let n=tp();return e.forEach((r,i)=>{n=n.unionWith(i.activeTargetIds)}),n}}class Q1{constructor(){this.no=new Fd,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,n,r){this.ro[e]=n}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new Fd,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q2{io(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h_{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){j("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.uo)e(0)}ao(){j("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.uo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Tl=null;function Th(){return Tl===null?Tl=function(){return 268435456+Math.round(2147483648*Math.random())}():Tl++,"0x"+Tl.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y2={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X2{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}Ao(e){this.Ro=e}onMessage(e){this.Vo=e}close(){this.ho()}send(e){this.lo(e)}mo(){this.Io()}fo(){this.Eo()}po(e){this.Ro(e)}yo(e){this.Vo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lt="WebChannelConnection";class J2 extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.wo=r+"://"+n.host,this.So=`projects/${i}/databases/${s}`,this.bo=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Do(){return!1}Co(n,r,i,s,o){const l=Th(),u=this.vo(n,r.toUriEncodedString());j("RestConnection",`Sending RPC '${n}' ${l}:`,u,i);const c={"google-cloud-resource-prefix":this.So,"x-goog-request-params":this.bo};return this.Fo(c,s,o),this.Mo(n,u,c,i).then(f=>(j("RestConnection",`Received RPC '${n}' ${l}: `,f),f),f=>{throw rn("RestConnection",`RPC '${n}' ${l} failed with error: `,f,"url: ",u,"request:",i),f})}xo(n,r,i,s,o,l){return this.Co(n,r,i,s,o)}Fo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ms}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}vo(n,r){const i=Y2[n];return`${this.wo}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Mo(e,n,r,i){const s=Th();return new Promise((o,l)=>{const u=new ww;u.setWithCredentials(!0),u.listenOnce(Iw.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Ll.NO_ERROR:const f=u.getResponseJson();j(lt,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(f)),o(f);break;case Ll.TIMEOUT:j(lt,`RPC '${e}' ${s} timed out`),l(new B(L.DEADLINE_EXCEEDED,"Request time out"));break;case Ll.HTTP_ERROR:const m=u.getStatus();if(j(lt,`RPC '${e}' ${s} failed with status:`,m,"response text:",u.getResponseText()),m>0){let v=u.getResponseJson();Array.isArray(v)&&(v=v[0]);const A=v==null?void 0:v.error;if(A&&A.status&&A.message){const D=function(F){const C=F.toLowerCase().replace(/_/g,"-");return Object.values(L).indexOf(C)>=0?C:L.UNKNOWN}(A.status);l(new B(D,A.message))}else l(new B(L.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new B(L.UNAVAILABLE,"Connection failed."));break;default:W()}}finally{j(lt,`RPC '${e}' ${s} completed.`)}});const c=JSON.stringify(i);j(lt,`RPC '${e}' ${s} sending request:`,i),u.send(n,"POST",c,r,15)})}Oo(e,n,r){const i=Th(),s=[this.wo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=xw(),l=Sw(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(u.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(u.xmlHttpFactory=new Ew({})),this.Fo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const f=s.join("");j(lt,`Creating RPC '${e}' stream ${i}: ${f}`,u);const m=o.createWebChannel(f,u);let v=!1,A=!1;const D=new X2({lo:F=>{A?j(lt,`Not sending because RPC '${e}' stream ${i} is closed:`,F):(v||(j(lt,`Opening RPC '${e}' stream ${i} transport.`),m.open(),v=!0),j(lt,`RPC '${e}' stream ${i} sending:`,F),m.send(F))},ho:()=>m.close()}),V=(F,C,x)=>{F.listen(C,T=>{try{x(T)}catch(d){setTimeout(()=>{throw d},0)}})};return V(m,Io.EventType.OPEN,()=>{A||(j(lt,`RPC '${e}' stream ${i} transport opened.`),D.mo())}),V(m,Io.EventType.CLOSE,()=>{A||(A=!0,j(lt,`RPC '${e}' stream ${i} transport closed`),D.po())}),V(m,Io.EventType.ERROR,F=>{A||(A=!0,rn(lt,`RPC '${e}' stream ${i} transport errored:`,F),D.po(new B(L.UNAVAILABLE,"The operation could not be completed")))}),V(m,Io.EventType.MESSAGE,F=>{var C;if(!A){const x=F.data[0];H(!!x);const T=x,d=T.error||((C=T[0])===null||C===void 0?void 0:C.error);if(d){j(lt,`RPC '${e}' stream ${i} received error:`,d);const g=d.status;let I=function(w){const S=Fe[w];if(S!==void 0)return p1(S)}(g),_=d.message;I===void 0&&(I=L.INTERNAL,_="Unknown error status: "+g+" with message "+d.message),A=!0,D.po(new B(I,_)),m.close()}else j(lt,`RPC '${e}' stream ${i} received:`,x),D.yo(x)}}),V(l,Tw.STAT_EVENT,F=>{F.stat===Id.PROXY?j(lt,`RPC '${e}' stream ${i} detected buffering proxy`):F.stat===Id.NOPROXY&&j(lt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{D.fo()},0),D}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y1(){return typeof window<"u"?window:null}function $l(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Da(t){return new o2(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gp{constructor(e,n,r=1e3,i=1.5,s=6e4){this.oi=e,this.timerId=n,this.No=r,this.Lo=i,this.Bo=s,this.ko=0,this.qo=null,this.Qo=Date.now(),this.reset()}reset(){this.ko=0}Ko(){this.ko=this.Bo}$o(e){this.cancel();const n=Math.floor(this.ko+this.Uo()),r=Math.max(0,Date.now()-this.Qo),i=Math.max(0,n-r);i>0&&j("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.qo=this.oi.enqueueAfterDelay(this.timerId,i,()=>(this.Qo=Date.now(),e())),this.ko*=this.Lo,this.ko<this.No&&(this.ko=this.No),this.ko>this.Bo&&(this.ko=this.Bo)}Wo(){this.qo!==null&&(this.qo.skipDelay(),this.qo=null)}cancel(){this.qo!==null&&(this.qo.cancel(),this.qo=null)}Uo(){return(Math.random()-.5)*this.ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X1{constructor(e,n,r,i,s,o,l,u){this.oi=e,this.Go=r,this.zo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.jo=0,this.Ho=null,this.Jo=null,this.stream=null,this.Yo=new gp(e,n)}Zo(){return this.state===1||this.state===5||this.Xo()}Xo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.e_()}async stop(){this.Zo()&&await this.close(0)}t_(){this.state=0,this.Yo.reset()}n_(){this.Xo()&&this.Ho===null&&(this.Ho=this.oi.enqueueAfterDelay(this.Go,6e4,()=>this.r_()))}i_(e){this.s_(),this.stream.send(e)}async r_(){if(this.Xo())return this.close(0)}s_(){this.Ho&&(this.Ho.cancel(),this.Ho=null)}o_(){this.Jo&&(this.Jo.cancel(),this.Jo=null)}async close(e,n){this.s_(),this.o_(),this.Yo.cancel(),this.jo++,e!==4?this.Yo.reset():n&&n.code===L.RESOURCE_EXHAUSTED?(Le(n.toString()),Le("Using maximum backoff delay to prevent overloading the backend."),this.Yo.Ko()):n&&n.code===L.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.__(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Ao(n)}__(){}auth(){this.state=1;const e=this.a_(this.jo),n=this.jo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.jo===n&&this.u_(r,i)},r=>{e(()=>{const i=new B(L.UNKNOWN,"Fetching auth token failed: "+r.message);return this.c_(i)})})}u_(e,n){const r=this.a_(this.jo);this.stream=this.l_(e,n),this.stream.Po(()=>{r(()=>this.listener.Po())}),this.stream.To(()=>{r(()=>(this.state=2,this.Jo=this.oi.enqueueAfterDelay(this.zo,1e4,()=>(this.Xo()&&(this.state=3),Promise.resolve())),this.listener.To()))}),this.stream.Ao(i=>{r(()=>this.c_(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}e_(){this.state=5,this.Yo.$o(async()=>{this.state=0,this.start()})}c_(e){return j("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}a_(e){return n=>{this.oi.enqueueAndForget(()=>this.jo===e?n():(j("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Z2 extends X1{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}l_(e,n){return this.connection.Oo("Listen",e,n)}onMessage(e){this.Yo.reset();const n=u2(this.serializer,e),r=function(s){if(!("targetChange"in s))return Q.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?Q.min():o.readTime?Oe(o.readTime):Q.min()}(e);return this.listener.h_(n,r)}P_(e){const n={};n.database=Vd(this.serializer),n.addTarget=function(s,o){let l;const u=o.target;if(l=Iu(u)?{documents:S1(s,u)}:{query:x1(s,u)._t},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=_1(s,o.resumeToken);const c=bd(s,o.expectedCount);c!==null&&(l.expectedCount=c)}else if(o.snapshotVersion.compareTo(Q.min())>0){l.readTime=Ts(s,o.snapshotVersion.toTimestamp());const c=bd(s,o.expectedCount);c!==null&&(l.expectedCount=c)}return l}(this.serializer,e);const r=h2(this.serializer,e);r&&(n.labels=r),this.i_(n)}I_(e){const n={};n.database=Vd(this.serializer),n.removeTarget=e,this.i_(n)}}class eR extends X1{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s,this.T_=!1}get E_(){return this.T_}start(){this.T_=!1,this.lastStreamToken=void 0,super.start()}__(){this.T_&&this.d_([])}l_(e,n){return this.connection.Oo("Write",e,n)}onMessage(e){if(H(!!e.streamToken),this.lastStreamToken=e.streamToken,this.T_){this.Yo.reset();const n=c2(e.writeResults,e.commitTime),r=Oe(e.commitTime);return this.listener.A_(r,n)}return H(!e.writeResults||e.writeResults.length===0),this.T_=!0,this.listener.R_()}V_(){const e={};e.database=Vd(this.serializer),this.i_(e)}d_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>ma(this.serializer,r))};this.i_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tR extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.m_=!1}f_(){if(this.m_)throw new B(L.FAILED_PRECONDITION,"The client has already been terminated.")}Co(e,n,r,i){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Co(e,Dd(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===L.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new B(L.UNKNOWN,s.toString())})}xo(e,n,r,i,s){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.xo(e,Dd(n,r),i,o,l,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===L.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new B(L.UNKNOWN,o.toString())})}terminate(){this.m_=!0,this.connection.terminate()}}class nR{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.g_=0,this.p_=null,this.y_=!0}w_(){this.g_===0&&(this.S_("Unknown"),this.p_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.p_=null,this.b_("Backend didn't respond within 10 seconds."),this.S_("Offline"),Promise.resolve())))}D_(e){this.state==="Online"?this.S_("Unknown"):(this.g_++,this.g_>=1&&(this.C_(),this.b_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.S_("Offline")))}set(e){this.C_(),this.g_=0,e==="Online"&&(this.y_=!1),this.S_(e)}S_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}b_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.y_?(Le(n),this.y_=!1):j("OnlineStateTracker",n)}C_(){this.p_!==null&&(this.p_.cancel(),this.p_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rR{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.v_=[],this.F_=new Map,this.M_=new Set,this.x_=[],this.O_=s,this.O_.io(o=>{r.enqueueAndForget(async()=>{br(this)&&(j("RemoteStore","Restarting streams for network reachability change."),await async function(u){const c=q(u);c.M_.add(4),await Bs(c),c.N_.set("Unknown"),c.M_.delete(4),await Va(c)}(this))})}),this.N_=new nR(r,i)}}async function Va(t){if(br(t))for(const e of t.x_)await e(!0)}async function Bs(t){for(const e of t.x_)await e(!1)}function ic(t,e){const n=q(t);n.F_.has(e.targetId)||(n.F_.set(e.targetId,e),vp(n)?_p(n):zs(n).Xo()&&yp(n,e))}function Ps(t,e){const n=q(t),r=zs(n);n.F_.delete(e),r.Xo()&&J1(n,e),n.F_.size===0&&(r.Xo()?r.n_():br(n)&&n.N_.set("Unknown"))}function yp(t,e){if(t.L_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Q.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}zs(t).P_(e)}function J1(t,e){t.L_.xe(e),zs(t).I_(e)}function _p(t){t.L_=new n2({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.F_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),zs(t).start(),t.N_.w_()}function vp(t){return br(t)&&!zs(t).Zo()&&t.F_.size>0}function br(t){return q(t).M_.size===0}function Z1(t){t.L_=void 0}async function iR(t){t.N_.set("Online")}async function sR(t){t.F_.forEach((e,n)=>{yp(t,e)})}async function oR(t,e){Z1(t),vp(t)?(t.N_.D_(e),_p(t)):t.N_.set("Unknown")}async function aR(t,e,n){if(t.N_.set("Online"),e instanceof y1&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const l of s.targetIds)i.F_.has(l)&&(await i.remoteSyncer.rejectListen(l,o),i.F_.delete(l),i.L_.removeTarget(l))}(t,e)}catch(r){j("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await bu(t,r)}else if(e instanceof Ul?t.L_.Ke(e):e instanceof g1?t.L_.He(e):t.L_.We(e),!n.isEqual(Q.min()))try{const r=await q1(t.localStore);n.compareTo(r)>=0&&await function(s,o){const l=s.L_.rt(o);return l.targetChanges.forEach((u,c)=>{if(u.resumeToken.approximateByteSize()>0){const f=s.F_.get(c);f&&s.F_.set(c,f.withResumeToken(u.resumeToken,o))}}),l.targetMismatches.forEach((u,c)=>{const f=s.F_.get(u);if(!f)return;s.F_.set(u,f.withResumeToken($e.EMPTY_BYTE_STRING,f.snapshotVersion)),J1(s,u);const m=new An(f.target,u,c,f.sequenceNumber);yp(s,m)}),s.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(r){j("RemoteStore","Failed to raise snapshot:",r),await bu(t,r)}}async function bu(t,e,n){if(!Cr(e))throw e;t.M_.add(1),await Bs(t),t.N_.set("Offline"),n||(n=()=>q1(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{j("RemoteStore","Retrying IndexedDB access"),await n(),t.M_.delete(1),await Va(t)})}function eE(t,e){return e().catch(n=>bu(t,n,e))}async function js(t){const e=q(t),n=Er(e);let r=e.v_.length>0?e.v_[e.v_.length-1].batchId:-1;for(;lR(e);)try{const i=await W2(e.localStore,r);if(i===null){e.v_.length===0&&n.n_();break}r=i.batchId,uR(e,i)}catch(i){await bu(e,i)}tE(e)&&nE(e)}function lR(t){return br(t)&&t.v_.length<10}function uR(t,e){t.v_.push(e);const n=Er(t);n.Xo()&&n.E_&&n.d_(e.mutations)}function tE(t){return br(t)&&!Er(t).Zo()&&t.v_.length>0}function nE(t){Er(t).start()}async function cR(t){Er(t).V_()}async function hR(t){const e=Er(t);for(const n of t.v_)e.d_(n.mutations)}async function dR(t,e,n){const r=t.v_.shift(),i=ip.from(r,e,n);await eE(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await js(t)}async function fR(t,e){e&&Er(t).E_&&await async function(r,i){if(function(o){return f1(o)&&o!==L.ABORTED}(i.code)){const s=r.v_.shift();Er(r).t_(),await eE(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await js(r)}}(t,e),tE(t)&&nE(t)}async function d_(t,e){const n=q(t);n.asyncQueue.verifyOperationInProgress(),j("RemoteStore","RemoteStore received new credentials");const r=br(n);n.M_.add(3),await Bs(n),r&&n.N_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.M_.delete(3),await Va(n)}async function Bd(t,e){const n=q(t);e?(n.M_.delete(2),await Va(n)):e||(n.M_.add(2),await Bs(n),n.N_.set("Unknown"))}function zs(t){return t.B_||(t.B_=function(n,r,i){const s=q(n);return s.f_(),new Z2(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Po:iR.bind(null,t),To:sR.bind(null,t),Ao:oR.bind(null,t),h_:aR.bind(null,t)}),t.x_.push(async e=>{e?(t.B_.t_(),vp(t)?_p(t):t.N_.set("Unknown")):(await t.B_.stop(),Z1(t))})),t.B_}function Er(t){return t.k_||(t.k_=function(n,r,i){const s=q(n);return s.f_(),new eR(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Po:()=>Promise.resolve(),To:cR.bind(null,t),Ao:fR.bind(null,t),R_:hR.bind(null,t),A_:dR.bind(null,t)}),t.x_.push(async e=>{e?(t.k_.t_(),await js(t)):(await t.k_.stop(),t.v_.length>0&&(j("RemoteStore",`Stopping write stream with ${t.v_.length} pending writes`),t.v_=[]))})),t.k_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wp{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new He,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,l=new wp(e,n,o,i,s);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new B(L.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Us(t,e){if(Le("AsyncQueue",`${e}: ${t}`),Cr(t))return new B(L.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class as{constructor(e){this.comparator=e?(n,r)=>e(n,r)||$.comparator(n.key,r.key):(n,r)=>$.comparator(n.key,r.key),this.keyedMap=To(),this.sortedSet=new me(this.comparator)}static emptySet(e){return new as(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof as)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new as;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f_{constructor(){this.q_=new me($.comparator)}track(e){const n=e.doc.key,r=this.q_.get(n);r?e.type!==0&&r.type===3?this.q_=this.q_.insert(n,e):e.type===3&&r.type!==1?this.q_=this.q_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.q_=this.q_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.q_=this.q_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.q_=this.q_.remove(n):e.type===1&&r.type===2?this.q_=this.q_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.q_=this.q_.insert(n,{type:2,doc:e.doc}):W():this.q_=this.q_.insert(n,e)}Q_(){const e=[];return this.q_.inorderTraversal((n,r)=>{e.push(r)}),e}}class As{constructor(e,n,r,i,s,o,l,u,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(l=>{o.push({type:0,doc:l})}),new As(e,n,as.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Aa(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pR{constructor(){this.K_=void 0,this.U_=[]}W_(){return this.U_.some(e=>e.G_())}}class mR{constructor(){this.queries=new kr(e=>Jw(e),Aa),this.onlineState="Unknown",this.z_=new Set}}async function Ep(t,e){const n=q(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.W_()&&e.G_()&&(r=2):(s=new pR,r=e.G_()?0:1);try{switch(r){case 0:s.K_=await n.onListen(i,!0);break;case 1:s.K_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const l=Us(o,`Initialization of query '${Oi(e.query)}' failed`);return void e.onError(l)}n.queries.set(i,s),s.U_.push(e),e.j_(n.onlineState),s.K_&&e.H_(s.K_)&&Tp(n)}async function Ip(t,e){const n=q(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const o=s.U_.indexOf(e);o>=0&&(s.U_.splice(o,1),s.U_.length===0?i=e.G_()?0:1:!s.W_()&&e.G_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function gR(t,e){const n=q(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const l of o.U_)l.H_(i)&&(r=!0);o.K_=i}}r&&Tp(n)}function yR(t,e,n){const r=q(t),i=r.queries.get(e);if(i)for(const s of i.U_)s.onError(n);r.queries.delete(e)}function Tp(t){t.z_.forEach(e=>{e.next()})}var jd,p_;(p_=jd||(jd={})).J_="default",p_.Cache="cache";class Sp{constructor(e,n,r){this.query=e,this.Y_=n,this.Z_=!1,this.X_=null,this.onlineState="Unknown",this.options=r||{}}H_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new As(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Z_?this.ea(e)&&(this.Y_.next(e),n=!0):this.ta(e,this.onlineState)&&(this.na(e),n=!0),this.X_=e,n}onError(e){this.Y_.error(e)}j_(e){this.onlineState=e;let n=!1;return this.X_&&!this.Z_&&this.ta(this.X_,e)&&(this.na(this.X_),n=!0),n}ta(e,n){if(!e.fromCache||!this.G_())return!0;const r=n!=="Offline";return(!this.options.ra||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ea(e){if(e.docChanges.length>0)return!0;const n=this.X_&&this.X_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}na(e){e=As.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Z_=!0,this.Y_.next(e)}G_(){return this.options.source!==jd.Cache}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _R{constructor(e,n){this.ia=e,this.byteLength=n}sa(){return"metadata"in this.ia}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m_{constructor(e){this.serializer=e}Ps(e){return fn(this.serializer,e)}Is(e){return e.metadata.exists?T1(this.serializer,e.document,!1):_e.newNoDocument(this.Ps(e.metadata.name),this.Ts(e.metadata.readTime))}Ts(e){return Oe(e)}}class vR{constructor(e,n,r){this.oa=e,this.localStore=n,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=rE(e)}_a(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.ia.namedQuery)this.queries.push(e.ia.namedQuery);else if(e.ia.documentMetadata){this.documents.push({metadata:e.ia.documentMetadata}),e.ia.documentMetadata.exists||++n;const r=ne.fromString(e.ia.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.ia.document&&(this.documents[this.documents.length-1].document=e.ia.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,Object.assign({},this.progress)):null}aa(e){const n=new Map,r=new m_(this.serializer);for(const i of e)if(i.metadata.queries){const s=r.Ps(i.metadata.name);for(const o of i.metadata.queries){const l=(n.get(o)||J()).add(s);n.set(o,l)}}return n}async complete(){const e=await K2(this.localStore,new m_(this.serializer),this.documents,this.oa.id),n=this.aa(this.documents);for(const r of this.queries)await H2(this.localStore,r,n.get(r.name));return this.progress.taskState="Success",{progress:this.progress,ua:this.collectionGroups,ca:e}}}function rE(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iE{constructor(e){this.key=e}}class sE{constructor(e){this.key=e}}class oE{constructor(e,n){this.query=e,this.la=n,this.ha=null,this.hasCachedResults=!1,this.current=!1,this.Pa=J(),this.mutatedKeys=J(),this.Ia=e1(e),this.Ta=new as(this.Ia)}get Ea(){return this.la}da(e,n){const r=n?n.Aa:new f_,i=n?n.Ta:this.Ta;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,l=!1;const u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,c=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((f,m)=>{const v=i.get(f),A=Ra(this.query,m)?m:null,D=!!v&&this.mutatedKeys.has(v.key),V=!!A&&(A.hasLocalMutations||this.mutatedKeys.has(A.key)&&A.hasCommittedMutations);let F=!1;v&&A?v.data.isEqual(A.data)?D!==V&&(r.track({type:3,doc:A}),F=!0):this.Ra(v,A)||(r.track({type:2,doc:A}),F=!0,(u&&this.Ia(A,u)>0||c&&this.Ia(A,c)<0)&&(l=!0)):!v&&A?(r.track({type:0,doc:A}),F=!0):v&&!A&&(r.track({type:1,doc:v}),F=!0,(u||c)&&(l=!0)),F&&(A?(o=o.add(A),s=V?s.add(f):s.delete(f)):(o=o.delete(f),s=s.delete(f)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const f=this.query.limitType==="F"?o.last():o.first();o=o.delete(f.key),s=s.delete(f.key),r.track({type:1,doc:f})}return{Ta:o,Aa:r,Xi:l,mutatedKeys:s}}Ra(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.Ta;this.Ta=e.Ta,this.mutatedKeys=e.mutatedKeys;const o=e.Aa.Q_();o.sort((f,m)=>function(A,D){const V=F=>{switch(F){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return W()}};return V(A)-V(D)}(f.type,m.type)||this.Ia(f.doc,m.doc)),this.Va(r),i=i!=null&&i;const l=n&&!i?this.ma():[],u=this.Pa.size===0&&this.current&&!i?1:0,c=u!==this.ha;return this.ha=u,o.length!==0||c?{snapshot:new As(this.query,e.Ta,s,o,e.mutatedKeys,u===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),fa:l}:{fa:l}}j_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ta:this.Ta,Aa:new f_,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{fa:[]}}ga(e){return!this.la.has(e)&&!!this.Ta.has(e)&&!this.Ta.get(e).hasLocalMutations}Va(e){e&&(e.addedDocuments.forEach(n=>this.la=this.la.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.la=this.la.delete(n)),this.current=e.current)}ma(){if(!this.current)return[];const e=this.Pa;this.Pa=J(),this.Ta.forEach(r=>{this.ga(r.key)&&(this.Pa=this.Pa.add(r.key))});const n=[];return e.forEach(r=>{this.Pa.has(r)||n.push(new sE(r))}),this.Pa.forEach(r=>{e.has(r)||n.push(new iE(r))}),n}pa(e){this.la=e.hs,this.Pa=J();const n=this.da(e.documents);return this.applyChanges(n,!0)}ya(){return As.fromInitialDocuments(this.query,this.Ta,this.mutatedKeys,this.ha===0,this.hasCachedResults)}}class wR{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class ER{constructor(e){this.key=e,this.wa=!1}}class IR{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Sa={},this.ba=new kr(l=>Jw(l),Aa),this.Da=new Map,this.Ca=new Set,this.va=new me($.comparator),this.Fa=new Map,this.Ma=new hp,this.xa={},this.Oa=new Map,this.Na=gi.Ln(),this.onlineState="Unknown",this.La=void 0}get isPrimaryClient(){return this.La===!0}}async function TR(t,e,n=!0){const r=sc(t);let i;const s=r.ba.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.ya()):i=await aE(r,e,n,!0),i}async function SR(t,e){const n=sc(t);await aE(n,e,!0,!1)}async function aE(t,e,n,r){const i=await Ss(t.localStore,_t(e)),s=i.targetId,o=n?t.sharedClientState.addLocalQueryTarget(s):"not-current";let l;return r&&(l=await xp(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&ic(t.remoteStore,i),l}async function xp(t,e,n,r,i){t.Ba=(m,v,A)=>async function(V,F,C,x){let T=F.view.da(C);T.Xi&&(T=await Ru(V.localStore,F.query,!1).then(({documents:_})=>F.view.da(_,T)));const d=x&&x.targetChanges.get(F.targetId),g=x&&x.targetMismatches.get(F.targetId)!=null,I=F.view.applyChanges(T,V.isPrimaryClient,d,g);return zd(V,F.targetId,I.fa),I.snapshot}(t,m,v,A);const s=await Ru(t.localStore,e,!0),o=new oE(e,s.hs),l=o.da(s.documents),u=ba.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),c=o.applyChanges(l,t.isPrimaryClient,u);zd(t,n,c.fa);const f=new wR(e,n,o);return t.ba.set(e,f),t.Da.has(n)?t.Da.get(n).push(e):t.Da.set(n,[e]),c.snapshot}async function xR(t,e,n){const r=q(t),i=r.ba.get(e),s=r.Da.get(i.targetId);if(s.length>1)return r.Da.set(i.targetId,s.filter(o=>!Aa(o,e))),void r.ba.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await xs(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Ps(r.remoteStore,i.targetId),Rs(r,i.targetId)}).catch(Rr)):(Rs(r,i.targetId),await xs(r.localStore,i.targetId,!0))}async function PR(t,e){const n=q(t),r=n.ba.get(e),i=n.Da.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Ps(n.remoteStore,r.targetId))}async function AR(t,e,n){const r=Cp(t);try{const i=await function(o,l){const u=q(o),c=Te.now(),f=l.reduce((A,D)=>A.add(D.key),J());let m,v;return u.persistence.runTransaction("Locally write mutations","readwrite",A=>{let D=At(),V=J();return u.os.getEntries(A,f).next(F=>{D=F,D.forEach((C,x)=>{x.isValidDocument()||(V=V.add(C))})}).next(()=>u.localDocuments.getOverlayedDocuments(A,D)).next(F=>{m=F;const C=[];for(const x of l){const T=ZA(x,m.get(x.key).overlayedDocument);T!=null&&C.push(new Fn(x.key,T,$w(T.value.mapValue),Ie.exists(!0)))}return u.mutationQueue.addMutationBatch(A,c,C,l)}).next(F=>{v=F;const C=F.applyToLocalDocumentSet(m,V);return u.documentOverlayCache.saveOverlays(A,F.batchId,C)})}).then(()=>({batchId:v.batchId,changes:n1(m)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,l,u){let c=o.xa[o.currentUser.toKey()];c||(c=new me(X)),c=c.insert(l,u),o.xa[o.currentUser.toKey()]=c}(r,i.batchId,n),await Bn(r,i.changes),await js(r.remoteStore)}catch(i){const s=Us(i,"Failed to persist write");n.reject(s)}}async function lE(t,e){const n=q(t);try{const r=await G2(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.Fa.get(s);o&&(H(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.wa=!0:i.modifiedDocuments.size>0?H(o.wa):i.removedDocuments.size>0&&(H(o.wa),o.wa=!1))}),await Bn(n,r,e)}catch(r){await Rr(r)}}function g_(t,e,n){const r=q(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.ba.forEach((s,o)=>{const l=o.view.j_(e);l.snapshot&&i.push(l.snapshot)}),function(o,l){const u=q(o);u.onlineState=l;let c=!1;u.queries.forEach((f,m)=>{for(const v of m.U_)v.j_(l)&&(c=!0)}),c&&Tp(u)}(r.eventManager,e),i.length&&r.Sa.h_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function RR(t,e,n){const r=q(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Fa.get(e),s=i&&i.key;if(s){let o=new me($.comparator);o=o.insert(s,_e.newNoDocument(s,Q.min()));const l=J().add(s),u=new ka(Q.min(),new Map,new me(X),o,l);await lE(r,u),r.va=r.va.remove(s),r.Fa.delete(e),Rp(r)}else await xs(r.localStore,e,!1).then(()=>Rs(r,e,n)).catch(Rr)}async function CR(t,e){const n=q(t),r=e.batch.batchId;try{const i=await q2(n.localStore,e);Ap(n,r,null),Pp(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Bn(n,i)}catch(i){await Rr(i)}}async function kR(t,e,n){const r=q(t);try{const i=await function(o,l){const u=q(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let f;return u.mutationQueue.lookupMutationBatch(c,l).next(m=>(H(m!==null),f=m.keys(),u.mutationQueue.removeMutationBatch(c,m))).next(()=>u.mutationQueue.performConsistencyCheck(c)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(c,f,l)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,f)).next(()=>u.localDocuments.getDocuments(c,f))})}(r.localStore,e);Ap(r,e,n),Pp(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Bn(r,i)}catch(i){await Rr(i)}}async function bR(t,e){const n=q(t);br(n.remoteStore)||j("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=await function(o){const l=q(o);return l.persistence.runTransaction("Get highest unacknowledged batch id","readonly",u=>l.mutationQueue.getHighestUnacknowledgedBatchId(u))}(n.localStore);if(r===-1)return void e.resolve();const i=n.Oa.get(r)||[];i.push(e),n.Oa.set(r,i)}catch(r){const i=Us(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}function Pp(t,e){(t.Oa.get(e)||[]).forEach(n=>{n.resolve()}),t.Oa.delete(e)}function Ap(t,e,n){const r=q(t);let i=r.xa[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.xa[r.currentUser.toKey()]=i}}function Rs(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Da.get(e))t.ba.delete(r),n&&t.Sa.ka(r,n);t.Da.delete(e),t.isPrimaryClient&&t.Ma.Vr(e).forEach(r=>{t.Ma.containsKey(r)||uE(t,r)})}function uE(t,e){t.Ca.delete(e.path.canonicalString());const n=t.va.get(e);n!==null&&(Ps(t.remoteStore,n),t.va=t.va.remove(e),t.Fa.delete(n),Rp(t))}function zd(t,e,n){for(const r of n)r instanceof iE?(t.Ma.addReference(r.key,e),DR(t,r)):r instanceof sE?(j("SyncEngine","Document no longer in limbo: "+r.key),t.Ma.removeReference(r.key,e),t.Ma.containsKey(r.key)||uE(t,r.key)):W()}function DR(t,e){const n=e.key,r=n.path.canonicalString();t.va.get(n)||t.Ca.has(r)||(j("SyncEngine","New document in limbo: "+n),t.Ca.add(r),Rp(t))}function Rp(t){for(;t.Ca.size>0&&t.va.size<t.maxConcurrentLimboResolutions;){const e=t.Ca.values().next().value;t.Ca.delete(e);const n=new $(ne.fromString(e)),r=t.Na.next();t.Fa.set(r,new ER(n)),t.va=t.va.insert(n,r),ic(t.remoteStore,new An(_t(Ls(n.path)),r,"TargetPurposeLimboResolution",xt.oe))}}async function Bn(t,e,n){const r=q(t),i=[],s=[],o=[];r.ba.isEmpty()||(r.ba.forEach((l,u)=>{o.push(r.Ba(u,e,n).then(c=>{var f;if((c||n)&&r.isPrimaryClient){const m=c?!c.fromCache:(f=n==null?void 0:n.targetChanges.get(u.targetId))===null||f===void 0?void 0:f.current;r.sharedClientState.updateQueryState(u.targetId,m?"current":"not-current")}if(c){i.push(c);const m=pp.Ki(u.targetId,c);s.push(m)}}))}),await Promise.all(o),r.Sa.h_(i),await async function(u,c){const f=q(u);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>M.forEach(c,v=>M.forEach(v.qi,A=>f.persistence.referenceDelegate.addReference(m,v.targetId,A)).next(()=>M.forEach(v.Qi,A=>f.persistence.referenceDelegate.removeReference(m,v.targetId,A)))))}catch(m){if(!Cr(m))throw m;j("LocalStore","Failed to update sequence numbers: "+m)}for(const m of c){const v=m.targetId;if(!m.fromCache){const A=f.ns.get(v),D=A.snapshotVersion,V=A.withLastLimboFreeSnapshotVersion(D);f.ns=f.ns.insert(v,V)}}}(r.localStore,s))}async function VR(t,e){const n=q(t);if(!n.currentUser.isEqual(e)){j("SyncEngine","User change. New user:",e.toKey());const r=await $1(n.localStore,e);n.currentUser=e,function(s,o){s.Oa.forEach(l=>{l.forEach(u=>{u.reject(new B(L.CANCELLED,o))})}),s.Oa.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Bn(n,r.us)}}function NR(t,e){const n=q(t),r=n.Fa.get(e);if(r&&r.wa)return J().add(r.key);{let i=J();const s=n.Da.get(e);if(!s)return i;for(const o of s){const l=n.ba.get(o);i=i.unionWith(l.view.Ea)}return i}}async function MR(t,e){const n=q(t),r=await Ru(n.localStore,e.query,!0),i=e.view.pa(r);return n.isPrimaryClient&&zd(n,e.targetId,i.fa),i}async function LR(t,e){const n=q(t);return K1(n.localStore,e).then(r=>Bn(n,r))}async function OR(t,e,n,r){const i=q(t),s=await function(l,u){const c=q(l),f=q(c.mutationQueue);return c.persistence.runTransaction("Lookup mutation documents","readonly",m=>f.vn(m,u).next(v=>v?c.localDocuments.getDocuments(m,v):M.resolve(null)))}(i.localStore,e);s!==null?(n==="pending"?await js(i.remoteStore):n==="acknowledged"||n==="rejected"?(Ap(i,e,r||null),Pp(i,e),function(l,u){q(q(l).mutationQueue).Mn(u)}(i.localStore,e)):W(),await Bn(i,s)):j("SyncEngine","Cannot apply mutation batch with id: "+e)}async function FR(t,e){const n=q(t);if(sc(n),Cp(n),e===!0&&n.La!==!0){const r=n.sharedClientState.getAllActiveQueryTargets(),i=await y_(n,r.toArray());n.La=!0,await Bd(n.remoteStore,!0);for(const s of i)ic(n.remoteStore,s)}else if(e===!1&&n.La!==!1){const r=[];let i=Promise.resolve();n.Da.forEach((s,o)=>{n.sharedClientState.isLocalQueryTarget(o)?r.push(o):i=i.then(()=>(Rs(n,o),xs(n.localStore,o,!0))),Ps(n.remoteStore,o)}),await i,await y_(n,r),function(o){const l=q(o);l.Fa.forEach((u,c)=>{Ps(l.remoteStore,c)}),l.Ma.mr(),l.Fa=new Map,l.va=new me($.comparator)}(n),n.La=!1,await Bd(n.remoteStore,!1)}}async function y_(t,e,n){const r=q(t),i=[],s=[];for(const o of e){let l;const u=r.Da.get(o);if(u&&u.length!==0){l=await Ss(r.localStore,_t(u[0]));for(const c of u){const f=r.ba.get(c),m=await MR(r,f);m.snapshot&&s.push(m.snapshot)}}else{const c=await W1(r.localStore,o);l=await Ss(r.localStore,c),await xp(r,cE(c),o,!1,l.resumeToken)}i.push(l)}return r.Sa.h_(s),i}function cE(t){return Xw(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function BR(t){return function(n){return q(q(n).persistence).Bi()}(q(t).localStore)}async function jR(t,e,n,r){const i=q(t);if(i.La)return void j("SyncEngine","Ignoring unexpected query state notification.");const s=i.Da.get(e);if(s&&s.length>0)switch(n){case"current":case"not-current":{const o=await K1(i.localStore,Zw(s[0])),l=ka.createSynthesizedRemoteEventForCurrentChange(e,n==="current",$e.EMPTY_BYTE_STRING);await Bn(i,o,l);break}case"rejected":await xs(i.localStore,e,!0),Rs(i,e,r);break;default:W()}}async function zR(t,e,n){const r=sc(t);if(r.La){for(const i of e){if(r.Da.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){j("SyncEngine","Adding an already active target "+i);continue}const s=await W1(r.localStore,i),o=await Ss(r.localStore,s);await xp(r,cE(s),o.targetId,!1,o.resumeToken),ic(r.remoteStore,o)}for(const i of n)r.Da.has(i)&&await xs(r.localStore,i,!1).then(()=>{Ps(r.remoteStore,i),Rs(r,i)}).catch(Rr)}}function sc(t){const e=q(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=lE.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=NR.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=RR.bind(null,e),e.Sa.h_=gR.bind(null,e.eventManager),e.Sa.ka=yR.bind(null,e.eventManager),e}function Cp(t){const e=q(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=CR.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=kR.bind(null,e),e}function UR(t,e,n){const r=q(t);(async function(s,o,l){try{const u=await o.getMetadata();if(await function(A,D){const V=q(A),F=Oe(D.createTime);return V.persistence.runTransaction("hasNewerBundle","readonly",C=>V.$r.getBundleMetadata(C,D.id)).then(C=>!!C&&C.createTime.compareTo(F)>=0)}(s.localStore,u))return await o.close(),l._completeWith(function(A){return{taskState:"Success",documentsLoaded:A.totalDocuments,bytesLoaded:A.totalBytes,totalDocuments:A.totalDocuments,totalBytes:A.totalBytes}}(u)),Promise.resolve(new Set);l._updateProgress(rE(u));const c=new vR(u,s.localStore,o.serializer);let f=await o.qa();for(;f;){const v=await c._a(f);v&&l._updateProgress(v),f=await o.qa()}const m=await c.complete();return await Bn(s,m.ca,void 0),await function(A,D){const V=q(A);return V.persistence.runTransaction("Save bundle","readwrite",F=>V.$r.saveBundleMetadata(F,D))}(s.localStore,u),l._completeWith(m.progress),Promise.resolve(m.ua)}catch(u){return rn("SyncEngine",`Loading bundle failed with ${u}`),l._failWith(u),Promise.resolve(new Set)}})(r,e,n).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}class Ud{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=Da(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return U1(this.persistence,new z1,e.initialUser,this.serializer)}createPersistence(e){return new j1(rc.Hr,this.serializer)}createSharedClientState(e){return new Q1}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class hE extends Ud{constructor(e,n,r){super(),this.Qa=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Qa.initialize(this,e),await Cp(this.Qa.syncEngine),await js(this.Qa.remoteStore),await this.persistence.fi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}createLocalStore(e){return U1(this.persistence,new z1,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,n){const r=this.persistence.referenceDelegate.garbageCollector;return new A2(r,e.asyncQueue,n)}createIndexBackfillerScheduler(e,n){const r=new cA(n,this.persistence);return new uA(e.asyncQueue,r)}createPersistence(e){const n=fp(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?It.withCacheSize(this.cacheSizeBytes):It.DEFAULT;return new dp(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,Y1(),$l(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new Q1}}class $R extends hE{constructor(e,n){super(e,n,!1),this.Qa=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const n=this.Qa.syncEngine;this.sharedClientState instanceof Ih&&(this.sharedClientState.syncEngine={Zs:OR.bind(null,n),Xs:jR.bind(null,n),eo:zR.bind(null,n),Bi:BR.bind(null,n),Ys:LR.bind(null,n)},await this.sharedClientState.start()),await this.persistence.fi(async r=>{await FR(this.Qa.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())})}createSharedClientState(e){const n=Y1();if(!Ih.D(n))throw new B(L.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=fp(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Ih(n,e.asyncQueue,r,e.clientId,e.initialUser)}}class kp{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>g_(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=VR.bind(null,this.syncEngine),await Bd(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new mR}()}createDatastore(e){const n=Da(e.databaseInfo.databaseId),r=function(s){return new J2(s)}(e.databaseInfo);return function(s,o,l,u){return new tR(s,o,l,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,l){return new rR(r,i,s,o,l)}(this.localStore,this.datastore,e.asyncQueue,n=>g_(this.syncEngine,n,0),function(){return h_.D()?new h_:new Q2}())}createSyncEngine(e,n){return function(i,s,o,l,u,c,f){const m=new IR(i,s,o,l,u,c);return f&&(m.La=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e;await async function(r){const i=q(r);j("RemoteStore","RemoteStore shutting down."),i.M_.add(5),await Bs(i),i.O_.shutdown(),i.N_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __(t,e=10240){let n=0;return{async read(){if(n<t.byteLength){const r={value:t.slice(n,n+e),done:!1};return n+=e,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oc{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ka(this.observer.next,e)}error(e){this.observer.error?this.Ka(this.observer.error,e):Le("Uncaught Error in snapshot listener:",e.toString())}$a(){this.muted=!0}Ka(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qR{constructor(e,n){this.Ua=e,this.serializer=n,this.metadata=new He,this.buffer=new Uint8Array,this.Wa=function(){return new TextDecoder("utf-8")}(),this.Ga().then(r=>{r&&r.sa()?this.metadata.resolve(r.ia.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r==null?void 0:r.ia)}`))},r=>this.metadata.reject(r))}close(){return this.Ua.cancel()}async getMetadata(){return this.metadata.promise}async qa(){return await this.getMetadata(),this.Ga()}async Ga(){const e=await this.za();if(e===null)return null;const n=this.Wa.decode(e),r=Number(n);isNaN(r)&&this.ja(`length string (${n}) is not valid number`);const i=await this.Ha(r);return new _R(JSON.parse(i),e.length+r)}Ja(){return this.buffer.findIndex(e=>e===123)}async za(){for(;this.Ja()<0&&!await this.Ya(););if(this.buffer.length===0)return null;const e=this.Ja();e<0&&this.ja("Reached the end of bundle when a length string is expected.");const n=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),n}async Ha(e){for(;this.buffer.length<e;)await this.Ya()&&this.ja("Reached the end of bundle when more is expected.");const n=this.Wa.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),n}ja(e){throw this.Ua.cancel(),new Error(`Invalid bundle format: ${e}`)}async Ya(){const e=await this.Ua.read();if(!e.done){const n=new Uint8Array(this.buffer.length+e.value.length);n.set(this.buffer),n.set(e.value,this.buffer.length),this.buffer=n}return e.done}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GR{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new B(L.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const n=await async function(i,s){const o=q(i),l={documents:s.map(m=>pa(o.serializer,m))},u=await o.xo("BatchGetDocuments",o.serializer.databaseId,ne.emptyPath(),l,s.length),c=new Map;u.forEach(m=>{const v=l2(o.serializer,m);c.set(v.key.toString(),v)});const f=[];return s.forEach(m=>{const v=c.get(m.toString());H(!!v),f.push(v)}),f}(this.datastore,e);return n.forEach(r=>this.recordVersion(r)),n}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Fs(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach(n=>{e.delete(n.key.toString())}),e.forEach((n,r)=>{const i=$.fromPath(r);this.mutations.push(new np(i,this.precondition(i)))}),await async function(r,i){const s=q(r),o={writes:i.map(l=>ma(s.serializer,l))};await s.Co("Commit",s.serializer.databaseId,ne.emptyPath(),o)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw W();n=Q.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!n.isEqual(r))throw new B(L.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(Q.min())?Ie.exists(!1):Ie.updateTime(n):Ie.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(Q.min()))throw new B(L.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Ie.updateTime(n)}return Ie.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WR{constructor(e,n,r,i,s){this.asyncQueue=e,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=s,this.Za=r.maxAttempts,this.Yo=new gp(this.asyncQueue,"transaction_retry")}Xa(){this.Za-=1,this.eu()}eu(){this.Yo.$o(async()=>{const e=new GR(this.datastore),n=this.tu(e);n&&n.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(i=>{this.nu(i)}))}).catch(r=>{this.nu(r)})})}tu(e){try{const n=this.updateFunction(e);return!xa(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}nu(e){this.Za>0&&this.ru(e)?(this.Za-=1,this.asyncQueue.enqueueAndForget(()=>(this.eu(),Promise.resolve()))):this.deferred.reject(e)}ru(e){if(e.name==="FirebaseError"){const n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!f1(n)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KR{constructor(e,n,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=We.UNAUTHENTICATED,this.clientId=Aw.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async s=>{j("FirestoreClient","Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>(j("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new B(L.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new He;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Us(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function ql(t,e){t.asyncQueue.verifyOperationInProgress(),j("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await $1(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function $d(t,e){t.asyncQueue.verifyOperationInProgress();const n=await bp(t);j("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>d_(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>d_(e.remoteStore,i)),t._onlineComponents=e}function dE(t){return t.name==="FirebaseError"?t.code===L.FAILED_PRECONDITION||t.code===L.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}async function bp(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){j("FirestoreClient","Using user provided OfflineComponentProvider");try{await ql(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!dE(n))throw n;rn("Error using user provided cache. Falling back to memory cache: "+n),await ql(t,new Ud)}}else j("FirestoreClient","Using default OfflineComponentProvider"),await ql(t,new Ud);return t._offlineComponents}async function ac(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(j("FirestoreClient","Using user provided OnlineComponentProvider"),await $d(t,t._uninitializedComponentsProvider._online)):(j("FirestoreClient","Using default OnlineComponentProvider"),await $d(t,new kp))),t._onlineComponents}function fE(t){return bp(t).then(e=>e.persistence)}function Dp(t){return bp(t).then(e=>e.localStore)}function pE(t){return ac(t).then(e=>e.remoteStore)}function Vp(t){return ac(t).then(e=>e.syncEngine)}function HR(t){return ac(t).then(e=>e.datastore)}async function Cs(t){const e=await ac(t),n=e.eventManager;return n.onListen=TR.bind(null,e.syncEngine),n.onUnlisten=xR.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=SR.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=PR.bind(null,e.syncEngine),n}function QR(t){return t.asyncQueue.enqueue(async()=>{const e=await fE(t),n=await pE(t);return e.setNetworkEnabled(!0),function(i){const s=q(i);return s.M_.delete(0),Va(s)}(n)})}function YR(t){return t.asyncQueue.enqueue(async()=>{const e=await fE(t),n=await pE(t);return e.setNetworkEnabled(!1),async function(i){const s=q(i);s.M_.add(0),await Bs(s),s.N_.set("Offline")}(n)})}function XR(t,e){const n=new He;return t.asyncQueue.enqueueAndForget(async()=>async function(i,s,o){try{const l=await function(c,f){const m=q(c);return m.persistence.runTransaction("read document","readonly",v=>m.localDocuments.getDocument(v,f))}(i,s);l.isFoundDocument()?o.resolve(l):l.isNoDocument()?o.resolve(null):o.reject(new B(L.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(l){const u=Us(l,`Failed to get document '${s} from cache`);o.reject(u)}}(await Dp(t),e,n)),n.promise}function mE(t,e,n={}){const r=new He;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,l,u,c){const f=new oc({next:v=>{o.enqueueAndForget(()=>Ip(s,m));const A=v.docs.has(l);!A&&v.fromCache?c.reject(new B(L.UNAVAILABLE,"Failed to get document because the client is offline.")):A&&v.fromCache&&u&&u.source==="server"?c.reject(new B(L.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(v)},error:v=>c.reject(v)}),m=new Sp(Ls(l.path),f,{includeMetadataChanges:!0,ra:!0});return Ep(s,m)}(await Cs(t),t.asyncQueue,e,n,r)),r.promise}function JR(t,e){const n=new He;return t.asyncQueue.enqueueAndForget(async()=>async function(i,s,o){try{const l=await Ru(i,s,!0),u=new oE(s,l.hs),c=u.da(l.documents),f=u.applyChanges(c,!1);o.resolve(f.snapshot)}catch(l){const u=Us(l,`Failed to execute query '${s} against cache`);o.reject(u)}}(await Dp(t),e,n)),n.promise}function gE(t,e,n={}){const r=new He;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,l,u,c){const f=new oc({next:v=>{o.enqueueAndForget(()=>Ip(s,m)),v.fromCache&&u.source==="server"?c.reject(new B(L.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(v)},error:v=>c.reject(v)}),m=new Sp(l,f,{includeMetadataChanges:!0,ra:!0});return Ep(s,m)}(await Cs(t),t.asyncQueue,e,n,r)),r.promise}function ZR(t,e){const n=new oc(e);return t.asyncQueue.enqueueAndForget(async()=>function(i,s){q(i).z_.add(s),s.next()}(await Cs(t),n)),()=>{n.$a(),t.asyncQueue.enqueueAndForget(async()=>function(i,s){q(i).z_.delete(s)}(await Cs(t),n))}}function eC(t,e,n,r){const i=function(o,l){let u;return u=typeof o=="string"?m1().encode(o):o,function(f,m){return new qR(f,m)}(function(f,m){if(f instanceof Uint8Array)return __(f,m);if(f instanceof ArrayBuffer)return __(new Uint8Array(f),m);if(f instanceof ReadableStream)return f.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(u),l)}(n,Da(e));t.asyncQueue.enqueueAndForget(async()=>{UR(await Vp(t),i,r)})}function tC(t,e){return t.asyncQueue.enqueue(async()=>function(r,i){const s=q(r);return s.persistence.runTransaction("Get named query","readonly",o=>s.$r.getNamedQuery(o,i))}(await Dp(t),e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yE(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v_=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Np(t,e,n){if(!n)throw new B(L.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function _E(t,e,n,r){if(e===!0&&r===!0)throw new B(L.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function w_(t){if(!$.isDocumentKey(t))throw new B(L.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function E_(t){if($.isDocumentKey(t))throw new B(L.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function lc(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":W()}function ae(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new B(L.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=lc(t);throw new B(L.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function vE(t,e){if(e<=0)throw new B(L.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I_{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new B(L.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new B(L.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}_E("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=yE((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new B(L.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new B(L.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new B(L.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Na{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new I_({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new B(L.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new B(L.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new I_(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new JP;switch(r.type){case"firstParty":return new nA(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new B(L.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=v_.get(n);r&&(j("ComponentProvider","Removing Datastore"),v_.delete(n),r.terminate())}(this),Promise.resolve()}}function nC(t,e,n,r={}){var i;const s=(t=ae(t,Na))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&rn("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let l,u;if(typeof r.mockUserToken=="string")l=r.mockUserToken,u=We.MOCK_USER;else{l=Cx(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new B(L.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new We(c)}t._authCredentials=new ZP(new Pw(l,u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vt=class wE{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new wE(this.firestore,e,this._query)}},Re=class EE{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new hr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new EE(this.firestore,e,this._key)}},hr=class IE extends vt{constructor(e,n,r){super(e,n,Ls(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Re(this.firestore,null,new $(e))}withConverter(e){return new IE(this.firestore,e,this._path)}};function TE(t,e,...n){if(t=je(t),Np("collection","path",e),t instanceof Na){const r=ne.fromString(e,...n);return E_(r),new hr(t,null,r)}{if(!(t instanceof Re||t instanceof hr))throw new B(L.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ne.fromString(e,...n));return E_(r),new hr(t.firestore,null,r)}}function rC(t,e){if(t=ae(t,Na),Np("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new B(L.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new vt(t,null,function(r){return new On(ne.emptyPath(),r)}(e))}function Du(t,e,...n){if(t=je(t),arguments.length===1&&(e=Aw.newId()),Np("doc","path",e),t instanceof Na){const r=ne.fromString(e,...n);return w_(r),new Re(t,null,new $(r))}{if(!(t instanceof Re||t instanceof hr))throw new B(L.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ne.fromString(e,...n));return w_(r),new Re(t.firestore,t instanceof hr?t.converter:null,new $(r))}}function SE(t,e){return t=je(t),e=je(e),(t instanceof Re||t instanceof hr)&&(e instanceof Re||e instanceof hr)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function Mp(t,e){return t=je(t),e=je(e),t instanceof vt&&e instanceof vt&&t.firestore===e.firestore&&Aa(t._query,e._query)&&t.converter===e.converter}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iC{constructor(){this.iu=Promise.resolve(),this.su=[],this.ou=!1,this._u=[],this.au=null,this.uu=!1,this.cu=!1,this.lu=[],this.Yo=new gp(this,"async_queue_retry"),this.hu=()=>{const n=$l();n&&j("AsyncQueue","Visibility state changed to "+n.visibilityState),this.Yo.Wo()};const e=$l();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.hu)}get isShuttingDown(){return this.ou}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Pu(),this.Iu(e)}enterRestrictedMode(e){if(!this.ou){this.ou=!0,this.cu=e||!1;const n=$l();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.hu)}}enqueue(e){if(this.Pu(),this.ou)return new Promise(()=>{});const n=new He;return this.Iu(()=>this.ou&&this.cu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.su.push(e),this.Tu()))}async Tu(){if(this.su.length!==0){try{await this.su[0](),this.su.shift(),this.Yo.reset()}catch(e){if(!Cr(e))throw e;j("AsyncQueue","Operation failed with retryable error: "+e)}this.su.length>0&&this.Yo.$o(()=>this.Tu())}}Iu(e){const n=this.iu.then(()=>(this.uu=!0,e().catch(r=>{this.au=r,this.uu=!1;const i=function(o){let l=o.message||"";return o.stack&&(l=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),l}(r);throw Le("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.uu=!1,r))));return this.iu=n,n}enqueueAfterDelay(e,n,r){this.Pu(),this.lu.indexOf(e)>-1&&(n=0);const i=wp.createAndSchedule(this,e,n,r,s=>this.Eu(s));return this._u.push(i),i}Pu(){this.au&&W()}verifyOperationInProgress(){}async du(){let e;do e=this.iu,await e;while(e!==this.iu)}Au(e){for(const n of this._u)if(n.timerId===e)return!0;return!1}Ru(e){return this.du().then(()=>{this._u.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this._u)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.du()})}Vu(e){this.lu.push(e)}Eu(e){const n=this._u.indexOf(e);this._u.splice(n,1)}}function qd(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(t,["next","error","complete"])}class sC{constructor(){this._progressObserver={},this._taskCompletionResolver=new He,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,r){this._progressObserver={next:e,error:n,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oC=-1;let Ve=class extends Na{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=function(){return new iC}(),this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||xE(this),this._firestoreClient.terminate()}};function Ye(t){return t._firestoreClient||xE(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function xE(t){var e,n,r;const i=t._freezeSettings(),s=function(l,u,c,f){return new bA(l,u,c,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,yE(f.experimentalLongPollingOptions),f.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._firestoreClient=new KR(t._authCredentials,t._appCheckCredentials,t._queue,s),!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function aC(t,e){AE(t=ae(t,Ve));const n=Ye(t);if(n._uninitializedComponentsProvider)throw new B(L.FAILED_PRECONDITION,"SDK cache is already specified.");rn("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=t._freezeSettings(),i=new kp;return PE(n,i,new hE(i,r.cacheSizeBytes,e==null?void 0:e.forceOwnership))}function lC(t){AE(t=ae(t,Ve));const e=Ye(t);if(e._uninitializedComponentsProvider)throw new B(L.FAILED_PRECONDITION,"SDK cache is already specified.");rn("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=t._freezeSettings(),r=new kp;return PE(e,r,new $R(r,n.cacheSizeBytes))}function PE(t,e,n){const r=new He;return t.asyncQueue.enqueue(async()=>{try{await ql(t,n),await $d(t,e),r.resolve()}catch(i){const s=i;if(!dE(s))throw s;rn("Error enabling indexeddb cache. Falling back to memory cache: "+s),r.reject(s)}}).then(()=>r.promise)}function uC(t){if(t._initialized&&!t._terminated)throw new B(L.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new He;return t._queue.enqueueAndForgetEvenWhileRestricted(async()=>{try{await async function(r){if(!dn.D())return Promise.resolve();const i=r+"main";await dn.delete(i)}(fp(t._databaseId,t._persistenceKey)),e.resolve()}catch(n){e.reject(n)}}),e.promise}function cC(t){return function(n){const r=new He;return n.asyncQueue.enqueueAndForget(async()=>bR(await Vp(n),r)),r.promise}(Ye(t=ae(t,Ve)))}function hC(t){return QR(Ye(t=ae(t,Ve)))}function dC(t){return YR(Ye(t=ae(t,Ve)))}function fC(t,e){const n=Ye(t=ae(t,Ve)),r=new sC;return eC(n,t._databaseId,e,r),r}function pC(t,e){return tC(Ye(t=ae(t,Ve)),e).then(n=>n?new vt(t,null,n.query):null)}function AE(t){if(t._initialized||t._terminated)throw new B(L.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new mn($e.fromBase64String(e))}catch(n){throw new B(L.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new mn($e.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ir=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new B(L.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ee(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ii=class{constructor(e){this._methodName=e}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uc{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new B(L.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new B(L.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return X(this._lat,e._lat)||X(this._long,e._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mC=/^__.*__$/;class gC{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Fn(e,this.data,this.fieldMask,n,this.fieldTransforms):new Os(e,this.data,n,this.fieldTransforms)}}class RE{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Fn(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function CE(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw W()}}class cc{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.mu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get fu(){return this.settings.fu}gu(e){return new cc(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}pu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.gu({path:r,yu:!1});return i.wu(e),i}Su(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.gu({path:r,yu:!1});return i.mu(),i}bu(e){return this.gu({path:void 0,yu:!0})}Du(e){return Vu(e,this.settings.methodName,this.settings.Cu||!1,this.path,this.settings.vu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}mu(){if(this.path)for(let e=0;e<this.path.length;e++)this.wu(this.path.get(e))}wu(e){if(e.length===0)throw this.Du("Document fields must not be empty");if(CE(this.fu)&&mC.test(e))throw this.Du('Document fields cannot begin and end with "__"')}}class yC{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Da(e)}Fu(e,n,r,i=!1){return new cc({fu:e,methodName:n,vu:r,path:Ee.emptyPath(),yu:!1,Cu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Ti(t){const e=t._freezeSettings(),n=Da(t._databaseId);return new yC(t._databaseId,!!e.ignoreUndefinedProperties,n)}function hc(t,e,n,r,i,s={}){const o=t.Fu(s.merge||s.mergeFields?2:0,e,n,i);Up("Data must be an object, but it was:",o,r);const l=DE(r,o);let u,c;if(s.merge)u=new Pt(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const f=[];for(const m of s.mergeFields){const v=Gd(e,m,n);if(!o.contains(v))throw new B(L.INVALID_ARGUMENT,`Field '${v}' is specified in your field mask but missing from your input data.`);NE(f,v)||f.push(v)}u=new Pt(f),c=o.fieldTransforms.filter(m=>u.covers(m.field))}else u=null,c=o.fieldTransforms;return new gC(new et(l),u,c)}class Ma extends Ii{_toFieldTransform(e){if(e.fu!==2)throw e.fu===1?e.Du(`${this._methodName}() can only appear at the top level of your update data`):e.Du(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Ma}}function kE(t,e,n){return new cc({fu:3,vu:e.settings.vu,methodName:t._methodName,yu:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Lp extends Ii{_toFieldTransform(e){return new Ca(e.path,new Es)}isEqual(e){return e instanceof Lp}}class Op extends Ii{constructor(e,n){super(e),this.Mu=n}_toFieldTransform(e){const n=kE(this,e,!0),r=this.Mu.map(s=>Si(s,n)),i=new di(r);return new Ca(e.path,i)}isEqual(e){return e instanceof Op&&ia(this.Mu,e.Mu)}}class Fp extends Ii{constructor(e,n){super(e),this.Mu=n}_toFieldTransform(e){const n=kE(this,e,!0),r=this.Mu.map(s=>Si(s,n)),i=new fi(r);return new Ca(e.path,i)}isEqual(e){return e instanceof Fp&&ia(this.Mu,e.Mu)}}class Bp extends Ii{constructor(e,n){super(e),this.xu=n}_toFieldTransform(e){const n=new Is(e.serializer,o1(e.serializer,this.xu));return new Ca(e.path,n)}isEqual(e){return e instanceof Bp&&this.xu===e.xu}}function jp(t,e,n,r){const i=t.Fu(1,e,n);Up("Data must be an object, but it was:",i,r);const s=[],o=et.empty();Ei(r,(u,c)=>{const f=$p(e,u,n);c=je(c);const m=i.Su(f);if(c instanceof Ma)s.push(f);else{const v=Si(c,m);v!=null&&(s.push(f),o.set(f,v))}});const l=new Pt(s);return new RE(o,l,i.fieldTransforms)}function zp(t,e,n,r,i,s){const o=t.Fu(1,e,n),l=[Gd(e,r,n)],u=[i];if(s.length%2!=0)throw new B(L.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let v=0;v<s.length;v+=2)l.push(Gd(e,s[v])),u.push(s[v+1]);const c=[],f=et.empty();for(let v=l.length-1;v>=0;--v)if(!NE(c,l[v])){const A=l[v];let D=u[v];D=je(D);const V=o.Su(A);if(D instanceof Ma)c.push(A);else{const F=Si(D,V);F!=null&&(c.push(A),f.set(A,F))}}const m=new Pt(c);return new RE(f,m,o.fieldTransforms)}function bE(t,e,n,r=!1){return Si(n,t.Fu(r?4:3,e))}function Si(t,e){if(VE(t=je(t)))return Up("Unsupported field value:",e,t),DE(t,e);if(t instanceof Ii)return function(r,i){if(!CE(i.fu))throw i.Du(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Du(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.yu&&e.fu!==4)throw e.Du("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const l of r){let u=Si(l,i.bu(o));u==null&&(u={nullValue:"NULL_VALUE"}),s.push(u),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=je(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return o1(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=Te.fromDate(r);return{timestampValue:Ts(i.serializer,s)}}if(r instanceof Te){const s=new Te(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Ts(i.serializer,s)}}if(r instanceof uc)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof mn)return{bytesValue:_1(i.serializer,r._byteString)};if(r instanceof Re){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Du(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:ap(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.Du(`Unsupported field value: ${lc(r)}`)}(t,e)}function DE(t,e){const n={};return jw(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ei(t,(r,i)=>{const s=Si(i,e.pu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function VE(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Te||t instanceof uc||t instanceof mn||t instanceof Re||t instanceof Ii)}function Up(t,e,n){if(!VE(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=lc(n);throw r==="an object"?e.Du(t+" a custom object"):e.Du(t+" "+r)}}function Gd(t,e,n){if((e=je(e))instanceof Ir)return e._internalPath;if(typeof e=="string")return $p(t,e);throw Vu("Field path arguments must be of type string or ",t,!1,void 0,n)}const _C=new RegExp("[~\\*/\\[\\]]");function $p(t,e,n){if(e.search(_C)>=0)throw Vu(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Ir(...e.split("."))._internalPath}catch{throw Vu(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Vu(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new B(L.INVALID_ARGUMENT,l+t+u)}function NE(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ga{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Re(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new vC(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(dc("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class vC extends ga{data(){return super.data()}}function dc(t,e){return typeof e=="string"?$p(t,e):e instanceof Ir?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ME(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new B(L.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class qp{}class La extends qp{}function Wn(t,e,...n){let r=[];e instanceof qp&&r.push(e),r=r.concat(n),function(s){const o=s.filter(u=>u instanceof Gp).length,l=s.filter(u=>u instanceof fc).length;if(o>1||o>0&&l>0)throw new B(L.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class fc extends La{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new fc(e,n,r)}_apply(e){const n=this._parse(e);return OE(e._query,n),new vt(e.firestore,e.converter,kd(e._query,n))}_parse(e){const n=Ti(e.firestore);return function(s,o,l,u,c,f,m){let v;if(c.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new B(L.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){S_(m,f);const A=[];for(const D of m)A.push(T_(u,s,D));v={arrayValue:{values:A}}}else v=T_(u,s,m)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||S_(m,f),v=bE(l,o,m,f==="in"||f==="not-in");return re.create(c,f,v)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function wC(t,e,n){const r=e,i=dc("where",t);return fc._create(i,r,n)}class Gp extends qp{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Gp(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:ue.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i;const l=s.getFlattenedFilters();for(const u of l)OE(o,u),o=kd(o,u)}(e._query,n),new vt(e.firestore,e.converter,kd(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Wp extends La{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Wp(e,n)}_apply(e){const n=function(i,s,o){if(i.startAt!==null)throw new B(L.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new B(L.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new fa(s,o)}(e._query,this._field,this._direction);return new vt(e.firestore,e.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new On(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function EC(t,e="asc"){const n=e,r=dc("orderBy",t);return Wp._create(r,n)}class pc extends La{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new pc(e,n,r)}_apply(e){return new vt(e.firestore,e.converter,Su(e._query,this._limit,this._limitType))}}function IC(t){return vE("limit",t),pc._create("limit",t,"F")}function TC(t){return vE("limitToLast",t),pc._create("limitToLast",t,"L")}class mc extends La{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new mc(e,n,r)}_apply(e){const n=LE(e,this.type,this._docOrFields,this._inclusive);return new vt(e.firestore,e.converter,function(i,s){return new On(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,s,i.endAt)}(e._query,n))}}function SC(...t){return mc._create("startAt",t,!0)}function xC(...t){return mc._create("startAfter",t,!1)}class gc extends La{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new gc(e,n,r)}_apply(e){const n=LE(e,this.type,this._docOrFields,this._inclusive);return new vt(e.firestore,e.converter,function(i,s){return new On(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,s)}(e._query,n))}}function PC(...t){return gc._create("endBefore",t,!1)}function AC(...t){return gc._create("endAt",t,!0)}function LE(t,e,n,r){if(n[0]=je(n[0]),n[0]instanceof ga)return function(s,o,l,u,c){if(!u)throw new B(L.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${l}().`);const f=[];for(const m of os(s))if(m.field.isKeyField())f.push(ci(o,u.key));else{const v=u.data.field(m.field);if(Ju(v))throw new B(L.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+m.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(v===null){const A=m.field.canonicalString();throw new B(L.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${A}' (used as the orderBy) does not exist.`)}f.push(v)}return new wr(f,c)}(t._query,t.firestore._databaseId,e,n[0]._document,r);{const i=Ti(t.firestore);return function(o,l,u,c,f,m){const v=o.explicitOrderBy;if(f.length>v.length)throw new B(L.INVALID_ARGUMENT,`Too many arguments provided to ${c}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const A=[];for(let D=0;D<f.length;D++){const V=f[D];if(v[D].field.isKeyField()){if(typeof V!="string")throw new B(L.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${c}(), but got a ${typeof V}`);if(!ep(o)&&V.indexOf("/")!==-1)throw new B(L.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${c}() must be a plain document ID, but '${V}' contains a slash.`);const F=o.path.child(ne.fromString(V));if(!$.isDocumentKey(F))throw new B(L.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${c}() must result in a valid document path, but '${F}' is not because it contains an odd number of segments.`);const C=new $(F);A.push(ci(l,C))}else{const F=bE(u,c,V);A.push(F)}}return new wr(A,m)}(t._query,t.firestore._databaseId,i,e,n,r)}}function T_(t,e,n){if(typeof(n=je(n))=="string"){if(n==="")throw new B(L.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!ep(e)&&n.indexOf("/")!==-1)throw new B(L.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(ne.fromString(n));if(!$.isDocumentKey(r))throw new B(L.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return ci(t,new $(r))}if(n instanceof Re)return ci(t,n._key);throw new B(L.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${lc(n)}.`)}function S_(t,e){if(!Array.isArray(t)||t.length===0)throw new B(L.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function OE(t,e){const n=function(i,s){for(const o of i)for(const l of o.getFlattenedFilters())if(s.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new B(L.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new B(L.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class Kp{convertValue(e,n="none"){switch(ui(e)){case 0:return null;case 1:return e.booleanValue;case 2:return De(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(yr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw W()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Ei(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertGeoPoint(e){return new uc(De(e.latitude),De(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Jf(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(ca(e));default:return null}}convertTimestamp(e){const n=Nn(e);return new Te(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=ne.fromString(e);H(C1(r));const i=new _r(r.get(1),r.get(3)),s=new $(r.popFirst(5));return i.isEqual(n)||Le(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yc(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class RC extends Kp{constructor(e){super(),this.firestore=e}convertBytes(e){return new mn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Re(this.firestore,null,n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xr{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}let Mn=class extends ga{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new jo(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(dc("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}},jo=class extends Mn{data(e={}){return super.data(e)}},Tr=class{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Xr(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new jo(this._firestore,this._userDataWriter,r.key,r,new Xr(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new B(L.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(l=>{const u=new jo(i._firestore,i._userDataWriter,l.doc.key,l.doc,new Xr(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);return l.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(l=>s||l.type!==3).map(l=>{const u=new jo(i._firestore,i._userDataWriter,l.doc.key,l.doc,new Xr(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);let c=-1,f=-1;return l.type!==0&&(c=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),f=o.indexOf(l.doc.key)),{type:CC(l.type),doc:u,oldIndex:c,newIndex:f}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}};function CC(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return W()}}function FE(t,e){return t instanceof Mn&&e instanceof Mn?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(t._document===null?e._document===null:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof Tr&&e instanceof Tr&&t._firestore===e._firestore&&Mp(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kC(t){t=ae(t,Re);const e=ae(t.firestore,Ve);return mE(Ye(e),t._key).then(n=>Qp(e,t,n))}class xi extends Kp{constructor(e){super(),this.firestore=e}convertBytes(e){return new mn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Re(this.firestore,null,n)}}function bC(t){t=ae(t,Re);const e=ae(t.firestore,Ve),n=Ye(e),r=new xi(e);return XR(n,t._key).then(i=>new Mn(e,r,t._key,i,new Xr(i!==null&&i.hasLocalMutations,!0),t.converter))}function DC(t){t=ae(t,Re);const e=ae(t.firestore,Ve);return mE(Ye(e),t._key,{source:"server"}).then(n=>Qp(e,t,n))}function VC(t){t=ae(t,vt);const e=ae(t.firestore,Ve),n=Ye(e),r=new xi(e);return ME(t._query),gE(n,t._query).then(i=>new Tr(e,r,t,i))}function NC(t){t=ae(t,vt);const e=ae(t.firestore,Ve),n=Ye(e),r=new xi(e);return JR(n,t._query).then(i=>new Tr(e,r,t,i))}function MC(t){t=ae(t,vt);const e=ae(t.firestore,Ve),n=Ye(e),r=new xi(e);return gE(n,t._query,{source:"server"}).then(i=>new Tr(e,r,t,i))}function x_(t,e,n){t=ae(t,Re);const r=ae(t.firestore,Ve),i=yc(t.converter,e,n);return Oa(r,[hc(Ti(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Ie.none())])}function P_(t,e,n,...r){t=ae(t,Re);const i=ae(t.firestore,Ve),s=Ti(i);let o;return o=typeof(e=je(e))=="string"||e instanceof Ir?zp(s,"updateDoc",t._key,e,n,r):jp(s,"updateDoc",t._key,e),Oa(i,[o.toMutation(t._key,Ie.exists(!0))])}function LC(t){return Oa(ae(t.firestore,Ve),[new Fs(t._key,Ie.none())])}function OC(t,e){const n=ae(t.firestore,Ve),r=Du(t),i=yc(t.converter,e);return Oa(n,[hc(Ti(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,Ie.exists(!1))]).then(()=>r)}function Hp(t,...e){var n,r,i;t=je(t);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||qd(e[o])||(s=e[o],o++);const l={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(qd(e[o])){const m=e[o];e[o]=(n=m.next)===null||n===void 0?void 0:n.bind(m),e[o+1]=(r=m.error)===null||r===void 0?void 0:r.bind(m),e[o+2]=(i=m.complete)===null||i===void 0?void 0:i.bind(m)}let u,c,f;if(t instanceof Re)c=ae(t.firestore,Ve),f=Ls(t._key.path),u={next:m=>{e[o]&&e[o](Qp(c,t,m))},error:e[o+1],complete:e[o+2]};else{const m=ae(t,vt);c=ae(m.firestore,Ve),f=m._query;const v=new xi(c);u={next:A=>{e[o]&&e[o](new Tr(c,v,m,A))},error:e[o+1],complete:e[o+2]},ME(t._query)}return function(v,A,D,V){const F=new oc(V),C=new Sp(A,F,D);return v.asyncQueue.enqueueAndForget(async()=>Ep(await Cs(v),C)),()=>{F.$a(),v.asyncQueue.enqueueAndForget(async()=>Ip(await Cs(v),C))}}(Ye(c),f,l,u)}function FC(t,e){return ZR(Ye(t=ae(t,Ve)),qd(e)?e:{next:e})}function Oa(t,e){return function(r,i){const s=new He;return r.asyncQueue.enqueueAndForget(async()=>AR(await Vp(r),i,s)),s.promise}(Ye(t),e)}function Qp(t,e,n){const r=n.docs.get(e._key),i=new xi(t);return new Mn(t,i,e._key,r,new Xr(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BC={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let jC=class{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Ti(e)}set(e,n,r){this._verifyNotCommitted();const i=Jn(e,this._firestore),s=yc(i.converter,n,r),o=hc(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,r);return this._mutations.push(o.toMutation(i._key,Ie.none())),this}update(e,n,r,...i){this._verifyNotCommitted();const s=Jn(e,this._firestore);let o;return o=typeof(n=je(n))=="string"||n instanceof Ir?zp(this._dataReader,"WriteBatch.update",s._key,n,r,i):jp(this._dataReader,"WriteBatch.update",s._key,n),this._mutations.push(o.toMutation(s._key,Ie.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=Jn(e,this._firestore);return this._mutations=this._mutations.concat(new Fs(n._key,Ie.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new B(L.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function Jn(t,e){if((t=je(t)).firestore!==e)throw new B(L.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let zC=class extends class{constructor(n,r){this._firestore=n,this._transaction=r,this._dataReader=Ti(n)}get(n){const r=Jn(n,this._firestore),i=new RC(this._firestore);return this._transaction.lookup([r._key]).then(s=>{if(!s||s.length!==1)return W();const o=s[0];if(o.isFoundDocument())return new ga(this._firestore,i,o.key,o,r.converter);if(o.isNoDocument())return new ga(this._firestore,i,r._key,null,r.converter);throw W()})}set(n,r,i){const s=Jn(n,this._firestore),o=yc(s.converter,r,i),l=hc(this._dataReader,"Transaction.set",s._key,o,s.converter!==null,i);return this._transaction.set(s._key,l),this}update(n,r,i,...s){const o=Jn(n,this._firestore);let l;return l=typeof(r=je(r))=="string"||r instanceof Ir?zp(this._dataReader,"Transaction.update",o._key,r,i,s):jp(this._dataReader,"Transaction.update",o._key,r),this._transaction.update(o._key,l),this}delete(n){const r=Jn(n,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=Jn(e,this._firestore),r=new xi(this._firestore);return super.get(e).then(i=>new Mn(this._firestore,r,n._key,i._document,new Xr(!1,!1),n.converter))}};function UC(t,e,n){t=ae(t,Ve);const r=Object.assign(Object.assign({},BC),n);return function(s){if(s.maxAttempts<1)throw new B(L.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(s,o,l){const u=new He;return s.asyncQueue.enqueueAndForget(async()=>{const c=await HR(s);new WR(s.asyncQueue,c,l,o,u).Xa()}),u.promise}(Ye(t),i=>e(new zC(t,i)),r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $C(){return new Ma("deleteField")}function qC(){return new Lp("serverTimestamp")}function GC(...t){return new Op("arrayUnion",t)}function WC(...t){return new Fp("arrayRemove",t)}function KC(t){return new Bp("increment",t)}(function(e,n=!0){(function(i){Ms=i})(Wf),ys(new ai("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),l=new Ve(new eA(r.getProvider("auth-internal")),new iA(r.getProvider("app-check-internal")),function(c,f){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new B(L.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new _r(c.options.projectId,f)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),l._setSettings(s),l},"PUBLIC").setMultipleInstances(!0)),Cn(vy,"4.6.4",e),Cn(vy,"4.6.4","esm2017")})();/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Zi=function(){return Zi=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Zi.apply(this,arguments)},BE=function(t){return{loading:t==null,value:t}},HC=function(){return function(t,e){switch(e.type){case"error":return Zi(Zi({},t),{error:e.error,loading:!1,value:void 0});case"reset":return BE(e.defaultValue);case"value":return Zi(Zi({},t),{error:void 0,loading:!1,value:e.value});default:return t}}},QC=function(t){var e=void 0,n=ee.useReducer(HC(),BE(e)),r=n[0],i=n[1],s=ee.useCallback(function(){var u=void 0;i({type:"reset",defaultValue:u})},[t]),o=ee.useCallback(function(u){i({type:"error",error:u})},[]),l=ee.useCallback(function(u){i({type:"value",value:u})},[]);return ee.useMemo(function(){return{error:r.error,loading:r.loading,reset:s,setError:o,setValue:l,value:r.value}},[r.error,r.loading,s,o,l,r.value])},YC=function(t,e,n){var r=ee.useRef(t);return ee.useEffect(function(){e(t,r.current)||(r.current=t,n&&n())}),r},XC=function(t,e){var n=!t&&!e,r=!!t&&!!e&&Mp(t,e);return n||r},JC=function(t,e){return YC(t,XC,e)},ZC=function(t,e){var n=QC(),r=n.error,i=n.loading,s=n.reset,o=n.setError,l=n.setValue,u=n.value,c=JC(t,s);return ee.useEffect(function(){if(!c.current){l(void 0);return}var f=Hp(c.current,l,o);return function(){f()}},[c.current]),[u,i,r]},ek=function(t,e){var n=ZC(t),r=n[0],i=n[1],s=n[2],o=tk(r,void 0,void 0);return[o,i,s,r]},tk=function(t,e,n){return ee.useMemo(function(){var r;return(r=t==null?void 0:t.docs.map(function(i){return i.data(e)}))!==null&&r!==void 0?r:n},[t,e])};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nk{constructor(e,n){this._delegate=e,this.firebase=n,sa(e,new ai("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),Hf(this._delegate)))}_getService(e,n=pr){var r;this._delegate.checkDestroyed();const i=this._delegate.container.getProvider(e);return!i.isInitialized()&&((r=i.getComponent())===null||r===void 0?void 0:r.instantiationMode)==="EXPLICIT"&&i.initialize(),i.getImmediate({identifier:n})}_removeServiceInstance(e,n=pr){this._delegate.container.getProvider(e).clearInstance(n)}_addComponent(e){sa(this._delegate,e)}_addOrOverwriteComponent(e){hw(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rk={"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."},A_=new Yu("app-compat","Firebase",rk);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ik(t){const e={},n={__esModule:!0,initializeApp:s,app:i,registerVersion:Cn,setLogLevel:gw,onLog:mw,apps:null,SDK_VERSION:Wf,INTERNAL:{registerComponent:l,removeApp:r,useAsService:u,modularAPIs:QP}};n.default=n,Object.defineProperty(n,"apps",{get:o});function r(c){delete e[c]}function i(c){if(c=c||pr,!cy(e,c))throw A_.create("no-app",{appName:c});return e[c]}i.App=t;function s(c,f={}){const m=Kf(c,f);if(cy(e,m.name))return e[m.name];const v=new t(m,n);return e[m.name]=v,v}function o(){return Object.keys(e).map(c=>e[c])}function l(c){const f=c.name,m=f.replace("-compat","");if(ys(c)&&c.type==="PUBLIC"){const v=(A=i())=>{if(typeof A[m]!="function")throw A_.create("invalid-app-argument",{appName:f});return A[m]()};c.serviceProps!==void 0&&_u(v,c.serviceProps),n[m]=v,t.prototype[m]=function(...A){return this._getService.bind(this,f).apply(this,c.multipleInstances?A:[])}}return c.type==="PUBLIC"?n[m]:null}function u(c,f){return f==="serverAuth"?null:f}return n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jE(){const t=ik(nk);t.INTERNAL=Object.assign(Object.assign({},t.INTERNAL),{createFirebaseNamespace:jE,extendNamespace:e,createSubscribe:Mx,ErrorFactory:Yu,deepExtend:_u});function e(n){_u(t,n)}return t}const sk=jE();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R_=new qf("@firebase/app-compat"),ok="@firebase/app-compat",ak="0.2.37";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lk(t){Cn(ok,ak,t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */if(rw()&&self.firebase!==void 0){R_.warn(`
    Warning: Firebase is already defined in the global scope. Please make sure
    Firebase library is only loaded once.
  `);const t=self.firebase.SDK_VERSION;t&&t.indexOf("LITE")>=0&&R_.warn(`
    Warning: You are trying to load Firebase while using Firebase Performance standalone script.
    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.
    `)}const ks=sk;lk();var uk="firebase",ck="10.12.4";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ks.registerVersion(uk,ck,"app-compat");const hk="@firebase/firestore-compat",dk="0.3.33";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yp(t,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new B("invalid-argument",`Invalid options passed to function ${t}(): You cannot specify both "merge" and "mergeFields".`);return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C_(){if(typeof Uint8Array>"u")throw new B("unimplemented","Uint8Arrays are not available in this environment.")}function k_(){if(!CA())throw new B("unimplemented","Blobs are unavailable in Firestore in this environment.")}class ya{constructor(e){this._delegate=e}static fromBase64String(e){return k_(),new ya(mn.fromBase64String(e))}static fromUint8Array(e){return C_(),new ya(mn.fromUint8Array(e))}toBase64(){return k_(),this._delegate.toBase64()}toUint8Array(){return C_(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wd(t){return fk(t,["next","error","complete"])}function fk(t,e){if(typeof t!="object"||t===null)return!1;const n=t;for(const r of e)if(r in n&&typeof n[r]=="function")return!0;return!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pk{enableIndexedDbPersistence(e,n){return aC(e._delegate,{forceOwnership:n})}enableMultiTabIndexedDbPersistence(e){return lC(e._delegate)}clearIndexedDbPersistence(e){return uC(e._delegate)}}class zE{constructor(e,n,r){this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof _r||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const n=this._delegate._getSettings();!e.merge&&n.host!==e.host&&rn("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},n),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,n,r={}){nC(this._delegate,e,n,r)}enableNetwork(){return hC(this._delegate)}disableNetwork(){return dC(this._delegate)}enablePersistence(e){let n=!1,r=!1;return e&&(n=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,_E("synchronizeTabs",n,"experimentalForceOwningTab",r)),n?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return cC(this._delegate)}onSnapshotsInSync(e){return FC(this._delegate,e)}get app(){if(!this._appCompat)throw new B("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new bs(this,TE(this._delegate,e))}catch(n){throw mt(n,"collection()","Firestore.collection()")}}doc(e){try{return new qt(this,Du(this._delegate,e))}catch(n){throw mt(n,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new pt(this,rC(this._delegate,e))}catch(n){throw mt(n,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return UC(this._delegate,n=>e(new UE(this,n)))}batch(){return Ye(this._delegate),new $E(new jC(this._delegate,e=>Oa(this._delegate,e)))}loadBundle(e){return fC(this._delegate,e)}namedQuery(e){return pC(this._delegate,e).then(n=>n?new pt(this,n):null)}}class _c extends Kp{constructor(e){super(),this.firestore=e}convertBytes(e){return new ya(new mn(e))}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return qt.forKey(n,this.firestore,null)}}function mk(t){YP(t)}class UE{constructor(e,n){this._firestore=e,this._delegate=n,this._userDataWriter=new _c(e)}get(e){const n=Jr(e);return this._delegate.get(n).then(r=>new _a(this._firestore,new Mn(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,n.converter)))}set(e,n,r){const i=Jr(e);return r?(Yp("Transaction.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){const s=Jr(e);return arguments.length===2?this._delegate.update(s,n):this._delegate.update(s,n,r,...i),this}delete(e){const n=Jr(e);return this._delegate.delete(n),this}}class $E{constructor(e){this._delegate=e}set(e,n,r){const i=Jr(e);return r?(Yp("WriteBatch.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){const s=Jr(e);return arguments.length===2?this._delegate.update(s,n):this._delegate.update(s,n,r,...i),this}delete(e){const n=Jr(e);return this._delegate.delete(n),this}commit(){return this._delegate.commit()}}class yi{constructor(e,n,r){this._firestore=e,this._userDataWriter=n,this._delegate=r}fromFirestore(e,n){const r=new jo(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new va(this._firestore,r),n??{})}toFirestore(e,n){return n?this._delegate.toFirestore(e,n):this._delegate.toFirestore(e)}static getInstance(e,n){const r=yi.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let s=i.get(n);return s||(s=new yi(e,new _c(e),n),i.set(n,s)),s}}yi.INSTANCES=new WeakMap;class qt{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new _c(e)}static forPath(e,n,r){if(e.length%2!==0)throw new B("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new qt(n,new Re(n._delegate,r,new $(e)))}static forKey(e,n,r){return new qt(n,new Re(n._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new bs(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new bs(this.firestore,TE(this._delegate,e))}catch(n){throw mt(n,"collection()","DocumentReference.collection()")}}isEqual(e){return e=je(e),e instanceof Re?SE(this._delegate,e):!1}set(e,n){n=Yp("DocumentReference.set",n);try{return n?x_(this._delegate,e,n):x_(this._delegate,e)}catch(r){throw mt(r,"setDoc()","DocumentReference.set()")}}update(e,n,...r){try{return arguments.length===1?P_(this._delegate,e):P_(this._delegate,e,n,...r)}catch(i){throw mt(i,"updateDoc()","DocumentReference.update()")}}delete(){return LC(this._delegate)}onSnapshot(...e){const n=qE(e),r=GE(e,i=>new _a(this.firestore,new Mn(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return Hp(this._delegate,n,r)}get(e){let n;return(e==null?void 0:e.source)==="cache"?n=bC(this._delegate):(e==null?void 0:e.source)==="server"?n=DC(this._delegate):n=kC(this._delegate),n.then(r=>new _a(this.firestore,new Mn(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new qt(this.firestore,e?this._delegate.withConverter(yi.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function mt(t,e,n){return t.message=t.message.replace(e,n),t}function qE(t){for(const e of t)if(typeof e=="object"&&!Wd(e))return e;return{}}function GE(t,e){var n,r;let i;return Wd(t[0])?i=t[0]:Wd(t[1])?i=t[1]:typeof t[0]=="function"?i={next:t[0],error:t[1],complete:t[2]}:i={next:t[1],error:t[2],complete:t[3]},{next:s=>{i.next&&i.next(e(s))},error:(n=i.error)===null||n===void 0?void 0:n.bind(i),complete:(r=i.complete)===null||r===void 0?void 0:r.bind(i)}}class _a{constructor(e,n){this._firestore=e,this._delegate=n}get ref(){return new qt(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,n){return this._delegate.get(e,n)}isEqual(e){return FE(this._delegate,e._delegate)}}class va extends _a{data(e){const n=this._delegate.data(e);return this._delegate._converter||XP(n!==void 0),n}}class pt{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new _c(e)}where(e,n,r){try{return new pt(this.firestore,Wn(this._delegate,wC(e,n,r)))}catch(i){throw mt(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,n){try{return new pt(this.firestore,Wn(this._delegate,EC(e,n)))}catch(r){throw mt(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new pt(this.firestore,Wn(this._delegate,IC(e)))}catch(n){throw mt(n,"limit()","Query.limit()")}}limitToLast(e){try{return new pt(this.firestore,Wn(this._delegate,TC(e)))}catch(n){throw mt(n,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new pt(this.firestore,Wn(this._delegate,SC(...e)))}catch(n){throw mt(n,"startAt()","Query.startAt()")}}startAfter(...e){try{return new pt(this.firestore,Wn(this._delegate,xC(...e)))}catch(n){throw mt(n,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new pt(this.firestore,Wn(this._delegate,PC(...e)))}catch(n){throw mt(n,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new pt(this.firestore,Wn(this._delegate,AC(...e)))}catch(n){throw mt(n,"endAt()","Query.endAt()")}}isEqual(e){return Mp(this._delegate,e._delegate)}get(e){let n;return(e==null?void 0:e.source)==="cache"?n=NC(this._delegate):(e==null?void 0:e.source)==="server"?n=MC(this._delegate):n=VC(this._delegate),n.then(r=>new Kd(this.firestore,new Tr(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const n=qE(e),r=GE(e,i=>new Kd(this.firestore,new Tr(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return Hp(this._delegate,n,r)}withConverter(e){return new pt(this.firestore,e?this._delegate.withConverter(yi.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}class gk{constructor(e,n){this._firestore=e,this._delegate=n}get type(){return this._delegate.type}get doc(){return new va(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class Kd{constructor(e,n){this._firestore=e,this._delegate=n}get query(){return new pt(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new va(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(n=>new gk(this._firestore,n))}forEach(e,n){this._delegate.forEach(r=>{e.call(n,new va(this._firestore,r))})}isEqual(e){return FE(this._delegate,e._delegate)}}class bs extends pt{constructor(e,n){super(e,n),this.firestore=e,this._delegate=n}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new qt(this.firestore,e):null}doc(e){try{return e===void 0?new qt(this.firestore,Du(this._delegate)):new qt(this.firestore,Du(this._delegate,e))}catch(n){throw mt(n,"doc()","CollectionReference.doc()")}}add(e){return OC(this._delegate,e).then(n=>new qt(this.firestore,n))}isEqual(e){return SE(this._delegate,e._delegate)}withConverter(e){return new bs(this.firestore,e?this._delegate.withConverter(yi.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function Jr(t){return ae(t,Re)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xp{constructor(...e){this._delegate=new Ir(...e)}static documentId(){return new Xp(Ee.keyField().canonicalString())}isEqual(e){return e=je(e),e instanceof Ir?this._delegate._internalPath.isEqual(e._internalPath):!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kr{constructor(e){this._delegate=e}static serverTimestamp(){const e=qC();return e._methodName="FieldValue.serverTimestamp",new Kr(e)}static delete(){const e=$C();return e._methodName="FieldValue.delete",new Kr(e)}static arrayUnion(...e){const n=GC(...e);return n._methodName="FieldValue.arrayUnion",new Kr(n)}static arrayRemove(...e){const n=WC(...e);return n._methodName="FieldValue.arrayRemove",new Kr(n)}static increment(e){const n=KC(e);return n._methodName="FieldValue.increment",new Kr(n)}isEqual(e){return this._delegate.isEqual(e._delegate)}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yk={Firestore:zE,GeoPoint:uc,Timestamp:Te,Blob:ya,Transaction:UE,WriteBatch:$E,DocumentReference:qt,DocumentSnapshot:_a,Query:pt,QueryDocumentSnapshot:va,QuerySnapshot:Kd,CollectionReference:bs,FieldPath:Xp,FieldValue:Kr,setLogLevel:mk,CACHE_SIZE_UNLIMITED:oC};function _k(t,e){t.INTERNAL.registerComponent(new ai("firestore-compat",n=>{const r=n.getProvider("app-compat").getImmediate(),i=n.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},yk)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vk(t){_k(t,(e,n)=>new zE(e,n,new pk)),t.registerVersion(hk,dk)}vk(ks);ks.apps.length||ks.initializeApp({apiKey:"AIzaSyCKyv3D-nJsLkWYxh5ZuFIP8qoB8SkgFv8",authDomain:"undanganku-56e72.firebaseapp.com",projectId:"undanganku-56e72",storageBucket:"undanganku-56e72.appspot.com",messagingSenderId:"805250040859",appId:"1:805250040859:web:45a329e288f04ba65ee4be",measurementId:"G-8JNP42398Q"});const b_=ks.firestore(),wk=()=>{const[t,e]=ee.useState(""),[n,r]=ee.useState(""),[i,s,o]=ek(b_.collection("messages").orderBy("createdAt","desc")),[l,u]=ee.useState([]),[c]=ee.useState(0),[f,m]=ee.useState(null),[v,A]=ee.useState(!1),D=async V=>{if(V.preventDefault(),!(!t.trim()||!n.trim())){try{await b_.collection("messages").add({name:t,text:n,createdAt:ks.firestore.FieldValue.serverTimestamp()}),e(""),r(""),m("success"),A(!0),setTimeout(()=>{A(!1)},3e4)}catch(F){console.error("Error adding message: ",F),m("error")}setTimeout(()=>m(null),3e3)}};return ee.useEffect(()=>{i&&i.length>0&&u(i.slice(0,i.length))},[i,c]),k.jsxs("div",{className:"flex flex-col items-center justify-center p-8 border bg-gray-400 border-gray-300 shadow-lg h-full w-full relative fade-in-up",children:[f==="success"&&k.jsx("div",{className:"absolute top-4 right-4 bg-green-500 text-white px-4 py-2 rounded shadow-md",children:"Ucapan berhasil dikirim "}),f==="error"&&k.jsx("div",{className:"absolute top-4 right-4 bg-red-500 text-white px-4 py-2 rounded shadow-md",children:"Ucapan gagal dikirim "}),k.jsxs("div",{className:"flex flex-col items-center justify-center text-center",children:[k.jsx("h1",{className:"text-3xl font-bold mb-5 font-playfair",children:"Kirim Ucapan"}),k.jsx("div",{className:"w-20 h-[1px] bg-black mb-5"}),k.jsxs("form",{onSubmit:D,className:"mb-8",children:[k.jsx("input",{type:"text",value:t,onChange:V=>e(V.target.value),placeholder:"Nama kamu ...",className:"w-full px-4 py-2 mb-4 rounded border border-gray-300 focus:outline-none focus:border-gray-400",maxLength:20,disabled:v}),k.jsx("textarea",{value:n,onChange:V=>r(V.target.value),placeholder:"Tulis pesan kamu...",className:"w-full px-4 py-2 mb-4 rounded border border-gray-300 focus:outline-none focus:border-gray-400",rows:"4",maxLength:100,disabled:v}),k.jsx("button",{type:"submit",className:"w-full px-4 py-2 bg-gray-500 text-white rounded hover:bg-gray-600 focus:outline-none",disabled:v,children:"Kirim"})]}),s&&k.jsx("p",{children:"Loading..."}),o&&k.jsxs("p",{children:["Error: ",o.message]}),k.jsx("h1",{className:"text-3xl font-bold mb-5 font-playfair",children:"Kumpulan Ucapan"}),k.jsx("div",{className:"w-20 h-[1px] bg-black mb-5"}),k.jsx("div",{className:"max-h-72 overflow-y-auto w-full",children:l.map((V,F)=>k.jsxs("div",{className:"p-2 m-2 border bg-white border-gray-300 rounded-xl grid grid-cols-[auto_1fr] items-start",children:[k.jsx("div",{className:"flex items-start",children:k.jsx(_x,{className:"text-gray-500 m-1 w-5"})}),k.jsxs("div",{className:"text-left",children:[k.jsx("p",{className:"font-bold",children:V.name}),k.jsx("p",{className:"max-w-xl",children:V.text})]})]},F))})]})]})},WE=ee.forwardRef((t,e)=>k.jsxs("div",{ref:e,className:"flex flex-col items-center justify-center p-8 border bg-[#F4ECE8] border-gray-300 shadow-lg h-full w-full",children:[k.jsx("h1",{className:"text-3xl font-bold mb-2 font-playfair",children:"Our Journey"}),k.jsx("div",{className:"w-20 h-[1px] bg-gray-400 mb-2"}),k.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-lg max-w-2xl mx-auto mt-8 text-xs text-justify max-h-[550px] overflow-y-auto w-full",children:[k.jsx("p",{className:"mb-4",children:"Suatu siang, di balik tumpukan tugas kelompok matematika. Dipaksa bertukar suara. Soal demi soal merangkai pertemanan. Hingga terbiasa menjadi teman belajar. Namun tanpa Suara. Hanya ada buku, kertas dan sedikit usaha untuk menyerahkan buku ke arah meja salah satu siswa yang sejajar dengannya. Hanya berjarak dua meja di kelas itu."}),k.jsx("p",{className:"mb-4",children:"Gadis itu melipat pojok kanan halaman menyerupai segitiga. Menandai bahwa halaman ini yang perlu diperhatikan. Menyelipkan secarik kertas. Berisikan Aku tidak mengerti soal no. 15 dan 27. Bantu jelasin ya Menutup buku itu. Dan kemudian menyerahkan ke teman di sebelahnya dengan ucapaan Kasih ke Thariq."}),k.jsx("p",{className:"mb-4",children:"Begitulah pertemanan mereka hingga tamat SMA."}),k.jsx("h2",{className:"text-lg font-semibold mb-2",children:"Tahun 2016"}),k.jsx("p",{className:"mb-4",children:"Thariq meneruskan perkuliahan di ITB sedangkan Sherly dihampiri dengan kegalauan. Kemudian Lusi, Sahabat Sherly, meminta Thariq untuk menemui Sherly di Rumah Lusi."}),k.jsx("p",{className:"mb-4",children:"Sahabat Sherly, membanjiri laki-laki itu dengan pertanyaan yang belum pernah ia dapatkan. Dan juga Lusi memberikan support agar Sherly kembali meraih mimpinya di UNPAD."}),k.jsx("p",{className:"mb-4",children:"Sherly dilanda dilema berikutnya setelah dinyatakan lolos di FIKOM UNPAD. Ada pilihan UNPAD, atau STMIK Indonesia Padang dengan beasiswa."}),k.jsx("p",{className:"mb-4",children:"Gundah tersebut disampaikan pada pembina asramanya, Pak Yamin, yang biasa dipanggil Ayah. Kalau di UNPAD, kalian akan sama-sama di Bandung, kemungkinan untuk bertemu lebih besar. Kalau UNPAD lebih baik menikah dengan biaya dari orang tua masing-masing. Suara ayah lembut."}),k.jsx("p",{className:"mb-4",children:"Gemuruh hadir di dada Sherly ketika ia mendengar kalimat menikah. Rasanya ingin menyampaikan Yah, kami hanya teman"}),k.jsx("p",{className:"mb-4",children:"Sepertinya ayah membaca kerutan di wajah gadis itu. Kemudian ayah melanjutkan ucapannya. Ketika hendak Sidang Asrama kelas 12. Kan teman-teman menuliskan nama yang dianggap melanggar aturan asrama. Ayah menemukan satu pengaduan untuk nama Sherly dan Thariq"}),k.jsx("p",{className:"mb-4",children:"Akhirnya Sherly memutuskan berkuliah di STMIK Indonesia Padang. Di tahun-tahun berikutnya cerita mereka samar. Nyaris hilang."}),k.jsx("h2",{className:"text-lg font-semibold mb-2",children:"Tahun 2020"}),k.jsx("p",{className:"mb-4",children:"Hanya ada cerita di beberapa bulan tahun 2020. Ketika Sherly meminta Thariq menjadi teman diskusi untuk Menyelesaikan Skripsinya."}),k.jsx("h2",{className:"text-lg font-semibold mb-2",children:"Pertengahan Tahun 2022"}),k.jsx("p",{className:"mb-4",children:"Ly, mau jadi english speaking partner aku ngga?. Pesan singkat itu dikirim Thariq tanpa basa basi."}),k.jsx("p",{className:"mb-4",children:"Mereka kembali menjadi teman belajar. Tahun 2023, Thariq meminta upgrade pertemanan. Dari sekedar teman belajar menjadi teman belajar seumur hidup."}),k.jsx("p",{className:"mb-4",children:"Maaf, aku belum tuntas dengan mimpiku untuk berkarir di bidang IT, balas Sherly singkat."}),k.jsx("p",{className:"mb-4",children:"Tahun itu juga, Thariq mulai merancang kurikulum belajar untuk Sherly. Memaksa belajar hingga larut malam."}),k.jsx("p",{className:"mb-4",children:"Sebelum tahun berakhir, mimpi itu menghampiri Sherly."}),k.jsx("p",{className:"mb-4",children:"Dan kemudian Thariq menyampaikan. Aku ingin saling merawat agar terus bertumbuh seperti mawar merah yang tumbuh di dalam buku"})]})]}));WE.displayName="OurJourney";function Ek(){const[t,e]=ee.useState(!1),n=()=>{e(!t)};return k.jsxs("div",{className:"grid place-items-center h-screen",children:[!t&&k.jsx("div",{children:k.jsxs(ex,{width:331,height:729,maxShadowOpacity:.3,children:[k.jsx(qv,{}),k.jsx(Gv,{}),k.jsx(Qv,{}),k.jsx(Yv,{}),k.jsx(Xv,{}),k.jsx(WE,{}),k.jsx(Jv,{})]})}),k.jsxs("div",{className:"flex flex-col items-center",children:[k.jsx("button",{className:"btn btn-wide bg-gray-200 mb-10 transition-transform transform hover:scale-105 hover:bg-gray-300",onClick:n,children:t?"Lihat Undangan":"Kirim Ucapan"}),t&&k.jsx("div",{children:k.jsx(wk,{})})]})]})}const Ik=()=>{const[t,e]=ee.useState(!1);ee.useEffect(()=>{const r=setInterval(()=>{e(i=>!i)},1e3);return()=>clearInterval(r)},[]);const n={animation:t?"beat 1s infinite":"none"};return k.jsx("footer",{className:"footer p-2 bg-base-300 text-base-content flex justify-center rounded-t-3xl",children:k.jsxs("aside",{className:"flex flex-row items-center space-x-2",children:[k.jsx("p",{children:"Pernikahan Thariq"}),k.jsx(ux,{style:n}),k.jsx("p",{children:"Sherly"})]})})},Tk="/undang-aku/assets/Together_We_Fly-BURI9Chp.mp3",Sk=()=>{const[t,e]=ee.useState(!1),n=ee.useRef(null),r=()=>{e(!t),n.current&&(n.current.muted=!t)};return k.jsxs("div",{className:"fixed top-4 right-4 z-50 flex items-center",children:[k.jsx("audio",{ref:n,src:Tk,autoPlay:!0,loop:!0}),k.jsx("button",{onClick:r,className:"bg-gray-700 text-white rounded-full p-2 flex items-center justify-center shadow-md",children:t?k.jsx(cx,{size:24}):k.jsx(hx,{size:24})})]})};function xk(){return k.jsxs("div",{className:"App",children:[k.jsx(Ek,{}),k.jsx(Ik,{}),k.jsx(Sk,{})]})}Sh.createRoot(document.getElementById("root")).render(k.jsx(Nt.StrictMode,{children:k.jsx(xk,{})}));
