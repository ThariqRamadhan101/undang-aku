function KI(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var HI=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function QI(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var e_={exports:{}},yc={},t_={exports:{}},pe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nl=Symbol.for("react.element"),YI=Symbol.for("react.portal"),XI=Symbol.for("react.fragment"),JI=Symbol.for("react.strict_mode"),ZI=Symbol.for("react.profiler"),eT=Symbol.for("react.provider"),tT=Symbol.for("react.context"),nT=Symbol.for("react.forward_ref"),rT=Symbol.for("react.suspense"),iT=Symbol.for("react.memo"),sT=Symbol.for("react.lazy"),fg=Symbol.iterator;function oT(t){return t===null||typeof t!="object"?null:(t=fg&&t[fg]||t["@@iterator"],typeof t=="function"?t:null)}var n_={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},r_=Object.assign,i_={};function po(t,e,n){this.props=t,this.context=e,this.refs=i_,this.updater=n||n_}po.prototype.isReactComponent={};po.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};po.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function s_(){}s_.prototype=po.prototype;function Tf(t,e,n){this.props=t,this.context=e,this.refs=i_,this.updater=n||n_}var xf=Tf.prototype=new s_;xf.constructor=Tf;r_(xf,po.prototype);xf.isPureReactComponent=!0;var pg=Array.isArray,o_=Object.prototype.hasOwnProperty,Sf={current:null},a_={key:!0,ref:!0,__self:!0,__source:!0};function l_(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)o_.call(e,r)&&!a_.hasOwnProperty(r)&&(i[r]=e[r]);var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){for(var u=Array(l),c=0;c<l;c++)u[c]=arguments[c+2];i.children=u}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)i[r]===void 0&&(i[r]=l[r]);return{$$typeof:nl,type:t,key:s,ref:o,props:i,_owner:Sf.current}}function aT(t,e){return{$$typeof:nl,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Pf(t){return typeof t=="object"&&t!==null&&t.$$typeof===nl}function lT(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var mg=/\/+/g;function ph(t,e){return typeof t=="object"&&t!==null&&t.key!=null?lT(""+t.key):e.toString(36)}function ou(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case nl:case YI:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+ph(o,0):r,pg(i)?(n="",t!=null&&(n=t.replace(mg,"$&/")+"/"),ou(i,e,n,"",function(c){return c})):i!=null&&(Pf(i)&&(i=aT(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(mg,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",pg(t))for(var l=0;l<t.length;l++){s=t[l];var u=r+ph(s,l);o+=ou(s,e,n,u,i)}else if(u=oT(t),typeof u=="function")for(t=u.call(t),l=0;!(s=t.next()).done;)s=s.value,u=r+ph(s,l++),o+=ou(s,e,n,u,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Ml(t,e,n){if(t==null)return t;var r=[],i=0;return ou(t,r,"","",function(s){return e.call(n,s,i++)}),r}function uT(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var qt={current:null},au={transition:null},cT={ReactCurrentDispatcher:qt,ReactCurrentBatchConfig:au,ReactCurrentOwner:Sf};function u_(){throw Error("act(...) is not supported in production builds of React.")}pe.Children={map:Ml,forEach:function(t,e,n){Ml(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Ml(t,function(){e++}),e},toArray:function(t){return Ml(t,function(e){return e})||[]},only:function(t){if(!Pf(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};pe.Component=po;pe.Fragment=XI;pe.Profiler=ZI;pe.PureComponent=Tf;pe.StrictMode=JI;pe.Suspense=rT;pe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=cT;pe.act=u_;pe.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=r_({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=Sf.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(u in e)o_.call(e,u)&&!a_.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&l!==void 0?l[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){l=Array(u);for(var c=0;c<u;c++)l[c]=arguments[c+2];r.children=l}return{$$typeof:nl,type:t.type,key:i,ref:s,props:r,_owner:o}};pe.createContext=function(t){return t={$$typeof:tT,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:eT,_context:t},t.Consumer=t};pe.createElement=l_;pe.createFactory=function(t){var e=l_.bind(null,t);return e.type=t,e};pe.createRef=function(){return{current:null}};pe.forwardRef=function(t){return{$$typeof:nT,render:t}};pe.isValidElement=Pf;pe.lazy=function(t){return{$$typeof:sT,_payload:{_status:-1,_result:t},_init:uT}};pe.memo=function(t,e){return{$$typeof:iT,type:t,compare:e===void 0?null:e}};pe.startTransition=function(t){var e=au.transition;au.transition={};try{t()}finally{au.transition=e}};pe.unstable_act=u_;pe.useCallback=function(t,e){return qt.current.useCallback(t,e)};pe.useContext=function(t){return qt.current.useContext(t)};pe.useDebugValue=function(){};pe.useDeferredValue=function(t){return qt.current.useDeferredValue(t)};pe.useEffect=function(t,e){return qt.current.useEffect(t,e)};pe.useId=function(){return qt.current.useId()};pe.useImperativeHandle=function(t,e,n){return qt.current.useImperativeHandle(t,e,n)};pe.useInsertionEffect=function(t,e){return qt.current.useInsertionEffect(t,e)};pe.useLayoutEffect=function(t,e){return qt.current.useLayoutEffect(t,e)};pe.useMemo=function(t,e){return qt.current.useMemo(t,e)};pe.useReducer=function(t,e,n){return qt.current.useReducer(t,e,n)};pe.useRef=function(t){return qt.current.useRef(t)};pe.useState=function(t){return qt.current.useState(t)};pe.useSyncExternalStore=function(t,e,n){return qt.current.useSyncExternalStore(t,e,n)};pe.useTransition=function(){return qt.current.useTransition()};pe.version="18.3.1";t_.exports=pe;var ee=t_.exports;const Qt=QI(ee),hT=KI({__proto__:null,default:Qt},[ee]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dT=ee,fT=Symbol.for("react.element"),pT=Symbol.for("react.fragment"),mT=Object.prototype.hasOwnProperty,gT=dT.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,yT={key:!0,ref:!0,__self:!0,__source:!0};function c_(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)mT.call(e,r)&&!yT.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:fT,type:t,key:s,ref:o,props:i,_owner:gT.current}}yc.Fragment=pT;yc.jsx=c_;yc.jsxs=c_;e_.exports=yc;var T=e_.exports,Yh={},h_={exports:{}},cn={},d_={exports:{}},f_={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(H,ne){var te=H.length;H.push(ne);e:for(;0<te;){var fe=te-1>>>1,de=H[fe];if(0<i(de,ne))H[fe]=ne,H[te]=de,te=fe;else break e}}function n(H){return H.length===0?null:H[0]}function r(H){if(H.length===0)return null;var ne=H[0],te=H.pop();if(te!==ne){H[0]=te;e:for(var fe=0,de=H.length,ce=de>>>1;fe<ce;){var xe=2*(fe+1)-1,$e=H[xe],Ot=xe+1,Wt=H[Ot];if(0>i($e,te))Ot<de&&0>i(Wt,$e)?(H[fe]=Wt,H[Ot]=te,fe=Ot):(H[fe]=$e,H[xe]=te,fe=xe);else if(Ot<de&&0>i(Wt,te))H[fe]=Wt,H[Ot]=te,fe=Ot;else break e}}return ne}function i(H,ne){var te=H.sortIndex-ne.sortIndex;return te!==0?te:H.id-ne.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var u=[],c=[],f=1,m=null,v=3,R=!1,V=!1,N=!1,L=typeof setTimeout=="function"?setTimeout:null,C=typeof clearTimeout=="function"?clearTimeout:null,P=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(H){for(var ne=n(c);ne!==null;){if(ne.callback===null)r(c);else if(ne.startTime<=H)r(c),ne.sortIndex=ne.expirationTime,e(u,ne);else break;ne=n(c)}}function d(H){if(N=!1,x(H),!V)if(n(u)!==null)V=!0,ut(g);else{var ne=n(c);ne!==null&&He(d,ne.startTime-H)}}function g(H,ne){V=!1,N&&(N=!1,C(y),y=-1),R=!0;var te=v;try{for(x(ne),m=n(u);m!==null&&(!(m.expirationTime>ne)||H&&!A());){var fe=m.callback;if(typeof fe=="function"){m.callback=null,v=m.priorityLevel;var de=fe(m.expirationTime<=ne);ne=t.unstable_now(),typeof de=="function"?m.callback=de:m===n(u)&&r(u),x(ne)}else r(u);m=n(u)}if(m!==null)var ce=!0;else{var xe=n(c);xe!==null&&He(d,xe.startTime-ne),ce=!1}return ce}finally{m=null,v=te,R=!1}}var I=!1,_=null,y=-1,w=5,S=-1;function A(){return!(t.unstable_now()-S<w)}function k(){if(_!==null){var H=t.unstable_now();S=H;var ne=!0;try{ne=_(!0,H)}finally{ne?b():(I=!1,_=null)}}else I=!1}var b;if(typeof P=="function")b=function(){P(k)};else if(typeof MessageChannel<"u"){var he=new MessageChannel,Ve=he.port2;he.port1.onmessage=k,b=function(){Ve.postMessage(null)}}else b=function(){L(k,0)};function ut(H){_=H,I||(I=!0,b())}function He(H,ne){y=L(function(){H(t.unstable_now())},ne)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(H){H.callback=null},t.unstable_continueExecution=function(){V||R||(V=!0,ut(g))},t.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):w=0<H?Math.floor(1e3/H):5},t.unstable_getCurrentPriorityLevel=function(){return v},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(H){switch(v){case 1:case 2:case 3:var ne=3;break;default:ne=v}var te=v;v=ne;try{return H()}finally{v=te}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(H,ne){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var te=v;v=H;try{return ne()}finally{v=te}},t.unstable_scheduleCallback=function(H,ne,te){var fe=t.unstable_now();switch(typeof te=="object"&&te!==null?(te=te.delay,te=typeof te=="number"&&0<te?fe+te:fe):te=fe,H){case 1:var de=-1;break;case 2:de=250;break;case 5:de=1073741823;break;case 4:de=1e4;break;default:de=5e3}return de=te+de,H={id:f++,callback:ne,priorityLevel:H,startTime:te,expirationTime:de,sortIndex:-1},te>fe?(H.sortIndex=te,e(c,H),n(u)===null&&H===n(c)&&(N?(C(y),y=-1):N=!0,He(d,te-fe))):(H.sortIndex=de,e(u,H),V||R||(V=!0,ut(g))),H},t.unstable_shouldYield=A,t.unstable_wrapCallback=function(H){var ne=v;return function(){var te=v;v=ne;try{return H.apply(this,arguments)}finally{v=te}}}})(f_);d_.exports=f_;var _T=d_.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vT=ee,ln=_T;function K(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var p_=new Set,Ta={};function Wi(t,e){$s(t,e),$s(t+"Capture",e)}function $s(t,e){for(Ta[t]=e,t=0;t<e.length;t++)p_.add(e[t])}var nr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Xh=Object.prototype.hasOwnProperty,wT=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,gg={},yg={};function ET(t){return Xh.call(yg,t)?!0:Xh.call(gg,t)?!1:wT.test(t)?yg[t]=!0:(gg[t]=!0,!1)}function IT(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function TT(t,e,n,r){if(e===null||typeof e>"u"||IT(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Gt(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var bt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){bt[t]=new Gt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];bt[e]=new Gt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){bt[t]=new Gt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){bt[t]=new Gt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){bt[t]=new Gt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){bt[t]=new Gt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){bt[t]=new Gt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){bt[t]=new Gt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){bt[t]=new Gt(t,5,!1,t.toLowerCase(),null,!1,!1)});var bf=/[\-:]([a-z])/g;function Af(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(bf,Af);bt[e]=new Gt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(bf,Af);bt[e]=new Gt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(bf,Af);bt[e]=new Gt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){bt[t]=new Gt(t,1,!1,t.toLowerCase(),null,!1,!1)});bt.xlinkHref=new Gt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){bt[t]=new Gt(t,1,!1,t.toLowerCase(),null,!0,!0)});function Rf(t,e,n,r){var i=bt.hasOwnProperty(e)?bt[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(TT(e,n,i,r)&&(n=null),r||i===null?ET(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var lr=vT.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,jl=Symbol.for("react.element"),Is=Symbol.for("react.portal"),Ts=Symbol.for("react.fragment"),Cf=Symbol.for("react.strict_mode"),Jh=Symbol.for("react.profiler"),m_=Symbol.for("react.provider"),g_=Symbol.for("react.context"),kf=Symbol.for("react.forward_ref"),Zh=Symbol.for("react.suspense"),ed=Symbol.for("react.suspense_list"),Df=Symbol.for("react.memo"),Er=Symbol.for("react.lazy"),y_=Symbol.for("react.offscreen"),_g=Symbol.iterator;function zo(t){return t===null||typeof t!="object"?null:(t=_g&&t[_g]||t["@@iterator"],typeof t=="function"?t:null)}var Ke=Object.assign,mh;function ea(t){if(mh===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);mh=e&&e[1]||""}return`
`+mh+t}var gh=!1;function yh(t,e){if(!t||gh)return"";gh=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,l=s.length-1;1<=o&&0<=l&&i[o]!==s[l];)l--;for(;1<=o&&0<=l;o--,l--)if(i[o]!==s[l]){if(o!==1||l!==1)do if(o--,l--,0>l||i[o]!==s[l]){var u=`
`+i[o].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=o&&0<=l);break}}}finally{gh=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?ea(t):""}function xT(t){switch(t.tag){case 5:return ea(t.type);case 16:return ea("Lazy");case 13:return ea("Suspense");case 19:return ea("SuspenseList");case 0:case 2:case 15:return t=yh(t.type,!1),t;case 11:return t=yh(t.type.render,!1),t;case 1:return t=yh(t.type,!0),t;default:return""}}function td(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Ts:return"Fragment";case Is:return"Portal";case Jh:return"Profiler";case Cf:return"StrictMode";case Zh:return"Suspense";case ed:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case g_:return(t.displayName||"Context")+".Consumer";case m_:return(t._context.displayName||"Context")+".Provider";case kf:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Df:return e=t.displayName||null,e!==null?e:td(t.type)||"Memo";case Er:e=t._payload,t=t._init;try{return td(t(e))}catch{}}return null}function ST(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return td(e);case 8:return e===Cf?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Br(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function __(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function PT(t){var e=__(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Fl(t){t._valueTracker||(t._valueTracker=PT(t))}function v_(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=__(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function bu(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function nd(t,e){var n=e.checked;return Ke({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function vg(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Br(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function w_(t,e){e=e.checked,e!=null&&Rf(t,"checked",e,!1)}function rd(t,e){w_(t,e);var n=Br(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?id(t,e.type,n):e.hasOwnProperty("defaultValue")&&id(t,e.type,Br(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function wg(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function id(t,e,n){(e!=="number"||bu(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var ta=Array.isArray;function Os(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Br(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function sd(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(K(91));return Ke({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Eg(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(K(92));if(ta(n)){if(1<n.length)throw Error(K(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Br(n)}}function E_(t,e){var n=Br(e.value),r=Br(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Ig(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function I_(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function od(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?I_(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Bl,T_=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Bl=Bl||document.createElement("div"),Bl.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Bl.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function xa(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var la={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},bT=["Webkit","ms","Moz","O"];Object.keys(la).forEach(function(t){bT.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),la[e]=la[t]})});function x_(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||la.hasOwnProperty(t)&&la[t]?(""+e).trim():e+"px"}function S_(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=x_(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var AT=Ke({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ad(t,e){if(e){if(AT[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(K(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(K(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(K(61))}if(e.style!=null&&typeof e.style!="object")throw Error(K(62))}}function ld(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ud=null;function Nf(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var cd=null,Ls=null,Ms=null;function Tg(t){if(t=sl(t)){if(typeof cd!="function")throw Error(K(280));var e=t.stateNode;e&&(e=Ic(e),cd(t.stateNode,t.type,e))}}function P_(t){Ls?Ms?Ms.push(t):Ms=[t]:Ls=t}function b_(){if(Ls){var t=Ls,e=Ms;if(Ms=Ls=null,Tg(t),e)for(t=0;t<e.length;t++)Tg(e[t])}}function A_(t,e){return t(e)}function R_(){}var _h=!1;function C_(t,e,n){if(_h)return t(e,n);_h=!0;try{return A_(t,e,n)}finally{_h=!1,(Ls!==null||Ms!==null)&&(R_(),b_())}}function Sa(t,e){var n=t.stateNode;if(n===null)return null;var r=Ic(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(K(231,e,typeof n));return n}var hd=!1;if(nr)try{var Uo={};Object.defineProperty(Uo,"passive",{get:function(){hd=!0}}),window.addEventListener("test",Uo,Uo),window.removeEventListener("test",Uo,Uo)}catch{hd=!1}function RT(t,e,n,r,i,s,o,l,u){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(f){this.onError(f)}}var ua=!1,Au=null,Ru=!1,dd=null,CT={onError:function(t){ua=!0,Au=t}};function kT(t,e,n,r,i,s,o,l,u){ua=!1,Au=null,RT.apply(CT,arguments)}function DT(t,e,n,r,i,s,o,l,u){if(kT.apply(this,arguments),ua){if(ua){var c=Au;ua=!1,Au=null}else throw Error(K(198));Ru||(Ru=!0,dd=c)}}function Ki(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function k_(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function xg(t){if(Ki(t)!==t)throw Error(K(188))}function NT(t){var e=t.alternate;if(!e){if(e=Ki(t),e===null)throw Error(K(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return xg(i),t;if(s===r)return xg(i),e;s=s.sibling}throw Error(K(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o){for(l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o)throw Error(K(189))}}if(n.alternate!==r)throw Error(K(190))}if(n.tag!==3)throw Error(K(188));return n.stateNode.current===n?t:e}function D_(t){return t=NT(t),t!==null?N_(t):null}function N_(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=N_(t);if(e!==null)return e;t=t.sibling}return null}var V_=ln.unstable_scheduleCallback,Sg=ln.unstable_cancelCallback,VT=ln.unstable_shouldYield,OT=ln.unstable_requestPaint,Ze=ln.unstable_now,LT=ln.unstable_getCurrentPriorityLevel,Vf=ln.unstable_ImmediatePriority,O_=ln.unstable_UserBlockingPriority,Cu=ln.unstable_NormalPriority,MT=ln.unstable_LowPriority,L_=ln.unstable_IdlePriority,_c=null,Mn=null;function jT(t){if(Mn&&typeof Mn.onCommitFiberRoot=="function")try{Mn.onCommitFiberRoot(_c,t,void 0,(t.current.flags&128)===128)}catch{}}var bn=Math.clz32?Math.clz32:zT,FT=Math.log,BT=Math.LN2;function zT(t){return t>>>=0,t===0?32:31-(FT(t)/BT|0)|0}var zl=64,Ul=4194304;function na(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function ku(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var l=o&~i;l!==0?r=na(l):(s&=o,s!==0&&(r=na(s)))}else o=n&~i,o!==0?r=na(o):s!==0&&(r=na(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-bn(e),i=1<<n,r|=t[n],e&=~i;return r}function UT(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function $T(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-bn(s),l=1<<o,u=i[o];u===-1?(!(l&n)||l&r)&&(i[o]=UT(l,e)):u<=e&&(t.expiredLanes|=l),s&=~l}}function fd(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function M_(){var t=zl;return zl<<=1,!(zl&4194240)&&(zl=64),t}function vh(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function rl(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-bn(e),t[e]=n}function qT(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-bn(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function Of(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-bn(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var be=0;function j_(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var F_,Lf,B_,z_,U_,pd=!1,$l=[],Cr=null,kr=null,Dr=null,Pa=new Map,ba=new Map,Tr=[],GT="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Pg(t,e){switch(t){case"focusin":case"focusout":Cr=null;break;case"dragenter":case"dragleave":kr=null;break;case"mouseover":case"mouseout":Dr=null;break;case"pointerover":case"pointerout":Pa.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":ba.delete(e.pointerId)}}function $o(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=sl(e),e!==null&&Lf(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function WT(t,e,n,r,i){switch(e){case"focusin":return Cr=$o(Cr,t,e,n,r,i),!0;case"dragenter":return kr=$o(kr,t,e,n,r,i),!0;case"mouseover":return Dr=$o(Dr,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return Pa.set(s,$o(Pa.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,ba.set(s,$o(ba.get(s)||null,t,e,n,r,i)),!0}return!1}function $_(t){var e=Ei(t.target);if(e!==null){var n=Ki(e);if(n!==null){if(e=n.tag,e===13){if(e=k_(n),e!==null){t.blockedOn=e,U_(t.priority,function(){B_(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function lu(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=md(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);ud=r,n.target.dispatchEvent(r),ud=null}else return e=sl(n),e!==null&&Lf(e),t.blockedOn=n,!1;e.shift()}return!0}function bg(t,e,n){lu(t)&&n.delete(e)}function KT(){pd=!1,Cr!==null&&lu(Cr)&&(Cr=null),kr!==null&&lu(kr)&&(kr=null),Dr!==null&&lu(Dr)&&(Dr=null),Pa.forEach(bg),ba.forEach(bg)}function qo(t,e){t.blockedOn===e&&(t.blockedOn=null,pd||(pd=!0,ln.unstable_scheduleCallback(ln.unstable_NormalPriority,KT)))}function Aa(t){function e(i){return qo(i,t)}if(0<$l.length){qo($l[0],t);for(var n=1;n<$l.length;n++){var r=$l[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Cr!==null&&qo(Cr,t),kr!==null&&qo(kr,t),Dr!==null&&qo(Dr,t),Pa.forEach(e),ba.forEach(e),n=0;n<Tr.length;n++)r=Tr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Tr.length&&(n=Tr[0],n.blockedOn===null);)$_(n),n.blockedOn===null&&Tr.shift()}var js=lr.ReactCurrentBatchConfig,Du=!0;function HT(t,e,n,r){var i=be,s=js.transition;js.transition=null;try{be=1,Mf(t,e,n,r)}finally{be=i,js.transition=s}}function QT(t,e,n,r){var i=be,s=js.transition;js.transition=null;try{be=4,Mf(t,e,n,r)}finally{be=i,js.transition=s}}function Mf(t,e,n,r){if(Du){var i=md(t,e,n,r);if(i===null)Rh(t,e,r,Nu,n),Pg(t,r);else if(WT(i,t,e,n,r))r.stopPropagation();else if(Pg(t,r),e&4&&-1<GT.indexOf(t)){for(;i!==null;){var s=sl(i);if(s!==null&&F_(s),s=md(t,e,n,r),s===null&&Rh(t,e,r,Nu,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else Rh(t,e,r,null,n)}}var Nu=null;function md(t,e,n,r){if(Nu=null,t=Nf(r),t=Ei(t),t!==null)if(e=Ki(t),e===null)t=null;else if(n=e.tag,n===13){if(t=k_(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Nu=t,null}function q_(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(LT()){case Vf:return 1;case O_:return 4;case Cu:case MT:return 16;case L_:return 536870912;default:return 16}default:return 16}}var br=null,jf=null,uu=null;function G_(){if(uu)return uu;var t,e=jf,n=e.length,r,i="value"in br?br.value:br.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return uu=i.slice(t,1<r?1-r:void 0)}function cu(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function ql(){return!0}function Ag(){return!1}function hn(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(s):s[l]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?ql:Ag,this.isPropagationStopped=Ag,this}return Ke(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ql)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ql)},persist:function(){},isPersistent:ql}),e}var mo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ff=hn(mo),il=Ke({},mo,{view:0,detail:0}),YT=hn(il),wh,Eh,Go,vc=Ke({},il,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Bf,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Go&&(Go&&t.type==="mousemove"?(wh=t.screenX-Go.screenX,Eh=t.screenY-Go.screenY):Eh=wh=0,Go=t),wh)},movementY:function(t){return"movementY"in t?t.movementY:Eh}}),Rg=hn(vc),XT=Ke({},vc,{dataTransfer:0}),JT=hn(XT),ZT=Ke({},il,{relatedTarget:0}),Ih=hn(ZT),ex=Ke({},mo,{animationName:0,elapsedTime:0,pseudoElement:0}),tx=hn(ex),nx=Ke({},mo,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),rx=hn(nx),ix=Ke({},mo,{data:0}),Cg=hn(ix),sx={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ox={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ax={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function lx(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=ax[t])?!!e[t]:!1}function Bf(){return lx}var ux=Ke({},il,{key:function(t){if(t.key){var e=sx[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=cu(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?ox[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Bf,charCode:function(t){return t.type==="keypress"?cu(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?cu(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),cx=hn(ux),hx=Ke({},vc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),kg=hn(hx),dx=Ke({},il,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Bf}),fx=hn(dx),px=Ke({},mo,{propertyName:0,elapsedTime:0,pseudoElement:0}),mx=hn(px),gx=Ke({},vc,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),yx=hn(gx),_x=[9,13,27,32],zf=nr&&"CompositionEvent"in window,ca=null;nr&&"documentMode"in document&&(ca=document.documentMode);var vx=nr&&"TextEvent"in window&&!ca,W_=nr&&(!zf||ca&&8<ca&&11>=ca),Dg=" ",Ng=!1;function K_(t,e){switch(t){case"keyup":return _x.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function H_(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var xs=!1;function wx(t,e){switch(t){case"compositionend":return H_(e);case"keypress":return e.which!==32?null:(Ng=!0,Dg);case"textInput":return t=e.data,t===Dg&&Ng?null:t;default:return null}}function Ex(t,e){if(xs)return t==="compositionend"||!zf&&K_(t,e)?(t=G_(),uu=jf=br=null,xs=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return W_&&e.locale!=="ko"?null:e.data;default:return null}}var Ix={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Vg(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Ix[t.type]:e==="textarea"}function Q_(t,e,n,r){P_(r),e=Vu(e,"onChange"),0<e.length&&(n=new Ff("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var ha=null,Ra=null;function Tx(t){ov(t,0)}function wc(t){var e=bs(t);if(v_(e))return t}function xx(t,e){if(t==="change")return e}var Y_=!1;if(nr){var Th;if(nr){var xh="oninput"in document;if(!xh){var Og=document.createElement("div");Og.setAttribute("oninput","return;"),xh=typeof Og.oninput=="function"}Th=xh}else Th=!1;Y_=Th&&(!document.documentMode||9<document.documentMode)}function Lg(){ha&&(ha.detachEvent("onpropertychange",X_),Ra=ha=null)}function X_(t){if(t.propertyName==="value"&&wc(Ra)){var e=[];Q_(e,Ra,t,Nf(t)),C_(Tx,e)}}function Sx(t,e,n){t==="focusin"?(Lg(),ha=e,Ra=n,ha.attachEvent("onpropertychange",X_)):t==="focusout"&&Lg()}function Px(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return wc(Ra)}function bx(t,e){if(t==="click")return wc(e)}function Ax(t,e){if(t==="input"||t==="change")return wc(e)}function Rx(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Rn=typeof Object.is=="function"?Object.is:Rx;function Ca(t,e){if(Rn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Xh.call(e,i)||!Rn(t[i],e[i]))return!1}return!0}function Mg(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function jg(t,e){var n=Mg(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Mg(n)}}function J_(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?J_(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Z_(){for(var t=window,e=bu();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=bu(t.document)}return e}function Uf(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Cx(t){var e=Z_(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&J_(n.ownerDocument.documentElement,n)){if(r!==null&&Uf(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=jg(n,s);var o=jg(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var kx=nr&&"documentMode"in document&&11>=document.documentMode,Ss=null,gd=null,da=null,yd=!1;function Fg(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;yd||Ss==null||Ss!==bu(r)||(r=Ss,"selectionStart"in r&&Uf(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),da&&Ca(da,r)||(da=r,r=Vu(gd,"onSelect"),0<r.length&&(e=new Ff("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Ss)))}function Gl(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Ps={animationend:Gl("Animation","AnimationEnd"),animationiteration:Gl("Animation","AnimationIteration"),animationstart:Gl("Animation","AnimationStart"),transitionend:Gl("Transition","TransitionEnd")},Sh={},ev={};nr&&(ev=document.createElement("div").style,"AnimationEvent"in window||(delete Ps.animationend.animation,delete Ps.animationiteration.animation,delete Ps.animationstart.animation),"TransitionEvent"in window||delete Ps.transitionend.transition);function Ec(t){if(Sh[t])return Sh[t];if(!Ps[t])return t;var e=Ps[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in ev)return Sh[t]=e[n];return t}var tv=Ec("animationend"),nv=Ec("animationiteration"),rv=Ec("animationstart"),iv=Ec("transitionend"),sv=new Map,Bg="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Jr(t,e){sv.set(t,e),Wi(e,[t])}for(var Ph=0;Ph<Bg.length;Ph++){var bh=Bg[Ph],Dx=bh.toLowerCase(),Nx=bh[0].toUpperCase()+bh.slice(1);Jr(Dx,"on"+Nx)}Jr(tv,"onAnimationEnd");Jr(nv,"onAnimationIteration");Jr(rv,"onAnimationStart");Jr("dblclick","onDoubleClick");Jr("focusin","onFocus");Jr("focusout","onBlur");Jr(iv,"onTransitionEnd");$s("onMouseEnter",["mouseout","mouseover"]);$s("onMouseLeave",["mouseout","mouseover"]);$s("onPointerEnter",["pointerout","pointerover"]);$s("onPointerLeave",["pointerout","pointerover"]);Wi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Wi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Wi("onBeforeInput",["compositionend","keypress","textInput","paste"]);Wi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Wi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Wi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ra="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Vx=new Set("cancel close invalid load scroll toggle".split(" ").concat(ra));function zg(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,DT(r,e,void 0,t),t.currentTarget=null}function ov(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var l=r[o],u=l.instance,c=l.currentTarget;if(l=l.listener,u!==s&&i.isPropagationStopped())break e;zg(i,l,c),s=u}else for(o=0;o<r.length;o++){if(l=r[o],u=l.instance,c=l.currentTarget,l=l.listener,u!==s&&i.isPropagationStopped())break e;zg(i,l,c),s=u}}}if(Ru)throw t=dd,Ru=!1,dd=null,t}function Le(t,e){var n=e[Id];n===void 0&&(n=e[Id]=new Set);var r=t+"__bubble";n.has(r)||(av(e,t,2,!1),n.add(r))}function Ah(t,e,n){var r=0;e&&(r|=4),av(n,t,r,e)}var Wl="_reactListening"+Math.random().toString(36).slice(2);function ka(t){if(!t[Wl]){t[Wl]=!0,p_.forEach(function(n){n!=="selectionchange"&&(Vx.has(n)||Ah(n,!1,t),Ah(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Wl]||(e[Wl]=!0,Ah("selectionchange",!1,e))}}function av(t,e,n,r){switch(q_(e)){case 1:var i=HT;break;case 4:i=QT;break;default:i=Mf}n=i.bind(null,e,n,t),i=void 0,!hd||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Rh(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===i||l.nodeType===8&&l.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===i||u.nodeType===8&&u.parentNode===i))return;o=o.return}for(;l!==null;){if(o=Ei(l),o===null)return;if(u=o.tag,u===5||u===6){r=s=o;continue e}l=l.parentNode}}r=r.return}C_(function(){var c=s,f=Nf(n),m=[];e:{var v=sv.get(t);if(v!==void 0){var R=Ff,V=t;switch(t){case"keypress":if(cu(n)===0)break e;case"keydown":case"keyup":R=cx;break;case"focusin":V="focus",R=Ih;break;case"focusout":V="blur",R=Ih;break;case"beforeblur":case"afterblur":R=Ih;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":R=Rg;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":R=JT;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":R=fx;break;case tv:case nv:case rv:R=tx;break;case iv:R=mx;break;case"scroll":R=YT;break;case"wheel":R=yx;break;case"copy":case"cut":case"paste":R=rx;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":R=kg}var N=(e&4)!==0,L=!N&&t==="scroll",C=N?v!==null?v+"Capture":null:v;N=[];for(var P=c,x;P!==null;){x=P;var d=x.stateNode;if(x.tag===5&&d!==null&&(x=d,C!==null&&(d=Sa(P,C),d!=null&&N.push(Da(P,d,x)))),L)break;P=P.return}0<N.length&&(v=new R(v,V,null,n,f),m.push({event:v,listeners:N}))}}if(!(e&7)){e:{if(v=t==="mouseover"||t==="pointerover",R=t==="mouseout"||t==="pointerout",v&&n!==ud&&(V=n.relatedTarget||n.fromElement)&&(Ei(V)||V[rr]))break e;if((R||v)&&(v=f.window===f?f:(v=f.ownerDocument)?v.defaultView||v.parentWindow:window,R?(V=n.relatedTarget||n.toElement,R=c,V=V?Ei(V):null,V!==null&&(L=Ki(V),V!==L||V.tag!==5&&V.tag!==6)&&(V=null)):(R=null,V=c),R!==V)){if(N=Rg,d="onMouseLeave",C="onMouseEnter",P="mouse",(t==="pointerout"||t==="pointerover")&&(N=kg,d="onPointerLeave",C="onPointerEnter",P="pointer"),L=R==null?v:bs(R),x=V==null?v:bs(V),v=new N(d,P+"leave",R,n,f),v.target=L,v.relatedTarget=x,d=null,Ei(f)===c&&(N=new N(C,P+"enter",V,n,f),N.target=x,N.relatedTarget=L,d=N),L=d,R&&V)t:{for(N=R,C=V,P=0,x=N;x;x=hs(x))P++;for(x=0,d=C;d;d=hs(d))x++;for(;0<P-x;)N=hs(N),P--;for(;0<x-P;)C=hs(C),x--;for(;P--;){if(N===C||C!==null&&N===C.alternate)break t;N=hs(N),C=hs(C)}N=null}else N=null;R!==null&&Ug(m,v,R,N,!1),V!==null&&L!==null&&Ug(m,L,V,N,!0)}}e:{if(v=c?bs(c):window,R=v.nodeName&&v.nodeName.toLowerCase(),R==="select"||R==="input"&&v.type==="file")var g=xx;else if(Vg(v))if(Y_)g=Ax;else{g=Px;var I=Sx}else(R=v.nodeName)&&R.toLowerCase()==="input"&&(v.type==="checkbox"||v.type==="radio")&&(g=bx);if(g&&(g=g(t,c))){Q_(m,g,n,f);break e}I&&I(t,v,c),t==="focusout"&&(I=v._wrapperState)&&I.controlled&&v.type==="number"&&id(v,"number",v.value)}switch(I=c?bs(c):window,t){case"focusin":(Vg(I)||I.contentEditable==="true")&&(Ss=I,gd=c,da=null);break;case"focusout":da=gd=Ss=null;break;case"mousedown":yd=!0;break;case"contextmenu":case"mouseup":case"dragend":yd=!1,Fg(m,n,f);break;case"selectionchange":if(kx)break;case"keydown":case"keyup":Fg(m,n,f)}var _;if(zf)e:{switch(t){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else xs?K_(t,n)&&(y="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(y="onCompositionStart");y&&(W_&&n.locale!=="ko"&&(xs||y!=="onCompositionStart"?y==="onCompositionEnd"&&xs&&(_=G_()):(br=f,jf="value"in br?br.value:br.textContent,xs=!0)),I=Vu(c,y),0<I.length&&(y=new Cg(y,t,null,n,f),m.push({event:y,listeners:I}),_?y.data=_:(_=H_(n),_!==null&&(y.data=_)))),(_=vx?wx(t,n):Ex(t,n))&&(c=Vu(c,"onBeforeInput"),0<c.length&&(f=new Cg("onBeforeInput","beforeinput",null,n,f),m.push({event:f,listeners:c}),f.data=_))}ov(m,e)})}function Da(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Vu(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Sa(t,n),s!=null&&r.unshift(Da(t,s,i)),s=Sa(t,e),s!=null&&r.push(Da(t,s,i))),t=t.return}return r}function hs(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Ug(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var l=n,u=l.alternate,c=l.stateNode;if(u!==null&&u===r)break;l.tag===5&&c!==null&&(l=c,i?(u=Sa(n,s),u!=null&&o.unshift(Da(n,u,l))):i||(u=Sa(n,s),u!=null&&o.push(Da(n,u,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var Ox=/\r\n?/g,Lx=/\u0000|\uFFFD/g;function $g(t){return(typeof t=="string"?t:""+t).replace(Ox,`
`).replace(Lx,"")}function Kl(t,e,n){if(e=$g(e),$g(t)!==e&&n)throw Error(K(425))}function Ou(){}var _d=null,vd=null;function wd(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Ed=typeof setTimeout=="function"?setTimeout:void 0,Mx=typeof clearTimeout=="function"?clearTimeout:void 0,qg=typeof Promise=="function"?Promise:void 0,jx=typeof queueMicrotask=="function"?queueMicrotask:typeof qg<"u"?function(t){return qg.resolve(null).then(t).catch(Fx)}:Ed;function Fx(t){setTimeout(function(){throw t})}function Ch(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Aa(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Aa(e)}function Nr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Gg(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var go=Math.random().toString(36).slice(2),Vn="__reactFiber$"+go,Na="__reactProps$"+go,rr="__reactContainer$"+go,Id="__reactEvents$"+go,Bx="__reactListeners$"+go,zx="__reactHandles$"+go;function Ei(t){var e=t[Vn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[rr]||n[Vn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Gg(t);t!==null;){if(n=t[Vn])return n;t=Gg(t)}return e}t=n,n=t.parentNode}return null}function sl(t){return t=t[Vn]||t[rr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function bs(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(K(33))}function Ic(t){return t[Na]||null}var Td=[],As=-1;function Zr(t){return{current:t}}function je(t){0>As||(t.current=Td[As],Td[As]=null,As--)}function De(t,e){As++,Td[As]=t.current,t.current=e}var zr={},Vt=Zr(zr),en=Zr(!1),Ci=zr;function qs(t,e){var n=t.type.contextTypes;if(!n)return zr;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function tn(t){return t=t.childContextTypes,t!=null}function Lu(){je(en),je(Vt)}function Wg(t,e,n){if(Vt.current!==zr)throw Error(K(168));De(Vt,e),De(en,n)}function lv(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(K(108,ST(t)||"Unknown",i));return Ke({},n,r)}function Mu(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||zr,Ci=Vt.current,De(Vt,t),De(en,en.current),!0}function Kg(t,e,n){var r=t.stateNode;if(!r)throw Error(K(169));n?(t=lv(t,e,Ci),r.__reactInternalMemoizedMergedChildContext=t,je(en),je(Vt),De(Vt,t)):je(en),De(en,n)}var Qn=null,Tc=!1,kh=!1;function uv(t){Qn===null?Qn=[t]:Qn.push(t)}function Ux(t){Tc=!0,uv(t)}function ei(){if(!kh&&Qn!==null){kh=!0;var t=0,e=be;try{var n=Qn;for(be=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Qn=null,Tc=!1}catch(i){throw Qn!==null&&(Qn=Qn.slice(t+1)),V_(Vf,ei),i}finally{be=e,kh=!1}}return null}var Rs=[],Cs=0,ju=null,Fu=0,pn=[],mn=0,ki=null,Xn=1,Jn="";function di(t,e){Rs[Cs++]=Fu,Rs[Cs++]=ju,ju=t,Fu=e}function cv(t,e,n){pn[mn++]=Xn,pn[mn++]=Jn,pn[mn++]=ki,ki=t;var r=Xn;t=Jn;var i=32-bn(r)-1;r&=~(1<<i),n+=1;var s=32-bn(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Xn=1<<32-bn(e)+i|n<<i|r,Jn=s+t}else Xn=1<<s|n<<i|r,Jn=t}function $f(t){t.return!==null&&(di(t,1),cv(t,1,0))}function qf(t){for(;t===ju;)ju=Rs[--Cs],Rs[Cs]=null,Fu=Rs[--Cs],Rs[Cs]=null;for(;t===ki;)ki=pn[--mn],pn[mn]=null,Jn=pn[--mn],pn[mn]=null,Xn=pn[--mn],pn[mn]=null}var an=null,on=null,Fe=!1,Pn=null;function hv(t,e){var n=gn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Hg(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,an=t,on=Nr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,an=t,on=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=ki!==null?{id:Xn,overflow:Jn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=gn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,an=t,on=null,!0):!1;default:return!1}}function xd(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Sd(t){if(Fe){var e=on;if(e){var n=e;if(!Hg(t,e)){if(xd(t))throw Error(K(418));e=Nr(n.nextSibling);var r=an;e&&Hg(t,e)?hv(r,n):(t.flags=t.flags&-4097|2,Fe=!1,an=t)}}else{if(xd(t))throw Error(K(418));t.flags=t.flags&-4097|2,Fe=!1,an=t}}}function Qg(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;an=t}function Hl(t){if(t!==an)return!1;if(!Fe)return Qg(t),Fe=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!wd(t.type,t.memoizedProps)),e&&(e=on)){if(xd(t))throw dv(),Error(K(418));for(;e;)hv(t,e),e=Nr(e.nextSibling)}if(Qg(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(K(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){on=Nr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}on=null}}else on=an?Nr(t.stateNode.nextSibling):null;return!0}function dv(){for(var t=on;t;)t=Nr(t.nextSibling)}function Gs(){on=an=null,Fe=!1}function Gf(t){Pn===null?Pn=[t]:Pn.push(t)}var $x=lr.ReactCurrentBatchConfig;function Wo(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(K(309));var r=n.stateNode}if(!r)throw Error(K(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var l=i.refs;o===null?delete l[s]:l[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(K(284));if(!n._owner)throw Error(K(290,t))}return t}function Ql(t,e){throw t=Object.prototype.toString.call(e),Error(K(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Yg(t){var e=t._init;return e(t._payload)}function fv(t){function e(C,P){if(t){var x=C.deletions;x===null?(C.deletions=[P],C.flags|=16):x.push(P)}}function n(C,P){if(!t)return null;for(;P!==null;)e(C,P),P=P.sibling;return null}function r(C,P){for(C=new Map;P!==null;)P.key!==null?C.set(P.key,P):C.set(P.index,P),P=P.sibling;return C}function i(C,P){return C=Mr(C,P),C.index=0,C.sibling=null,C}function s(C,P,x){return C.index=x,t?(x=C.alternate,x!==null?(x=x.index,x<P?(C.flags|=2,P):x):(C.flags|=2,P)):(C.flags|=1048576,P)}function o(C){return t&&C.alternate===null&&(C.flags|=2),C}function l(C,P,x,d){return P===null||P.tag!==6?(P=jh(x,C.mode,d),P.return=C,P):(P=i(P,x),P.return=C,P)}function u(C,P,x,d){var g=x.type;return g===Ts?f(C,P,x.props.children,d,x.key):P!==null&&(P.elementType===g||typeof g=="object"&&g!==null&&g.$$typeof===Er&&Yg(g)===P.type)?(d=i(P,x.props),d.ref=Wo(C,P,x),d.return=C,d):(d=yu(x.type,x.key,x.props,null,C.mode,d),d.ref=Wo(C,P,x),d.return=C,d)}function c(C,P,x,d){return P===null||P.tag!==4||P.stateNode.containerInfo!==x.containerInfo||P.stateNode.implementation!==x.implementation?(P=Fh(x,C.mode,d),P.return=C,P):(P=i(P,x.children||[]),P.return=C,P)}function f(C,P,x,d,g){return P===null||P.tag!==7?(P=Ai(x,C.mode,d,g),P.return=C,P):(P=i(P,x),P.return=C,P)}function m(C,P,x){if(typeof P=="string"&&P!==""||typeof P=="number")return P=jh(""+P,C.mode,x),P.return=C,P;if(typeof P=="object"&&P!==null){switch(P.$$typeof){case jl:return x=yu(P.type,P.key,P.props,null,C.mode,x),x.ref=Wo(C,null,P),x.return=C,x;case Is:return P=Fh(P,C.mode,x),P.return=C,P;case Er:var d=P._init;return m(C,d(P._payload),x)}if(ta(P)||zo(P))return P=Ai(P,C.mode,x,null),P.return=C,P;Ql(C,P)}return null}function v(C,P,x,d){var g=P!==null?P.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return g!==null?null:l(C,P,""+x,d);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case jl:return x.key===g?u(C,P,x,d):null;case Is:return x.key===g?c(C,P,x,d):null;case Er:return g=x._init,v(C,P,g(x._payload),d)}if(ta(x)||zo(x))return g!==null?null:f(C,P,x,d,null);Ql(C,x)}return null}function R(C,P,x,d,g){if(typeof d=="string"&&d!==""||typeof d=="number")return C=C.get(x)||null,l(P,C,""+d,g);if(typeof d=="object"&&d!==null){switch(d.$$typeof){case jl:return C=C.get(d.key===null?x:d.key)||null,u(P,C,d,g);case Is:return C=C.get(d.key===null?x:d.key)||null,c(P,C,d,g);case Er:var I=d._init;return R(C,P,x,I(d._payload),g)}if(ta(d)||zo(d))return C=C.get(x)||null,f(P,C,d,g,null);Ql(P,d)}return null}function V(C,P,x,d){for(var g=null,I=null,_=P,y=P=0,w=null;_!==null&&y<x.length;y++){_.index>y?(w=_,_=null):w=_.sibling;var S=v(C,_,x[y],d);if(S===null){_===null&&(_=w);break}t&&_&&S.alternate===null&&e(C,_),P=s(S,P,y),I===null?g=S:I.sibling=S,I=S,_=w}if(y===x.length)return n(C,_),Fe&&di(C,y),g;if(_===null){for(;y<x.length;y++)_=m(C,x[y],d),_!==null&&(P=s(_,P,y),I===null?g=_:I.sibling=_,I=_);return Fe&&di(C,y),g}for(_=r(C,_);y<x.length;y++)w=R(_,C,y,x[y],d),w!==null&&(t&&w.alternate!==null&&_.delete(w.key===null?y:w.key),P=s(w,P,y),I===null?g=w:I.sibling=w,I=w);return t&&_.forEach(function(A){return e(C,A)}),Fe&&di(C,y),g}function N(C,P,x,d){var g=zo(x);if(typeof g!="function")throw Error(K(150));if(x=g.call(x),x==null)throw Error(K(151));for(var I=g=null,_=P,y=P=0,w=null,S=x.next();_!==null&&!S.done;y++,S=x.next()){_.index>y?(w=_,_=null):w=_.sibling;var A=v(C,_,S.value,d);if(A===null){_===null&&(_=w);break}t&&_&&A.alternate===null&&e(C,_),P=s(A,P,y),I===null?g=A:I.sibling=A,I=A,_=w}if(S.done)return n(C,_),Fe&&di(C,y),g;if(_===null){for(;!S.done;y++,S=x.next())S=m(C,S.value,d),S!==null&&(P=s(S,P,y),I===null?g=S:I.sibling=S,I=S);return Fe&&di(C,y),g}for(_=r(C,_);!S.done;y++,S=x.next())S=R(_,C,y,S.value,d),S!==null&&(t&&S.alternate!==null&&_.delete(S.key===null?y:S.key),P=s(S,P,y),I===null?g=S:I.sibling=S,I=S);return t&&_.forEach(function(k){return e(C,k)}),Fe&&di(C,y),g}function L(C,P,x,d){if(typeof x=="object"&&x!==null&&x.type===Ts&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case jl:e:{for(var g=x.key,I=P;I!==null;){if(I.key===g){if(g=x.type,g===Ts){if(I.tag===7){n(C,I.sibling),P=i(I,x.props.children),P.return=C,C=P;break e}}else if(I.elementType===g||typeof g=="object"&&g!==null&&g.$$typeof===Er&&Yg(g)===I.type){n(C,I.sibling),P=i(I,x.props),P.ref=Wo(C,I,x),P.return=C,C=P;break e}n(C,I);break}else e(C,I);I=I.sibling}x.type===Ts?(P=Ai(x.props.children,C.mode,d,x.key),P.return=C,C=P):(d=yu(x.type,x.key,x.props,null,C.mode,d),d.ref=Wo(C,P,x),d.return=C,C=d)}return o(C);case Is:e:{for(I=x.key;P!==null;){if(P.key===I)if(P.tag===4&&P.stateNode.containerInfo===x.containerInfo&&P.stateNode.implementation===x.implementation){n(C,P.sibling),P=i(P,x.children||[]),P.return=C,C=P;break e}else{n(C,P);break}else e(C,P);P=P.sibling}P=Fh(x,C.mode,d),P.return=C,C=P}return o(C);case Er:return I=x._init,L(C,P,I(x._payload),d)}if(ta(x))return V(C,P,x,d);if(zo(x))return N(C,P,x,d);Ql(C,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,P!==null&&P.tag===6?(n(C,P.sibling),P=i(P,x),P.return=C,C=P):(n(C,P),P=jh(x,C.mode,d),P.return=C,C=P),o(C)):n(C,P)}return L}var Ws=fv(!0),pv=fv(!1),Bu=Zr(null),zu=null,ks=null,Wf=null;function Kf(){Wf=ks=zu=null}function Hf(t){var e=Bu.current;je(Bu),t._currentValue=e}function Pd(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Fs(t,e){zu=t,Wf=ks=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Yt=!0),t.firstContext=null)}function wn(t){var e=t._currentValue;if(Wf!==t)if(t={context:t,memoizedValue:e,next:null},ks===null){if(zu===null)throw Error(K(308));ks=t,zu.dependencies={lanes:0,firstContext:t}}else ks=ks.next=t;return e}var Ii=null;function Qf(t){Ii===null?Ii=[t]:Ii.push(t)}function mv(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,Qf(e)):(n.next=i.next,i.next=n),e.interleaved=n,ir(t,r)}function ir(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Ir=!1;function Yf(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function gv(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function er(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Vr(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,we&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,ir(t,n)}return i=r.interleaved,i===null?(e.next=e,Qf(r)):(e.next=i.next,i.next=e),r.interleaved=e,ir(t,n)}function hu(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Of(t,n)}}function Xg(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Uu(t,e,n,r){var i=t.updateQueue;Ir=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var u=l,c=u.next;u.next=null,o===null?s=c:o.next=c,o=u;var f=t.alternate;f!==null&&(f=f.updateQueue,l=f.lastBaseUpdate,l!==o&&(l===null?f.firstBaseUpdate=c:l.next=c,f.lastBaseUpdate=u))}if(s!==null){var m=i.baseState;o=0,f=c=u=null,l=s;do{var v=l.lane,R=l.eventTime;if((r&v)===v){f!==null&&(f=f.next={eventTime:R,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var V=t,N=l;switch(v=e,R=n,N.tag){case 1:if(V=N.payload,typeof V=="function"){m=V.call(R,m,v);break e}m=V;break e;case 3:V.flags=V.flags&-65537|128;case 0:if(V=N.payload,v=typeof V=="function"?V.call(R,m,v):V,v==null)break e;m=Ke({},m,v);break e;case 2:Ir=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,v=i.effects,v===null?i.effects=[l]:v.push(l))}else R={eventTime:R,lane:v,tag:l.tag,payload:l.payload,callback:l.callback,next:null},f===null?(c=f=R,u=m):f=f.next=R,o|=v;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;v=l,l=v.next,v.next=null,i.lastBaseUpdate=v,i.shared.pending=null}}while(!0);if(f===null&&(u=m),i.baseState=u,i.firstBaseUpdate=c,i.lastBaseUpdate=f,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Ni|=o,t.lanes=o,t.memoizedState=m}}function Jg(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(K(191,i));i.call(r)}}}var ol={},jn=Zr(ol),Va=Zr(ol),Oa=Zr(ol);function Ti(t){if(t===ol)throw Error(K(174));return t}function Xf(t,e){switch(De(Oa,e),De(Va,t),De(jn,ol),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:od(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=od(e,t)}je(jn),De(jn,e)}function Ks(){je(jn),je(Va),je(Oa)}function yv(t){Ti(Oa.current);var e=Ti(jn.current),n=od(e,t.type);e!==n&&(De(Va,t),De(jn,n))}function Jf(t){Va.current===t&&(je(jn),je(Va))}var qe=Zr(0);function $u(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Dh=[];function Zf(){for(var t=0;t<Dh.length;t++)Dh[t]._workInProgressVersionPrimary=null;Dh.length=0}var du=lr.ReactCurrentDispatcher,Nh=lr.ReactCurrentBatchConfig,Di=0,Ge=null,ct=null,gt=null,qu=!1,fa=!1,La=0,qx=0;function Ct(){throw Error(K(321))}function ep(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Rn(t[n],e[n]))return!1;return!0}function tp(t,e,n,r,i,s){if(Di=s,Ge=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,du.current=t===null||t.memoizedState===null?Hx:Qx,t=n(r,i),fa){s=0;do{if(fa=!1,La=0,25<=s)throw Error(K(301));s+=1,gt=ct=null,e.updateQueue=null,du.current=Yx,t=n(r,i)}while(fa)}if(du.current=Gu,e=ct!==null&&ct.next!==null,Di=0,gt=ct=Ge=null,qu=!1,e)throw Error(K(300));return t}function np(){var t=La!==0;return La=0,t}function Nn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return gt===null?Ge.memoizedState=gt=t:gt=gt.next=t,gt}function En(){if(ct===null){var t=Ge.alternate;t=t!==null?t.memoizedState:null}else t=ct.next;var e=gt===null?Ge.memoizedState:gt.next;if(e!==null)gt=e,ct=t;else{if(t===null)throw Error(K(310));ct=t,t={memoizedState:ct.memoizedState,baseState:ct.baseState,baseQueue:ct.baseQueue,queue:ct.queue,next:null},gt===null?Ge.memoizedState=gt=t:gt=gt.next=t}return gt}function Ma(t,e){return typeof e=="function"?e(t):e}function Vh(t){var e=En(),n=e.queue;if(n===null)throw Error(K(311));n.lastRenderedReducer=t;var r=ct,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var l=o=null,u=null,c=s;do{var f=c.lane;if((Di&f)===f)u!==null&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var m={lane:f,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};u===null?(l=u=m,o=r):u=u.next=m,Ge.lanes|=f,Ni|=f}c=c.next}while(c!==null&&c!==s);u===null?o=r:u.next=l,Rn(r,e.memoizedState)||(Yt=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,Ge.lanes|=s,Ni|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Oh(t){var e=En(),n=e.queue;if(n===null)throw Error(K(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);Rn(s,e.memoizedState)||(Yt=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function _v(){}function vv(t,e){var n=Ge,r=En(),i=e(),s=!Rn(r.memoizedState,i);if(s&&(r.memoizedState=i,Yt=!0),r=r.queue,rp(Iv.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||gt!==null&&gt.memoizedState.tag&1){if(n.flags|=2048,ja(9,Ev.bind(null,n,r,i,e),void 0,null),_t===null)throw Error(K(349));Di&30||wv(n,e,i)}return i}function wv(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Ge.updateQueue,e===null?(e={lastEffect:null,stores:null},Ge.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Ev(t,e,n,r){e.value=n,e.getSnapshot=r,Tv(e)&&xv(t)}function Iv(t,e,n){return n(function(){Tv(e)&&xv(t)})}function Tv(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Rn(t,n)}catch{return!0}}function xv(t){var e=ir(t,1);e!==null&&An(e,t,1,-1)}function Zg(t){var e=Nn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ma,lastRenderedState:t},e.queue=t,t=t.dispatch=Kx.bind(null,Ge,t),[e.memoizedState,t]}function ja(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Ge.updateQueue,e===null?(e={lastEffect:null,stores:null},Ge.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Sv(){return En().memoizedState}function fu(t,e,n,r){var i=Nn();Ge.flags|=t,i.memoizedState=ja(1|e,n,void 0,r===void 0?null:r)}function xc(t,e,n,r){var i=En();r=r===void 0?null:r;var s=void 0;if(ct!==null){var o=ct.memoizedState;if(s=o.destroy,r!==null&&ep(r,o.deps)){i.memoizedState=ja(e,n,s,r);return}}Ge.flags|=t,i.memoizedState=ja(1|e,n,s,r)}function ey(t,e){return fu(8390656,8,t,e)}function rp(t,e){return xc(2048,8,t,e)}function Pv(t,e){return xc(4,2,t,e)}function bv(t,e){return xc(4,4,t,e)}function Av(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Rv(t,e,n){return n=n!=null?n.concat([t]):null,xc(4,4,Av.bind(null,e,t),n)}function ip(){}function Cv(t,e){var n=En();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&ep(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function kv(t,e){var n=En();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&ep(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Dv(t,e,n){return Di&21?(Rn(n,e)||(n=M_(),Ge.lanes|=n,Ni|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Yt=!0),t.memoizedState=n)}function Gx(t,e){var n=be;be=n!==0&&4>n?n:4,t(!0);var r=Nh.transition;Nh.transition={};try{t(!1),e()}finally{be=n,Nh.transition=r}}function Nv(){return En().memoizedState}function Wx(t,e,n){var r=Lr(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Vv(t))Ov(e,n);else if(n=mv(t,e,n,r),n!==null){var i=Bt();An(n,t,r,i),Lv(n,e,r)}}function Kx(t,e,n){var r=Lr(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Vv(t))Ov(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,l=s(o,n);if(i.hasEagerState=!0,i.eagerState=l,Rn(l,o)){var u=e.interleaved;u===null?(i.next=i,Qf(e)):(i.next=u.next,u.next=i),e.interleaved=i;return}}catch{}finally{}n=mv(t,e,i,r),n!==null&&(i=Bt(),An(n,t,r,i),Lv(n,e,r))}}function Vv(t){var e=t.alternate;return t===Ge||e!==null&&e===Ge}function Ov(t,e){fa=qu=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Lv(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Of(t,n)}}var Gu={readContext:wn,useCallback:Ct,useContext:Ct,useEffect:Ct,useImperativeHandle:Ct,useInsertionEffect:Ct,useLayoutEffect:Ct,useMemo:Ct,useReducer:Ct,useRef:Ct,useState:Ct,useDebugValue:Ct,useDeferredValue:Ct,useTransition:Ct,useMutableSource:Ct,useSyncExternalStore:Ct,useId:Ct,unstable_isNewReconciler:!1},Hx={readContext:wn,useCallback:function(t,e){return Nn().memoizedState=[t,e===void 0?null:e],t},useContext:wn,useEffect:ey,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,fu(4194308,4,Av.bind(null,e,t),n)},useLayoutEffect:function(t,e){return fu(4194308,4,t,e)},useInsertionEffect:function(t,e){return fu(4,2,t,e)},useMemo:function(t,e){var n=Nn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Nn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=Wx.bind(null,Ge,t),[r.memoizedState,t]},useRef:function(t){var e=Nn();return t={current:t},e.memoizedState=t},useState:Zg,useDebugValue:ip,useDeferredValue:function(t){return Nn().memoizedState=t},useTransition:function(){var t=Zg(!1),e=t[0];return t=Gx.bind(null,t[1]),Nn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Ge,i=Nn();if(Fe){if(n===void 0)throw Error(K(407));n=n()}else{if(n=e(),_t===null)throw Error(K(349));Di&30||wv(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,ey(Iv.bind(null,r,s,t),[t]),r.flags|=2048,ja(9,Ev.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=Nn(),e=_t.identifierPrefix;if(Fe){var n=Jn,r=Xn;n=(r&~(1<<32-bn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=La++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=qx++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Qx={readContext:wn,useCallback:Cv,useContext:wn,useEffect:rp,useImperativeHandle:Rv,useInsertionEffect:Pv,useLayoutEffect:bv,useMemo:kv,useReducer:Vh,useRef:Sv,useState:function(){return Vh(Ma)},useDebugValue:ip,useDeferredValue:function(t){var e=En();return Dv(e,ct.memoizedState,t)},useTransition:function(){var t=Vh(Ma)[0],e=En().memoizedState;return[t,e]},useMutableSource:_v,useSyncExternalStore:vv,useId:Nv,unstable_isNewReconciler:!1},Yx={readContext:wn,useCallback:Cv,useContext:wn,useEffect:rp,useImperativeHandle:Rv,useInsertionEffect:Pv,useLayoutEffect:bv,useMemo:kv,useReducer:Oh,useRef:Sv,useState:function(){return Oh(Ma)},useDebugValue:ip,useDeferredValue:function(t){var e=En();return ct===null?e.memoizedState=t:Dv(e,ct.memoizedState,t)},useTransition:function(){var t=Oh(Ma)[0],e=En().memoizedState;return[t,e]},useMutableSource:_v,useSyncExternalStore:vv,useId:Nv,unstable_isNewReconciler:!1};function xn(t,e){if(t&&t.defaultProps){e=Ke({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function bd(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Ke({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Sc={isMounted:function(t){return(t=t._reactInternals)?Ki(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Bt(),i=Lr(t),s=er(r,i);s.payload=e,n!=null&&(s.callback=n),e=Vr(t,s,i),e!==null&&(An(e,t,i,r),hu(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Bt(),i=Lr(t),s=er(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Vr(t,s,i),e!==null&&(An(e,t,i,r),hu(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Bt(),r=Lr(t),i=er(n,r);i.tag=2,e!=null&&(i.callback=e),e=Vr(t,i,r),e!==null&&(An(e,t,r,n),hu(e,t,r))}};function ty(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!Ca(n,r)||!Ca(i,s):!0}function Mv(t,e,n){var r=!1,i=zr,s=e.contextType;return typeof s=="object"&&s!==null?s=wn(s):(i=tn(e)?Ci:Vt.current,r=e.contextTypes,s=(r=r!=null)?qs(t,i):zr),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Sc,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function ny(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Sc.enqueueReplaceState(e,e.state,null)}function Ad(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},Yf(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=wn(s):(s=tn(e)?Ci:Vt.current,i.context=qs(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(bd(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Sc.enqueueReplaceState(i,i.state,null),Uu(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Hs(t,e){try{var n="",r=e;do n+=xT(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function Lh(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Rd(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var Xx=typeof WeakMap=="function"?WeakMap:Map;function jv(t,e,n){n=er(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Ku||(Ku=!0,Fd=r),Rd(t,e)},n}function Fv(t,e,n){n=er(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){Rd(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Rd(t,e),typeof r!="function"&&(Or===null?Or=new Set([this]):Or.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function ry(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new Xx;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=hS.bind(null,t,e,n),e.then(t,t))}function iy(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function sy(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=er(-1,1),e.tag=2,Vr(n,e,1))),n.lanes|=1),t)}var Jx=lr.ReactCurrentOwner,Yt=!1;function Mt(t,e,n,r){e.child=t===null?pv(e,null,n,r):Ws(e,t.child,n,r)}function oy(t,e,n,r,i){n=n.render;var s=e.ref;return Fs(e,i),r=tp(t,e,n,r,s,i),n=np(),t!==null&&!Yt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,sr(t,e,i)):(Fe&&n&&$f(e),e.flags|=1,Mt(t,e,r,i),e.child)}function ay(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!dp(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,Bv(t,e,s,r,i)):(t=yu(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:Ca,n(o,r)&&t.ref===e.ref)return sr(t,e,i)}return e.flags|=1,t=Mr(s,r),t.ref=e.ref,t.return=e,e.child=t}function Bv(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(Ca(s,r)&&t.ref===e.ref)if(Yt=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(Yt=!0);else return e.lanes=t.lanes,sr(t,e,i)}return Cd(t,e,n,r,i)}function zv(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},De(Ns,sn),sn|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,De(Ns,sn),sn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,De(Ns,sn),sn|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,De(Ns,sn),sn|=r;return Mt(t,e,i,n),e.child}function Uv(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Cd(t,e,n,r,i){var s=tn(n)?Ci:Vt.current;return s=qs(e,s),Fs(e,i),n=tp(t,e,n,r,s,i),r=np(),t!==null&&!Yt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,sr(t,e,i)):(Fe&&r&&$f(e),e.flags|=1,Mt(t,e,n,i),e.child)}function ly(t,e,n,r,i){if(tn(n)){var s=!0;Mu(e)}else s=!1;if(Fs(e,i),e.stateNode===null)pu(t,e),Mv(e,n,r),Ad(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var u=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=wn(c):(c=tn(n)?Ci:Vt.current,c=qs(e,c));var f=n.getDerivedStateFromProps,m=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function";m||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||u!==c)&&ny(e,o,r,c),Ir=!1;var v=e.memoizedState;o.state=v,Uu(e,r,o,i),u=e.memoizedState,l!==r||v!==u||en.current||Ir?(typeof f=="function"&&(bd(e,n,f,r),u=e.memoizedState),(l=Ir||ty(e,n,l,r,v,u,c))?(m||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),o.props=r,o.state=u,o.context=c,r=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,gv(t,e),l=e.memoizedProps,c=e.type===e.elementType?l:xn(e.type,l),o.props=c,m=e.pendingProps,v=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=wn(u):(u=tn(n)?Ci:Vt.current,u=qs(e,u));var R=n.getDerivedStateFromProps;(f=typeof R=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==m||v!==u)&&ny(e,o,r,u),Ir=!1,v=e.memoizedState,o.state=v,Uu(e,r,o,i);var V=e.memoizedState;l!==m||v!==V||en.current||Ir?(typeof R=="function"&&(bd(e,n,R,r),V=e.memoizedState),(c=Ir||ty(e,n,c,r,v,V,u)||!1)?(f||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,V,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,V,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&v===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&v===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=V),o.props=r,o.state=V,o.context=u,r=c):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&v===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&v===t.memoizedState||(e.flags|=1024),r=!1)}return kd(t,e,n,r,s,i)}function kd(t,e,n,r,i,s){Uv(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&Kg(e,n,!1),sr(t,e,s);r=e.stateNode,Jx.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Ws(e,t.child,null,s),e.child=Ws(e,null,l,s)):Mt(t,e,l,s),e.memoizedState=r.state,i&&Kg(e,n,!0),e.child}function $v(t){var e=t.stateNode;e.pendingContext?Wg(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Wg(t,e.context,!1),Xf(t,e.containerInfo)}function uy(t,e,n,r,i){return Gs(),Gf(i),e.flags|=256,Mt(t,e,n,r),e.child}var Dd={dehydrated:null,treeContext:null,retryLane:0};function Nd(t){return{baseLanes:t,cachePool:null,transitions:null}}function qv(t,e,n){var r=e.pendingProps,i=qe.current,s=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(i&2)!==0),l?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),De(qe,i&1),t===null)return Sd(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Ac(o,r,0,null),t=Ai(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Nd(n),e.memoizedState=Dd,t):sp(e,o));if(i=t.memoizedState,i!==null&&(l=i.dehydrated,l!==null))return Zx(t,e,o,r,l,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,l=i.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=Mr(i,u),r.subtreeFlags=i.subtreeFlags&14680064),l!==null?s=Mr(l,s):(s=Ai(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?Nd(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=Dd,r}return s=t.child,t=s.sibling,r=Mr(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function sp(t,e){return e=Ac({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Yl(t,e,n,r){return r!==null&&Gf(r),Ws(e,t.child,null,n),t=sp(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Zx(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=Lh(Error(K(422))),Yl(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=Ac({mode:"visible",children:r.children},i,0,null),s=Ai(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&Ws(e,t.child,null,o),e.child.memoizedState=Nd(o),e.memoizedState=Dd,s);if(!(e.mode&1))return Yl(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var l=r.dgst;return r=l,s=Error(K(419)),r=Lh(s,r,void 0),Yl(t,e,o,r)}if(l=(o&t.childLanes)!==0,Yt||l){if(r=_t,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,ir(t,i),An(r,t,i,-1))}return hp(),r=Lh(Error(K(421))),Yl(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=dS.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,on=Nr(i.nextSibling),an=e,Fe=!0,Pn=null,t!==null&&(pn[mn++]=Xn,pn[mn++]=Jn,pn[mn++]=ki,Xn=t.id,Jn=t.overflow,ki=e),e=sp(e,r.children),e.flags|=4096,e)}function cy(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Pd(t.return,e,n)}function Mh(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function Gv(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(Mt(t,e,r.children,n),r=qe.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&cy(t,n,e);else if(t.tag===19)cy(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(De(qe,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&$u(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Mh(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&$u(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Mh(e,!0,n,null,s);break;case"together":Mh(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function pu(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function sr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Ni|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(K(153));if(e.child!==null){for(t=e.child,n=Mr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Mr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function eS(t,e,n){switch(e.tag){case 3:$v(e),Gs();break;case 5:yv(e);break;case 1:tn(e.type)&&Mu(e);break;case 4:Xf(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;De(Bu,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(De(qe,qe.current&1),e.flags|=128,null):n&e.child.childLanes?qv(t,e,n):(De(qe,qe.current&1),t=sr(t,e,n),t!==null?t.sibling:null);De(qe,qe.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Gv(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),De(qe,qe.current),r)break;return null;case 22:case 23:return e.lanes=0,zv(t,e,n)}return sr(t,e,n)}var Wv,Vd,Kv,Hv;Wv=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Vd=function(){};Kv=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Ti(jn.current);var s=null;switch(n){case"input":i=nd(t,i),r=nd(t,r),s=[];break;case"select":i=Ke({},i,{value:void 0}),r=Ke({},r,{value:void 0}),s=[];break;case"textarea":i=sd(t,i),r=sd(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Ou)}ad(n,r);var o;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var l=i[c];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Ta.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var u=r[c];if(l=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&u!==l&&(u!=null||l!=null))if(c==="style")if(l){for(o in l)!l.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&l[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(s||(s=[]),s.push(c,n)),n=u;else c==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,l=l?l.__html:void 0,u!=null&&l!==u&&(s=s||[]).push(c,u)):c==="children"?typeof u!="string"&&typeof u!="number"||(s=s||[]).push(c,""+u):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Ta.hasOwnProperty(c)?(u!=null&&c==="onScroll"&&Le("scroll",t),s||l===u||(s=[])):(s=s||[]).push(c,u))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};Hv=function(t,e,n,r){n!==r&&(e.flags|=4)};function Ko(t,e){if(!Fe)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function kt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function tS(t,e,n){var r=e.pendingProps;switch(qf(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return kt(e),null;case 1:return tn(e.type)&&Lu(),kt(e),null;case 3:return r=e.stateNode,Ks(),je(en),je(Vt),Zf(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Hl(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Pn!==null&&(Ud(Pn),Pn=null))),Vd(t,e),kt(e),null;case 5:Jf(e);var i=Ti(Oa.current);if(n=e.type,t!==null&&e.stateNode!=null)Kv(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(K(166));return kt(e),null}if(t=Ti(jn.current),Hl(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[Vn]=e,r[Na]=s,t=(e.mode&1)!==0,n){case"dialog":Le("cancel",r),Le("close",r);break;case"iframe":case"object":case"embed":Le("load",r);break;case"video":case"audio":for(i=0;i<ra.length;i++)Le(ra[i],r);break;case"source":Le("error",r);break;case"img":case"image":case"link":Le("error",r),Le("load",r);break;case"details":Le("toggle",r);break;case"input":vg(r,s),Le("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Le("invalid",r);break;case"textarea":Eg(r,s),Le("invalid",r)}ad(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var l=s[o];o==="children"?typeof l=="string"?r.textContent!==l&&(s.suppressHydrationWarning!==!0&&Kl(r.textContent,l,t),i=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(s.suppressHydrationWarning!==!0&&Kl(r.textContent,l,t),i=["children",""+l]):Ta.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&Le("scroll",r)}switch(n){case"input":Fl(r),wg(r,s,!0);break;case"textarea":Fl(r),Ig(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Ou)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=I_(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Vn]=e,t[Na]=r,Wv(t,e,!1,!1),e.stateNode=t;e:{switch(o=ld(n,r),n){case"dialog":Le("cancel",t),Le("close",t),i=r;break;case"iframe":case"object":case"embed":Le("load",t),i=r;break;case"video":case"audio":for(i=0;i<ra.length;i++)Le(ra[i],t);i=r;break;case"source":Le("error",t),i=r;break;case"img":case"image":case"link":Le("error",t),Le("load",t),i=r;break;case"details":Le("toggle",t),i=r;break;case"input":vg(t,r),i=nd(t,r),Le("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Ke({},r,{value:void 0}),Le("invalid",t);break;case"textarea":Eg(t,r),i=sd(t,r),Le("invalid",t);break;default:i=r}ad(n,i),l=i;for(s in l)if(l.hasOwnProperty(s)){var u=l[s];s==="style"?S_(t,u):s==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&T_(t,u)):s==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&xa(t,u):typeof u=="number"&&xa(t,""+u):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Ta.hasOwnProperty(s)?u!=null&&s==="onScroll"&&Le("scroll",t):u!=null&&Rf(t,s,u,o))}switch(n){case"input":Fl(t),wg(t,r,!1);break;case"textarea":Fl(t),Ig(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Br(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?Os(t,!!r.multiple,s,!1):r.defaultValue!=null&&Os(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Ou)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return kt(e),null;case 6:if(t&&e.stateNode!=null)Hv(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(K(166));if(n=Ti(Oa.current),Ti(jn.current),Hl(e)){if(r=e.stateNode,n=e.memoizedProps,r[Vn]=e,(s=r.nodeValue!==n)&&(t=an,t!==null))switch(t.tag){case 3:Kl(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Kl(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Vn]=e,e.stateNode=r}return kt(e),null;case 13:if(je(qe),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Fe&&on!==null&&e.mode&1&&!(e.flags&128))dv(),Gs(),e.flags|=98560,s=!1;else if(s=Hl(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(K(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(K(317));s[Vn]=e}else Gs(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;kt(e),s=!1}else Pn!==null&&(Ud(Pn),Pn=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||qe.current&1?ht===0&&(ht=3):hp())),e.updateQueue!==null&&(e.flags|=4),kt(e),null);case 4:return Ks(),Vd(t,e),t===null&&ka(e.stateNode.containerInfo),kt(e),null;case 10:return Hf(e.type._context),kt(e),null;case 17:return tn(e.type)&&Lu(),kt(e),null;case 19:if(je(qe),s=e.memoizedState,s===null)return kt(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)Ko(s,!1);else{if(ht!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=$u(t),o!==null){for(e.flags|=128,Ko(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return De(qe,qe.current&1|2),e.child}t=t.sibling}s.tail!==null&&Ze()>Qs&&(e.flags|=128,r=!0,Ko(s,!1),e.lanes=4194304)}else{if(!r)if(t=$u(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Ko(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Fe)return kt(e),null}else 2*Ze()-s.renderingStartTime>Qs&&n!==1073741824&&(e.flags|=128,r=!0,Ko(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Ze(),e.sibling=null,n=qe.current,De(qe,r?n&1|2:n&1),e):(kt(e),null);case 22:case 23:return cp(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?sn&1073741824&&(kt(e),e.subtreeFlags&6&&(e.flags|=8192)):kt(e),null;case 24:return null;case 25:return null}throw Error(K(156,e.tag))}function nS(t,e){switch(qf(e),e.tag){case 1:return tn(e.type)&&Lu(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Ks(),je(en),je(Vt),Zf(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Jf(e),null;case 13:if(je(qe),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(K(340));Gs()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return je(qe),null;case 4:return Ks(),null;case 10:return Hf(e.type._context),null;case 22:case 23:return cp(),null;case 24:return null;default:return null}}var Xl=!1,Nt=!1,rS=typeof WeakSet=="function"?WeakSet:Set,Z=null;function Ds(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ye(t,e,r)}else n.current=null}function Od(t,e,n){try{n()}catch(r){Ye(t,e,r)}}var hy=!1;function iS(t,e){if(_d=Du,t=Z_(),Uf(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,l=-1,u=-1,c=0,f=0,m=t,v=null;t:for(;;){for(var R;m!==n||i!==0&&m.nodeType!==3||(l=o+i),m!==s||r!==0&&m.nodeType!==3||(u=o+r),m.nodeType===3&&(o+=m.nodeValue.length),(R=m.firstChild)!==null;)v=m,m=R;for(;;){if(m===t)break t;if(v===n&&++c===i&&(l=o),v===s&&++f===r&&(u=o),(R=m.nextSibling)!==null)break;m=v,v=m.parentNode}m=R}n=l===-1||u===-1?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(vd={focusedElem:t,selectionRange:n},Du=!1,Z=e;Z!==null;)if(e=Z,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Z=t;else for(;Z!==null;){e=Z;try{var V=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(V!==null){var N=V.memoizedProps,L=V.memoizedState,C=e.stateNode,P=C.getSnapshotBeforeUpdate(e.elementType===e.type?N:xn(e.type,N),L);C.__reactInternalSnapshotBeforeUpdate=P}break;case 3:var x=e.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(K(163))}}catch(d){Ye(e,e.return,d)}if(t=e.sibling,t!==null){t.return=e.return,Z=t;break}Z=e.return}return V=hy,hy=!1,V}function pa(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&Od(e,n,s)}i=i.next}while(i!==r)}}function Pc(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Ld(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Qv(t){var e=t.alternate;e!==null&&(t.alternate=null,Qv(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Vn],delete e[Na],delete e[Id],delete e[Bx],delete e[zx])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Yv(t){return t.tag===5||t.tag===3||t.tag===4}function dy(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Yv(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Md(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Ou));else if(r!==4&&(t=t.child,t!==null))for(Md(t,e,n),t=t.sibling;t!==null;)Md(t,e,n),t=t.sibling}function jd(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(jd(t,e,n),t=t.sibling;t!==null;)jd(t,e,n),t=t.sibling}var Tt=null,Sn=!1;function yr(t,e,n){for(n=n.child;n!==null;)Xv(t,e,n),n=n.sibling}function Xv(t,e,n){if(Mn&&typeof Mn.onCommitFiberUnmount=="function")try{Mn.onCommitFiberUnmount(_c,n)}catch{}switch(n.tag){case 5:Nt||Ds(n,e);case 6:var r=Tt,i=Sn;Tt=null,yr(t,e,n),Tt=r,Sn=i,Tt!==null&&(Sn?(t=Tt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Tt.removeChild(n.stateNode));break;case 18:Tt!==null&&(Sn?(t=Tt,n=n.stateNode,t.nodeType===8?Ch(t.parentNode,n):t.nodeType===1&&Ch(t,n),Aa(t)):Ch(Tt,n.stateNode));break;case 4:r=Tt,i=Sn,Tt=n.stateNode.containerInfo,Sn=!0,yr(t,e,n),Tt=r,Sn=i;break;case 0:case 11:case 14:case 15:if(!Nt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&Od(n,e,o),i=i.next}while(i!==r)}yr(t,e,n);break;case 1:if(!Nt&&(Ds(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){Ye(n,e,l)}yr(t,e,n);break;case 21:yr(t,e,n);break;case 22:n.mode&1?(Nt=(r=Nt)||n.memoizedState!==null,yr(t,e,n),Nt=r):yr(t,e,n);break;default:yr(t,e,n)}}function fy(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new rS),e.forEach(function(r){var i=fS.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Tn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:Tt=l.stateNode,Sn=!1;break e;case 3:Tt=l.stateNode.containerInfo,Sn=!0;break e;case 4:Tt=l.stateNode.containerInfo,Sn=!0;break e}l=l.return}if(Tt===null)throw Error(K(160));Xv(s,o,i),Tt=null,Sn=!1;var u=i.alternate;u!==null&&(u.return=null),i.return=null}catch(c){Ye(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Jv(e,t),e=e.sibling}function Jv(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Tn(e,t),Dn(t),r&4){try{pa(3,t,t.return),Pc(3,t)}catch(N){Ye(t,t.return,N)}try{pa(5,t,t.return)}catch(N){Ye(t,t.return,N)}}break;case 1:Tn(e,t),Dn(t),r&512&&n!==null&&Ds(n,n.return);break;case 5:if(Tn(e,t),Dn(t),r&512&&n!==null&&Ds(n,n.return),t.flags&32){var i=t.stateNode;try{xa(i,"")}catch(N){Ye(t,t.return,N)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,l=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{l==="input"&&s.type==="radio"&&s.name!=null&&w_(i,s),ld(l,o);var c=ld(l,s);for(o=0;o<u.length;o+=2){var f=u[o],m=u[o+1];f==="style"?S_(i,m):f==="dangerouslySetInnerHTML"?T_(i,m):f==="children"?xa(i,m):Rf(i,f,m,c)}switch(l){case"input":rd(i,s);break;case"textarea":E_(i,s);break;case"select":var v=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var R=s.value;R!=null?Os(i,!!s.multiple,R,!1):v!==!!s.multiple&&(s.defaultValue!=null?Os(i,!!s.multiple,s.defaultValue,!0):Os(i,!!s.multiple,s.multiple?[]:"",!1))}i[Na]=s}catch(N){Ye(t,t.return,N)}}break;case 6:if(Tn(e,t),Dn(t),r&4){if(t.stateNode===null)throw Error(K(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(N){Ye(t,t.return,N)}}break;case 3:if(Tn(e,t),Dn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Aa(e.containerInfo)}catch(N){Ye(t,t.return,N)}break;case 4:Tn(e,t),Dn(t);break;case 13:Tn(e,t),Dn(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(lp=Ze())),r&4&&fy(t);break;case 22:if(f=n!==null&&n.memoizedState!==null,t.mode&1?(Nt=(c=Nt)||f,Tn(e,t),Nt=c):Tn(e,t),Dn(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!f&&t.mode&1)for(Z=t,f=t.child;f!==null;){for(m=Z=f;Z!==null;){switch(v=Z,R=v.child,v.tag){case 0:case 11:case 14:case 15:pa(4,v,v.return);break;case 1:Ds(v,v.return);var V=v.stateNode;if(typeof V.componentWillUnmount=="function"){r=v,n=v.return;try{e=r,V.props=e.memoizedProps,V.state=e.memoizedState,V.componentWillUnmount()}catch(N){Ye(r,n,N)}}break;case 5:Ds(v,v.return);break;case 22:if(v.memoizedState!==null){my(m);continue}}R!==null?(R.return=v,Z=R):my(m)}f=f.sibling}e:for(f=null,m=t;;){if(m.tag===5){if(f===null){f=m;try{i=m.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(l=m.stateNode,u=m.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,l.style.display=x_("display",o))}catch(N){Ye(t,t.return,N)}}}else if(m.tag===6){if(f===null)try{m.stateNode.nodeValue=c?"":m.memoizedProps}catch(N){Ye(t,t.return,N)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===t)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===t)break e;for(;m.sibling===null;){if(m.return===null||m.return===t)break e;f===m&&(f=null),m=m.return}f===m&&(f=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:Tn(e,t),Dn(t),r&4&&fy(t);break;case 21:break;default:Tn(e,t),Dn(t)}}function Dn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Yv(n)){var r=n;break e}n=n.return}throw Error(K(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(xa(i,""),r.flags&=-33);var s=dy(t);jd(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,l=dy(t);Md(t,l,o);break;default:throw Error(K(161))}}catch(u){Ye(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function sS(t,e,n){Z=t,Zv(t)}function Zv(t,e,n){for(var r=(t.mode&1)!==0;Z!==null;){var i=Z,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||Xl;if(!o){var l=i.alternate,u=l!==null&&l.memoizedState!==null||Nt;l=Xl;var c=Nt;if(Xl=o,(Nt=u)&&!c)for(Z=i;Z!==null;)o=Z,u=o.child,o.tag===22&&o.memoizedState!==null?gy(i):u!==null?(u.return=o,Z=u):gy(i);for(;s!==null;)Z=s,Zv(s),s=s.sibling;Z=i,Xl=l,Nt=c}py(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,Z=s):py(t)}}function py(t){for(;Z!==null;){var e=Z;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Nt||Pc(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Nt)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:xn(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&Jg(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Jg(e,o,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var f=c.memoizedState;if(f!==null){var m=f.dehydrated;m!==null&&Aa(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(K(163))}Nt||e.flags&512&&Ld(e)}catch(v){Ye(e,e.return,v)}}if(e===t){Z=null;break}if(n=e.sibling,n!==null){n.return=e.return,Z=n;break}Z=e.return}}function my(t){for(;Z!==null;){var e=Z;if(e===t){Z=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Z=n;break}Z=e.return}}function gy(t){for(;Z!==null;){var e=Z;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Pc(4,e)}catch(u){Ye(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(u){Ye(e,i,u)}}var s=e.return;try{Ld(e)}catch(u){Ye(e,s,u)}break;case 5:var o=e.return;try{Ld(e)}catch(u){Ye(e,o,u)}}}catch(u){Ye(e,e.return,u)}if(e===t){Z=null;break}var l=e.sibling;if(l!==null){l.return=e.return,Z=l;break}Z=e.return}}var oS=Math.ceil,Wu=lr.ReactCurrentDispatcher,op=lr.ReactCurrentOwner,_n=lr.ReactCurrentBatchConfig,we=0,_t=null,at=null,Pt=0,sn=0,Ns=Zr(0),ht=0,Fa=null,Ni=0,bc=0,ap=0,ma=null,Ht=null,lp=0,Qs=1/0,Hn=null,Ku=!1,Fd=null,Or=null,Jl=!1,Ar=null,Hu=0,ga=0,Bd=null,mu=-1,gu=0;function Bt(){return we&6?Ze():mu!==-1?mu:mu=Ze()}function Lr(t){return t.mode&1?we&2&&Pt!==0?Pt&-Pt:$x.transition!==null?(gu===0&&(gu=M_()),gu):(t=be,t!==0||(t=window.event,t=t===void 0?16:q_(t.type)),t):1}function An(t,e,n,r){if(50<ga)throw ga=0,Bd=null,Error(K(185));rl(t,n,r),(!(we&2)||t!==_t)&&(t===_t&&(!(we&2)&&(bc|=n),ht===4&&xr(t,Pt)),nn(t,r),n===1&&we===0&&!(e.mode&1)&&(Qs=Ze()+500,Tc&&ei()))}function nn(t,e){var n=t.callbackNode;$T(t,e);var r=ku(t,t===_t?Pt:0);if(r===0)n!==null&&Sg(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Sg(n),e===1)t.tag===0?Ux(yy.bind(null,t)):uv(yy.bind(null,t)),jx(function(){!(we&6)&&ei()}),n=null;else{switch(j_(r)){case 1:n=Vf;break;case 4:n=O_;break;case 16:n=Cu;break;case 536870912:n=L_;break;default:n=Cu}n=aw(n,ew.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function ew(t,e){if(mu=-1,gu=0,we&6)throw Error(K(327));var n=t.callbackNode;if(Bs()&&t.callbackNode!==n)return null;var r=ku(t,t===_t?Pt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Qu(t,r);else{e=r;var i=we;we|=2;var s=nw();(_t!==t||Pt!==e)&&(Hn=null,Qs=Ze()+500,bi(t,e));do try{uS();break}catch(l){tw(t,l)}while(!0);Kf(),Wu.current=s,we=i,at!==null?e=0:(_t=null,Pt=0,e=ht)}if(e!==0){if(e===2&&(i=fd(t),i!==0&&(r=i,e=zd(t,i))),e===1)throw n=Fa,bi(t,0),xr(t,r),nn(t,Ze()),n;if(e===6)xr(t,r);else{if(i=t.current.alternate,!(r&30)&&!aS(i)&&(e=Qu(t,r),e===2&&(s=fd(t),s!==0&&(r=s,e=zd(t,s))),e===1))throw n=Fa,bi(t,0),xr(t,r),nn(t,Ze()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(K(345));case 2:fi(t,Ht,Hn);break;case 3:if(xr(t,r),(r&130023424)===r&&(e=lp+500-Ze(),10<e)){if(ku(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Bt(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Ed(fi.bind(null,t,Ht,Hn),e);break}fi(t,Ht,Hn);break;case 4:if(xr(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-bn(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=Ze()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*oS(r/1960))-r,10<r){t.timeoutHandle=Ed(fi.bind(null,t,Ht,Hn),r);break}fi(t,Ht,Hn);break;case 5:fi(t,Ht,Hn);break;default:throw Error(K(329))}}}return nn(t,Ze()),t.callbackNode===n?ew.bind(null,t):null}function zd(t,e){var n=ma;return t.current.memoizedState.isDehydrated&&(bi(t,e).flags|=256),t=Qu(t,e),t!==2&&(e=Ht,Ht=n,e!==null&&Ud(e)),t}function Ud(t){Ht===null?Ht=t:Ht.push.apply(Ht,t)}function aS(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Rn(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function xr(t,e){for(e&=~ap,e&=~bc,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-bn(e),r=1<<n;t[n]=-1,e&=~r}}function yy(t){if(we&6)throw Error(K(327));Bs();var e=ku(t,0);if(!(e&1))return nn(t,Ze()),null;var n=Qu(t,e);if(t.tag!==0&&n===2){var r=fd(t);r!==0&&(e=r,n=zd(t,r))}if(n===1)throw n=Fa,bi(t,0),xr(t,e),nn(t,Ze()),n;if(n===6)throw Error(K(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,fi(t,Ht,Hn),nn(t,Ze()),null}function up(t,e){var n=we;we|=1;try{return t(e)}finally{we=n,we===0&&(Qs=Ze()+500,Tc&&ei())}}function Vi(t){Ar!==null&&Ar.tag===0&&!(we&6)&&Bs();var e=we;we|=1;var n=_n.transition,r=be;try{if(_n.transition=null,be=1,t)return t()}finally{be=r,_n.transition=n,we=e,!(we&6)&&ei()}}function cp(){sn=Ns.current,je(Ns)}function bi(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,Mx(n)),at!==null)for(n=at.return;n!==null;){var r=n;switch(qf(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Lu();break;case 3:Ks(),je(en),je(Vt),Zf();break;case 5:Jf(r);break;case 4:Ks();break;case 13:je(qe);break;case 19:je(qe);break;case 10:Hf(r.type._context);break;case 22:case 23:cp()}n=n.return}if(_t=t,at=t=Mr(t.current,null),Pt=sn=e,ht=0,Fa=null,ap=bc=Ni=0,Ht=ma=null,Ii!==null){for(e=0;e<Ii.length;e++)if(n=Ii[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}Ii=null}return t}function tw(t,e){do{var n=at;try{if(Kf(),du.current=Gu,qu){for(var r=Ge.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}qu=!1}if(Di=0,gt=ct=Ge=null,fa=!1,La=0,op.current=null,n===null||n.return===null){ht=1,Fa=e,at=null;break}e:{var s=t,o=n.return,l=n,u=e;if(e=Pt,l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var c=u,f=l,m=f.tag;if(!(f.mode&1)&&(m===0||m===11||m===15)){var v=f.alternate;v?(f.updateQueue=v.updateQueue,f.memoizedState=v.memoizedState,f.lanes=v.lanes):(f.updateQueue=null,f.memoizedState=null)}var R=iy(o);if(R!==null){R.flags&=-257,sy(R,o,l,s,e),R.mode&1&&ry(s,c,e),e=R,u=c;var V=e.updateQueue;if(V===null){var N=new Set;N.add(u),e.updateQueue=N}else V.add(u);break e}else{if(!(e&1)){ry(s,c,e),hp();break e}u=Error(K(426))}}else if(Fe&&l.mode&1){var L=iy(o);if(L!==null){!(L.flags&65536)&&(L.flags|=256),sy(L,o,l,s,e),Gf(Hs(u,l));break e}}s=u=Hs(u,l),ht!==4&&(ht=2),ma===null?ma=[s]:ma.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var C=jv(s,u,e);Xg(s,C);break e;case 1:l=u;var P=s.type,x=s.stateNode;if(!(s.flags&128)&&(typeof P.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(Or===null||!Or.has(x)))){s.flags|=65536,e&=-e,s.lanes|=e;var d=Fv(s,l,e);Xg(s,d);break e}}s=s.return}while(s!==null)}iw(n)}catch(g){e=g,at===n&&n!==null&&(at=n=n.return);continue}break}while(!0)}function nw(){var t=Wu.current;return Wu.current=Gu,t===null?Gu:t}function hp(){(ht===0||ht===3||ht===2)&&(ht=4),_t===null||!(Ni&268435455)&&!(bc&268435455)||xr(_t,Pt)}function Qu(t,e){var n=we;we|=2;var r=nw();(_t!==t||Pt!==e)&&(Hn=null,bi(t,e));do try{lS();break}catch(i){tw(t,i)}while(!0);if(Kf(),we=n,Wu.current=r,at!==null)throw Error(K(261));return _t=null,Pt=0,ht}function lS(){for(;at!==null;)rw(at)}function uS(){for(;at!==null&&!VT();)rw(at)}function rw(t){var e=ow(t.alternate,t,sn);t.memoizedProps=t.pendingProps,e===null?iw(t):at=e,op.current=null}function iw(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=nS(n,e),n!==null){n.flags&=32767,at=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{ht=6,at=null;return}}else if(n=tS(n,e,sn),n!==null){at=n;return}if(e=e.sibling,e!==null){at=e;return}at=e=t}while(e!==null);ht===0&&(ht=5)}function fi(t,e,n){var r=be,i=_n.transition;try{_n.transition=null,be=1,cS(t,e,n,r)}finally{_n.transition=i,be=r}return null}function cS(t,e,n,r){do Bs();while(Ar!==null);if(we&6)throw Error(K(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(K(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(qT(t,s),t===_t&&(at=_t=null,Pt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Jl||(Jl=!0,aw(Cu,function(){return Bs(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=_n.transition,_n.transition=null;var o=be;be=1;var l=we;we|=4,op.current=null,iS(t,n),Jv(n,t),Cx(vd),Du=!!_d,vd=_d=null,t.current=n,sS(n),OT(),we=l,be=o,_n.transition=s}else t.current=n;if(Jl&&(Jl=!1,Ar=t,Hu=i),s=t.pendingLanes,s===0&&(Or=null),jT(n.stateNode),nn(t,Ze()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Ku)throw Ku=!1,t=Fd,Fd=null,t;return Hu&1&&t.tag!==0&&Bs(),s=t.pendingLanes,s&1?t===Bd?ga++:(ga=0,Bd=t):ga=0,ei(),null}function Bs(){if(Ar!==null){var t=j_(Hu),e=_n.transition,n=be;try{if(_n.transition=null,be=16>t?16:t,Ar===null)var r=!1;else{if(t=Ar,Ar=null,Hu=0,we&6)throw Error(K(331));var i=we;for(we|=4,Z=t.current;Z!==null;){var s=Z,o=s.child;if(Z.flags&16){var l=s.deletions;if(l!==null){for(var u=0;u<l.length;u++){var c=l[u];for(Z=c;Z!==null;){var f=Z;switch(f.tag){case 0:case 11:case 15:pa(8,f,s)}var m=f.child;if(m!==null)m.return=f,Z=m;else for(;Z!==null;){f=Z;var v=f.sibling,R=f.return;if(Qv(f),f===c){Z=null;break}if(v!==null){v.return=R,Z=v;break}Z=R}}}var V=s.alternate;if(V!==null){var N=V.child;if(N!==null){V.child=null;do{var L=N.sibling;N.sibling=null,N=L}while(N!==null)}}Z=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,Z=o;else e:for(;Z!==null;){if(s=Z,s.flags&2048)switch(s.tag){case 0:case 11:case 15:pa(9,s,s.return)}var C=s.sibling;if(C!==null){C.return=s.return,Z=C;break e}Z=s.return}}var P=t.current;for(Z=P;Z!==null;){o=Z;var x=o.child;if(o.subtreeFlags&2064&&x!==null)x.return=o,Z=x;else e:for(o=P;Z!==null;){if(l=Z,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Pc(9,l)}}catch(g){Ye(l,l.return,g)}if(l===o){Z=null;break e}var d=l.sibling;if(d!==null){d.return=l.return,Z=d;break e}Z=l.return}}if(we=i,ei(),Mn&&typeof Mn.onPostCommitFiberRoot=="function")try{Mn.onPostCommitFiberRoot(_c,t)}catch{}r=!0}return r}finally{be=n,_n.transition=e}}return!1}function _y(t,e,n){e=Hs(n,e),e=jv(t,e,1),t=Vr(t,e,1),e=Bt(),t!==null&&(rl(t,1,e),nn(t,e))}function Ye(t,e,n){if(t.tag===3)_y(t,t,n);else for(;e!==null;){if(e.tag===3){_y(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Or===null||!Or.has(r))){t=Hs(n,t),t=Fv(e,t,1),e=Vr(e,t,1),t=Bt(),e!==null&&(rl(e,1,t),nn(e,t));break}}e=e.return}}function hS(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Bt(),t.pingedLanes|=t.suspendedLanes&n,_t===t&&(Pt&n)===n&&(ht===4||ht===3&&(Pt&130023424)===Pt&&500>Ze()-lp?bi(t,0):ap|=n),nn(t,e)}function sw(t,e){e===0&&(t.mode&1?(e=Ul,Ul<<=1,!(Ul&130023424)&&(Ul=4194304)):e=1);var n=Bt();t=ir(t,e),t!==null&&(rl(t,e,n),nn(t,n))}function dS(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),sw(t,n)}function fS(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(K(314))}r!==null&&r.delete(e),sw(t,n)}var ow;ow=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||en.current)Yt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Yt=!1,eS(t,e,n);Yt=!!(t.flags&131072)}else Yt=!1,Fe&&e.flags&1048576&&cv(e,Fu,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;pu(t,e),t=e.pendingProps;var i=qs(e,Vt.current);Fs(e,n),i=tp(null,e,r,t,i,n);var s=np();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,tn(r)?(s=!0,Mu(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Yf(e),i.updater=Sc,e.stateNode=i,i._reactInternals=e,Ad(e,r,t,n),e=kd(null,e,r,!0,s,n)):(e.tag=0,Fe&&s&&$f(e),Mt(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(pu(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=mS(r),t=xn(r,t),i){case 0:e=Cd(null,e,r,t,n);break e;case 1:e=ly(null,e,r,t,n);break e;case 11:e=oy(null,e,r,t,n);break e;case 14:e=ay(null,e,r,xn(r.type,t),n);break e}throw Error(K(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:xn(r,i),Cd(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:xn(r,i),ly(t,e,r,i,n);case 3:e:{if($v(e),t===null)throw Error(K(387));r=e.pendingProps,s=e.memoizedState,i=s.element,gv(t,e),Uu(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Hs(Error(K(423)),e),e=uy(t,e,r,n,i);break e}else if(r!==i){i=Hs(Error(K(424)),e),e=uy(t,e,r,n,i);break e}else for(on=Nr(e.stateNode.containerInfo.firstChild),an=e,Fe=!0,Pn=null,n=pv(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Gs(),r===i){e=sr(t,e,n);break e}Mt(t,e,r,n)}e=e.child}return e;case 5:return yv(e),t===null&&Sd(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,wd(r,i)?o=null:s!==null&&wd(r,s)&&(e.flags|=32),Uv(t,e),Mt(t,e,o,n),e.child;case 6:return t===null&&Sd(e),null;case 13:return qv(t,e,n);case 4:return Xf(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Ws(e,null,r,n):Mt(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:xn(r,i),oy(t,e,r,i,n);case 7:return Mt(t,e,e.pendingProps,n),e.child;case 8:return Mt(t,e,e.pendingProps.children,n),e.child;case 12:return Mt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,De(Bu,r._currentValue),r._currentValue=o,s!==null)if(Rn(s.value,o)){if(s.children===i.children&&!en.current){e=sr(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var l=s.dependencies;if(l!==null){o=s.child;for(var u=l.firstContext;u!==null;){if(u.context===r){if(s.tag===1){u=er(-1,n&-n),u.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var f=c.pending;f===null?u.next=u:(u.next=f.next,f.next=u),c.pending=u}}s.lanes|=n,u=s.alternate,u!==null&&(u.lanes|=n),Pd(s.return,n,e),l.lanes|=n;break}u=u.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(K(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),Pd(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Mt(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Fs(e,n),i=wn(i),r=r(i),e.flags|=1,Mt(t,e,r,n),e.child;case 14:return r=e.type,i=xn(r,e.pendingProps),i=xn(r.type,i),ay(t,e,r,i,n);case 15:return Bv(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:xn(r,i),pu(t,e),e.tag=1,tn(r)?(t=!0,Mu(e)):t=!1,Fs(e,n),Mv(e,r,i),Ad(e,r,i,n),kd(null,e,r,!0,t,n);case 19:return Gv(t,e,n);case 22:return zv(t,e,n)}throw Error(K(156,e.tag))};function aw(t,e){return V_(t,e)}function pS(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function gn(t,e,n,r){return new pS(t,e,n,r)}function dp(t){return t=t.prototype,!(!t||!t.isReactComponent)}function mS(t){if(typeof t=="function")return dp(t)?1:0;if(t!=null){if(t=t.$$typeof,t===kf)return 11;if(t===Df)return 14}return 2}function Mr(t,e){var n=t.alternate;return n===null?(n=gn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function yu(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")dp(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Ts:return Ai(n.children,i,s,e);case Cf:o=8,i|=8;break;case Jh:return t=gn(12,n,e,i|2),t.elementType=Jh,t.lanes=s,t;case Zh:return t=gn(13,n,e,i),t.elementType=Zh,t.lanes=s,t;case ed:return t=gn(19,n,e,i),t.elementType=ed,t.lanes=s,t;case y_:return Ac(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case m_:o=10;break e;case g_:o=9;break e;case kf:o=11;break e;case Df:o=14;break e;case Er:o=16,r=null;break e}throw Error(K(130,t==null?t:typeof t,""))}return e=gn(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function Ai(t,e,n,r){return t=gn(7,t,r,e),t.lanes=n,t}function Ac(t,e,n,r){return t=gn(22,t,r,e),t.elementType=y_,t.lanes=n,t.stateNode={isHidden:!1},t}function jh(t,e,n){return t=gn(6,t,null,e),t.lanes=n,t}function Fh(t,e,n){return e=gn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function gS(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=vh(0),this.expirationTimes=vh(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=vh(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function fp(t,e,n,r,i,s,o,l,u){return t=new gS(t,e,n,l,u),e===1?(e=1,s===!0&&(e|=8)):e=0,s=gn(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Yf(s),t}function yS(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Is,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function lw(t){if(!t)return zr;t=t._reactInternals;e:{if(Ki(t)!==t||t.tag!==1)throw Error(K(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(tn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(K(171))}if(t.tag===1){var n=t.type;if(tn(n))return lv(t,n,e)}return e}function uw(t,e,n,r,i,s,o,l,u){return t=fp(n,r,!0,t,i,s,o,l,u),t.context=lw(null),n=t.current,r=Bt(),i=Lr(n),s=er(r,i),s.callback=e??null,Vr(n,s,i),t.current.lanes=i,rl(t,i,r),nn(t,r),t}function Rc(t,e,n,r){var i=e.current,s=Bt(),o=Lr(i);return n=lw(n),e.context===null?e.context=n:e.pendingContext=n,e=er(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Vr(i,e,o),t!==null&&(An(t,i,o,s),hu(t,i,o)),o}function Yu(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function vy(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function pp(t,e){vy(t,e),(t=t.alternate)&&vy(t,e)}function _S(){return null}var cw=typeof reportError=="function"?reportError:function(t){console.error(t)};function mp(t){this._internalRoot=t}Cc.prototype.render=mp.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(K(409));Rc(t,e,null,null)};Cc.prototype.unmount=mp.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Vi(function(){Rc(null,t,null,null)}),e[rr]=null}};function Cc(t){this._internalRoot=t}Cc.prototype.unstable_scheduleHydration=function(t){if(t){var e=z_();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Tr.length&&e!==0&&e<Tr[n].priority;n++);Tr.splice(n,0,t),n===0&&$_(t)}};function gp(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function kc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function wy(){}function vS(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=Yu(o);s.call(c)}}var o=uw(e,r,t,0,null,!1,!1,"",wy);return t._reactRootContainer=o,t[rr]=o.current,ka(t.nodeType===8?t.parentNode:t),Vi(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var l=r;r=function(){var c=Yu(u);l.call(c)}}var u=fp(t,0,!1,null,null,!1,!1,"",wy);return t._reactRootContainer=u,t[rr]=u.current,ka(t.nodeType===8?t.parentNode:t),Vi(function(){Rc(e,u,n,r)}),u}function Dc(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var l=i;i=function(){var u=Yu(o);l.call(u)}}Rc(e,o,t,i)}else o=vS(n,e,t,i,r);return Yu(o)}F_=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=na(e.pendingLanes);n!==0&&(Of(e,n|1),nn(e,Ze()),!(we&6)&&(Qs=Ze()+500,ei()))}break;case 13:Vi(function(){var r=ir(t,1);if(r!==null){var i=Bt();An(r,t,1,i)}}),pp(t,1)}};Lf=function(t){if(t.tag===13){var e=ir(t,134217728);if(e!==null){var n=Bt();An(e,t,134217728,n)}pp(t,134217728)}};B_=function(t){if(t.tag===13){var e=Lr(t),n=ir(t,e);if(n!==null){var r=Bt();An(n,t,e,r)}pp(t,e)}};z_=function(){return be};U_=function(t,e){var n=be;try{return be=t,e()}finally{be=n}};cd=function(t,e,n){switch(e){case"input":if(rd(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Ic(r);if(!i)throw Error(K(90));v_(r),rd(r,i)}}}break;case"textarea":E_(t,n);break;case"select":e=n.value,e!=null&&Os(t,!!n.multiple,e,!1)}};A_=up;R_=Vi;var wS={usingClientEntryPoint:!1,Events:[sl,bs,Ic,P_,b_,up]},Ho={findFiberByHostInstance:Ei,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ES={bundleType:Ho.bundleType,version:Ho.version,rendererPackageName:Ho.rendererPackageName,rendererConfig:Ho.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:lr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=D_(t),t===null?null:t.stateNode},findFiberByHostInstance:Ho.findFiberByHostInstance||_S,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Zl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Zl.isDisabled&&Zl.supportsFiber)try{_c=Zl.inject(ES),Mn=Zl}catch{}}cn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=wS;cn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!gp(e))throw Error(K(200));return yS(t,e,null,n)};cn.createRoot=function(t,e){if(!gp(t))throw Error(K(299));var n=!1,r="",i=cw;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=fp(t,1,!1,null,null,n,!1,r,i),t[rr]=e.current,ka(t.nodeType===8?t.parentNode:t),new mp(e)};cn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(K(188)):(t=Object.keys(t).join(","),Error(K(268,t)));return t=D_(e),t=t===null?null:t.stateNode,t};cn.flushSync=function(t){return Vi(t)};cn.hydrate=function(t,e,n){if(!kc(e))throw Error(K(200));return Dc(null,t,e,!0,n)};cn.hydrateRoot=function(t,e,n){if(!gp(t))throw Error(K(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=cw;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=uw(e,null,t,1,n??null,i,!1,s,o),t[rr]=e.current,ka(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Cc(e)};cn.render=function(t,e,n){if(!kc(e))throw Error(K(200));return Dc(null,t,e,!1,n)};cn.unmountComponentAtNode=function(t){if(!kc(t))throw Error(K(40));return t._reactRootContainer?(Vi(function(){Dc(null,null,t,!1,function(){t._reactRootContainer=null,t[rr]=null})}),!0):!1};cn.unstable_batchedUpdates=up;cn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!kc(n))throw Error(K(200));if(t==null||t._reactInternals===void 0)throw Error(K(38));return Dc(t,e,n,!1,r)};cn.version="18.3.1-next-f1338f8080-20240426";function hw(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(hw)}catch(t){console.error(t)}}hw(),h_.exports=cn;var IS=h_.exports,Ey=IS;Yh.createRoot=Ey.createRoot,Yh.hydrateRoot=Ey.hydrateRoot;/**
 * @remix-run/router v1.18.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Xu(){return Xu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Xu.apply(this,arguments)}var xi;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(xi||(xi={}));const Iy="popstate";function TS(t){t===void 0&&(t={});function e(r,i){let{pathname:s,search:o,hash:l}=r.location;return $d("",{pathname:s,search:o,hash:l},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:dw(i)}return SS(e,n,null,t)}function yp(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function xS(){return Math.random().toString(36).substr(2,8)}function Ty(t,e){return{usr:t.state,key:t.key,idx:e}}function $d(t,e,n,r){return n===void 0&&(n=null),Xu({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?fw(e):e,{state:n,key:e&&e.key||r||xS()})}function dw(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function fw(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function SS(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,l=xi.Pop,u=null,c=f();c==null&&(c=0,o.replaceState(Xu({},o.state,{idx:c}),""));function f(){return(o.state||{idx:null}).idx}function m(){l=xi.Pop;let L=f(),C=L==null?null:L-c;c=L,u&&u({action:l,location:N.location,delta:C})}function v(L,C){l=xi.Push;let P=$d(N.location,L,C);c=f()+1;let x=Ty(P,c),d=N.createHref(P);try{o.pushState(x,"",d)}catch(g){if(g instanceof DOMException&&g.name==="DataCloneError")throw g;i.location.assign(d)}s&&u&&u({action:l,location:N.location,delta:1})}function R(L,C){l=xi.Replace;let P=$d(N.location,L,C);c=f();let x=Ty(P,c),d=N.createHref(P);o.replaceState(x,"",d),s&&u&&u({action:l,location:N.location,delta:0})}function V(L){let C=i.location.origin!=="null"?i.location.origin:i.location.href,P=typeof L=="string"?L:dw(L);return P=P.replace(/ $/,"%20"),yp(C,"No window.location.(origin|href) available to create URL for href: "+P),new URL(P,C)}let N={get action(){return l},get location(){return t(i,o)},listen(L){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(Iy,m),u=L,()=>{i.removeEventListener(Iy,m),u=null}},createHref(L){return e(i,L)},createURL:V,encodeLocation(L){let C=V(L);return{pathname:C.pathname,search:C.search,hash:C.hash}},push:v,replace:R,go(L){return o.go(L)}};return N}var xy;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(xy||(xy={}));function PS(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}const pw=["post","put","patch","delete"];new Set(pw);const bS=["get",...pw];new Set(bS);/**
 * React Router v6.25.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function qd(){return qd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},qd.apply(this,arguments)}const AS=ee.createContext(null),_p=ee.createContext(null);function mw(){return ee.useContext(_p)!=null}function RS(){return mw()||yp(!1),ee.useContext(_p).location}function CS(t){let{basename:e="/",children:n=null,location:r,navigationType:i=xi.Pop,navigator:s,static:o=!1,future:l}=t;mw()&&yp(!1);let u=e.replace(/^\/*/,"/"),c=ee.useMemo(()=>({basename:u,navigator:s,static:o,future:qd({v7_relativeSplatPath:!1},l)}),[u,l,s,o]);typeof r=="string"&&(r=fw(r));let{pathname:f="/",search:m="",hash:v="",state:R=null,key:V="default"}=r,N=ee.useMemo(()=>{let L=PS(f,u);return L==null?null:{location:{pathname:L,search:m,hash:v,state:R,key:V},navigationType:i}},[u,f,m,v,R,V,i]);return N==null?null:ee.createElement(AS.Provider,{value:c},ee.createElement(_p.Provider,{children:n,value:N}))}new Promise(()=>{});/**
 * React Router DOM v6.25.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const kS="6";try{window.__reactRouterVersion=kS}catch{}const DS="startTransition",Sy=hT[DS];function NS(t){let{basename:e,children:n,future:r,window:i}=t,s=ee.useRef();s.current==null&&(s.current=TS({window:i,v5Compat:!0}));let o=s.current,[l,u]=ee.useState({action:o.action,location:o.location}),{v7_startTransition:c}=r||{},f=ee.useCallback(m=>{c&&Sy?Sy(()=>u(m)):u(m)},[u,c]);return ee.useLayoutEffect(()=>o.listen(f),[o,f]),ee.createElement(CS,{basename:e,children:n,location:l.location,navigationType:l.action,navigator:o,future:r})}var Py;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Py||(Py={}));var by;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(by||(by={}));var Gd={exports:{}};(function(t,e){(function(n,r){r(e)})(HI,function(n){class r{constructor(d,g){this.state={angle:0,area:[],position:{x:0,y:0},hardAngle:0,hardDrawingAngle:0},this.createdDensity=g,this.nowDrawingDensity=this.createdDensity,this.render=d}setDensity(d){this.createdDensity=d,this.nowDrawingDensity=d}setDrawingDensity(d){this.nowDrawingDensity=d}setPosition(d){this.state.position=d}setAngle(d){this.state.angle=d}setArea(d){this.state.area=d}setHardDrawingAngle(d){this.state.hardDrawingAngle=d}setHardAngle(d){this.state.hardAngle=d,this.state.hardDrawingAngle=d}setOrientation(d){this.orientation=d}getDrawingDensity(){return this.nowDrawingDensity}getDensity(){return this.createdDensity}getHardAngle(){return this.state.hardAngle}}class i extends r{constructor(d,g,I){super(d,I),this.image=null,this.isLoad=!1,this.loadingAngle=0,this.image=new Image,this.image.src=g}draw(d){const g=this.render.getContext(),I=this.render.convertToGlobal(this.state.position),_=this.render.getRect().pageWidth,y=this.render.getRect().height;g.save(),g.translate(I.x,I.y),g.beginPath();for(let w of this.state.area)w!==null&&(w=this.render.convertToGlobal(w),g.lineTo(w.x-I.x,w.y-I.y));g.rotate(this.state.angle),g.clip(),this.isLoad?g.drawImage(this.image,0,0,_,y):this.drawLoader(g,{x:0,y:0},_,y),g.restore()}simpleDraw(d){const g=this.render.getRect(),I=this.render.getContext(),_=g.pageWidth,y=g.height,w=d===1?g.left+g.pageWidth:g.left,S=g.top;this.isLoad?I.drawImage(this.image,w,S,_,y):this.drawLoader(I,{x:w,y:S},_,y)}drawLoader(d,g,I,_){d.beginPath(),d.strokeStyle="rgb(200, 200, 200)",d.fillStyle="rgb(255, 255, 255)",d.lineWidth=1,d.rect(g.x+1,g.y+1,I-1,_-1),d.stroke(),d.fill();const y={x:g.x+I/2,y:g.y+_/2};d.beginPath(),d.lineWidth=10,d.arc(y.x,y.y,20,this.loadingAngle,3*Math.PI/2+this.loadingAngle),d.stroke(),d.closePath(),this.loadingAngle+=.07,this.loadingAngle>=2*Math.PI&&(this.loadingAngle=0)}load(){this.isLoad||(this.image.onload=()=>{this.isLoad=!0})}newTemporaryCopy(){return this}getTemporaryCopy(){return this}hideTemporaryCopy(){}}class s{constructor(d,g){this.pages=[],this.currentPageIndex=0,this.currentSpreadIndex=0,this.landscapeSpread=[],this.portraitSpread=[],this.render=g,this.app=d,this.currentPageIndex=0,this.isShowCover=this.app.getSettings().showCover}destroy(){this.pages=[]}createSpread(){this.landscapeSpread=[],this.portraitSpread=[];for(let g=0;g<this.pages.length;g++)this.portraitSpread.push([g]);let d=0;this.isShowCover&&(this.pages[0].setDensity("hard"),this.landscapeSpread.push([d]),d++);for(let g=d;g<this.pages.length;g+=2)g<this.pages.length-1?this.landscapeSpread.push([g,g+1]):(this.landscapeSpread.push([g]),this.pages[g].setDensity("hard"))}getSpread(){return this.render.getOrientation()==="landscape"?this.landscapeSpread:this.portraitSpread}getSpreadIndexByPage(d){const g=this.getSpread();for(let I=0;I<g.length;I++)if(d===g[I][0]||d===g[I][1])return I;return null}getPageCount(){return this.pages.length}getPages(){return this.pages}getPage(d){if(d>=0&&d<this.pages.length)return this.pages[d];throw new Error("Invalid page number")}nextBy(d){const g=this.pages.indexOf(d);return g<this.pages.length-1?this.pages[g+1]:null}prevBy(d){const g=this.pages.indexOf(d);return g>0?this.pages[g-1]:null}getFlippingPage(d){const g=this.currentSpreadIndex;if(this.render.getOrientation()==="portrait")return d===0?this.pages[g].newTemporaryCopy():this.pages[g-1];{const I=d===0?this.getSpread()[g+1]:this.getSpread()[g-1];return I.length===1||d===0?this.pages[I[0]]:this.pages[I[1]]}}getBottomPage(d){const g=this.currentSpreadIndex;if(this.render.getOrientation()==="portrait")return d===0?this.pages[g+1]:this.pages[g-1];{const I=d===0?this.getSpread()[g+1]:this.getSpread()[g-1];return I.length===1?this.pages[I[0]]:d===0?this.pages[I[1]]:this.pages[I[0]]}}showNext(){this.currentSpreadIndex<this.getSpread().length&&(this.currentSpreadIndex++,this.showSpread())}showPrev(){this.currentSpreadIndex>0&&(this.currentSpreadIndex--,this.showSpread())}getCurrentPageIndex(){return this.currentPageIndex}show(d=null){if(d===null&&(d=this.currentPageIndex),d<0||d>=this.pages.length)return;const g=this.getSpreadIndexByPage(d);g!==null&&(this.currentSpreadIndex=g,this.showSpread())}getCurrentSpreadIndex(){return this.currentSpreadIndex}setCurrentSpreadIndex(d){if(!(d>=0&&d<this.getSpread().length))throw new Error("Invalid page");this.currentSpreadIndex=d}showSpread(){const d=this.getSpread()[this.currentSpreadIndex];d.length===2?(this.render.setLeftPage(this.pages[d[0]]),this.render.setRightPage(this.pages[d[1]])):this.render.getOrientation()==="landscape"&&d[0]===this.pages.length-1?(this.render.setLeftPage(this.pages[d[0]]),this.render.setRightPage(null)):(this.render.setLeftPage(null),this.render.setRightPage(this.pages[d[0]])),this.currentPageIndex=d[0],this.app.updatePageIndex(this.currentPageIndex)}}class o extends s{constructor(d,g,I){super(d,g),this.imagesHref=I}load(){for(const d of this.imagesHref){const g=new i(this.render,d,"soft");g.load(),this.pages.push(g)}this.createSpread()}}class l{static GetDistanceBetweenTwoPoint(d,g){return d===null||g===null?1/0:Math.sqrt(Math.pow(g.x-d.x,2)+Math.pow(g.y-d.y,2))}static GetSegmentLength(d){return l.GetDistanceBetweenTwoPoint(d[0],d[1])}static GetAngleBetweenTwoLine(d,g){const I=d[0].y-d[1].y,_=g[0].y-g[1].y,y=d[1].x-d[0].x,w=g[1].x-g[0].x;return Math.acos((I*_+y*w)/(Math.sqrt(I*I+y*y)*Math.sqrt(_*_+w*w)))}static PointInRect(d,g){return g===null?null:g.x>=d.left&&g.x<=d.width+d.left&&g.y>=d.top&&g.y<=d.top+d.height?g:null}static GetRotatedPoint(d,g,I){return{x:d.x*Math.cos(I)+d.y*Math.sin(I)+g.x,y:d.y*Math.cos(I)-d.x*Math.sin(I)+g.y}}static LimitPointToCircle(d,g,I){if(l.GetDistanceBetweenTwoPoint(d,I)<=g)return I;const _=d.x,y=d.y,w=I.x,S=I.y;let A=Math.sqrt(Math.pow(g,2)*Math.pow(_-w,2)/(Math.pow(_-w,2)+Math.pow(y-S,2)))+_;I.x<0&&(A*=-1);let k=(A-_)*(y-S)/(_-w)+y;return _-w+y===0&&(k=g),{x:A,y:k}}static GetIntersectBetweenTwoSegment(d,g,I){return l.PointInRect(d,l.GetIntersectBeetwenTwoLine(g,I))}static GetIntersectBeetwenTwoLine(d,g){const I=d[0].y-d[1].y,_=g[0].y-g[1].y,y=d[1].x-d[0].x,w=g[1].x-g[0].x,S=d[0].x*d[1].y-d[1].x*d[0].y,A=g[0].x*g[1].y-g[1].x*g[0].y,k=I*A-_*S,b=y*A-w*S,he=-(S*w-A*y)/(I*w-_*y),Ve=-(I*A-_*S)/(I*w-_*y);if(isFinite(he)&&isFinite(Ve))return{x:he,y:Ve};if(Math.abs(k-b)<.1)throw new Error("Segment included");return null}static GetCordsFromTwoPoint(d,g){const I=Math.abs(d.x-g.x),_=Math.abs(d.y-g.y),y=Math.max(I,_),w=[d];function S(A,k,b,he,Ve){return k>A?A+Ve*(b/he):k<A?A-Ve*(b/he):A}for(let A=1;A<=y;A+=1)w.push({x:S(d.x,g.x,I,y,A),y:S(d.y,g.y,_,y,A)});return w}}class u extends r{constructor(d,g,I){super(d,I),this.copiedElement=null,this.temporaryCopy=null,this.isLoad=!1,this.element=g,this.element.classList.add("stf__item"),this.element.classList.add("--"+I)}newTemporaryCopy(){return this.nowDrawingDensity==="hard"?this:(this.temporaryCopy===null&&(this.copiedElement=this.element.cloneNode(!0),this.element.parentElement.appendChild(this.copiedElement),this.temporaryCopy=new u(this.render,this.copiedElement,this.nowDrawingDensity)),this.getTemporaryCopy())}getTemporaryCopy(){return this.temporaryCopy}hideTemporaryCopy(){this.temporaryCopy!==null&&(this.copiedElement.remove(),this.copiedElement=null,this.temporaryCopy=null)}draw(d){const g=d||this.nowDrawingDensity,I=this.render.convertToGlobal(this.state.position),_=this.render.getRect().pageWidth,y=this.render.getRect().height;this.element.classList.remove("--simple");const w=`
            display: block;
            z-index: ${this.element.style.zIndex};
            left: 0;
            top: 0;
            width: ${_}px;
            height: ${y}px;
        `;g==="hard"?this.drawHard(w):this.drawSoft(I,w)}drawHard(d=""){const g=this.render.getRect().left+this.render.getRect().width/2,I=this.state.hardDrawingAngle,_=d+`
                backface-visibility: hidden;
                -webkit-backface-visibility: hidden;
                clip-path: none;
                -webkit-clip-path: none;
            `+(this.orientation===0?`transform-origin: ${this.render.getRect().pageWidth}px 0; 
                   transform: translate3d(0, 0, 0) rotateY(${I}deg);`:`transform-origin: 0 0; 
                   transform: translate3d(${g}px, 0, 0) rotateY(${I}deg);`);this.element.style.cssText=_}drawSoft(d,g=""){let I="polygon( ";for(const y of this.state.area)if(y!==null){let w=this.render.getDirection()===1?{x:-y.x+this.state.position.x,y:y.y-this.state.position.y}:{x:y.x-this.state.position.x,y:y.y-this.state.position.y};w=l.GetRotatedPoint(w,{x:0,y:0},this.state.angle),I+=w.x+"px "+w.y+"px, "}I=I.slice(0,-2),I+=")";const _=g+`transform-origin: 0 0; clip-path: ${I}; -webkit-clip-path: ${I};`+(this.render.isSafari()&&this.state.angle===0?`transform: translate(${d.x}px, ${d.y}px);`:`transform: translate3d(${d.x}px, ${d.y}px, 0) rotate(${this.state.angle}rad);`);this.element.style.cssText=_}simpleDraw(d){const g=this.render.getRect(),I=g.pageWidth,_=g.height,y=d===1?g.left+g.pageWidth:g.left,w=g.top;this.element.classList.add("--simple"),this.element.style.cssText=`
            position: absolute; 
            display: block; 
            height: ${_}px; 
            left: ${y}px; 
            top: ${w}px; 
            width: ${I}px; 
            z-index: ${this.render.getSettings().startZIndex+1};`}getElement(){return this.element}load(){this.isLoad=!0}setOrientation(d){super.setOrientation(d),this.element.classList.remove("--left","--right"),this.element.classList.add(d===1?"--right":"--left")}setDrawingDensity(d){this.element.classList.remove("--soft","--hard"),this.element.classList.add("--"+d),super.setDrawingDensity(d)}}class c extends s{constructor(d,g,I,_){super(d,g),this.element=I,this.pagesElement=_}load(){for(const d of this.pagesElement){const g=new u(this.render,d,d.dataset.density==="hard"?"hard":"soft");g.load(),this.pages.push(g)}this.createSpread()}}class f{constructor(d,g,I,_){this.direction=d,this.corner=g,this.topIntersectPoint=null,this.sideIntersectPoint=null,this.bottomIntersectPoint=null,this.pageWidth=parseInt(I,10),this.pageHeight=parseInt(_,10)}calc(d){try{return this.position=this.calcAngleAndPosition(d),this.calculateIntersectPoint(this.position),!0}catch{return!1}}getFlippingClipArea(){const d=[];let g=!1;return d.push(this.rect.topLeft),d.push(this.topIntersectPoint),this.sideIntersectPoint===null?g=!0:(d.push(this.sideIntersectPoint),this.bottomIntersectPoint===null&&(g=!1)),d.push(this.bottomIntersectPoint),(g||this.corner==="bottom")&&d.push(this.rect.bottomLeft),d}getBottomClipArea(){const d=[];return d.push(this.topIntersectPoint),this.corner==="top"?d.push({x:this.pageWidth,y:0}):(this.topIntersectPoint!==null&&d.push({x:this.pageWidth,y:0}),d.push({x:this.pageWidth,y:this.pageHeight})),this.sideIntersectPoint!==null?l.GetDistanceBetweenTwoPoint(this.sideIntersectPoint,this.topIntersectPoint)>=10&&d.push(this.sideIntersectPoint):this.corner==="top"&&d.push({x:this.pageWidth,y:this.pageHeight}),d.push(this.bottomIntersectPoint),d.push(this.topIntersectPoint),d}getAngle(){return this.direction===0?-this.angle:this.angle}getRect(){return this.rect}getPosition(){return this.position}getActiveCorner(){return this.direction===0?this.rect.topLeft:this.rect.topRight}getDirection(){return this.direction}getFlippingProgress(){return Math.abs((this.position.x-this.pageWidth)/(2*this.pageWidth)*100)}getCorner(){return this.corner}getBottomPagePosition(){return this.direction===1?{x:this.pageWidth,y:0}:{x:0,y:0}}getShadowStartPoint(){return this.corner==="top"?this.topIntersectPoint:this.sideIntersectPoint!==null?this.sideIntersectPoint:this.topIntersectPoint}getShadowAngle(){const d=l.GetAngleBetweenTwoLine(this.getSegmentToShadowLine(),[{x:0,y:0},{x:this.pageWidth,y:0}]);return this.direction===0?d:Math.PI-d}calcAngleAndPosition(d){let g=d;if(this.updateAngleAndGeometry(g),g=this.corner==="top"?this.checkPositionAtCenterLine(g,{x:0,y:0},{x:0,y:this.pageHeight}):this.checkPositionAtCenterLine(g,{x:0,y:this.pageHeight},{x:0,y:0}),Math.abs(g.x-this.pageWidth)<1&&Math.abs(g.y)<1)throw new Error("Point is too small");return g}updateAngleAndGeometry(d){this.angle=this.calculateAngle(d),this.rect=this.getPageRect(d)}calculateAngle(d){const g=this.pageWidth-d.x+1,I=this.corner==="bottom"?this.pageHeight-d.y:d.y;let _=2*Math.acos(g/Math.sqrt(I*I+g*g));I<0&&(_=-_);const y=Math.PI-_;if(!isFinite(_)||y>=0&&y<.003)throw new Error("The G point is too small");return this.corner==="bottom"&&(_=-_),_}getPageRect(d){return this.corner==="top"?this.getRectFromBasePoint([{x:0,y:0},{x:this.pageWidth,y:0},{x:0,y:this.pageHeight},{x:this.pageWidth,y:this.pageHeight}],d):this.getRectFromBasePoint([{x:0,y:-this.pageHeight},{x:this.pageWidth,y:-this.pageHeight},{x:0,y:0},{x:this.pageWidth,y:0}],d)}getRectFromBasePoint(d,g){return{topLeft:this.getRotatedPoint(d[0],g),topRight:this.getRotatedPoint(d[1],g),bottomLeft:this.getRotatedPoint(d[2],g),bottomRight:this.getRotatedPoint(d[3],g)}}getRotatedPoint(d,g){return{x:d.x*Math.cos(this.angle)+d.y*Math.sin(this.angle)+g.x,y:d.y*Math.cos(this.angle)-d.x*Math.sin(this.angle)+g.y}}calculateIntersectPoint(d){const g={left:-1,top:-1,width:this.pageWidth+2,height:this.pageHeight+2};this.corner==="top"?(this.topIntersectPoint=l.GetIntersectBetweenTwoSegment(g,[d,this.rect.topRight],[{x:0,y:0},{x:this.pageWidth,y:0}]),this.sideIntersectPoint=l.GetIntersectBetweenTwoSegment(g,[d,this.rect.bottomLeft],[{x:this.pageWidth,y:0},{x:this.pageWidth,y:this.pageHeight}]),this.bottomIntersectPoint=l.GetIntersectBetweenTwoSegment(g,[this.rect.bottomLeft,this.rect.bottomRight],[{x:0,y:this.pageHeight},{x:this.pageWidth,y:this.pageHeight}])):(this.topIntersectPoint=l.GetIntersectBetweenTwoSegment(g,[this.rect.topLeft,this.rect.topRight],[{x:0,y:0},{x:this.pageWidth,y:0}]),this.sideIntersectPoint=l.GetIntersectBetweenTwoSegment(g,[d,this.rect.topLeft],[{x:this.pageWidth,y:0},{x:this.pageWidth,y:this.pageHeight}]),this.bottomIntersectPoint=l.GetIntersectBetweenTwoSegment(g,[this.rect.bottomLeft,this.rect.bottomRight],[{x:0,y:this.pageHeight},{x:this.pageWidth,y:this.pageHeight}]))}checkPositionAtCenterLine(d,g,I){let _=d;const y=l.LimitPointToCircle(g,this.pageWidth,_);_!==y&&(_=y,this.updateAngleAndGeometry(_));const w=Math.sqrt(Math.pow(this.pageWidth,2)+Math.pow(this.pageHeight,2));let S=this.rect.bottomRight,A=this.rect.topLeft;if(this.corner==="bottom"&&(S=this.rect.topRight,A=this.rect.bottomLeft),S.x<=0){const k=l.LimitPointToCircle(I,w,A);k!==_&&(_=k,this.updateAngleAndGeometry(_))}return _}getSegmentToShadowLine(){const d=this.getShadowStartPoint();return[d,d!==this.sideIntersectPoint&&this.sideIntersectPoint!==null?this.sideIntersectPoint:this.bottomIntersectPoint]}}class m{constructor(d,g){this.flippingPage=null,this.bottomPage=null,this.calc=null,this.state="read",this.render=d,this.app=g}fold(d){this.setState("user_fold"),this.calc===null&&this.start(d),this.do(this.render.convertToPage(d))}flip(d){if(this.app.getSettings().disableFlipByClick&&!this.isPointOnCorners(d)||(this.calc!==null&&this.render.finishAnimation(),!this.start(d)))return;const g=this.getBoundsRect();this.setState("flipping");const I=g.height/10,_=this.calc.getCorner()==="bottom"?g.height-I:I,y=this.calc.getCorner()==="bottom"?g.height:0;this.calc.calc({x:g.pageWidth-I,y:_}),this.animateFlippingTo({x:g.pageWidth-I,y:_},{x:-g.pageWidth,y},!0)}start(d){this.reset();const g=this.render.convertToBook(d),I=this.getBoundsRect(),_=this.getDirectionByPoint(g),y=g.y>=I.height/2?"bottom":"top";if(!this.checkDirection(_))return!1;try{if(this.flippingPage=this.app.getPageCollection().getFlippingPage(_),this.bottomPage=this.app.getPageCollection().getBottomPage(_),this.render.getOrientation()==="landscape")if(_===1){const w=this.app.getPageCollection().nextBy(this.flippingPage);w!==null&&this.flippingPage.getDensity()!==w.getDensity()&&(this.flippingPage.setDrawingDensity("hard"),w.setDrawingDensity("hard"))}else{const w=this.app.getPageCollection().prevBy(this.flippingPage);w!==null&&this.flippingPage.getDensity()!==w.getDensity()&&(this.flippingPage.setDrawingDensity("hard"),w.setDrawingDensity("hard"))}return this.render.setDirection(_),this.calc=new f(_,y,I.pageWidth.toString(10),I.height.toString(10)),!0}catch{return!1}}do(d){if(this.calc!==null&&this.calc.calc(d)){const g=this.calc.getFlippingProgress();this.bottomPage.setArea(this.calc.getBottomClipArea()),this.bottomPage.setPosition(this.calc.getBottomPagePosition()),this.bottomPage.setAngle(0),this.bottomPage.setHardAngle(0),this.flippingPage.setArea(this.calc.getFlippingClipArea()),this.flippingPage.setPosition(this.calc.getActiveCorner()),this.flippingPage.setAngle(this.calc.getAngle()),this.calc.getDirection()===0?this.flippingPage.setHardAngle(90*(200-2*g)/100):this.flippingPage.setHardAngle(-90*(200-2*g)/100),this.render.setPageRect(this.calc.getRect()),this.render.setBottomPage(this.bottomPage),this.render.setFlippingPage(this.flippingPage),this.render.setShadowData(this.calc.getShadowStartPoint(),this.calc.getShadowAngle(),g,this.calc.getDirection())}}flipToPage(d,g){const I=this.app.getPageCollection().getCurrentSpreadIndex(),_=this.app.getPageCollection().getSpreadIndexByPage(d);try{_>I&&(this.app.getPageCollection().setCurrentSpreadIndex(_-1),this.flipNext(g)),_<I&&(this.app.getPageCollection().setCurrentSpreadIndex(_+1),this.flipPrev(g))}catch{}}flipNext(d){this.flip({x:this.render.getRect().left+2*this.render.getRect().pageWidth-10,y:d==="top"?1:this.render.getRect().height-2})}flipPrev(d){this.flip({x:10,y:d==="top"?1:this.render.getRect().height-2})}stopMove(){if(this.calc===null)return;const d=this.calc.getPosition(),g=this.getBoundsRect(),I=this.calc.getCorner()==="bottom"?g.height:0;d.x<=0?this.animateFlippingTo(d,{x:-g.pageWidth,y:I},!0):this.animateFlippingTo(d,{x:g.pageWidth,y:I},!1)}showCorner(d){if(!this.checkState("read","fold_corner"))return;const g=this.getBoundsRect(),I=g.pageWidth;if(this.isPointOnCorners(d))if(this.calc===null){if(!this.start(d))return;this.setState("fold_corner"),this.calc.calc({x:I-1,y:1});const _=50,y=this.calc.getCorner()==="bottom"?g.height-1:1,w=this.calc.getCorner()==="bottom"?g.height-_:_;this.animateFlippingTo({x:I-1,y},{x:I-_,y:w},!1,!1)}else this.do(this.render.convertToPage(d));else this.setState("read"),this.render.finishAnimation(),this.stopMove()}animateFlippingTo(d,g,I,_=!0){const y=l.GetCordsFromTwoPoint(d,g),w=[];for(const A of y)w.push(()=>this.do(A));const S=this.getAnimationDuration(y.length);this.render.startAnimation(w,S,()=>{this.calc&&(I&&(this.calc.getDirection()===1?this.app.turnToPrevPage():this.app.turnToNextPage()),_&&(this.render.setBottomPage(null),this.render.setFlippingPage(null),this.render.clearShadow(),this.setState("read"),this.reset()))})}getCalculation(){return this.calc}getState(){return this.state}setState(d){this.state!==d&&(this.app.updateState(d),this.state=d)}getDirectionByPoint(d){const g=this.getBoundsRect();if(this.render.getOrientation()==="portrait"){if(d.x-g.pageWidth<=g.width/5)return 1}else if(d.x<g.width/2)return 1;return 0}getAnimationDuration(d){const g=this.app.getSettings().flippingTime;return d>=1e3?g:d/1e3*g}checkDirection(d){return d===0?this.app.getCurrentPageIndex()<this.app.getPageCount()-1:this.app.getCurrentPageIndex()>=1}reset(){this.calc=null,this.flippingPage=null,this.bottomPage=null}getBoundsRect(){return this.render.getRect()}checkState(...d){for(const g of d)if(this.state===g)return!0;return!1}isPointOnCorners(d){const g=this.getBoundsRect(),I=g.pageWidth,_=Math.sqrt(Math.pow(I,2)+Math.pow(g.height,2))/5,y=this.render.convertToBook(d);return y.x>0&&y.y>0&&y.x<g.width&&y.y<g.height&&(y.x<_||y.x>g.width-_)&&(y.y<_||y.y>g.height-_)}}class v{constructor(d,g){this.leftPage=null,this.rightPage=null,this.flippingPage=null,this.bottomPage=null,this.direction=null,this.orientation=null,this.shadow=null,this.animation=null,this.pageRect=null,this.boundsRect=null,this.timer=0,this.safari=!1,this.setting=g,this.app=d;const I=new RegExp("Version\\/[\\d\\.]+.*Safari/");this.safari=I.exec(window.navigator.userAgent)!==null}render(d){if(this.animation!==null){const g=Math.round((d-this.animation.startedAt)/this.animation.durationFrame);g<this.animation.frames.length?this.animation.frames[g]():(this.animation.onAnimateEnd(),this.animation=null)}this.timer=d,this.drawFrame()}start(){this.update();const d=g=>{this.render(g),requestAnimationFrame(d)};requestAnimationFrame(d)}startAnimation(d,g,I){this.finishAnimation(),this.animation={frames:d,duration:g,durationFrame:g/d.length,onAnimateEnd:I,startedAt:this.timer}}finishAnimation(){this.animation!==null&&(this.animation.frames[this.animation.frames.length-1](),this.animation.onAnimateEnd!==null&&this.animation.onAnimateEnd()),this.animation=null}update(){this.boundsRect=null;const d=this.calculateBoundsRect();this.orientation!==d&&(this.orientation=d,this.app.updateOrientation(d))}calculateBoundsRect(){let d="landscape";const g=this.getBlockWidth(),I=g/2,_=this.getBlockHeight()/2,y=this.setting.width/this.setting.height;let w=this.setting.width,S=this.setting.height,A=I-w;return this.setting.size==="stretch"?(g<2*this.setting.minWidth&&this.app.getSettings().usePortrait&&(d="portrait"),w=d==="portrait"?this.getBlockWidth():this.getBlockWidth()/2,w>this.setting.maxWidth&&(w=this.setting.maxWidth),S=w/y,S>this.getBlockHeight()&&(S=this.getBlockHeight(),w=S*y),A=d==="portrait"?I-w/2-w:I-w):g<2*w&&this.app.getSettings().usePortrait&&(d="portrait",A=I-w/2-w),this.boundsRect={left:A,top:_-S/2,width:2*w,height:S,pageWidth:w},d}setShadowData(d,g,I,_){if(!this.app.getSettings().drawShadow)return;const y=100*this.getSettings().maxShadowOpacity;this.shadow={pos:d,angle:g,width:3*this.getRect().pageWidth/4*I/100,opacity:(100-I)*y/100/100,direction:_,progress:2*I}}clearShadow(){this.shadow=null}getBlockWidth(){return this.app.getUI().getDistElement().offsetWidth}getBlockHeight(){return this.app.getUI().getDistElement().offsetHeight}getDirection(){return this.direction}getRect(){return this.boundsRect===null&&this.calculateBoundsRect(),this.boundsRect}getSettings(){return this.app.getSettings()}getOrientation(){return this.orientation}setPageRect(d){this.pageRect=d}setDirection(d){this.direction=d}setRightPage(d){d!==null&&d.setOrientation(1),this.rightPage=d}setLeftPage(d){d!==null&&d.setOrientation(0),this.leftPage=d}setBottomPage(d){d!==null&&d.setOrientation(this.direction===1?0:1),this.bottomPage=d}setFlippingPage(d){d!==null&&d.setOrientation(this.direction===0&&this.orientation!=="portrait"?0:1),this.flippingPage=d}convertToBook(d){const g=this.getRect();return{x:d.x-g.left,y:d.y-g.top}}isSafari(){return this.safari}convertToPage(d,g){g||(g=this.direction);const I=this.getRect();return{x:g===0?d.x-I.left-I.width/2:I.width/2-d.x+I.left,y:d.y-I.top}}convertToGlobal(d,g){if(g||(g=this.direction),d==null)return null;const I=this.getRect();return{x:g===0?d.x+I.left+I.width/2:I.width/2-d.x+I.left,y:d.y+I.top}}convertRectToGlobal(d,g){return g||(g=this.direction),{topLeft:this.convertToGlobal(d.topLeft,g),topRight:this.convertToGlobal(d.topRight,g),bottomLeft:this.convertToGlobal(d.bottomLeft,g),bottomRight:this.convertToGlobal(d.bottomRight,g)}}}class R extends v{constructor(d,g,I){super(d,g),this.canvas=I,this.ctx=I.getContext("2d")}getContext(){return this.ctx}reload(){}drawFrame(){this.clear(),this.orientation!=="portrait"&&this.leftPage!=null&&this.leftPage.simpleDraw(0),this.rightPage!=null&&this.rightPage.simpleDraw(1),this.bottomPage!=null&&this.bottomPage.draw(),this.drawBookShadow(),this.flippingPage!=null&&this.flippingPage.draw(),this.shadow!=null&&(this.drawOuterShadow(),this.drawInnerShadow());const d=this.getRect();this.orientation==="portrait"&&(this.ctx.beginPath(),this.ctx.rect(d.left+d.pageWidth,d.top,d.width,d.height),this.ctx.clip())}drawBookShadow(){const d=this.getRect();this.ctx.save(),this.ctx.beginPath();const g=d.width/20;this.ctx.rect(d.left,d.top,d.width,d.height);const I={x:d.left+d.width/2-g/2,y:0};this.ctx.translate(I.x,I.y);const _=this.ctx.createLinearGradient(0,0,g,0);_.addColorStop(0,"rgba(0, 0, 0, 0)"),_.addColorStop(.4,"rgba(0, 0, 0, 0.2)"),_.addColorStop(.49,"rgba(0, 0, 0, 0.1)"),_.addColorStop(.5,"rgba(0, 0, 0, 0.5)"),_.addColorStop(.51,"rgba(0, 0, 0, 0.4)"),_.addColorStop(1,"rgba(0, 0, 0, 0)"),this.ctx.clip(),this.ctx.fillStyle=_,this.ctx.fillRect(0,0,g,2*d.height),this.ctx.restore()}drawOuterShadow(){const d=this.getRect();this.ctx.save(),this.ctx.beginPath(),this.ctx.rect(d.left,d.top,d.width,d.height);const g=this.convertToGlobal({x:this.shadow.pos.x,y:this.shadow.pos.y});this.ctx.translate(g.x,g.y),this.ctx.rotate(Math.PI+this.shadow.angle+Math.PI/2);const I=this.ctx.createLinearGradient(0,0,this.shadow.width,0);this.shadow.direction===0?(this.ctx.translate(0,-100),I.addColorStop(0,"rgba(0, 0, 0, "+this.shadow.opacity+")"),I.addColorStop(1,"rgba(0, 0, 0, 0)")):(this.ctx.translate(-this.shadow.width,-100),I.addColorStop(0,"rgba(0, 0, 0, 0)"),I.addColorStop(1,"rgba(0, 0, 0, "+this.shadow.opacity+")")),this.ctx.clip(),this.ctx.fillStyle=I,this.ctx.fillRect(0,0,this.shadow.width,2*d.height),this.ctx.restore()}drawInnerShadow(){const d=this.getRect();this.ctx.save(),this.ctx.beginPath();const g=this.convertToGlobal({x:this.shadow.pos.x,y:this.shadow.pos.y}),I=this.convertRectToGlobal(this.pageRect);this.ctx.moveTo(I.topLeft.x,I.topLeft.y),this.ctx.lineTo(I.topRight.x,I.topRight.y),this.ctx.lineTo(I.bottomRight.x,I.bottomRight.y),this.ctx.lineTo(I.bottomLeft.x,I.bottomLeft.y),this.ctx.translate(g.x,g.y),this.ctx.rotate(Math.PI+this.shadow.angle+Math.PI/2);const _=3*this.shadow.width/4,y=this.ctx.createLinearGradient(0,0,_,0);this.shadow.direction===0?(this.ctx.translate(-_,-100),y.addColorStop(1,"rgba(0, 0, 0, "+this.shadow.opacity+")"),y.addColorStop(.9,"rgba(0, 0, 0, 0.05)"),y.addColorStop(.7,"rgba(0, 0, 0, "+this.shadow.opacity+")"),y.addColorStop(0,"rgba(0, 0, 0, 0)")):(this.ctx.translate(0,-100),y.addColorStop(0,"rgba(0, 0, 0, "+this.shadow.opacity+")"),y.addColorStop(.1,"rgba(0, 0, 0, 0.05)"),y.addColorStop(.3,"rgba(0, 0, 0, "+this.shadow.opacity+")"),y.addColorStop(1,"rgba(0, 0, 0, 0)")),this.ctx.clip(),this.ctx.fillStyle=y,this.ctx.fillRect(0,0,_,2*d.height),this.ctx.restore()}clear(){this.ctx.fillStyle="white",this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height)}}class V{constructor(d,g,I){this.touchPoint=null,this.swipeTimeout=250,this.onResize=()=>{this.update()},this.onMouseDown=y=>{if(this.checkTarget(y.target)){const w=this.getMousePos(y.clientX,y.clientY);this.app.startUserTouch(w),y.preventDefault()}},this.onTouchStart=y=>{if(this.checkTarget(y.target)&&y.changedTouches.length>0){const w=y.changedTouches[0],S=this.getMousePos(w.clientX,w.clientY);this.touchPoint={point:S,time:Date.now()},setTimeout(()=>{this.touchPoint!==null&&this.app.startUserTouch(S)},this.swipeTimeout),this.app.getSettings().mobileScrollSupport||y.preventDefault()}},this.onMouseUp=y=>{const w=this.getMousePos(y.clientX,y.clientY);this.app.userStop(w)},this.onMouseMove=y=>{const w=this.getMousePos(y.clientX,y.clientY);this.app.userMove(w,!1)},this.onTouchMove=y=>{if(y.changedTouches.length>0){const w=y.changedTouches[0],S=this.getMousePos(w.clientX,w.clientY);this.app.getSettings().mobileScrollSupport?(this.touchPoint!==null&&(Math.abs(this.touchPoint.point.x-S.x)>10||this.app.getState()!=="read")&&y.cancelable&&this.app.userMove(S,!0),this.app.getState()!=="read"&&y.preventDefault()):this.app.userMove(S,!0)}},this.onTouchEnd=y=>{if(y.changedTouches.length>0){const w=y.changedTouches[0],S=this.getMousePos(w.clientX,w.clientY);let A=!1;if(this.touchPoint!==null){const k=S.x-this.touchPoint.point.x,b=Math.abs(S.y-this.touchPoint.point.y);Math.abs(k)>this.swipeDistance&&b<2*this.swipeDistance&&Date.now()-this.touchPoint.time<this.swipeTimeout&&(k>0?this.app.flipPrev(this.touchPoint.point.y<this.app.getRender().getRect().height/2?"top":"bottom"):this.app.flipNext(this.touchPoint.point.y<this.app.getRender().getRect().height/2?"top":"bottom"),A=!0),this.touchPoint=null}this.app.userStop(S,A)}},this.parentElement=d,d.classList.add("stf__parent"),d.insertAdjacentHTML("afterbegin",'<div class="stf__wrapper"></div>'),this.wrapper=d.querySelector(".stf__wrapper"),this.app=g;const _=this.app.getSettings().usePortrait?1:2;d.style.minWidth=I.minWidth*_+"px",d.style.minHeight=I.minHeight+"px",I.size==="fixed"&&(d.style.minWidth=I.width*_+"px",d.style.minHeight=I.height+"px"),I.autoSize&&(d.style.width="100%",d.style.maxWidth=2*I.maxWidth+"px"),d.style.display="block",window.addEventListener("resize",this.onResize,!1),this.swipeDistance=I.swipeDistance}destroy(){this.app.getSettings().useMouseEvents&&this.removeHandlers(),this.distElement.remove(),this.wrapper.remove()}getDistElement(){return this.distElement}getWrapper(){return this.wrapper}setOrientationStyle(d){this.wrapper.classList.remove("--portrait","--landscape"),d==="portrait"?(this.app.getSettings().autoSize&&(this.wrapper.style.paddingBottom=this.app.getSettings().height/this.app.getSettings().width*100+"%"),this.wrapper.classList.add("--portrait")):(this.app.getSettings().autoSize&&(this.wrapper.style.paddingBottom=this.app.getSettings().height/(2*this.app.getSettings().width)*100+"%"),this.wrapper.classList.add("--landscape")),this.update()}removeHandlers(){window.removeEventListener("resize",this.onResize),this.distElement.removeEventListener("mousedown",this.onMouseDown),this.distElement.removeEventListener("touchstart",this.onTouchStart),window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("touchmove",this.onTouchMove),window.removeEventListener("mouseup",this.onMouseUp),window.removeEventListener("touchend",this.onTouchEnd)}setHandlers(){window.addEventListener("resize",this.onResize,!1),this.app.getSettings().useMouseEvents&&(this.distElement.addEventListener("mousedown",this.onMouseDown),this.distElement.addEventListener("touchstart",this.onTouchStart),window.addEventListener("mousemove",this.onMouseMove),window.addEventListener("touchmove",this.onTouchMove,{passive:!this.app.getSettings().mobileScrollSupport}),window.addEventListener("mouseup",this.onMouseUp),window.addEventListener("touchend",this.onTouchEnd))}getMousePos(d,g){const I=this.distElement.getBoundingClientRect();return{x:d-I.left,y:g-I.top}}checkTarget(d){return!this.app.getSettings().clickEventForward||!["a","button"].includes(d.tagName.toLowerCase())}}class N extends V{constructor(d,g,I,_){super(d,g,I),this.wrapper.insertAdjacentHTML("afterbegin",'<div class="stf__block"></div>'),this.distElement=d.querySelector(".stf__block"),this.items=_;for(const y of _)this.distElement.appendChild(y);this.setHandlers()}clear(){for(const d of this.items)this.parentElement.appendChild(d)}updateItems(d){this.removeHandlers(),this.distElement.innerHTML="";for(const g of d)this.distElement.appendChild(g);this.items=d,this.setHandlers()}update(){this.app.getRender().update()}}class L extends V{constructor(d,g,I){super(d,g,I),this.wrapper.innerHTML='<canvas class="stf__canvas"></canvas>',this.canvas=d.querySelectorAll("canvas")[0],this.distElement=this.canvas,this.resizeCanvas(),this.setHandlers()}resizeCanvas(){const d=getComputedStyle(this.canvas),g=parseInt(d.getPropertyValue("width"),10),I=parseInt(d.getPropertyValue("height"),10);this.canvas.width=g,this.canvas.height=I}getCanvas(){return this.canvas}update(){this.resizeCanvas(),this.app.getRender().update()}}class C extends v{constructor(d,g,I){super(d,g),this.outerShadow=null,this.innerShadow=null,this.hardShadow=null,this.hardInnerShadow=null,this.element=I,this.createShadows()}createShadows(){this.element.insertAdjacentHTML("beforeend",`<div class="stf__outerShadow"></div>
             <div class="stf__innerShadow"></div>
             <div class="stf__hardShadow"></div>
             <div class="stf__hardInnerShadow"></div>`),this.outerShadow=this.element.querySelector(".stf__outerShadow"),this.innerShadow=this.element.querySelector(".stf__innerShadow"),this.hardShadow=this.element.querySelector(".stf__hardShadow"),this.hardInnerShadow=this.element.querySelector(".stf__hardInnerShadow")}clearShadow(){super.clearShadow(),this.outerShadow.style.cssText="display: none",this.innerShadow.style.cssText="display: none",this.hardShadow.style.cssText="display: none",this.hardInnerShadow.style.cssText="display: none"}reload(){this.element.querySelector(".stf__outerShadow")||this.createShadows()}drawHardInnerShadow(){const d=this.getRect(),g=this.shadow.progress>100?200-this.shadow.progress:this.shadow.progress;let I=(100-g)*(2.5*d.pageWidth)/100+20;I>d.pageWidth&&(I=d.pageWidth);let _=`
            display: block;
            z-index: ${(this.getSettings().startZIndex+5).toString(10)};
            width: ${I}px;
            height: ${d.height}px;
            background: linear-gradient(to right,
                rgba(0, 0, 0, ${this.shadow.opacity*g/100}) 5%,
                rgba(0, 0, 0, 0) 100%);
            left: ${d.left+d.width/2}px;
            transform-origin: 0 0;
        `;_+=this.getDirection()===0&&this.shadow.progress>100||this.getDirection()===1&&this.shadow.progress<=100?"transform: translate3d(0, 0, 0);":"transform: translate3d(0, 0, 0) rotateY(180deg);",this.hardInnerShadow.style.cssText=_}drawHardOuterShadow(){const d=this.getRect();let g=(100-(this.shadow.progress>100?200-this.shadow.progress:this.shadow.progress))*(2.5*d.pageWidth)/100+20;g>d.pageWidth&&(g=d.pageWidth);let I=`
            display: block;
            z-index: ${(this.getSettings().startZIndex+4).toString(10)};
            width: ${g}px;
            height: ${d.height}px;
            background: linear-gradient(to left, rgba(0, 0, 0, ${this.shadow.opacity}) 5%, rgba(0, 0, 0, 0) 100%);
            left: ${d.left+d.width/2}px;
            transform-origin: 0 0;
        `;I+=this.getDirection()===0&&this.shadow.progress>100||this.getDirection()===1&&this.shadow.progress<=100?"transform: translate3d(0, 0, 0) rotateY(180deg);":"transform: translate3d(0, 0, 0);",this.hardShadow.style.cssText=I}drawInnerShadow(){const d=this.getRect(),g=3*this.shadow.width/4,I=this.getDirection()===0?g:0,_=this.getDirection()===0?"to left":"to right",y=this.convertToGlobal(this.shadow.pos),w=this.shadow.angle+3*Math.PI/2,S=[this.pageRect.topLeft,this.pageRect.topRight,this.pageRect.bottomRight,this.pageRect.bottomLeft];let A="polygon( ";for(const b of S){let he=this.getDirection()===1?{x:-b.x+this.shadow.pos.x,y:b.y-this.shadow.pos.y}:{x:b.x-this.shadow.pos.x,y:b.y-this.shadow.pos.y};he=l.GetRotatedPoint(he,{x:I,y:100},w),A+=he.x+"px "+he.y+"px, "}A=A.slice(0,-2),A+=")";const k=`
            display: block;
            z-index: ${(this.getSettings().startZIndex+10).toString(10)};
            width: ${g}px;
            height: ${2*d.height}px;
            background: linear-gradient(${_},
                rgba(0, 0, 0, ${this.shadow.opacity}) 5%,
                rgba(0, 0, 0, 0.05) 15%,
                rgba(0, 0, 0, ${this.shadow.opacity}) 35%,
                rgba(0, 0, 0, 0) 100%);
            transform-origin: ${I}px 100px;
            transform: translate3d(${y.x-I}px, ${y.y-100}px, 0) rotate(${w}rad);
            clip-path: ${A};
            -webkit-clip-path: ${A};
        `;this.innerShadow.style.cssText=k}drawOuterShadow(){const d=this.getRect(),g=this.convertToGlobal({x:this.shadow.pos.x,y:this.shadow.pos.y}),I=this.shadow.angle+3*Math.PI/2,_=this.getDirection()===1?this.shadow.width:0,y=this.getDirection()===0?"to right":"to left",w=[{x:0,y:0},{x:d.pageWidth,y:0},{x:d.pageWidth,y:d.height},{x:0,y:d.height}];let S="polygon( ";for(const k of w)if(k!==null){let b=this.getDirection()===1?{x:-k.x+this.shadow.pos.x,y:k.y-this.shadow.pos.y}:{x:k.x-this.shadow.pos.x,y:k.y-this.shadow.pos.y};b=l.GetRotatedPoint(b,{x:_,y:100},I),S+=b.x+"px "+b.y+"px, "}S=S.slice(0,-2),S+=")";const A=`
            display: block;
            z-index: ${(this.getSettings().startZIndex+10).toString(10)};
            width: ${this.shadow.width}px;
            height: ${2*d.height}px;
            background: linear-gradient(${y}, rgba(0, 0, 0, ${this.shadow.opacity}), rgba(0, 0, 0, 0));
            transform-origin: ${_}px 100px;
            transform: translate3d(${g.x-_}px, ${g.y-100}px, 0) rotate(${I}rad);
            clip-path: ${S};
            -webkit-clip-path: ${S};
        `;this.outerShadow.style.cssText=A}drawLeftPage(){this.orientation!=="portrait"&&this.leftPage!==null&&(this.direction===1&&this.flippingPage!==null&&this.flippingPage.getDrawingDensity()==="hard"?(this.leftPage.getElement().style.zIndex=(this.getSettings().startZIndex+5).toString(10),this.leftPage.setHardDrawingAngle(180+this.flippingPage.getHardAngle()),this.leftPage.draw(this.flippingPage.getDrawingDensity())):this.leftPage.simpleDraw(0))}drawRightPage(){this.rightPage!==null&&(this.direction===0&&this.flippingPage!==null&&this.flippingPage.getDrawingDensity()==="hard"?(this.rightPage.getElement().style.zIndex=(this.getSettings().startZIndex+5).toString(10),this.rightPage.setHardDrawingAngle(180+this.flippingPage.getHardAngle()),this.rightPage.draw(this.flippingPage.getDrawingDensity())):this.rightPage.simpleDraw(1))}drawBottomPage(){if(this.bottomPage===null)return;const d=this.flippingPage!=null?this.flippingPage.getDrawingDensity():null;this.orientation==="portrait"&&this.direction===1||(this.bottomPage.getElement().style.zIndex=(this.getSettings().startZIndex+3).toString(10),this.bottomPage.draw(d))}drawFrame(){this.clear(),this.drawLeftPage(),this.drawRightPage(),this.drawBottomPage(),this.flippingPage!=null&&(this.flippingPage.getElement().style.zIndex=(this.getSettings().startZIndex+5).toString(10),this.flippingPage.draw()),this.shadow!=null&&this.flippingPage!==null&&(this.flippingPage.getDrawingDensity()==="soft"?(this.drawOuterShadow(),this.drawInnerShadow()):(this.drawHardOuterShadow(),this.drawHardInnerShadow()))}clear(){for(const d of this.app.getPageCollection().getPages())d!==this.leftPage&&d!==this.rightPage&&d!==this.flippingPage&&d!==this.bottomPage&&(d.getElement().style.cssText="display: none"),d.getTemporaryCopy()!==this.flippingPage&&d.hideTemporaryCopy()}update(){super.update(),this.rightPage!==null&&this.rightPage.setOrientation(1),this.leftPage!==null&&this.leftPage.setOrientation(0)}}class P{constructor(){this._default={startPage:0,size:"fixed",width:0,height:0,minWidth:0,maxWidth:0,minHeight:0,maxHeight:0,drawShadow:!0,flippingTime:1e3,usePortrait:!0,startZIndex:0,autoSize:!0,maxShadowOpacity:1,showCover:!1,mobileScrollSupport:!0,swipeDistance:30,clickEventForward:!0,useMouseEvents:!0,showPageCorners:!0,disableFlipByClick:!1}}getSettings(d){const g=this._default;if(Object.assign(g,d),g.size!=="stretch"&&g.size!=="fixed")throw new Error('Invalid size type. Available only "fixed" and "stretch" value');if(g.width<=0||g.height<=0)throw new Error("Invalid width or height");if(g.flippingTime<=0)throw new Error("Invalid flipping time");return g.size==="stretch"?(g.minWidth<=0&&(g.minWidth=100),g.maxWidth<g.minWidth&&(g.maxWidth=2e3),g.minHeight<=0&&(g.minHeight=100),g.maxHeight<g.minHeight&&(g.maxHeight=2e3)):(g.minWidth=g.width,g.maxWidth=g.width,g.minHeight=g.height,g.maxHeight=g.height),g}}(function(x,d){d===void 0&&(d={});var g=d.insertAt;if(typeof document<"u"){var I=document.head||document.getElementsByTagName("head")[0],_=document.createElement("style");_.type="text/css",g==="top"&&I.firstChild?I.insertBefore(_,I.firstChild):I.appendChild(_),_.styleSheet?_.styleSheet.cssText=x:_.appendChild(document.createTextNode(x))}})(`.stf__parent {
  position: relative;
  display: block;
  box-sizing: border-box;
  transform: translateZ(0);

  -ms-touch-action: pan-y;
  touch-action: pan-y;
}

.sft__wrapper {
  position: relative;
  width: 100%;
  box-sizing: border-box;
}

.stf__parent canvas {
  position: absolute;
  width: 100%;
  height: 100%;
  left: 0;
  top: 0;
}

.stf__block {
  position: absolute;
  width: 100%;
  height: 100%;
  box-sizing: border-box;
  perspective: 2000px;
}

.stf__item {
  display: none;
  position: absolute;
  transform-style: preserve-3d;
}

.stf__outerShadow {
  position: absolute;
  left: 0;
  top: 0;
}

.stf__innerShadow {
  position: absolute;
  left: 0;
  top: 0;
}

.stf__hardShadow {
  position: absolute;
  left: 0;
  top: 0;
}

.stf__hardInnerShadow {
  position: absolute;
  left: 0;
  top: 0;
}`),n.PageFlip=class extends class{constructor(){this.events=new Map}on(x,d){return this.events.has(x)?this.events.get(x).push(d):this.events.set(x,[d]),this}off(x){this.events.delete(x)}trigger(x,d,g=null){if(this.events.has(x))for(const I of this.events.get(x))I({data:g,object:d})}}{constructor(x,d){super(),this.isUserTouch=!1,this.isUserMove=!1,this.setting=null,this.pages=null,this.setting=new P().getSettings(d),this.block=x}destroy(){this.ui.destroy(),this.block.remove()}update(){this.render.update(),this.pages.show()}loadFromImages(x){this.ui=new L(this.block,this,this.setting);const d=this.ui.getCanvas();this.render=new R(this,this.setting,d),this.flipController=new m(this.render,this),this.pages=new o(this,this.render,x),this.pages.load(),this.render.start(),this.pages.show(this.setting.startPage),setTimeout(()=>{this.ui.update(),this.trigger("init",this,{page:this.setting.startPage,mode:this.render.getOrientation()})},1)}loadFromHTML(x){this.ui=new N(this.block,this,this.setting,x),this.render=new C(this,this.setting,this.ui.getDistElement()),this.flipController=new m(this.render,this),this.pages=new c(this,this.render,this.ui.getDistElement(),x),this.pages.load(),this.render.start(),this.pages.show(this.setting.startPage),setTimeout(()=>{this.ui.update(),this.trigger("init",this,{page:this.setting.startPage,mode:this.render.getOrientation()})},1)}updateFromImages(x){const d=this.pages.getCurrentPageIndex();this.pages.destroy(),this.pages=new o(this,this.render,x),this.pages.load(),this.pages.show(d),this.trigger("update",this,{page:d,mode:this.render.getOrientation()})}updateFromHtml(x){const d=this.pages.getCurrentPageIndex();this.pages.destroy(),this.pages=new c(this,this.render,this.ui.getDistElement(),x),this.pages.load(),this.ui.updateItems(x),this.render.reload(),this.pages.show(d),this.trigger("update",this,{page:d,mode:this.render.getOrientation()})}clear(){this.pages.destroy(),this.ui.clear()}turnToPrevPage(){this.pages.showPrev()}turnToNextPage(){this.pages.showNext()}turnToPage(x){this.pages.show(x)}flipNext(x="top"){this.flipController.flipNext(x)}flipPrev(x="top"){this.flipController.flipPrev(x)}flip(x,d="top"){this.flipController.flipToPage(x,d)}updateState(x){this.trigger("changeState",this,x)}updatePageIndex(x){this.trigger("flip",this,x)}updateOrientation(x){this.ui.setOrientationStyle(x),this.update(),this.trigger("changeOrientation",this,x)}getPageCount(){return this.pages.getPageCount()}getCurrentPageIndex(){return this.pages.getCurrentPageIndex()}getPage(x){return this.pages.getPage(x)}getRender(){return this.render}getFlipController(){return this.flipController}getOrientation(){return this.render.getOrientation()}getBoundsRect(){return this.render.getRect()}getSettings(){return this.setting}getUI(){return this.ui}getState(){return this.flipController.getState()}getPageCollection(){return this.pages}startUserTouch(x){this.mousePosition=x,this.isUserTouch=!0,this.isUserMove=!1}userMove(x,d){this.isUserTouch||d||!this.setting.showPageCorners?this.isUserTouch&&l.GetDistanceBetweenTwoPoint(this.mousePosition,x)>5&&(this.isUserMove=!0,this.flipController.fold(x)):this.flipController.showCorner(x)}userStop(x,d=!1){this.isUserTouch&&(this.isUserTouch=!1,d||(this.isUserMove?this.flipController.stopMove():this.flipController.flip(x)))}},Object.defineProperty(n,"__esModule",{value:!0})})})(Gd,Gd.exports);var VS=Gd.exports;const OS=Qt.forwardRef((t,e)=>{const n=ee.useRef(null),r=ee.useRef([]),i=ee.useRef(),[s,o]=ee.useState([]);ee.useImperativeHandle(e,()=>({pageFlip:()=>i.current}));const l=ee.useCallback(()=>{i.current&&i.current.clear()},[]),u=ee.useCallback(()=>{const c=i.current;c&&(c.off("flip"),c.off("changeOrientation"),c.off("changeState"),c.off("init"),c.off("update"))},[]);return ee.useEffect(()=>{if(r.current=[],t.children){const c=Qt.Children.map(t.children,f=>Qt.cloneElement(f,{ref:m=>{m&&r.current.push(m)}}));(!t.renderOnlyPageLengthChange||s.length!==c.length)&&(c.length<s.length&&l(),o(c))}},[t.children]),ee.useEffect(()=>{const c=()=>{const f=i.current;f&&(t.onFlip&&f.on("flip",m=>t.onFlip(m)),t.onChangeOrientation&&f.on("changeOrientation",m=>t.onChangeOrientation(m)),t.onChangeState&&f.on("changeState",m=>t.onChangeState(m)),t.onInit&&f.on("init",m=>t.onInit(m)),t.onUpdate&&f.on("update",m=>t.onUpdate(m)))};s.length>0&&r.current.length>0&&(u(),n.current&&!i.current&&(i.current=new VS.PageFlip(n.current,t)),i.current.getFlipController()?i.current.updateFromHtml(r.current):i.current.loadFromHTML(r.current),c())},[s]),Qt.createElement("div",{ref:n,className:t.className,style:t.style},s)}),LS=Qt.memo(OS);var gw={exports:{}};(()=>{var t={181:(i,s,o)=>{var l=/^\s+|\s+$/g,u=/^[-+]0x[0-9a-f]+$/i,c=/^0b[01]+$/i,f=/^0o[0-7]+$/i,m=parseInt,v=typeof o.g=="object"&&o.g&&o.g.Object===Object&&o.g,R=typeof self=="object"&&self&&self.Object===Object&&self,V=v||R||Function("return this")(),N=Object.prototype.toString,L=Math.max,C=Math.min,P=function(){return V.Date.now()};function x(g){var I=typeof g;return!!g&&(I=="object"||I=="function")}function d(g){if(typeof g=="number")return g;if(function(y){return typeof y=="symbol"||function(w){return!!w&&typeof w=="object"}(y)&&N.call(y)=="[object Symbol]"}(g))return NaN;if(x(g)){var I=typeof g.valueOf=="function"?g.valueOf():g;g=x(I)?I+"":I}if(typeof g!="string")return g===0?g:+g;g=g.replace(l,"");var _=c.test(g);return _||f.test(g)?m(g.slice(2),_?2:8):u.test(g)?NaN:+g}i.exports=function(g,I,_){var y,w,S,A,k,b,he=0,Ve=!1,ut=!1,He=!0;if(typeof g!="function")throw new TypeError("Expected a function");function H(ce){var xe=y,$e=w;return y=w=void 0,he=ce,A=g.apply($e,xe)}function ne(ce){var xe=ce-b;return b===void 0||xe>=I||xe<0||ut&&ce-he>=S}function te(){var ce=P();if(ne(ce))return fe(ce);k=setTimeout(te,function(xe){var $e=I-(xe-b);return ut?C($e,S-(xe-he)):$e}(ce))}function fe(ce){return k=void 0,He&&y?H(ce):(y=w=void 0,A)}function de(){var ce=P(),xe=ne(ce);if(y=arguments,w=this,b=ce,xe){if(k===void 0)return function($e){return he=$e,k=setTimeout(te,I),Ve?H($e):A}(b);if(ut)return k=setTimeout(te,I),H(b)}return k===void 0&&(k=setTimeout(te,I)),A}return I=d(I)||0,x(_)&&(Ve=!!_.leading,S=(ut="maxWait"in _)?L(d(_.maxWait)||0,I):S,He="trailing"in _?!!_.trailing:He),de.cancel=function(){k!==void 0&&clearTimeout(k),he=0,y=b=w=k=void 0},de.flush=function(){return k===void 0?A:fe(P())},de}},858:(i,s,o)=>{var l="Expected a function",u=NaN,c="[object Symbol]",f=/^\s+|\s+$/g,m=/^[-+]0x[0-9a-f]+$/i,v=/^0b[01]+$/i,R=/^0o[0-7]+$/i,V=parseInt,N=typeof o.g=="object"&&o.g&&o.g.Object===Object&&o.g,L=typeof self=="object"&&self&&self.Object===Object&&self,C=N||L||Function("return this")(),P=Object.prototype.toString,x=Math.max,d=Math.min,g=function(){return C.Date.now()};function I(y){var w=typeof y;return!!y&&(w=="object"||w=="function")}function _(y){if(typeof y=="number")return y;if(function(A){return typeof A=="symbol"||function(k){return!!k&&typeof k=="object"}(A)&&P.call(A)==c}(y))return u;if(I(y)){var w=typeof y.valueOf=="function"?y.valueOf():y;y=I(w)?w+"":w}if(typeof y!="string")return y===0?y:+y;y=y.replace(f,"");var S=v.test(y);return S||R.test(y)?V(y.slice(2),S?2:8):m.test(y)?u:+y}i.exports=function(y,w,S){var A=!0,k=!0;if(typeof y!="function")throw new TypeError(l);return I(S)&&(A="leading"in S?!!S.leading:A,k="trailing"in S?!!S.trailing:k),function(b,he,Ve){var ut,He,H,ne,te,fe,de=0,ce=!1,xe=!1,$e=!0;if(typeof b!="function")throw new TypeError(l);function Ot(nt){var Lt=ut,ft=He;return ut=He=void 0,de=nt,ne=b.apply(ft,Lt)}function Wt(nt){var Lt=nt-fe;return fe===void 0||Lt>=he||Lt<0||xe&&nt-de>=H}function $n(){var nt=g();if(Wt(nt))return qn(nt);te=setTimeout($n,function(Lt){var ft=he-(Lt-fe);return xe?d(ft,H-(Lt-de)):ft}(nt))}function qn(nt){return te=void 0,$e&&ut?Ot(nt):(ut=He=void 0,ne)}function fn(){var nt=g(),Lt=Wt(nt);if(ut=arguments,He=this,fe=nt,Lt){if(te===void 0)return function(ft){return de=ft,te=setTimeout($n,he),ce?Ot(ft):ne}(fe);if(xe)return te=setTimeout($n,he),Ot(fe)}return te===void 0&&(te=setTimeout($n,he)),ne}return he=_(he)||0,I(Ve)&&(ce=!!Ve.leading,H=(xe="maxWait"in Ve)?x(_(Ve.maxWait)||0,he):H,$e="trailing"in Ve?!!Ve.trailing:$e),fn.cancel=function(){te!==void 0&&clearTimeout(te),de=0,ut=fe=He=te=void 0},fn.flush=function(){return te===void 0?ne:qn(g())},fn}(y,w,{leading:A,maxWait:w,trailing:k})}},694:(i,s,o)=>{var l=o(925);function u(){}function c(){}c.resetWarningCache=u,i.exports=function(){function f(R,V,N,L,C,P){if(P!==l){var x=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw x.name="Invariant Violation",x}}function m(){return f}f.isRequired=f;var v={array:f,bigint:f,bool:f,func:f,number:f,object:f,string:f,symbol:f,any:f,arrayOf:m,element:f,elementType:f,instanceOf:m,node:f,objectOf:m,oneOf:m,oneOfType:m,shape:m,exact:m,checkPropTypes:c,resetWarningCache:u};return v.PropTypes=v,v}},556:(i,s,o)=>{i.exports=o(694)()},925:i=>{i.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"}},e={};function n(i){var s=e[i];if(s!==void 0)return s.exports;var o=e[i]={exports:{}};return t[i](o,o.exports,n),o.exports}n.n=i=>{var s=i&&i.__esModule?()=>i.default:()=>i;return n.d(s,{a:s}),s},n.d=(i,s)=>{for(var o in s)n.o(s,o)&&!n.o(i,o)&&Object.defineProperty(i,o,{enumerable:!0,get:s[o]})},n.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),n.o=(i,s)=>Object.prototype.hasOwnProperty.call(i,s),n.r=i=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(i,"__esModule",{value:!0})};var r={};(()=>{n.r(r),n.d(r,{LazyLoadComponent:()=>bo,LazyLoadImage:()=>ko,trackWindowScroll:()=>ce});const i=ee;var s=n.n(i),o=n(556);function l(){return typeof window<"u"&&"IntersectionObserver"in window&&"isIntersecting"in window.IntersectionObserverEntry.prototype}function u(U){return u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(D){return typeof D}:function(D){return D&&typeof Symbol=="function"&&D.constructor===Symbol&&D!==Symbol.prototype?"symbol":typeof D},u(U)}function c(U,D){var F=Object.keys(U);if(Object.getOwnPropertySymbols){var q=Object.getOwnPropertySymbols(U);D&&(q=q.filter(function(j){return Object.getOwnPropertyDescriptor(U,j).enumerable})),F.push.apply(F,q)}return F}function f(U,D,F){return(D=v(D))in U?Object.defineProperty(U,D,{value:F,enumerable:!0,configurable:!0,writable:!0}):U[D]=F,U}function m(U,D){for(var F=0;F<D.length;F++){var q=D[F];q.enumerable=q.enumerable||!1,q.configurable=!0,"value"in q&&(q.writable=!0),Object.defineProperty(U,v(q.key),q)}}function v(U){var D=function(F,q){if(u(F)!="object"||!F)return F;var j=F[Symbol.toPrimitive];if(j!==void 0){var $=j.call(F,"string");if(u($)!="object")return $;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(F)}(U);return u(D)=="symbol"?D:D+""}function R(U,D,F){return D=N(D),function(q,j){if(j&&(u(j)=="object"||typeof j=="function"))return j;if(j!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function($){if($===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return $}(q)}(U,V()?Reflect.construct(D,F||[],N(U).constructor):D.apply(U,F))}function V(){try{var U=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(V=function(){return!!U})()}function N(U){return N=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(D){return D.__proto__||Object.getPrototypeOf(D)},N(U)}function L(U,D){return L=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(F,q){return F.__proto__=q,F},L(U,D)}var C=function(U){U.forEach(function(D){D.isIntersecting&&D.target.onVisible()})},P={},x=function(U){function D(j){var $;if(function(se,ae){if(!(se instanceof ae))throw new TypeError("Cannot call a class as a function")}(this,D),($=R(this,D,[j])).supportsObserver=!j.scrollPosition&&j.useIntersectionObserver&&l(),$.supportsObserver){var oe=j.threshold;$.observer=function(se){return P[se]=P[se]||new IntersectionObserver(C,{rootMargin:se+"px"}),P[se]}(oe)}return $}return function(j,$){if(typeof $!="function"&&$!==null)throw new TypeError("Super expression must either be null or a function");j.prototype=Object.create($&&$.prototype,{constructor:{value:j,writable:!0,configurable:!0}}),Object.defineProperty(j,"prototype",{writable:!1}),$&&L(j,$)}(D,U),F=D,q=[{key:"componentDidMount",value:function(){this.placeholder&&this.observer&&(this.placeholder.onVisible=this.props.onVisible,this.observer.observe(this.placeholder)),this.supportsObserver||this.updateVisibility()}},{key:"componentWillUnmount",value:function(){this.observer&&this.placeholder&&this.observer.unobserve(this.placeholder)}},{key:"componentDidUpdate",value:function(){this.supportsObserver||this.updateVisibility()}},{key:"getPlaceholderBoundingBox",value:function(){var j=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.props.scrollPosition,$=this.placeholder.getBoundingClientRect(),oe=this.placeholder.style,se=parseInt(oe.getPropertyValue("margin-left"),10)||0,ae=parseInt(oe.getPropertyValue("margin-top"),10)||0;return{bottom:j.y+$.bottom+ae,left:j.x+$.left+se,right:j.x+$.right+se,top:j.y+$.top+ae}}},{key:"isPlaceholderInViewport",value:function(){if(typeof window>"u"||!this.placeholder)return!1;var j=this.props,$=j.scrollPosition,oe=j.threshold,se=this.getPlaceholderBoundingBox($),ae=$.y+window.innerHeight,Se=$.x,Ae=$.x+window.innerWidth,ke=$.y;return ke-oe<=se.bottom&&ae+oe>=se.top&&Se-oe<=se.right&&Ae+oe>=se.left}},{key:"updateVisibility",value:function(){this.isPlaceholderInViewport()&&this.props.onVisible()}},{key:"render",value:function(){var j=this,$=this.props,oe=$.className,se=$.height,ae=$.placeholder,Se=$.style,Ae=$.width;if(ae&&typeof ae.type!="function")return s().cloneElement(ae,{ref:function(Ie){return j.placeholder=Ie}});var ke=function(Ie){for(var it=1;it<arguments.length;it++){var _e=arguments[it]!=null?arguments[it]:{};it%2?c(Object(_e),!0).forEach(function(st){f(Ie,st,_e[st])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Ie,Object.getOwnPropertyDescriptors(_e)):c(Object(_e)).forEach(function(st){Object.defineProperty(Ie,st,Object.getOwnPropertyDescriptor(_e,st))})}return Ie}({display:"inline-block"},Se);return Ae!==void 0&&(ke.width=Ae),se!==void 0&&(ke.height=se),s().createElement("span",{className:oe,ref:function(Ie){return j.placeholder=Ie},style:ke},ae)}}],q&&m(F.prototype,q),Object.defineProperty(F,"prototype",{writable:!1}),F;var F,q}(s().Component);x.propTypes={onVisible:o.PropTypes.func.isRequired,className:o.PropTypes.string,height:o.PropTypes.oneOfType([o.PropTypes.number,o.PropTypes.string]),placeholder:o.PropTypes.element,threshold:o.PropTypes.number,useIntersectionObserver:o.PropTypes.bool,scrollPosition:o.PropTypes.shape({x:o.PropTypes.number.isRequired,y:o.PropTypes.number.isRequired}),width:o.PropTypes.oneOfType([o.PropTypes.number,o.PropTypes.string])},x.defaultProps={className:"",placeholder:null,threshold:100,useIntersectionObserver:!0};const d=x;var g=n(181),I=n.n(g),_=n(858),y=n.n(_),w=function(U){var D=getComputedStyle(U,null);return D.getPropertyValue("overflow")+D.getPropertyValue("overflow-y")+D.getPropertyValue("overflow-x")};const S=function(U){if(!(U instanceof HTMLElement))return window;for(var D=U;D&&D instanceof HTMLElement;){if(/(scroll|auto)/.test(w(D)))return D;D=D.parentNode}return window};function A(U){return A=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(D){return typeof D}:function(D){return D&&typeof Symbol=="function"&&D.constructor===Symbol&&D!==Symbol.prototype?"symbol":typeof D},A(U)}var k=["delayMethod","delayTime"];function b(){return b=Object.assign?Object.assign.bind():function(U){for(var D=1;D<arguments.length;D++){var F=arguments[D];for(var q in F)({}).hasOwnProperty.call(F,q)&&(U[q]=F[q])}return U},b.apply(null,arguments)}function he(U,D){for(var F=0;F<D.length;F++){var q=D[F];q.enumerable=q.enumerable||!1,q.configurable=!0,"value"in q&&(q.writable=!0),Object.defineProperty(U,Ve(q.key),q)}}function Ve(U){var D=function(F,q){if(A(F)!="object"||!F)return F;var j=F[Symbol.toPrimitive];if(j!==void 0){var $=j.call(F,"string");if(A($)!="object")return $;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(F)}(U);return A(D)=="symbol"?D:D+""}function ut(U,D,F){return D=ne(D),He(U,H()?Reflect.construct(D,F||[],ne(U).constructor):D.apply(U,F))}function He(U,D){if(D&&(A(D)=="object"||typeof D=="function"))return D;if(D!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(F){if(F===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return F}(U)}function H(){try{var U=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(H=function(){return!!U})()}function ne(U){return ne=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(D){return D.__proto__||Object.getPrototypeOf(D)},ne(U)}function te(U,D){return te=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(F,q){return F.__proto__=q,F},te(U,D)}var fe=function(){return typeof window>"u"?0:window.scrollX||window.pageXOffset},de=function(){return typeof window>"u"?0:window.scrollY||window.pageYOffset};const ce=function(U){var D=function(F){function q(oe){var se;if(function(Se,Ae){if(!(Se instanceof Ae))throw new TypeError("Cannot call a class as a function")}(this,q),(se=ut(this,q,[oe])).useIntersectionObserver=oe.useIntersectionObserver&&l(),se.useIntersectionObserver)return He(se);var ae=se.onChangeScroll.bind(se);return oe.delayMethod==="debounce"?se.delayedScroll=I()(ae,oe.delayTime):oe.delayMethod==="throttle"&&(se.delayedScroll=y()(ae,oe.delayTime)),se.state={scrollPosition:{x:fe(),y:de()}},se.baseComponentRef=s().createRef(),se}return function(oe,se){if(typeof se!="function"&&se!==null)throw new TypeError("Super expression must either be null or a function");oe.prototype=Object.create(se&&se.prototype,{constructor:{value:oe,writable:!0,configurable:!0}}),Object.defineProperty(oe,"prototype",{writable:!1}),se&&te(oe,se)}(q,F),j=q,$=[{key:"componentDidMount",value:function(){this.addListeners()}},{key:"componentWillUnmount",value:function(){this.removeListeners()}},{key:"componentDidUpdate",value:function(){typeof window>"u"||this.useIntersectionObserver||S(this.baseComponentRef.current)!==this.scrollElement&&(this.removeListeners(),this.addListeners())}},{key:"addListeners",value:function(){typeof window>"u"||this.useIntersectionObserver||(this.scrollElement=S(this.baseComponentRef.current),this.scrollElement.addEventListener("scroll",this.delayedScroll,{passive:!0}),window.addEventListener("resize",this.delayedScroll,{passive:!0}),this.scrollElement!==window&&window.addEventListener("scroll",this.delayedScroll,{passive:!0}))}},{key:"removeListeners",value:function(){typeof window>"u"||this.useIntersectionObserver||(this.scrollElement.removeEventListener("scroll",this.delayedScroll),window.removeEventListener("resize",this.delayedScroll),this.scrollElement!==window&&window.removeEventListener("scroll",this.delayedScroll))}},{key:"onChangeScroll",value:function(){this.useIntersectionObserver||this.setState({scrollPosition:{x:fe(),y:de()}})}},{key:"render",value:function(){var oe=this.props,se=(oe.delayMethod,oe.delayTime,function(Se,Ae){if(Se==null)return{};var ke,Ie,it=function(st,Gn){if(st==null)return{};var fr={};for(var os in st)if({}.hasOwnProperty.call(st,os)){if(Gn.indexOf(os)>=0)continue;fr[os]=st[os]}return fr}(Se,Ae);if(Object.getOwnPropertySymbols){var _e=Object.getOwnPropertySymbols(Se);for(Ie=0;Ie<_e.length;Ie++)ke=_e[Ie],Ae.indexOf(ke)>=0||{}.propertyIsEnumerable.call(Se,ke)&&(it[ke]=Se[ke])}return it}(oe,k)),ae=this.useIntersectionObserver?null:this.state.scrollPosition;return s().createElement(U,b({forwardRef:this.baseComponentRef,scrollPosition:ae},se))}}],$&&he(j.prototype,$),Object.defineProperty(j,"prototype",{writable:!1}),j;var j,$}(s().Component);return D.propTypes={delayMethod:o.PropTypes.oneOf(["debounce","throttle"]),delayTime:o.PropTypes.number,useIntersectionObserver:o.PropTypes.bool},D.defaultProps={delayMethod:"throttle",delayTime:300,useIntersectionObserver:!0},D};function xe(U){return xe=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(D){return typeof D}:function(D){return D&&typeof Symbol=="function"&&D.constructor===Symbol&&D!==Symbol.prototype?"symbol":typeof D},xe(U)}function $e(U,D){for(var F=0;F<D.length;F++){var q=D[F];q.enumerable=q.enumerable||!1,q.configurable=!0,"value"in q&&(q.writable=!0),Object.defineProperty(U,Ot(q.key),q)}}function Ot(U){var D=function(F,q){if(xe(F)!="object"||!F)return F;var j=F[Symbol.toPrimitive];if(j!==void 0){var $=j.call(F,"string");if(xe($)!="object")return $;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(F)}(U);return xe(D)=="symbol"?D:D+""}function Wt(U,D,F){return D=qn(D),function(q,j){if(j&&(xe(j)=="object"||typeof j=="function"))return j;if(j!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function($){if($===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return $}(q)}(U,$n()?Reflect.construct(D,F||[],qn(U).constructor):D.apply(U,F))}function $n(){try{var U=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return($n=function(){return!!U})()}function qn(U){return qn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(D){return D.__proto__||Object.getPrototypeOf(D)},qn(U)}function fn(U,D){return fn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(F,q){return F.__proto__=q,F},fn(U,D)}var nt=function(U){function D(j){return function($,oe){if(!($ instanceof oe))throw new TypeError("Cannot call a class as a function")}(this,D),Wt(this,D,[j])}return function(j,$){if(typeof $!="function"&&$!==null)throw new TypeError("Super expression must either be null or a function");j.prototype=Object.create($&&$.prototype,{constructor:{value:j,writable:!0,configurable:!0}}),Object.defineProperty(j,"prototype",{writable:!1}),$&&fn(j,$)}(D,U),F=D,(q=[{key:"render",value:function(){return s().createElement(d,this.props)}}])&&$e(F.prototype,q),Object.defineProperty(F,"prototype",{writable:!1}),F;var F,q}(s().Component);const Lt=ce(nt);function ft(U){return ft=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(D){return typeof D}:function(D){return D&&typeof Symbol=="function"&&D.constructor===Symbol&&D!==Symbol.prototype?"symbol":typeof D},ft(U)}function So(U,D){for(var F=0;F<D.length;F++){var q=D[F];q.enumerable=q.enumerable||!1,q.configurable=!0,"value"in q&&(q.writable=!0),Object.defineProperty(U,Po(q.key),q)}}function Po(U){var D=function(F,q){if(ft(F)!="object"||!F)return F;var j=F[Symbol.toPrimitive];if(j!==void 0){var $=j.call(F,"string");if(ft($)!="object")return $;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(F)}(U);return ft(D)=="symbol"?D:D+""}function wl(U,D,F){return D=es(D),function(q,j){if(j&&(ft(j)=="object"||typeof j=="function"))return j;if(j!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function($){if($===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return $}(q)}(U,El()?Reflect.construct(D,F||[],es(U).constructor):D.apply(U,F))}function El(){try{var U=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(El=function(){return!!U})()}function es(U){return es=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(D){return D.__proto__||Object.getPrototypeOf(D)},es(U)}function ts(U,D){return ts=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(F,q){return F.__proto__=q,F},ts(U,D)}var si=function(U){function D(j){var $;(function(Ae,ke){if(!(Ae instanceof ke))throw new TypeError("Cannot call a class as a function")})(this,D),$=wl(this,D,[j]);var oe=j.afterLoad,se=j.beforeLoad,ae=j.scrollPosition,Se=j.visibleByDefault;return $.state={visible:Se},Se&&(se(),oe()),$.onVisible=$.onVisible.bind($),$.isScrollTracked=!!(ae&&Number.isFinite(ae.x)&&ae.x>=0&&Number.isFinite(ae.y)&&ae.y>=0),$}return function(j,$){if(typeof $!="function"&&$!==null)throw new TypeError("Super expression must either be null or a function");j.prototype=Object.create($&&$.prototype,{constructor:{value:j,writable:!0,configurable:!0}}),Object.defineProperty(j,"prototype",{writable:!1}),$&&ts(j,$)}(D,U),F=D,(q=[{key:"componentDidUpdate",value:function(j,$){$.visible!==this.state.visible&&this.props.afterLoad()}},{key:"onVisible",value:function(){this.props.beforeLoad(),this.setState({visible:!0})}},{key:"render",value:function(){if(this.state.visible)return this.props.children;var j=this.props,$=j.className,oe=j.delayMethod,se=j.delayTime,ae=j.height,Se=j.placeholder,Ae=j.scrollPosition,ke=j.style,Ie=j.threshold,it=j.useIntersectionObserver,_e=j.width;return this.isScrollTracked||it&&l()?s().createElement(d,{className:$,height:ae,onVisible:this.onVisible,placeholder:Se,scrollPosition:Ae,style:ke,threshold:Ie,useIntersectionObserver:it,width:_e}):s().createElement(Lt,{className:$,delayMethod:oe,delayTime:se,height:ae,onVisible:this.onVisible,placeholder:Se,style:ke,threshold:Ie,width:_e})}}])&&So(F.prototype,q),Object.defineProperty(F,"prototype",{writable:!1}),F;var F,q}(s().Component);si.propTypes={afterLoad:o.PropTypes.func,beforeLoad:o.PropTypes.func,useIntersectionObserver:o.PropTypes.bool,visibleByDefault:o.PropTypes.bool},si.defaultProps={afterLoad:function(){return{}},beforeLoad:function(){return{}},useIntersectionObserver:!0,visibleByDefault:!1};const bo=si;function dr(U){return dr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(D){return typeof D}:function(D){return D&&typeof Symbol=="function"&&D.constructor===Symbol&&D!==Symbol.prototype?"symbol":typeof D},dr(U)}var Ao=["afterLoad","beforeLoad","delayMethod","delayTime","effect","placeholder","placeholderSrc","scrollPosition","threshold","useIntersectionObserver","visibleByDefault","wrapperClassName","wrapperProps"];function ns(U,D){var F=Object.keys(U);if(Object.getOwnPropertySymbols){var q=Object.getOwnPropertySymbols(U);D&&(q=q.filter(function(j){return Object.getOwnPropertyDescriptor(U,j).enumerable})),F.push.apply(F,q)}return F}function Ro(U){for(var D=1;D<arguments.length;D++){var F=arguments[D]!=null?arguments[D]:{};D%2?ns(Object(F),!0).forEach(function(q){pt(U,q,F[q])}):Object.getOwnPropertyDescriptors?Object.defineProperties(U,Object.getOwnPropertyDescriptors(F)):ns(Object(F)).forEach(function(q){Object.defineProperty(U,q,Object.getOwnPropertyDescriptor(F,q))})}return U}function pt(U,D,F){return(D=Co(D))in U?Object.defineProperty(U,D,{value:F,enumerable:!0,configurable:!0,writable:!0}):U[D]=F,U}function rt(){return rt=Object.assign?Object.assign.bind():function(U){for(var D=1;D<arguments.length;D++){var F=arguments[D];for(var q in F)({}).hasOwnProperty.call(F,q)&&(U[q]=F[q])}return U},rt.apply(null,arguments)}function rs(U,D){for(var F=0;F<D.length;F++){var q=D[F];q.enumerable=q.enumerable||!1,q.configurable=!0,"value"in q&&(q.writable=!0),Object.defineProperty(U,Co(q.key),q)}}function Co(U){var D=function(F,q){if(dr(F)!="object"||!F)return F;var j=F[Symbol.toPrimitive];if(j!==void 0){var $=j.call(F,"string");if(dr($)!="object")return $;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(F)}(U);return dr(D)=="symbol"?D:D+""}function Il(U,D,F){return D=kn(D),function(q,j){if(j&&(dr(j)=="object"||typeof j=="function"))return j;if(j!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function($){if($===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return $}(q)}(U,Tl()?Reflect.construct(D,F||[],kn(U).constructor):D.apply(U,F))}function Tl(){try{var U=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Tl=function(){return!!U})()}function kn(U){return kn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(D){return D.__proto__||Object.getPrototypeOf(D)},kn(U)}function is(U,D){return is=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(F,q){return F.__proto__=q,F},is(U,D)}var ss=function(U){function D(j){var $;return function(oe,se){if(!(oe instanceof se))throw new TypeError("Cannot call a class as a function")}(this,D),($=Il(this,D,[j])).state={loaded:!1},$}return function(j,$){if(typeof $!="function"&&$!==null)throw new TypeError("Super expression must either be null or a function");j.prototype=Object.create($&&$.prototype,{constructor:{value:j,writable:!0,configurable:!0}}),Object.defineProperty(j,"prototype",{writable:!1}),$&&is(j,$)}(D,U),F=D,q=[{key:"onImageLoad",value:function(){var j=this;return this.state.loaded?null:function($){j.props.onLoad($),j.props.afterLoad(),j.setState({loaded:!0})}}},{key:"getImg",value:function(){var j=this.props,$=(j.afterLoad,j.beforeLoad,j.delayMethod,j.delayTime,j.effect,j.placeholder,j.placeholderSrc,j.scrollPosition,j.threshold,j.useIntersectionObserver,j.visibleByDefault,j.wrapperClassName,j.wrapperProps,function(oe,se){if(oe==null)return{};var ae,Se,Ae=function(Ie,it){if(Ie==null)return{};var _e={};for(var st in Ie)if({}.hasOwnProperty.call(Ie,st)){if(it.indexOf(st)>=0)continue;_e[st]=Ie[st]}return _e}(oe,se);if(Object.getOwnPropertySymbols){var ke=Object.getOwnPropertySymbols(oe);for(Se=0;Se<ke.length;Se++)ae=ke[Se],se.indexOf(ae)>=0||{}.propertyIsEnumerable.call(oe,ae)&&(Ae[ae]=oe[ae])}return Ae}(j,Ao));return s().createElement("img",rt({},$,{onLoad:this.onImageLoad()}))}},{key:"getLazyLoadImage",value:function(){var j=this.props,$=j.beforeLoad,oe=j.className,se=j.delayMethod,ae=j.delayTime,Se=j.height,Ae=j.placeholder,ke=j.scrollPosition,Ie=j.style,it=j.threshold,_e=j.useIntersectionObserver,st=j.visibleByDefault,Gn=j.width;return s().createElement(bo,{beforeLoad:$,className:oe,delayMethod:se,delayTime:ae,height:Se,placeholder:Ae,scrollPosition:ke,style:Ie,threshold:it,useIntersectionObserver:_e,visibleByDefault:st,width:Gn},this.getImg())}},{key:"getWrappedLazyLoadImage",value:function(j){var $=this.props,oe=$.effect,se=$.height,ae=$.placeholderSrc,Se=$.width,Ae=$.wrapperClassName,ke=$.wrapperProps,Ie=this.state.loaded,it=Ie?" lazy-load-image-loaded":"",_e=Ie||!ae?{}:{backgroundImage:"url(".concat(ae,")"),backgroundSize:"100% 100%"};return s().createElement("span",rt({className:Ae+" lazy-load-image-background "+oe+it,style:Ro(Ro({},_e),{},{color:"transparent",display:"inline-block",height:se,width:Se})},ke),j)}},{key:"render",value:function(){var j=this.props,$=j.effect,oe=j.placeholderSrc,se=j.visibleByDefault,ae=j.wrapperClassName,Se=j.wrapperProps,Ae=this.getLazyLoadImage();return($||oe)&&!se||ae||Se?this.getWrappedLazyLoadImage(Ae):Ae}}],q&&rs(F.prototype,q),Object.defineProperty(F,"prototype",{writable:!1}),F;var F,q}(s().Component);ss.propTypes={onLoad:o.PropTypes.func,afterLoad:o.PropTypes.func,beforeLoad:o.PropTypes.func,delayMethod:o.PropTypes.string,delayTime:o.PropTypes.number,effect:o.PropTypes.string,placeholderSrc:o.PropTypes.string,threshold:o.PropTypes.number,useIntersectionObserver:o.PropTypes.bool,visibleByDefault:o.PropTypes.bool,wrapperClassName:o.PropTypes.string,wrapperProps:o.PropTypes.object},ss.defaultProps={onLoad:function(){},afterLoad:function(){return{}},beforeLoad:function(){return{}},delayMethod:"throttle",delayTime:300,effect:"",placeholderSrc:null,threshold:100,useIntersectionObserver:!0,visibleByDefault:!1,wrapperClassName:""};const ko=ss})(),gw.exports=r})();var Yn=gw.exports;const MS="/undang-aku/assets/book-logo-DTSrELaQ.png",jS="/undang-aku/assets/flower-doodle-Ban8amwV.avif",yw=ee.forwardRef((t,e)=>{const r=new URLSearchParams(window.location.search).get("sebagai");return T.jsxs("div",{ref:e,className:"flex flex-col items-center justify-center p-8 border bg-[#F4ECE8] border-gray-300 shadow-lg h-full w-full mx-auto text-center relative",children:[T.jsx("div",{className:"absolute inset-0 bg-repeat bg-center opacity-5 -z-10",style:{backgroundImage:`url(${jS})`,backgroundSize:"500px"}}),T.jsx("div",{className:"relative w-full max-w-2xl p-4 mx-auto lg:max-w-x",children:T.jsxs("svg",{viewBox:"0 0 500 200",className:"w-full h-auto lg:h-40",children:[T.jsx("path",{id:"curve",d:"M10,150 Q250,50 490,150",fill:"transparent"}),T.jsx("text",{children:T.jsx("textPath",{href:"#curve",startOffset:"50%",textAnchor:"middle",className:"text-5xl font-dancing text-gray-800",children:"Undangan Pernikahan"})})]})}),T.jsx(Yn.LazyLoadImage,{src:MS,alt:"Wedding Image",className:"mb-6 max-w-[280px] h-auto mx-auto",effect:"opacity"}),T.jsx("h1",{className:"text-4xl font-bold mb-5 font-dancing",children:"Thariq & Sherly"}),T.jsx("h1",{className:"text-xl font-bold mb-20 font-dancing",children:"Agustus 2024"}),T.jsx("h3",{className:"text-xxl mb-2 font-montserrat",children:"Kepada :"}),T.jsx("h3",{className:"text-2xl font-montserrat",children:r||"Orang baik"}),T.jsx("div",{className:"block absolute bottom-4 right-5 transform -translate-x-1/2 text-gray-600 text-sm hint mr-1 lg:right-0",children:T.jsx("p",{children:"Klik untuk buka ..."})})]})});yw.displayName="Cover";const _w="/undang-aku/assets/frame-top-BTgHTAFD.png",vw="/undang-aku/assets/frame-bottom-C04TXqWn.png",ww=ee.forwardRef((t,e)=>T.jsxs("div",{ref:e,className:"flex flex-col items-center p-8 border bg-[#F4ECE8] border-gray-300 shadow-lg h-full w-full",children:[T.jsx("img",{src:_w,alt:"Flower",className:"absolute -top-7 -right-5  w-80"}),T.jsx("h1",{className:"text-3xl font-bold mb-12 font-playfair",children:"Pasangan Penganten"}),T.jsx("div",{className:"w-20 h-[1px] bg-gray-400 mb-12"}),T.jsxs("div",{className:"flex flex-col  w-full space-x-8",children:[T.jsxs("div",{className:"flex-1 flex flex-col items-start text-left mb-10 ",children:[T.jsx("h2",{className:"text-2xl mb-2 font-playfair",children:"Mempelai Pria"}),T.jsxs("h3",{className:"text-xl font-extrabold font-montserrat",children:["Thariq Ramadhan ",T.jsx("br",{})," Alchandra Yasrial S.T."]}),T.jsx("h4",{className:"text-xs font-semibold mb-1",children:"Putra pertama dari"}),T.jsxs("h4",{className:"text-xs",children:["Bpk. Ir. H. Yasrial Yasin & ",T.jsx("br",{}),"Ibu Dr. Ir .Hj. Teti Chandrayanti, MBA"]})]}),T.jsxs("div",{className:"flex items-center mb-10",children:[T.jsx("div",{className:"flex-1 h-[1px] bg-gray-400"}),T.jsx("span",{className:"px-4 text-gray-600 font-semibold font-dancing",children:"dan"}),T.jsx("div",{className:"flex-1 h-[1px] bg-gray-400"})]}),T.jsxs("div",{className:"flex-1 flex flex-col items-end text-right mb-6",children:[T.jsx("h2",{className:"text-2xl font-semibold mb-2 font-playfair",children:"Mempelai Wanita"}),T.jsxs("h3",{className:"text-xl font-extrabold font-montserrat mb-2",children:["Sherly Ekaputri",T.jsx("br",{})," Arnas S.Kom."]}),T.jsx("h4",{className:"text-xs font-semibold mb-1",children:"Putri pertama dari"}),T.jsxs("h4",{className:"text-xs",children:["Bpk. Anasril &",T.jsx("br",{})," Ibu Armaini"]})]})]}),T.jsx("div",{className:"block absolute bottom-4 left-5 transform -translate-x-1/2 text-gray-600 text-sm pulse-animation",children:T.jsx("p",{children:"<<<"})}),T.jsx("div",{className:"block absolute bottom-4 left-5 transform -translate-x-1/2 text-gray-600 text-sm pulse-animation",children:T.jsx("p",{children:"<<<"})}),T.jsx("div",{className:"block absolute bottom-4 right-5 transform -translate-x-1/2 text-gray-600 text-sm pulse-animation",children:T.jsx("p",{children:">>>"})}),T.jsx("img",{src:vw,alt:"FlowerBottom",className:"absolute -bottom-0 -left-5  w-80"})]}));ww.displayName="Couple";const FS="/undang-aku/assets/thariq-D2j4-Xjo.jpg",BS="/undang-aku/assets/sherly-BD_vxK10.jpg",Ew=ee.forwardRef((t,e)=>T.jsxs("div",{ref:e,className:"flex flex-col items-center p-8 border bg-[#F4ECE8] border-gray-300 shadow-lg h-full w-full",children:[T.jsx("img",{src:_w,alt:"Flower",className:"absolute -top-7 -right-5  w-80"}),T.jsx("h1",{className:"text-3xl font-bold mb-12 font-playfair",children:"Pasangan Penganten"}),T.jsx("div",{className:"w-20 h-[1px] bg-gray-400 mb-4"}),T.jsxs("div",{className:"flex flex-col w-full space-x-8",children:[T.jsxs("div",{className:"flex-1 flex flex-col items-start text-left mb-2",children:[T.jsx("h2",{className:"text-xl mb-4 font-playfair",children:"Thariq"}),T.jsx(Yn.LazyLoadImage,{src:FS,alt:"Thariq",className:"w-52 h-40 object-cover mb-4 border-4 border-white shadow-md transform -rotate-2",style:{objectPosition:"center 20%"},effect:"opacity"})]}),T.jsxs("div",{className:"flex items-center mb-2",children:[T.jsx("div",{className:"flex-1 h-[1px] bg-gray-400"}),T.jsx("span",{className:"px-4 text-gray-600 font-semibold font-dancing",children:"dan"}),T.jsx("div",{className:"flex-1 h-[1px] bg-gray-400"})]}),T.jsxs("div",{className:"flex-1 flex flex-col items-end text-right mb-2",children:[T.jsx(Yn.LazyLoadImage,{src:BS,alt:"Sherly",className:"w-52 h-40 object-cover mb-4 border-4 border-white shadow-md -rotate-2",style:{objectPosition:"center 20%"},effect:"opacity"}),T.jsx("h2",{className:"text-xl mb-2 font-playfair",children:"Sherly"})]})]}),T.jsx("img",{src:vw,alt:"FlowerBottom",className:"absolute -bottom-0 -left-5  w-80"}),T.jsx("div",{className:"block absolute bottom-4 left-5 transform -translate-x-1/2 text-gray-600 text-sm pulse-animation",children:T.jsx("p",{children:"<<<"})}),T.jsx("div",{className:"block absolute bottom-4 right-5 transform -translate-x-1/2 text-gray-600 text-sm pulse-animation",children:T.jsx("p",{children:">>>"})})]}));Ew.displayName="CouplePhoto";var Iw={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},Ay=Qt.createContext&&Qt.createContext(Iw),zS=["attr","size","title"];function US(t,e){if(t==null)return{};var n=$S(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function $S(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Ju(){return Ju=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ju.apply(this,arguments)}function Ry(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Zu(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Ry(Object(n),!0).forEach(function(r){qS(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ry(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function qS(t,e,n){return e=GS(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function GS(t){var e=WS(t,"string");return typeof e=="symbol"?e:e+""}function WS(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Tw(t){return t&&t.map((e,n)=>Qt.createElement(e.tag,Zu({key:n},e.attr),Tw(e.child)))}function dn(t){return e=>Qt.createElement(KS,Ju({attr:Zu({},t.attr)},e),Tw(t.child))}function KS(t){var e=n=>{var{attr:r,size:i,title:s}=t,o=US(t,zS),l=i||n.size||"1em",u;return n.className&&(u=n.className),t.className&&(u=(u?u+" ":"")+t.className),Qt.createElement("svg",Ju({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,o,{className:u,style:Zu(Zu({color:t.color||n.color},n.style),t.style),height:l,width:l,xmlns:"http://www.w3.org/2000/svg"}),s&&Qt.createElement("title",null,s),t.children)};return Ay!==void 0?Qt.createElement(Ay.Consumer,null,n=>e(n)):e(Iw)}function Cy(t){return dn({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M320 448v40c0 13.255-10.745 24-24 24H24c-13.255 0-24-10.745-24-24V120c0-13.255 10.745-24 24-24h72v296c0 30.879 25.121 56 56 56h168zm0-344V0H152c-13.255 0-24 10.745-24 24v368c0 13.255 10.745 24 24 24h272c13.255 0 24-10.745 24-24V128H344c-13.2 0-24-10.8-24-24zm120.971-31.029L375.029 7.029A24 24 0 0 0 358.059 0H352v96h96v-6.059a24 24 0 0 0-7.029-16.97z"},child:[]}]})(t)}function Wd(t){return dn({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M288 0c-69.59 0-126 56.41-126 126 0 56.26 82.35 158.8 113.9 196.02 6.39 7.54 17.82 7.54 24.2 0C331.65 284.8 414 182.26 414 126 414 56.41 357.59 0 288 0zm0 168c-23.2 0-42-18.8-42-42s18.8-42 42-42 42 18.8 42 42-18.8 42-42 42zM20.12 215.95A32.006 32.006 0 0 0 0 245.66v250.32c0 11.32 11.43 19.06 21.94 14.86L160 448V214.92c-8.84-15.98-16.07-31.54-21.25-46.42L20.12 215.95zM288 359.67c-14.07 0-27.38-6.18-36.51-16.96-19.66-23.2-40.57-49.62-59.49-76.72v182l192 64V266c-18.92 27.09-39.82 53.52-59.49 76.72-9.13 10.77-22.44 16.95-36.51 16.95zm266.06-198.51L416 224v288l139.88-55.95A31.996 31.996 0 0 0 576 426.34V176.02c0-11.32-11.43-19.06-21.94-14.86z"},child:[]}]})(t)}function HS(t){return dn({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M201.837 53.087L177.547 21h55.676zM278.766 21l30.82 31.465L333.065 21h-54.298zm12.428 38.12L256 23.18l-35.25 35.985h70.5zm82.091 0l-23.511-30.855-23.003 30.9h46.57zM161.096 28.683L138.5 59.188h45.746zm51.248 48.242L256 196.821l43.69-119.896h-87.38zm-73.166 0l90.384 99.017-36.153-99.017h-54.231zm233.712 0h-54.23l-36.076 99.017zm-19.455 48.142l-29.059 31.838a154.298 154.298 0 0 1 85.786 138.119C410.14 380.008 340.995 449.197 256 449.197s-154.14-69.144-154.14-154.14a154.298 154.298 0 0 1 85.787-138.119L158.588 125.1a196.044 196.044 0 0 0-98.53 169.924C60.057 403.056 147.955 491 256 491c108.044 0 195.943-87.899 195.943-195.943a196.044 196.044 0 0 0-98.542-169.99z"},child:[]}]})(t)}function xw(t){return dn({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M267.375 14.688c-17.09 6.94-30.576 17.288-38.75 29.593l-14.813-27.593c-9.017 49.344-12.52 95.085 32 109.563-10.734 36.94-17.187 73.9-20.687 110.813l-20.563-38.344c-2.848-14.713-9.618-30.698-17.343-47l-17.376 74.124c-7.214-22.468-16.496-44.677-28.47-66.47 24.46-43.217 16.134-70.568-31.093-79.28-.515 3.04-.56 9.344-.56 9.344l-19.876-8.75L87.5 100.53l-9.344-4.655c-5.433 42.254-.12 74.946 46.625 72.094 3.705 6.717 7.128 13.47 10.314 20.28L29.22 156.312c31.263 45.247 64.173 82.76 112.53 47.094 10.985 26.656 18.485 53.944 23.75 81.72l-64.78-40.188c12.872 36.068 28.203 67.286 66.936 52.437 1.237 7.446 2.306 14.926 3.28 22.438h18.876c-2.757-21.95-6.533-43.82-11.906-65.5 8.208-4.095 14.35-8.853 18.75-14.188 3.693 11.197 11.61 19.643 26.438 23.594-1.097 18.71-1.506 37.414-1.438 56.092h18.688c-.014-4.07-.003-8.12.03-12.187 41.888-6.813 39.48-42.478 32.407-81.188l-31.967 59.625c.765-23.7 2.492-47.326 5.593-70.906 52.515 5.043 61.144-38.783 65.125-87.78l-61.81 65.843c3.47-20.563 8.06-41.09 14-61.564 37.544 4.596 76.884-35.765 75.28-70l-12.438 7.72c-1.053-11.96-6.674-25.51-17.125-40.69-7.535 5.354-14.003 12.573-19.843 20.44L285.5 31.03l-11.688 14.595c-.32-10.47-2.17-20.77-6.437-30.938zm182.22 99.25c-4.994.008-10.98.86-18.25 2.906-13.336 3.754-27.52 12.25-22.376 37.625-24.488 13.127-45.408 31.122-62.25 53.155h-.19c.03.045.067.08.095.125-.8 1.05-1.593 2.09-2.375 3.156l23.063-76.344c-45.938 31.743-83.94 65.165-45.438 114.75-9.69 21.296-16.536 44.94-20.313 70.5h38.032c24.53-7.376 29.6-36.436 32.187-68.25l-48.155 51.282c6.766-30.55 18.424-57.235 34.406-79.47 36.727 42.145 77.18 14.898 118.033-19.81l-104.594 3.28c13.094-14.284 28.35-26.198 45.56-35.5 11.388 14.74 28.402 14.172 40.595 7.812 25.338-13.216 17.442-27.84 38.28-45.906-20.892 5.264-19.352-19.358-46.31-19.313zM152.936 338.5l26.032 154.594h143.593L348.969 338.5H152.936z"},child:[]}]})(t)}const ds={title:"Akad Nikah",location:"Masjid Islamic Center Padang Panjang",mapLink:"https://maps.app.goo.gl/fVgW4v1e6qL9A9kq7",date:"Sabtu, 24 Agustus 2024",time:"08:00 - 10:00 WIB",icon:T.jsx(HS,{className:"text-4xl text-[#E0C9C2]"})},Sw=ee.forwardRef((t,e)=>T.jsxs("div",{ref:e,className:"flex items-center justify-center p-8 border bg-[#F4ECE8] border-gray-300 shadow-lg h-full w-full",children:[T.jsxs("div",{className:"flex flex-col items-center justify-center text-center",children:[T.jsx("h1",{className:"text-3xl font-bold mb-5 font-playfair",children:"Save The Date"}),T.jsx("div",{className:"w-20 h-[1px] bg-gray-400 mb-5"}),T.jsx("div",{className:"relative p-4 shadow-md border border-gray-300 bg-white rounded-t-full",children:T.jsxs("div",{className:"bg-white mt-20",children:[T.jsxs("div",{className:"flex flex-col items-center",children:[T.jsx("h2",{className:"text-4xl font-semibold font-playfair mb-8",children:ds.title}),T.jsx("div",{className:"mb-6",children:ds.icon}),T.jsx("p",{className:"text-2xl mb-3 font-serif",children:ds.location}),T.jsx("p",{className:"text-xl mb-3 font-serif",children:ds.date}),T.jsx("p",{className:"text-xl mb-16 font-serif",children:ds.time})]}),T.jsx("div",{children:T.jsx("button",{className:"bg-[#E0C9C2] text-black btn btn-wide border border-gray-300 rounded-lg p-2 mb-10",children:T.jsxs("a",{href:ds.mapLink,target:"_blank",rel:"noopener noreferrer",className:"flex items-center",children:["Buka di Google Maps",T.jsx(Wd,{className:"ml-2 text-2xl"})]})})})]})})]}),T.jsx("div",{className:"block absolute bottom-4 left-5 transform -translate-x-1/2 text-gray-600 text-sm pulse-animation",children:T.jsx("p",{children:"<<<"})}),T.jsx("div",{className:"block absolute bottom-4 right-5 transform -translate-x-1/2 text-gray-600 text-sm pulse-animation",children:T.jsx("p",{children:">>>"})})]}));Sw.displayName="AgendaWeddContract";const ui={title:"Resepsi Pernikahan I",location:"Rumah Keluarga Sherly",locationDetail:"JL. A R Hakim Balai-Balai Padang Panjang Barat",mapLink:"https://maps.app.goo.gl/7eX1JcCKzwL91sap7",date:"Sabtu, 24 Agustus 2024",time:"11:00 - 16:00 WIB",icon:T.jsx(xw,{className:"text-xl text-[#E0C9C2]"})},ci={title:"Resepsi Pernikahan II",location:"Gedung Engku Syafe'i",mapLink:"https://maps.app.goo.gl/RitypTG4tTfu9QMA7",locationDetail:"BBPMP SUMBAR, Komplek Perguruan Tinggi UNP, Air Tawar Bar., Kec. Padang Utara",date:"Sabtu, 31 Agustus 2024",time:"10:00 - 15:30 WIB",icon:T.jsx(xw,{className:"text-xl text-[#E0C9C2]"})},Pw=ee.forwardRef((t,e)=>T.jsxs("div",{ref:e,className:"flex items-center justify-center p-8 border bg-[#F4ECE8] border-gray-300 shadow-lg h-full w-full",children:[T.jsxs("div",{className:"flex flex-col items-center justify-center text-center",children:[T.jsx("h1",{className:"text-3xl font-bold mb-2 font-playfair",children:"Save The Date"}),T.jsx("div",{className:"w-20 h-[1px] bg-gray-400 mb-5"}),T.jsx("div",{className:"relative p-4 shadow-md border border-gray-300 bg-white rounded-t-3xl  w-72",children:T.jsxs("div",{className:"flex flex-col items-center",children:[T.jsx("h2",{className:"text-2xl font-semibold font-playfair mb-2",children:ui.title}),T.jsx("div",{className:"mb-2",children:ui.icon}),T.jsx("p",{className:"text-xs mb-1 font-semibold font-serif",children:ui.location}),T.jsx("p",{className:"text-xs mb-1 mx-10 font-serif",children:ui.locationDetail}),T.jsx("p",{className:"text-xs mb-1 font-serif",children:ui.date}),T.jsx("p",{className:"text-xs mb-5 font-serif",children:ui.time}),T.jsx("button",{className:"bg-[#E0C9C2] text-black btn btn-wide border border-gray-300 rounded-lg p-2 mb-1",children:T.jsxs("a",{href:ui.mapLink,target:"_blank",rel:"noopener noreferrer",className:"flex items-center",children:["Buka di Google Maps",T.jsx(Wd,{className:"ml-2 text-2xl"})]})})]})}),T.jsx("div",{className:"relative p-4 shadow-md border border-gray-300 bg-white rounded-b-3xl w-72  mt-2",children:T.jsxs("div",{className:"flex flex-col items-center",children:[T.jsx("h2",{className:"text-2xl font-semibold font-playfair mb-2",children:ci.title}),T.jsx("div",{className:"mb-2",children:ci.icon}),T.jsx("p",{className:"text-xs mb-1 font-semibold font-serif",children:ci.location}),T.jsx("p",{className:"text-xs mb-1 mx-5 font-serif",children:ci.locationDetail}),T.jsx("p",{className:"text-xs mb-1 font-serif",children:ci.date}),T.jsx("p",{className:"text-xs mb-5 font-serif",children:ci.time}),T.jsx("button",{className:"bg-[#E0C9C2] text-black btn btn-wide border border-gray-300 rounded-lg p-2",children:T.jsxs("a",{href:ci.mapLink,target:"_blank",rel:"noopener noreferrer",className:"flex items-center",children:["Buka di Google Maps",T.jsx(Wd,{className:"ml-2 text-2xl"})]})})]})})]}),T.jsx("div",{className:"block absolute bottom-4 left-5 transform -translate-x-1/2 text-gray-600 text-sm pulse-animation",children:T.jsx("p",{children:"<<<"})}),T.jsx("div",{className:"block absolute bottom-4 right-5 transform -translate-x-1/2 text-gray-600 text-sm pulse-animation",children:T.jsx("p",{children:">>>"})})]}));Pw.displayName="AgendaWeddReception";const QS="/undang-aku/assets/illustration-DqdqqhmN.png",bw=ee.forwardRef((t,e)=>T.jsxs("div",{ref:e,className:"flex flex-col items-center justify-center p-8 border bg-[#F4ECE8] border-gray-300 shadow-lg h-full w-full",children:[T.jsxs("p",{className:"text-center text-lg font-serif leading-relaxed mt-24 mb-10",children:["***",T.jsx("br",{}),"Hari ini kau membuka buku.",T.jsx("br",{}),"Tidak ada susunan kata.",T.jsx("br",{}),"Melainkan semerbak aroma dari hamparan bunga.",T.jsx("br",{}),"Di halaman kedua kau bertanya, orang gila mana yang menanam mawar merah di alenia pertama.",T.jsx("br",{}),"Tapi kau tetap membaca.",T.jsx("br",{}),"***"]}),T.jsx("img",{src:QS,alt:"Ilustration Image",className:"max-w-[200px] h-auto mx-auto"}),T.jsx("div",{className:"block absolute bottom-4 left-5 transform -translate-x-1/2 text-gray-600 text-sm pulse-animation",children:T.jsx("p",{children:"<<<"})}),T.jsx("div",{className:"block absolute bottom-4 right-5 transform -translate-x-1/2 text-gray-600 text-sm pulse-animation",children:T.jsx("p",{children:">>>"})})]}));bw.displayName="Poem";const YS="/undang-aku/assets/ocbc-logo-BvNnMprH.jpg",XS="/undang-aku/assets/bni-logo-C7LRVx0C.png",JS="/undang-aku/assets/bri-logo-1iw9aMQc.png",ZS="/undang-aku/assets/gopay-logo-8U_dE6_r.jpg",Aw=ee.forwardRef((t,e)=>{const n=s=>{navigator.clipboard.writeText(s).then(()=>{alert(`Alamat berhasil disalin:
`+s)}).catch(o=>{console.error("Failed to copy text: ",o)})},r=s=>{navigator.clipboard.writeText(s).then(()=>{alert(`No Akun berhasil disalin:
`+s)}).catch(o=>{console.error("Failed to copy text: ",o)})},i=({accountLogo:s,accountNumber:o,accountType:l})=>T.jsxs("div",{className:"border p-4 rounded-lg mb-4 flex items-center justify-between bg-white",onClick:()=>r(o),children:[T.jsx("img",{src:s,alt:"Bank Logo",className:"w-10"}),T.jsx("div",{className:"flex items-center justify-center",children:T.jsxs("div",{children:[T.jsxs("h3",{className:"text-xs font-semibold",children:[l,":"]}),T.jsx("p",{className:"text-xs font-semibold",children:o})]})}),T.jsx(Cy,{className:"cursor-pointer text-gray-500 min-w-4"})]});return T.jsxs("div",{ref:e,className:"flex flex-col items-center justify-center p-8 border bg-[#F4ECE8] border-gray-300 shadow-lg h-full w-full",children:[T.jsxs("div",{className:"flex flex-col items-center justify-center text-center",children:[T.jsx("h1",{className:"text-3xl font-bold mb-5 font-playfair",children:"Hadiah Pernikahan"}),T.jsx("div",{className:"w-20 h-[1px] bg-gray-400 mb-5"}),T.jsxs("div",{className:"mb-2",children:[T.jsx("h2",{className:"text-xl font-semibold mb-4 font-playfair",children:"Transfer Bank / E-Wallet"}),T.jsx(i,{accountLogo:YS,accountNumber:"6938-1398-9623",accountType:"Thariq Ramadhan"}),T.jsx(i,{accountLogo:XS,accountNumber:"0455053170",accountType:"Thariq Ramadhan"}),T.jsx(i,{accountLogo:JS,accountNumber:"5460-0101-3623-539",accountType:"Sherly Ekaputri"}),T.jsx(i,{accountLogo:ZS,accountNumber:"081266654235",accountType:"Sherly Ekaputri"})]}),T.jsx("div",{className:"w-20 h-[1px] bg-gray-400 mb-2"}),T.jsxs("div",{children:[T.jsx("h2",{className:"text-xl font-semibold m-4 font-playfair",children:"Kirim ke Alamat"}),T.jsxs("div",{className:"border bg-white p-3 rounded-lg mb-4 flex items-center justify-between text-xs",onClick:()=>n("Rumah Keluarga Sherly, JL. A R Hakim Balai-Balai RT 22, Padang Panjang Barat"),children:[T.jsxs("p",{children:["Rumah Keluarga Sherly, JL. A R Hakim",T.jsx("br",{}),"Balai-Balai RT 22, Padang Panjang Barat"]}),T.jsx(Cy,{className:"cursor-pointer text-gray-500 ml-2"})]})]})]}),T.jsx("div",{className:"block absolute bottom-4 left-5 transform -translate-x-1/2 text-gray-600 text-sm pulse-animation",children:T.jsx("p",{children:"<<<"})}),T.jsx("div",{className:"block absolute bottom-4 right-5 transform -translate-x-1/2 text-gray-600 text-sm pulse-animation",children:T.jsx("p",{children:">>>"})})]})});Aw.displayName="Gift";function eP(t){return dn({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M12.946 11.398A6.002 6.002 0 0 1 2.108 9.14c-.114-.595.426-1.068 1.028-.997C4.405 8.289 6.48 8.5 8 8.5s3.595-.21 4.864-.358c.602-.07 1.142.402 1.028.998a5.95 5.95 0 0 1-.946 2.258m-.078-2.25C11.588 9.295 9.539 9.5 8 9.5s-3.589-.205-4.868-.352c.11.468.286.91.517 1.317A37 37 0 0 0 8 10.75a37 37 0 0 0 4.351-.285c.231-.407.407-.85.517-1.317m-1.36 2.416c-1.02.1-2.255.186-3.508.186s-2.488-.086-3.507-.186A5 5 0 0 0 8 13a5 5 0 0 0 3.507-1.436ZM6.488 7c.114-.294.179-.636.179-1 0-1.105-.597-2-1.334-2C4.597 4 4 4.895 4 6c0 .364.065.706.178 1 .23-.598.662-1 1.155-1 .494 0 .925.402 1.155 1M12 6c0 .364-.065.706-.178 1-.23-.598-.662-1-1.155-1-.494 0-.925.402-1.155 1a2.8 2.8 0 0 1-.179-1c0-1.105.597-2 1.334-2C11.403 4 12 4.895 12 6"},child:[]},{tag:"path",attr:{d:"M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16m0-1A7 7 0 1 1 8 1a7 7 0 0 1 0 14"},child:[]}]})(t)}function tP(t){return dn({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14m0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16"},child:[]},{tag:"path",attr:{d:"M11.315 10.014a.5.5 0 0 1 .548.736A4.5 4.5 0 0 1 7.965 13a4.5 4.5 0 0 1-3.898-2.25.5.5 0 0 1 .548-.736h.005l.017.005.067.015.252.055c.215.046.515.108.857.169.693.124 1.522.242 2.152.242s1.46-.118 2.152-.242a27 27 0 0 0 1.109-.224l.067-.015.017-.004.005-.002zM4.756 4.566c.763-1.424 4.02-.12.952 3.434-4.496-1.596-2.35-4.298-.952-3.434m6.488 0c1.398-.864 3.544 1.838-.952 3.434-3.067-3.554.19-4.858.952-3.434"},child:[]}]})(t)}function nP(t){return dn({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14m0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16"},child:[]},{tag:"path",attr:{d:"M12.331 9.5a1 1 0 0 1 0 1A5 5 0 0 1 8 13a5 5 0 0 1-4.33-2.5A1 1 0 0 1 4.535 9h6.93a1 1 0 0 1 .866.5M7 6.5c0 .828-.448 0-1 0s-1 .828-1 0S5.448 5 6 5s1 .672 1 1.5m4 0c0 .828-.448 0-1 0s-1 .828-1 0S9.448 5 10 5s1 .672 1 1.5"},child:[]}]})(t)}function rP(t){return dn({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14m0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16"},child:[]},{tag:"path",attr:{d:"M4.285 9.567a.5.5 0 0 1 .683.183A3.5 3.5 0 0 0 8 11.5a3.5 3.5 0 0 0 3.032-1.75.5.5 0 1 1 .866.5A4.5 4.5 0 0 1 8 12.5a4.5 4.5 0 0 1-3.898-2.25.5.5 0 0 1 .183-.683M7 6.5C7 7.328 6.552 8 6 8s-1-.672-1-1.5S5.448 5 6 5s1 .672 1 1.5m4 0c0 .828-.448 1.5-1 1.5s-1-.672-1-1.5S9.448 5 10 5s1 .672 1 1.5"},child:[]}]})(t)}function iP(t){return dn({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M4.968 9.75a.5.5 0 1 0-.866.5A4.5 4.5 0 0 0 8 12.5a4.5 4.5 0 0 0 3.898-2.25.5.5 0 1 0-.866-.5A3.5 3.5 0 0 1 8 11.5a3.5 3.5 0 0 1-3.032-1.75M7 5.116V5a1 1 0 0 0-1-1H3.28a1 1 0 0 0-.97 1.243l.311 1.242A2 2 0 0 0 4.561 8H5a2 2 0 0 0 1.994-1.839A3 3 0 0 1 8 6c.393 0 .74.064 1.006.161A2 2 0 0 0 11 8h.438a2 2 0 0 0 1.94-1.515l.311-1.242A1 1 0 0 0 12.72 4H10a1 1 0 0 0-1 1v.116A4.2 4.2 0 0 0 8 5c-.35 0-.69.04-1 .116"},child:[]},{tag:"path",attr:{d:"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0m-1 0A7 7 0 1 0 1 8a7 7 0 0 0 14 0"},child:[]}]})(t)}function sP(t){return dn({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14m0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16"},child:[]},{tag:"path",attr:{d:"M4.285 9.567a.5.5 0 0 1 .683.183A3.5 3.5 0 0 0 8 11.5a3.5 3.5 0 0 0 3.032-1.75.5.5 0 1 1 .866.5A4.5 4.5 0 0 1 8 12.5a4.5 4.5 0 0 1-3.898-2.25.5.5 0 0 1 .183-.683M7 6.5C7 7.328 6.552 8 6 8s-1-.672-1-1.5S5.448 5 6 5s1 .672 1 1.5m1.757-.437a.5.5 0 0 1 .68.194.93.93 0 0 0 .813.493c.339 0 .645-.19.813-.493a.5.5 0 1 1 .874.486A1.93 1.93 0 0 1 10.25 7.75c-.73 0-1.356-.412-1.687-1.007a.5.5 0 0 1 .194-.68"},child:[]}]})(t)}var ky={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rw=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},oP=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],l=t[n++],u=((i&7)<<18|(s&63)<<12|(o&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},Cw={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,l=o?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,f=s>>2,m=(s&3)<<4|l>>4;let v=(l&15)<<2|c>>6,R=c&63;u||(R=64,o||(v=64)),r.push(n[f],n[m],n[v],n[R])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Rw(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):oP(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],l=i<t.length?n[t.charAt(i)]:0;++i;const c=i<t.length?n[t.charAt(i)]:64;++i;const m=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||l==null||c==null||m==null)throw new aP;const v=s<<2|l>>4;if(r.push(v),c!==64){const R=l<<4&240|c>>2;if(r.push(R),m!==64){const V=c<<6&192|m;r.push(V)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class aP extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const lP=function(t){const e=Rw(t);return Cw.encodeByteArray(e,!0)},ec=function(t){return lP(t).replace(/\./g,"")},uP=function(t){try{return Cw.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function tc(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!cP(n)||(t[n]=tc(t[n],e[n]));return t}function cP(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hP(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dP=()=>hP().__FIREBASE_DEFAULTS__,fP=()=>{if(typeof process>"u"||typeof ky>"u")return;const t=ky.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},pP=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&uP(t[1]);return e&&JSON.parse(e)},kw=()=>{try{return dP()||fP()||pP()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Dw=()=>{var t;return(t=kw())===null||t===void 0?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mP{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gP(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[ec(JSON.stringify(n)),ec(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nc(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function yP(){var t;const e=(t=kw())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Nw(){return typeof window<"u"||Vw()}function Vw(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function Ow(){return!yP()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Lw(){try{return typeof indexedDB=="object"}catch{return!1}}function _P(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vP="FirebaseError";class Hi extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=vP,Object.setPrototypeOf(this,Hi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Nc.prototype.create)}}class Nc{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?wP(s,r):"Error",l=`${this.serviceName}: ${o} (${i}).`;return new Hi(i,l,r)}}function wP(t,e){return t.replace(EP,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const EP=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dy(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Ba(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(Ny(s)&&Ny(o)){if(!Ba(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function Ny(t){return t!==null&&typeof t=="object"}function IP(t,e){const n=new TP(t,e);return n.subscribe.bind(n)}class TP{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");xP(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=Bh),i.error===void 0&&(i.error=Bh),i.complete===void 0&&(i.complete=Bh);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function xP(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Bh(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lt(t){return t&&t._delegate?t._delegate:t}class Oi{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pi="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SP{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new mP;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(bP(e))try{this.getOrInitializeService({instanceIdentifier:pi})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=pi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=pi){return this.instances.has(e)}getOptions(e=pi){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(s);r===l&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:PP(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=pi){return this.component?this.component.multipleInstances?e:pi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function PP(t){return t===pi?void 0:t}function bP(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mw{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new SP(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vp=[];var ye;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ye||(ye={}));const jw={debug:ye.DEBUG,verbose:ye.VERBOSE,info:ye.INFO,warn:ye.WARN,error:ye.ERROR,silent:ye.SILENT},AP=ye.INFO,RP={[ye.DEBUG]:"log",[ye.VERBOSE]:"log",[ye.INFO]:"info",[ye.WARN]:"warn",[ye.ERROR]:"error"},CP=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=RP[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class wp{constructor(e){this.name=e,this._logLevel=AP,this._logHandler=CP,this._userLogHandler=null,vp.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ye))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?jw[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ye.DEBUG,...e),this._logHandler(this,ye.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ye.VERBOSE,...e),this._logHandler(this,ye.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ye.INFO,...e),this._logHandler(this,ye.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ye.WARN,...e),this._logHandler(this,ye.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ye.ERROR,...e),this._logHandler(this,ye.ERROR,...e)}}function kP(t){vp.forEach(e=>{e.setLogLevel(t)})}function DP(t,e){for(const n of vp){let r=null;e&&e.level&&(r=jw[e.level]),t===null?n.userLogHandler=null:n.userLogHandler=(i,s,...o)=>{const l=o.map(u=>{if(u==null)return null;if(typeof u=="string")return u;if(typeof u=="number"||typeof u=="boolean")return u.toString();if(u instanceof Error)return u.message;try{return JSON.stringify(u)}catch{return null}}).filter(u=>u).join(" ");s>=(r??i.logLevel)&&t({level:ye[s].toLowerCase(),message:l,args:o,type:i.name})}}}const NP=(t,e)=>e.some(n=>t instanceof n);let Vy,Oy;function VP(){return Vy||(Vy=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function OP(){return Oy||(Oy=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Fw=new WeakMap,Kd=new WeakMap,Bw=new WeakMap,zh=new WeakMap,Ep=new WeakMap;function LP(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(jr(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&Fw.set(n,t)}).catch(()=>{}),Ep.set(e,t),e}function MP(t){if(Kd.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});Kd.set(t,e)}let Hd={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Kd.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Bw.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return jr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function jP(t){Hd=t(Hd)}function FP(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Uh(this),e,...n);return Bw.set(r,e.sort?e.sort():[e]),jr(r)}:OP().includes(t)?function(...e){return t.apply(Uh(this),e),jr(Fw.get(this))}:function(...e){return jr(t.apply(Uh(this),e))}}function BP(t){return typeof t=="function"?FP(t):(t instanceof IDBTransaction&&MP(t),NP(t,VP())?new Proxy(t,Hd):t)}function jr(t){if(t instanceof IDBRequest)return LP(t);if(zh.has(t))return zh.get(t);const e=BP(t);return e!==t&&(zh.set(t,e),Ep.set(e,t)),e}const Uh=t=>Ep.get(t);function zP(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),l=jr(o);return r&&o.addEventListener("upgradeneeded",u=>{r(jr(o.result),u.oldVersion,u.newVersion,jr(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),l.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),l}const UP=["get","getKey","getAll","getAllKeys","count"],$P=["put","add","delete","clear"],$h=new Map;function Ly(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if($h.get(e))return $h.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=$P.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||UP.includes(n)))return;const s=async function(o,...l){const u=this.transaction(o,i?"readwrite":"readonly");let c=u.store;return r&&(c=c.index(l.shift())),(await Promise.all([c[n](...l),i&&u.done]))[0]};return $h.set(e,s),s}jP(t=>({...t,get:(e,n,r)=>Ly(e,n)||t.get(e,n,r),has:(e,n)=>!!Ly(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qP{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(GP(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function GP(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const rc="@firebase/app",Qd="0.10.7";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Li=new wp("@firebase/app"),WP="@firebase/app-compat",KP="@firebase/analytics-compat",HP="@firebase/analytics",QP="@firebase/app-check-compat",YP="@firebase/app-check",XP="@firebase/auth",JP="@firebase/auth-compat",ZP="@firebase/database",eb="@firebase/database-compat",tb="@firebase/functions",nb="@firebase/functions-compat",rb="@firebase/installations",ib="@firebase/installations-compat",sb="@firebase/messaging",ob="@firebase/messaging-compat",ab="@firebase/performance",lb="@firebase/performance-compat",ub="@firebase/remote-config",cb="@firebase/remote-config-compat",hb="@firebase/storage",db="@firebase/storage-compat",fb="@firebase/firestore",pb="@firebase/vertexai-preview",mb="@firebase/firestore-compat",gb="firebase",yb="10.12.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ur="[DEFAULT]",_b={[rc]:"fire-core",[WP]:"fire-core-compat",[HP]:"fire-analytics",[KP]:"fire-analytics-compat",[YP]:"fire-app-check",[QP]:"fire-app-check-compat",[XP]:"fire-auth",[JP]:"fire-auth-compat",[ZP]:"fire-rtdb",[eb]:"fire-rtdb-compat",[tb]:"fire-fn",[nb]:"fire-fn-compat",[rb]:"fire-iid",[ib]:"fire-iid-compat",[sb]:"fire-fcm",[ob]:"fire-fcm-compat",[ab]:"fire-perf",[lb]:"fire-perf-compat",[ub]:"fire-rc",[cb]:"fire-rc-compat",[hb]:"fire-gcs",[db]:"fire-gcs-compat",[fb]:"fire-fst",[mb]:"fire-fst-compat",[pb]:"fire-vertex","fire-js":"fire-js",[gb]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $r=new Map,Ys=new Map,Xs=new Map;function za(t,e){try{t.container.addComponent(e)}catch(n){Li.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function zw(t,e){t.container.addOrOverwriteComponent(e)}function Js(t){const e=t.name;if(Xs.has(e))return Li.debug(`There were multiple attempts to register component ${e}.`),!1;Xs.set(e,t);for(const n of $r.values())za(n,t);for(const n of Ys.values())za(n,t);return!0}function Uw(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function vb(t,e,n=Ur){Uw(t,e).clearInstance(n)}function $w(t){return t.options!==void 0}function wb(t){return t.settings!==void 0}function Eb(){Xs.clear()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ib={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},vn=new Nc("app","Firebase",Ib);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qw=class{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Oi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw vn.create("app-deleted",{appName:this._name})}};/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tb extends qw{constructor(e,n,r,i){const s=n.automaticDataCollectionEnabled!==void 0?n.automaticDataCollectionEnabled:!1,o={name:r,automaticDataCollectionEnabled:s};if(e.apiKey!==void 0)super(e,o,i);else{const l=e;super(l.options,o,i)}this._serverConfig=Object.assign({automaticDataCollectionEnabled:s},n),this._finalizationRegistry=null,typeof FinalizationRegistry<"u"&&(this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,n.releaseOnDeref=void 0,tr(rc,Qd,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(e){this.isDeleted||(this._refCount++,e!==void 0&&this._finalizationRegistry!==null&&this._finalizationRegistry.register(e,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){xp(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw vn.create("server-app-deleted")}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ip=yb;function Tp(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Ur,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw vn.create("bad-app-name",{appName:String(i)});if(n||(n=Dw()),!n)throw vn.create("no-options");const s=$r.get(i);if(s){if(Ba(n,s.options)&&Ba(r,s.config))return s;throw vn.create("duplicate-app",{appName:i})}const o=new Mw(i);for(const u of Xs.values())o.addComponent(u);const l=new qw(n,r,o);return $r.set(i,l),l}function xb(t,e){if(Nw()&&!Vw())throw vn.create("invalid-server-app-environment");e.automaticDataCollectionEnabled===void 0&&(e.automaticDataCollectionEnabled=!1);let n;$w(t)?n=t.options:n=t;const r=Object.assign(Object.assign({},e),n);r.releaseOnDeref!==void 0&&delete r.releaseOnDeref;const i=c=>[...c].reduce((f,m)=>Math.imul(31,f)+m.charCodeAt(0)|0,0);if(e.releaseOnDeref!==void 0&&typeof FinalizationRegistry>"u")throw vn.create("finalization-registry-not-supported",{});const s=""+i(JSON.stringify(r)),o=Ys.get(s);if(o)return o.incRefCount(e.releaseOnDeref),o;const l=new Mw(s);for(const c of Xs.values())l.addComponent(c);const u=new Tb(n,e,s,l);return Ys.set(s,u),u}function Sb(t=Ur){const e=$r.get(t);if(!e&&t===Ur&&Dw())return Tp();if(!e)throw vn.create("no-app",{appName:t});return e}function Pb(){return Array.from($r.values())}async function xp(t){let e=!1;const n=t.name;$r.has(n)?(e=!0,$r.delete(n)):Ys.has(n)&&t.decRefCount()<=0&&(Ys.delete(n),e=!0),e&&(await Promise.all(t.container.getProviders().map(r=>r.delete())),t.isDeleted=!0)}function tr(t,e,n){var r;let i=(r=_b[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const l=[`Unable to register library "${i}" with version "${e}":`];s&&l.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&l.push("and"),o&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Li.warn(l.join(" "));return}Js(new Oi(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}function Gw(t,e){if(t!==null&&typeof t!="function")throw vn.create("invalid-log-argument");DP(t,e)}function Ww(t){kP(t)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bb="firebase-heartbeat-database",Ab=1,Ua="firebase-heartbeat-store";let qh=null;function Kw(){return qh||(qh=zP(bb,Ab,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Ua)}catch(n){console.warn(n)}}}}).catch(t=>{throw vn.create("idb-open",{originalErrorMessage:t.message})})),qh}async function Rb(t){try{const n=(await Kw()).transaction(Ua),r=await n.objectStore(Ua).get(Hw(t));return await n.done,r}catch(e){if(e instanceof Hi)Li.warn(e.message);else{const n=vn.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Li.warn(n.message)}}}async function My(t,e){try{const r=(await Kw()).transaction(Ua,"readwrite");await r.objectStore(Ua).put(e,Hw(t)),await r.done}catch(n){if(n instanceof Hi)Li.warn(n.message);else{const r=vn.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Li.warn(r.message)}}}function Hw(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cb=1024,kb=30*24*60*60*1e3;class Db{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Vb(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=jy();if(!(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)))return this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const l=new Date(o.date).valueOf();return Date.now()-l<=kb}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var e;if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=jy(),{heartbeatsToSend:r,unsentEntries:i}=Nb(this._heartbeatsCache.heartbeats),s=ec(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}}function jy(){return new Date().toISOString().substring(0,10)}function Nb(t,e=Cb){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),Fy(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Fy(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class Vb{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Lw()?_P().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await Rb(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return My(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return My(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function Fy(t){return ec(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ob(t){Js(new Oi("platform-logger",e=>new qP(e),"PRIVATE")),Js(new Oi("heartbeat",e=>new Db(e),"PRIVATE")),tr(rc,Qd,t),tr(rc,Qd,"esm2017"),tr("fire-js","")}Ob("");const Lb=Object.freeze(Object.defineProperty({__proto__:null,FirebaseError:Hi,SDK_VERSION:Ip,_DEFAULT_ENTRY_NAME:Ur,_addComponent:za,_addOrOverwriteComponent:zw,_apps:$r,_clearComponents:Eb,_components:Xs,_getProvider:Uw,_isFirebaseApp:$w,_isFirebaseServerApp:wb,_registerComponent:Js,_removeServiceInstance:vb,_serverApps:Ys,deleteApp:xp,getApp:Sb,getApps:Pb,initializeApp:Tp,initializeServerApp:xb,onLog:Gw,registerVersion:tr,setLogLevel:Ww},Symbol.toStringTag,{value:"Module"}));var By=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ri,Qw;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(_,y){function w(){}w.prototype=y.prototype,_.D=y.prototype,_.prototype=new w,_.prototype.constructor=_,_.C=function(S,A,k){for(var b=Array(arguments.length-2),he=2;he<arguments.length;he++)b[he-2]=arguments[he];return y.prototype[A].apply(S,b)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(_,y,w){w||(w=0);var S=Array(16);if(typeof y=="string")for(var A=0;16>A;++A)S[A]=y.charCodeAt(w++)|y.charCodeAt(w++)<<8|y.charCodeAt(w++)<<16|y.charCodeAt(w++)<<24;else for(A=0;16>A;++A)S[A]=y[w++]|y[w++]<<8|y[w++]<<16|y[w++]<<24;y=_.g[0],w=_.g[1],A=_.g[2];var k=_.g[3],b=y+(k^w&(A^k))+S[0]+3614090360&4294967295;y=w+(b<<7&4294967295|b>>>25),b=k+(A^y&(w^A))+S[1]+3905402710&4294967295,k=y+(b<<12&4294967295|b>>>20),b=A+(w^k&(y^w))+S[2]+606105819&4294967295,A=k+(b<<17&4294967295|b>>>15),b=w+(y^A&(k^y))+S[3]+3250441966&4294967295,w=A+(b<<22&4294967295|b>>>10),b=y+(k^w&(A^k))+S[4]+4118548399&4294967295,y=w+(b<<7&4294967295|b>>>25),b=k+(A^y&(w^A))+S[5]+1200080426&4294967295,k=y+(b<<12&4294967295|b>>>20),b=A+(w^k&(y^w))+S[6]+2821735955&4294967295,A=k+(b<<17&4294967295|b>>>15),b=w+(y^A&(k^y))+S[7]+4249261313&4294967295,w=A+(b<<22&4294967295|b>>>10),b=y+(k^w&(A^k))+S[8]+1770035416&4294967295,y=w+(b<<7&4294967295|b>>>25),b=k+(A^y&(w^A))+S[9]+2336552879&4294967295,k=y+(b<<12&4294967295|b>>>20),b=A+(w^k&(y^w))+S[10]+4294925233&4294967295,A=k+(b<<17&4294967295|b>>>15),b=w+(y^A&(k^y))+S[11]+2304563134&4294967295,w=A+(b<<22&4294967295|b>>>10),b=y+(k^w&(A^k))+S[12]+1804603682&4294967295,y=w+(b<<7&4294967295|b>>>25),b=k+(A^y&(w^A))+S[13]+4254626195&4294967295,k=y+(b<<12&4294967295|b>>>20),b=A+(w^k&(y^w))+S[14]+2792965006&4294967295,A=k+(b<<17&4294967295|b>>>15),b=w+(y^A&(k^y))+S[15]+1236535329&4294967295,w=A+(b<<22&4294967295|b>>>10),b=y+(A^k&(w^A))+S[1]+4129170786&4294967295,y=w+(b<<5&4294967295|b>>>27),b=k+(w^A&(y^w))+S[6]+3225465664&4294967295,k=y+(b<<9&4294967295|b>>>23),b=A+(y^w&(k^y))+S[11]+643717713&4294967295,A=k+(b<<14&4294967295|b>>>18),b=w+(k^y&(A^k))+S[0]+3921069994&4294967295,w=A+(b<<20&4294967295|b>>>12),b=y+(A^k&(w^A))+S[5]+3593408605&4294967295,y=w+(b<<5&4294967295|b>>>27),b=k+(w^A&(y^w))+S[10]+38016083&4294967295,k=y+(b<<9&4294967295|b>>>23),b=A+(y^w&(k^y))+S[15]+3634488961&4294967295,A=k+(b<<14&4294967295|b>>>18),b=w+(k^y&(A^k))+S[4]+3889429448&4294967295,w=A+(b<<20&4294967295|b>>>12),b=y+(A^k&(w^A))+S[9]+568446438&4294967295,y=w+(b<<5&4294967295|b>>>27),b=k+(w^A&(y^w))+S[14]+3275163606&4294967295,k=y+(b<<9&4294967295|b>>>23),b=A+(y^w&(k^y))+S[3]+4107603335&4294967295,A=k+(b<<14&4294967295|b>>>18),b=w+(k^y&(A^k))+S[8]+1163531501&4294967295,w=A+(b<<20&4294967295|b>>>12),b=y+(A^k&(w^A))+S[13]+2850285829&4294967295,y=w+(b<<5&4294967295|b>>>27),b=k+(w^A&(y^w))+S[2]+4243563512&4294967295,k=y+(b<<9&4294967295|b>>>23),b=A+(y^w&(k^y))+S[7]+1735328473&4294967295,A=k+(b<<14&4294967295|b>>>18),b=w+(k^y&(A^k))+S[12]+2368359562&4294967295,w=A+(b<<20&4294967295|b>>>12),b=y+(w^A^k)+S[5]+4294588738&4294967295,y=w+(b<<4&4294967295|b>>>28),b=k+(y^w^A)+S[8]+2272392833&4294967295,k=y+(b<<11&4294967295|b>>>21),b=A+(k^y^w)+S[11]+1839030562&4294967295,A=k+(b<<16&4294967295|b>>>16),b=w+(A^k^y)+S[14]+4259657740&4294967295,w=A+(b<<23&4294967295|b>>>9),b=y+(w^A^k)+S[1]+2763975236&4294967295,y=w+(b<<4&4294967295|b>>>28),b=k+(y^w^A)+S[4]+1272893353&4294967295,k=y+(b<<11&4294967295|b>>>21),b=A+(k^y^w)+S[7]+4139469664&4294967295,A=k+(b<<16&4294967295|b>>>16),b=w+(A^k^y)+S[10]+3200236656&4294967295,w=A+(b<<23&4294967295|b>>>9),b=y+(w^A^k)+S[13]+681279174&4294967295,y=w+(b<<4&4294967295|b>>>28),b=k+(y^w^A)+S[0]+3936430074&4294967295,k=y+(b<<11&4294967295|b>>>21),b=A+(k^y^w)+S[3]+3572445317&4294967295,A=k+(b<<16&4294967295|b>>>16),b=w+(A^k^y)+S[6]+76029189&4294967295,w=A+(b<<23&4294967295|b>>>9),b=y+(w^A^k)+S[9]+3654602809&4294967295,y=w+(b<<4&4294967295|b>>>28),b=k+(y^w^A)+S[12]+3873151461&4294967295,k=y+(b<<11&4294967295|b>>>21),b=A+(k^y^w)+S[15]+530742520&4294967295,A=k+(b<<16&4294967295|b>>>16),b=w+(A^k^y)+S[2]+3299628645&4294967295,w=A+(b<<23&4294967295|b>>>9),b=y+(A^(w|~k))+S[0]+4096336452&4294967295,y=w+(b<<6&4294967295|b>>>26),b=k+(w^(y|~A))+S[7]+1126891415&4294967295,k=y+(b<<10&4294967295|b>>>22),b=A+(y^(k|~w))+S[14]+2878612391&4294967295,A=k+(b<<15&4294967295|b>>>17),b=w+(k^(A|~y))+S[5]+4237533241&4294967295,w=A+(b<<21&4294967295|b>>>11),b=y+(A^(w|~k))+S[12]+1700485571&4294967295,y=w+(b<<6&4294967295|b>>>26),b=k+(w^(y|~A))+S[3]+2399980690&4294967295,k=y+(b<<10&4294967295|b>>>22),b=A+(y^(k|~w))+S[10]+4293915773&4294967295,A=k+(b<<15&4294967295|b>>>17),b=w+(k^(A|~y))+S[1]+2240044497&4294967295,w=A+(b<<21&4294967295|b>>>11),b=y+(A^(w|~k))+S[8]+1873313359&4294967295,y=w+(b<<6&4294967295|b>>>26),b=k+(w^(y|~A))+S[15]+4264355552&4294967295,k=y+(b<<10&4294967295|b>>>22),b=A+(y^(k|~w))+S[6]+2734768916&4294967295,A=k+(b<<15&4294967295|b>>>17),b=w+(k^(A|~y))+S[13]+1309151649&4294967295,w=A+(b<<21&4294967295|b>>>11),b=y+(A^(w|~k))+S[4]+4149444226&4294967295,y=w+(b<<6&4294967295|b>>>26),b=k+(w^(y|~A))+S[11]+3174756917&4294967295,k=y+(b<<10&4294967295|b>>>22),b=A+(y^(k|~w))+S[2]+718787259&4294967295,A=k+(b<<15&4294967295|b>>>17),b=w+(k^(A|~y))+S[9]+3951481745&4294967295,_.g[0]=_.g[0]+y&4294967295,_.g[1]=_.g[1]+(A+(b<<21&4294967295|b>>>11))&4294967295,_.g[2]=_.g[2]+A&4294967295,_.g[3]=_.g[3]+k&4294967295}r.prototype.u=function(_,y){y===void 0&&(y=_.length);for(var w=y-this.blockSize,S=this.B,A=this.h,k=0;k<y;){if(A==0)for(;k<=w;)i(this,_,k),k+=this.blockSize;if(typeof _=="string"){for(;k<y;)if(S[A++]=_.charCodeAt(k++),A==this.blockSize){i(this,S),A=0;break}}else for(;k<y;)if(S[A++]=_[k++],A==this.blockSize){i(this,S),A=0;break}}this.h=A,this.o+=y},r.prototype.v=function(){var _=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);_[0]=128;for(var y=1;y<_.length-8;++y)_[y]=0;var w=8*this.o;for(y=_.length-8;y<_.length;++y)_[y]=w&255,w/=256;for(this.u(_),_=Array(16),y=w=0;4>y;++y)for(var S=0;32>S;S+=8)_[w++]=this.g[y]>>>S&255;return _};function s(_,y){var w=l;return Object.prototype.hasOwnProperty.call(w,_)?w[_]:w[_]=y(_)}function o(_,y){this.h=y;for(var w=[],S=!0,A=_.length-1;0<=A;A--){var k=_[A]|0;S&&k==y||(w[A]=k,S=!1)}this.g=w}var l={};function u(_){return-128<=_&&128>_?s(_,function(y){return new o([y|0],0>y?-1:0)}):new o([_|0],0>_?-1:0)}function c(_){if(isNaN(_)||!isFinite(_))return m;if(0>_)return L(c(-_));for(var y=[],w=1,S=0;_>=w;S++)y[S]=_/w|0,w*=4294967296;return new o(y,0)}function f(_,y){if(_.length==0)throw Error("number format error: empty string");if(y=y||10,2>y||36<y)throw Error("radix out of range: "+y);if(_.charAt(0)=="-")return L(f(_.substring(1),y));if(0<=_.indexOf("-"))throw Error('number format error: interior "-" character');for(var w=c(Math.pow(y,8)),S=m,A=0;A<_.length;A+=8){var k=Math.min(8,_.length-A),b=parseInt(_.substring(A,A+k),y);8>k?(k=c(Math.pow(y,k)),S=S.j(k).add(c(b))):(S=S.j(w),S=S.add(c(b)))}return S}var m=u(0),v=u(1),R=u(16777216);t=o.prototype,t.m=function(){if(N(this))return-L(this).m();for(var _=0,y=1,w=0;w<this.g.length;w++){var S=this.i(w);_+=(0<=S?S:4294967296+S)*y,y*=4294967296}return _},t.toString=function(_){if(_=_||10,2>_||36<_)throw Error("radix out of range: "+_);if(V(this))return"0";if(N(this))return"-"+L(this).toString(_);for(var y=c(Math.pow(_,6)),w=this,S="";;){var A=d(w,y).g;w=C(w,A.j(y));var k=((0<w.g.length?w.g[0]:w.h)>>>0).toString(_);if(w=A,V(w))return k+S;for(;6>k.length;)k="0"+k;S=k+S}},t.i=function(_){return 0>_?0:_<this.g.length?this.g[_]:this.h};function V(_){if(_.h!=0)return!1;for(var y=0;y<_.g.length;y++)if(_.g[y]!=0)return!1;return!0}function N(_){return _.h==-1}t.l=function(_){return _=C(this,_),N(_)?-1:V(_)?0:1};function L(_){for(var y=_.g.length,w=[],S=0;S<y;S++)w[S]=~_.g[S];return new o(w,~_.h).add(v)}t.abs=function(){return N(this)?L(this):this},t.add=function(_){for(var y=Math.max(this.g.length,_.g.length),w=[],S=0,A=0;A<=y;A++){var k=S+(this.i(A)&65535)+(_.i(A)&65535),b=(k>>>16)+(this.i(A)>>>16)+(_.i(A)>>>16);S=b>>>16,k&=65535,b&=65535,w[A]=b<<16|k}return new o(w,w[w.length-1]&-2147483648?-1:0)};function C(_,y){return _.add(L(y))}t.j=function(_){if(V(this)||V(_))return m;if(N(this))return N(_)?L(this).j(L(_)):L(L(this).j(_));if(N(_))return L(this.j(L(_)));if(0>this.l(R)&&0>_.l(R))return c(this.m()*_.m());for(var y=this.g.length+_.g.length,w=[],S=0;S<2*y;S++)w[S]=0;for(S=0;S<this.g.length;S++)for(var A=0;A<_.g.length;A++){var k=this.i(S)>>>16,b=this.i(S)&65535,he=_.i(A)>>>16,Ve=_.i(A)&65535;w[2*S+2*A]+=b*Ve,P(w,2*S+2*A),w[2*S+2*A+1]+=k*Ve,P(w,2*S+2*A+1),w[2*S+2*A+1]+=b*he,P(w,2*S+2*A+1),w[2*S+2*A+2]+=k*he,P(w,2*S+2*A+2)}for(S=0;S<y;S++)w[S]=w[2*S+1]<<16|w[2*S];for(S=y;S<2*y;S++)w[S]=0;return new o(w,0)};function P(_,y){for(;(_[y]&65535)!=_[y];)_[y+1]+=_[y]>>>16,_[y]&=65535,y++}function x(_,y){this.g=_,this.h=y}function d(_,y){if(V(y))throw Error("division by zero");if(V(_))return new x(m,m);if(N(_))return y=d(L(_),y),new x(L(y.g),L(y.h));if(N(y))return y=d(_,L(y)),new x(L(y.g),y.h);if(30<_.g.length){if(N(_)||N(y))throw Error("slowDivide_ only works with positive integers.");for(var w=v,S=y;0>=S.l(_);)w=g(w),S=g(S);var A=I(w,1),k=I(S,1);for(S=I(S,2),w=I(w,2);!V(S);){var b=k.add(S);0>=b.l(_)&&(A=A.add(w),k=b),S=I(S,1),w=I(w,1)}return y=C(_,A.j(y)),new x(A,y)}for(A=m;0<=_.l(y);){for(w=Math.max(1,Math.floor(_.m()/y.m())),S=Math.ceil(Math.log(w)/Math.LN2),S=48>=S?1:Math.pow(2,S-48),k=c(w),b=k.j(y);N(b)||0<b.l(_);)w-=S,k=c(w),b=k.j(y);V(k)&&(k=v),A=A.add(k),_=C(_,b)}return new x(A,_)}t.A=function(_){return d(this,_).h},t.and=function(_){for(var y=Math.max(this.g.length,_.g.length),w=[],S=0;S<y;S++)w[S]=this.i(S)&_.i(S);return new o(w,this.h&_.h)},t.or=function(_){for(var y=Math.max(this.g.length,_.g.length),w=[],S=0;S<y;S++)w[S]=this.i(S)|_.i(S);return new o(w,this.h|_.h)},t.xor=function(_){for(var y=Math.max(this.g.length,_.g.length),w=[],S=0;S<y;S++)w[S]=this.i(S)^_.i(S);return new o(w,this.h^_.h)};function g(_){for(var y=_.g.length+1,w=[],S=0;S<y;S++)w[S]=_.i(S)<<1|_.i(S-1)>>>31;return new o(w,_.h)}function I(_,y){var w=y>>5;y%=32;for(var S=_.g.length-w,A=[],k=0;k<S;k++)A[k]=0<y?_.i(k+w)>>>y|_.i(k+w+1)<<32-y:_.i(k+w);return new o(A,_.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Qw=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=f,Ri=o}).apply(typeof By<"u"?By:typeof self<"u"?self:typeof window<"u"?window:{});var eu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Yw,Xw,ia,Jw,_u,Yd,Zw,e1,t1;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,h,p){return a==Array.prototype||a==Object.prototype||(a[h]=p.value),a};function n(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof eu=="object"&&eu];for(var h=0;h<a.length;++h){var p=a[h];if(p&&p.Math==Math)return p}throw Error("Cannot find global object")}var r=n(this);function i(a,h){if(h)e:{var p=r;a=a.split(".");for(var E=0;E<a.length-1;E++){var O=a[E];if(!(O in p))break e;p=p[O]}a=a[a.length-1],E=p[a],h=h(E),h!=E&&h!=null&&e(p,a,{configurable:!0,writable:!0,value:h})}}function s(a,h){a instanceof String&&(a+="");var p=0,E=!1,O={next:function(){if(!E&&p<a.length){var z=p++;return{value:h(z,a[z]),done:!1}}return E=!0,{done:!0,value:void 0}}};return O[Symbol.iterator]=function(){return O},O}i("Array.prototype.values",function(a){return a||function(){return s(this,function(h,p){return p})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},l=this||self;function u(a){var h=typeof a;return h=h!="object"?h:a?Array.isArray(a)?"array":h:"null",h=="array"||h=="object"&&typeof a.length=="number"}function c(a){var h=typeof a;return h=="object"&&a!=null||h=="function"}function f(a,h,p){return a.call.apply(a.bind,arguments)}function m(a,h,p){if(!a)throw Error();if(2<arguments.length){var E=Array.prototype.slice.call(arguments,2);return function(){var O=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(O,E),a.apply(h,O)}}return function(){return a.apply(h,arguments)}}function v(a,h,p){return v=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?f:m,v.apply(null,arguments)}function R(a,h){var p=Array.prototype.slice.call(arguments,1);return function(){var E=p.slice();return E.push.apply(E,arguments),a.apply(this,E)}}function V(a,h){function p(){}p.prototype=h.prototype,a.aa=h.prototype,a.prototype=new p,a.prototype.constructor=a,a.Qb=function(E,O,z){for(var Q=Array(arguments.length-2),Ce=2;Ce<arguments.length;Ce++)Q[Ce-2]=arguments[Ce];return h.prototype[O].apply(E,Q)}}function N(a){const h=a.length;if(0<h){const p=Array(h);for(let E=0;E<h;E++)p[E]=a[E];return p}return[]}function L(a,h){for(let p=1;p<arguments.length;p++){const E=arguments[p];if(u(E)){const O=a.length||0,z=E.length||0;a.length=O+z;for(let Q=0;Q<z;Q++)a[O+Q]=E[Q]}else a.push(E)}}class C{constructor(h,p){this.i=h,this.j=p,this.h=0,this.g=null}get(){let h;return 0<this.h?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function P(a){return/^[\s\xa0]*$/.test(a)}function x(){var a=l.navigator;return a&&(a=a.userAgent)?a:""}function d(a){return d[" "](a),a}d[" "]=function(){};var g=x().indexOf("Gecko")!=-1&&!(x().toLowerCase().indexOf("webkit")!=-1&&x().indexOf("Edge")==-1)&&!(x().indexOf("Trident")!=-1||x().indexOf("MSIE")!=-1)&&x().indexOf("Edge")==-1;function I(a,h,p){for(const E in a)h.call(p,a[E],E,a)}function _(a,h){for(const p in a)h.call(void 0,a[p],p,a)}function y(a){const h={};for(const p in a)h[p]=a[p];return h}const w="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function S(a,h){let p,E;for(let O=1;O<arguments.length;O++){E=arguments[O];for(p in E)a[p]=E[p];for(let z=0;z<w.length;z++)p=w[z],Object.prototype.hasOwnProperty.call(E,p)&&(a[p]=E[p])}}function A(a){var h=1;a=a.split(":");const p=[];for(;0<h&&a.length;)p.push(a.shift()),h--;return a.length&&p.push(a.join(":")),p}function k(a){l.setTimeout(()=>{throw a},0)}function b(){var a=ne;let h=null;return a.g&&(h=a.g,a.g=a.g.next,a.g||(a.h=null),h.next=null),h}class he{constructor(){this.h=this.g=null}add(h,p){const E=Ve.get();E.set(h,p),this.h?this.h.next=E:this.g=E,this.h=E}}var Ve=new C(()=>new ut,a=>a.reset());class ut{constructor(){this.next=this.g=this.h=null}set(h,p){this.h=h,this.g=p,this.next=null}reset(){this.next=this.g=this.h=null}}let He,H=!1,ne=new he,te=()=>{const a=l.Promise.resolve(void 0);He=()=>{a.then(fe)}};var fe=()=>{for(var a;a=b();){try{a.h.call(a.g)}catch(p){k(p)}var h=Ve;h.j(a),100>h.h&&(h.h++,a.next=h.g,h.g=a)}H=!1};function de(){this.s=this.s,this.C=this.C}de.prototype.s=!1,de.prototype.ma=function(){this.s||(this.s=!0,this.N())},de.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ce(a,h){this.type=a,this.g=this.target=h,this.defaultPrevented=!1}ce.prototype.h=function(){this.defaultPrevented=!0};var xe=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var a=!1,h=Object.defineProperty({},"passive",{get:function(){a=!0}});try{const p=()=>{};l.addEventListener("test",p,h),l.removeEventListener("test",p,h)}catch{}return a}();function $e(a,h){if(ce.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a){var p=this.type=a.type,E=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.g=h,h=a.relatedTarget){if(g){e:{try{d(h.nodeName);var O=!0;break e}catch{}O=!1}O||(h=null)}}else p=="mouseover"?h=a.fromElement:p=="mouseout"&&(h=a.toElement);this.relatedTarget=h,E?(this.clientX=E.clientX!==void 0?E.clientX:E.pageX,this.clientY=E.clientY!==void 0?E.clientY:E.pageY,this.screenX=E.screenX||0,this.screenY=E.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=typeof a.pointerType=="string"?a.pointerType:Ot[a.pointerType]||"",this.state=a.state,this.i=a,a.defaultPrevented&&$e.aa.h.call(this)}}V($e,ce);var Ot={2:"touch",3:"pen",4:"mouse"};$e.prototype.h=function(){$e.aa.h.call(this);var a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var Wt="closure_listenable_"+(1e6*Math.random()|0),$n=0;function qn(a,h,p,E,O){this.listener=a,this.proxy=null,this.src=h,this.type=p,this.capture=!!E,this.ha=O,this.key=++$n,this.da=this.fa=!1}function fn(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function nt(a){this.src=a,this.g={},this.h=0}nt.prototype.add=function(a,h,p,E,O){var z=a.toString();a=this.g[z],a||(a=this.g[z]=[],this.h++);var Q=ft(a,h,E,O);return-1<Q?(h=a[Q],p||(h.fa=!1)):(h=new qn(h,this.src,z,!!E,O),h.fa=p,a.push(h)),h};function Lt(a,h){var p=h.type;if(p in a.g){var E=a.g[p],O=Array.prototype.indexOf.call(E,h,void 0),z;(z=0<=O)&&Array.prototype.splice.call(E,O,1),z&&(fn(h),a.g[p].length==0&&(delete a.g[p],a.h--))}}function ft(a,h,p,E){for(var O=0;O<a.length;++O){var z=a[O];if(!z.da&&z.listener==h&&z.capture==!!p&&z.ha==E)return O}return-1}var So="closure_lm_"+(1e6*Math.random()|0),Po={};function wl(a,h,p,E,O){if(Array.isArray(h)){for(var z=0;z<h.length;z++)wl(a,h[z],p,E,O);return null}return p=Ro(p),a&&a[Wt]?a.K(h,p,c(E)?!!E.capture:!!E,O):El(a,h,p,!1,E,O)}function El(a,h,p,E,O,z){if(!h)throw Error("Invalid event type");var Q=c(O)?!!O.capture:!!O,Ce=Ao(a);if(Ce||(a[So]=Ce=new nt(a)),p=Ce.add(h,p,E,Q,z),p.proxy)return p;if(E=es(),p.proxy=E,E.src=a,E.listener=p,a.addEventListener)xe||(O=Q),O===void 0&&(O=!1),a.addEventListener(h.toString(),E,O);else if(a.attachEvent)a.attachEvent(bo(h.toString()),E);else if(a.addListener&&a.removeListener)a.addListener(E);else throw Error("addEventListener and attachEvent are unavailable.");return p}function es(){function a(p){return h.call(a.src,a.listener,p)}const h=dr;return a}function ts(a,h,p,E,O){if(Array.isArray(h))for(var z=0;z<h.length;z++)ts(a,h[z],p,E,O);else E=c(E)?!!E.capture:!!E,p=Ro(p),a&&a[Wt]?(a=a.i,h=String(h).toString(),h in a.g&&(z=a.g[h],p=ft(z,p,E,O),-1<p&&(fn(z[p]),Array.prototype.splice.call(z,p,1),z.length==0&&(delete a.g[h],a.h--)))):a&&(a=Ao(a))&&(h=a.g[h.toString()],a=-1,h&&(a=ft(h,p,E,O)),(p=-1<a?h[a]:null)&&si(p))}function si(a){if(typeof a!="number"&&a&&!a.da){var h=a.src;if(h&&h[Wt])Lt(h.i,a);else{var p=a.type,E=a.proxy;h.removeEventListener?h.removeEventListener(p,E,a.capture):h.detachEvent?h.detachEvent(bo(p),E):h.addListener&&h.removeListener&&h.removeListener(E),(p=Ao(h))?(Lt(p,a),p.h==0&&(p.src=null,h[So]=null)):fn(a)}}}function bo(a){return a in Po?Po[a]:Po[a]="on"+a}function dr(a,h){if(a.da)a=!0;else{h=new $e(h,this);var p=a.listener,E=a.ha||a.src;a.fa&&si(a),a=p.call(E,h)}return a}function Ao(a){return a=a[So],a instanceof nt?a:null}var ns="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ro(a){return typeof a=="function"?a:(a[ns]||(a[ns]=function(h){return a.handleEvent(h)}),a[ns])}function pt(){de.call(this),this.i=new nt(this),this.M=this,this.F=null}V(pt,de),pt.prototype[Wt]=!0,pt.prototype.removeEventListener=function(a,h,p,E){ts(this,a,h,p,E)};function rt(a,h){var p,E=a.F;if(E)for(p=[];E;E=E.F)p.push(E);if(a=a.M,E=h.type||h,typeof h=="string")h=new ce(h,a);else if(h instanceof ce)h.target=h.target||a;else{var O=h;h=new ce(E,a),S(h,O)}if(O=!0,p)for(var z=p.length-1;0<=z;z--){var Q=h.g=p[z];O=rs(Q,E,!0,h)&&O}if(Q=h.g=a,O=rs(Q,E,!0,h)&&O,O=rs(Q,E,!1,h)&&O,p)for(z=0;z<p.length;z++)Q=h.g=p[z],O=rs(Q,E,!1,h)&&O}pt.prototype.N=function(){if(pt.aa.N.call(this),this.i){var a=this.i,h;for(h in a.g){for(var p=a.g[h],E=0;E<p.length;E++)fn(p[E]);delete a.g[h],a.h--}}this.F=null},pt.prototype.K=function(a,h,p,E){return this.i.add(String(a),h,!1,p,E)},pt.prototype.L=function(a,h,p,E){return this.i.add(String(a),h,!0,p,E)};function rs(a,h,p,E){if(h=a.i.g[String(h)],!h)return!0;h=h.concat();for(var O=!0,z=0;z<h.length;++z){var Q=h[z];if(Q&&!Q.da&&Q.capture==p){var Ce=Q.listener,It=Q.ha||Q.src;Q.fa&&Lt(a.i,Q),O=Ce.call(It,E)!==!1&&O}}return O&&!E.defaultPrevented}function Co(a,h,p){if(typeof a=="function")p&&(a=v(a,p));else if(a&&typeof a.handleEvent=="function")a=v(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(h)?-1:l.setTimeout(a,h||0)}function Il(a){a.g=Co(()=>{a.g=null,a.i&&(a.i=!1,Il(a))},a.l);const h=a.h;a.h=null,a.m.apply(null,h)}class Tl extends de{constructor(h,p){super(),this.m=h,this.l=p,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:Il(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function kn(a){de.call(this),this.h=a,this.g={}}V(kn,de);var is=[];function ss(a){I(a.g,function(h,p){this.g.hasOwnProperty(p)&&si(h)},a),a.g={}}kn.prototype.N=function(){kn.aa.N.call(this),ss(this)},kn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ko=l.JSON.stringify,U=l.JSON.parse,D=class{stringify(a){return l.JSON.stringify(a,void 0)}parse(a){return l.JSON.parse(a,void 0)}};function F(){}F.prototype.h=null;function q(a){return a.h||(a.h=a.i())}function j(){}var $={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function oe(){ce.call(this,"d")}V(oe,ce);function se(){ce.call(this,"c")}V(se,ce);var ae={},Se=null;function Ae(){return Se=Se||new pt}ae.La="serverreachability";function ke(a){ce.call(this,ae.La,a)}V(ke,ce);function Ie(a){const h=Ae();rt(h,new ke(h))}ae.STAT_EVENT="statevent";function it(a,h){ce.call(this,ae.STAT_EVENT,a),this.stat=h}V(it,ce);function _e(a){const h=Ae();rt(h,new it(h,a))}ae.Ma="timingevent";function st(a,h){ce.call(this,ae.Ma,a),this.size=h}V(st,ce);function Gn(a,h){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){a()},h)}function fr(){this.g=!0}fr.prototype.xa=function(){this.g=!1};function os(a,h,p,E,O,z){a.info(function(){if(a.g)if(z)for(var Q="",Ce=z.split("&"),It=0;It<Ce.length;It++){var Te=Ce[It].split("=");if(1<Te.length){var At=Te[0];Te=Te[1];var Rt=At.split("_");Q=2<=Rt.length&&Rt[1]=="type"?Q+(At+"="+Te+"&"):Q+(At+"=redacted&")}}else Q=null;else Q=z;return"XMLHTTP REQ ("+E+") [attempt "+O+"]: "+h+`
`+p+`
`+Q})}function SI(a,h,p,E,O,z,Q){a.info(function(){return"XMLHTTP RESP ("+E+") [ attempt "+O+"]: "+h+`
`+p+`
`+z+" "+Q})}function as(a,h,p,E){a.info(function(){return"XMLHTTP TEXT ("+h+"): "+bI(a,p)+(E?" "+E:"")})}function PI(a,h){a.info(function(){return"TIMEOUT: "+h})}fr.prototype.info=function(){};function bI(a,h){if(!a.g)return h;if(!h)return null;try{var p=JSON.parse(h);if(p){for(a=0;a<p.length;a++)if(Array.isArray(p[a])){var E=p[a];if(!(2>E.length)){var O=E[1];if(Array.isArray(O)&&!(1>O.length)){var z=O[0];if(z!="noop"&&z!="stop"&&z!="close")for(var Q=1;Q<O.length;Q++)O[Q]=""}}}}return ko(p)}catch{return h}}var xl={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Am={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},nh;function Sl(){}V(Sl,F),Sl.prototype.g=function(){return new XMLHttpRequest},Sl.prototype.i=function(){return{}},nh=new Sl;function pr(a,h,p,E){this.j=a,this.i=h,this.l=p,this.R=E||1,this.U=new kn(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Rm}function Rm(){this.i=null,this.g="",this.h=!1}var Cm={},rh={};function ih(a,h,p){a.L=1,a.v=Rl(Wn(h)),a.m=p,a.P=!0,km(a,null)}function km(a,h){a.F=Date.now(),Pl(a),a.A=Wn(a.v);var p=a.A,E=a.R;Array.isArray(E)||(E=[String(E)]),Gm(p.i,"t",E),a.C=0,p=a.j.J,a.h=new Rm,a.g=ug(a.j,p?h:null,!a.m),0<a.O&&(a.M=new Tl(v(a.Y,a,a.g),a.O)),h=a.U,p=a.g,E=a.ca;var O="readystatechange";Array.isArray(O)||(O&&(is[0]=O.toString()),O=is);for(var z=0;z<O.length;z++){var Q=wl(p,O[z],E||h.handleEvent,!1,h.h||h);if(!Q)break;h.g[Q.key]=Q}h=a.H?y(a.H):{},a.m?(a.u||(a.u="POST"),h["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.A,a.u,a.m,h)):(a.u="GET",a.g.ea(a.A,a.u,null,h)),Ie(),os(a.i,a.u,a.A,a.l,a.R,a.m)}pr.prototype.ca=function(a){a=a.target;const h=this.M;h&&Kn(a)==3?h.j():this.Y(a)},pr.prototype.Y=function(a){try{if(a==this.g)e:{const Rt=Kn(this.g);var h=this.g.Ba();const cs=this.g.Z();if(!(3>Rt)&&(Rt!=3||this.g&&(this.h.h||this.g.oa()||Jm(this.g)))){this.J||Rt!=4||h==7||(h==8||0>=cs?Ie(3):Ie(2)),sh(this);var p=this.g.Z();this.X=p;t:if(Dm(this)){var E=Jm(this.g);a="";var O=E.length,z=Kn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){oi(this),Do(this);var Q="";break t}this.h.i=new l.TextDecoder}for(h=0;h<O;h++)this.h.h=!0,a+=this.h.i.decode(E[h],{stream:!(z&&h==O-1)});E.length=0,this.h.g+=a,this.C=0,Q=this.h.g}else Q=this.g.oa();if(this.o=p==200,SI(this.i,this.u,this.A,this.l,this.R,Rt,p),this.o){if(this.T&&!this.K){t:{if(this.g){var Ce,It=this.g;if((Ce=It.g?It.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!P(Ce)){var Te=Ce;break t}}Te=null}if(p=Te)as(this.i,this.l,p,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,oh(this,p);else{this.o=!1,this.s=3,_e(12),oi(this),Do(this);break e}}if(this.P){p=!0;let In;for(;!this.J&&this.C<Q.length;)if(In=AI(this,Q),In==rh){Rt==4&&(this.s=4,_e(14),p=!1),as(this.i,this.l,null,"[Incomplete Response]");break}else if(In==Cm){this.s=4,_e(15),as(this.i,this.l,Q,"[Invalid Chunk]"),p=!1;break}else as(this.i,this.l,In,null),oh(this,In);if(Dm(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Rt!=4||Q.length!=0||this.h.h||(this.s=1,_e(16),p=!1),this.o=this.o&&p,!p)as(this.i,this.l,Q,"[Invalid Chunked Response]"),oi(this),Do(this);else if(0<Q.length&&!this.W){this.W=!0;var At=this.j;At.g==this&&At.ba&&!At.M&&(At.j.info("Great, no buffering proxy detected. Bytes received: "+Q.length),dh(At),At.M=!0,_e(11))}}else as(this.i,this.l,Q,null),oh(this,Q);Rt==4&&oi(this),this.o&&!this.J&&(Rt==4?sg(this.j,this):(this.o=!1,Pl(this)))}else GI(this.g),p==400&&0<Q.indexOf("Unknown SID")?(this.s=3,_e(12)):(this.s=0,_e(13)),oi(this),Do(this)}}}catch{}finally{}};function Dm(a){return a.g?a.u=="GET"&&a.L!=2&&a.j.Ca:!1}function AI(a,h){var p=a.C,E=h.indexOf(`
`,p);return E==-1?rh:(p=Number(h.substring(p,E)),isNaN(p)?Cm:(E+=1,E+p>h.length?rh:(h=h.slice(E,E+p),a.C=E+p,h)))}pr.prototype.cancel=function(){this.J=!0,oi(this)};function Pl(a){a.S=Date.now()+a.I,Nm(a,a.I)}function Nm(a,h){if(a.B!=null)throw Error("WatchDog timer not null");a.B=Gn(v(a.ba,a),h)}function sh(a){a.B&&(l.clearTimeout(a.B),a.B=null)}pr.prototype.ba=function(){this.B=null;const a=Date.now();0<=a-this.S?(PI(this.i,this.A),this.L!=2&&(Ie(),_e(17)),oi(this),this.s=2,Do(this)):Nm(this,this.S-a)};function Do(a){a.j.G==0||a.J||sg(a.j,a)}function oi(a){sh(a);var h=a.M;h&&typeof h.ma=="function"&&h.ma(),a.M=null,ss(a.U),a.g&&(h=a.g,a.g=null,h.abort(),h.ma())}function oh(a,h){try{var p=a.j;if(p.G!=0&&(p.g==a||ah(p.h,a))){if(!a.K&&ah(p.h,a)&&p.G==3){try{var E=p.Da.g.parse(h)}catch{E=null}if(Array.isArray(E)&&E.length==3){var O=E;if(O[0]==0){e:if(!p.u){if(p.g)if(p.g.F+3e3<a.F)Vl(p),Dl(p);else break e;hh(p),_e(18)}}else p.za=O[1],0<p.za-p.T&&37500>O[2]&&p.F&&p.v==0&&!p.C&&(p.C=Gn(v(p.Za,p),6e3));if(1>=Lm(p.h)&&p.ca){try{p.ca()}catch{}p.ca=void 0}}else li(p,11)}else if((a.K||p.g==a)&&Vl(p),!P(h))for(O=p.Da.g.parse(h),h=0;h<O.length;h++){let Te=O[h];if(p.T=Te[0],Te=Te[1],p.G==2)if(Te[0]=="c"){p.K=Te[1],p.ia=Te[2];const At=Te[3];At!=null&&(p.la=At,p.j.info("VER="+p.la));const Rt=Te[4];Rt!=null&&(p.Aa=Rt,p.j.info("SVER="+p.Aa));const cs=Te[5];cs!=null&&typeof cs=="number"&&0<cs&&(E=1.5*cs,p.L=E,p.j.info("backChannelRequestTimeoutMs_="+E)),E=p;const In=a.g;if(In){const Ll=In.g?In.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ll){var z=E.h;z.g||Ll.indexOf("spdy")==-1&&Ll.indexOf("quic")==-1&&Ll.indexOf("h2")==-1||(z.j=z.l,z.g=new Set,z.h&&(lh(z,z.h),z.h=null))}if(E.D){const fh=In.g?In.g.getResponseHeader("X-HTTP-Session-Id"):null;fh&&(E.ya=fh,Oe(E.I,E.D,fh))}}p.G=3,p.l&&p.l.ua(),p.ba&&(p.R=Date.now()-a.F,p.j.info("Handshake RTT: "+p.R+"ms")),E=p;var Q=a;if(E.qa=lg(E,E.J?E.ia:null,E.W),Q.K){Mm(E.h,Q);var Ce=Q,It=E.L;It&&(Ce.I=It),Ce.B&&(sh(Ce),Pl(Ce)),E.g=Q}else rg(E);0<p.i.length&&Nl(p)}else Te[0]!="stop"&&Te[0]!="close"||li(p,7);else p.G==3&&(Te[0]=="stop"||Te[0]=="close"?Te[0]=="stop"?li(p,7):ch(p):Te[0]!="noop"&&p.l&&p.l.ta(Te),p.v=0)}}Ie(4)}catch{}}var RI=class{constructor(a,h){this.g=a,this.map=h}};function Vm(a){this.l=a||10,l.PerformanceNavigationTiming?(a=l.performance.getEntriesByType("navigation"),a=0<a.length&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Om(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function Lm(a){return a.h?1:a.g?a.g.size:0}function ah(a,h){return a.h?a.h==h:a.g?a.g.has(h):!1}function lh(a,h){a.g?a.g.add(h):a.h=h}function Mm(a,h){a.h&&a.h==h?a.h=null:a.g&&a.g.has(h)&&a.g.delete(h)}Vm.prototype.cancel=function(){if(this.i=jm(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const a of this.g.values())a.cancel();this.g.clear()}};function jm(a){if(a.h!=null)return a.i.concat(a.h.D);if(a.g!=null&&a.g.size!==0){let h=a.i;for(const p of a.g.values())h=h.concat(p.D);return h}return N(a.i)}function CI(a){if(a.V&&typeof a.V=="function")return a.V();if(typeof Map<"u"&&a instanceof Map||typeof Set<"u"&&a instanceof Set)return Array.from(a.values());if(typeof a=="string")return a.split("");if(u(a)){for(var h=[],p=a.length,E=0;E<p;E++)h.push(a[E]);return h}h=[],p=0;for(E in a)h[p++]=a[E];return h}function kI(a){if(a.na&&typeof a.na=="function")return a.na();if(!a.V||typeof a.V!="function"){if(typeof Map<"u"&&a instanceof Map)return Array.from(a.keys());if(!(typeof Set<"u"&&a instanceof Set)){if(u(a)||typeof a=="string"){var h=[];a=a.length;for(var p=0;p<a;p++)h.push(p);return h}h=[],p=0;for(const E in a)h[p++]=E;return h}}}function Fm(a,h){if(a.forEach&&typeof a.forEach=="function")a.forEach(h,void 0);else if(u(a)||typeof a=="string")Array.prototype.forEach.call(a,h,void 0);else for(var p=kI(a),E=CI(a),O=E.length,z=0;z<O;z++)h.call(void 0,E[z],p&&p[z],a)}var Bm=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function DI(a,h){if(a){a=a.split("&");for(var p=0;p<a.length;p++){var E=a[p].indexOf("="),O=null;if(0<=E){var z=a[p].substring(0,E);O=a[p].substring(E+1)}else z=a[p];h(z,O?decodeURIComponent(O.replace(/\+/g," ")):"")}}}function ai(a){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,a instanceof ai){this.h=a.h,bl(this,a.j),this.o=a.o,this.g=a.g,Al(this,a.s),this.l=a.l;var h=a.i,p=new Oo;p.i=h.i,h.g&&(p.g=new Map(h.g),p.h=h.h),zm(this,p),this.m=a.m}else a&&(h=String(a).match(Bm))?(this.h=!1,bl(this,h[1]||"",!0),this.o=No(h[2]||""),this.g=No(h[3]||"",!0),Al(this,h[4]),this.l=No(h[5]||"",!0),zm(this,h[6]||"",!0),this.m=No(h[7]||"")):(this.h=!1,this.i=new Oo(null,this.h))}ai.prototype.toString=function(){var a=[],h=this.j;h&&a.push(Vo(h,Um,!0),":");var p=this.g;return(p||h=="file")&&(a.push("//"),(h=this.o)&&a.push(Vo(h,Um,!0),"@"),a.push(encodeURIComponent(String(p)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p=this.s,p!=null&&a.push(":",String(p))),(p=this.l)&&(this.g&&p.charAt(0)!="/"&&a.push("/"),a.push(Vo(p,p.charAt(0)=="/"?OI:VI,!0))),(p=this.i.toString())&&a.push("?",p),(p=this.m)&&a.push("#",Vo(p,MI)),a.join("")};function Wn(a){return new ai(a)}function bl(a,h,p){a.j=p?No(h,!0):h,a.j&&(a.j=a.j.replace(/:$/,""))}function Al(a,h){if(h){if(h=Number(h),isNaN(h)||0>h)throw Error("Bad port number "+h);a.s=h}else a.s=null}function zm(a,h,p){h instanceof Oo?(a.i=h,jI(a.i,a.h)):(p||(h=Vo(h,LI)),a.i=new Oo(h,a.h))}function Oe(a,h,p){a.i.set(h,p)}function Rl(a){return Oe(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),a}function No(a,h){return a?h?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function Vo(a,h,p){return typeof a=="string"?(a=encodeURI(a).replace(h,NI),p&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function NI(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var Um=/[#\/\?@]/g,VI=/[#\?:]/g,OI=/[#\?]/g,LI=/[#\?@]/g,MI=/#/g;function Oo(a,h){this.h=this.g=null,this.i=a||null,this.j=!!h}function mr(a){a.g||(a.g=new Map,a.h=0,a.i&&DI(a.i,function(h,p){a.add(decodeURIComponent(h.replace(/\+/g," ")),p)}))}t=Oo.prototype,t.add=function(a,h){mr(this),this.i=null,a=ls(this,a);var p=this.g.get(a);return p||this.g.set(a,p=[]),p.push(h),this.h+=1,this};function $m(a,h){mr(a),h=ls(a,h),a.g.has(h)&&(a.i=null,a.h-=a.g.get(h).length,a.g.delete(h))}function qm(a,h){return mr(a),h=ls(a,h),a.g.has(h)}t.forEach=function(a,h){mr(this),this.g.forEach(function(p,E){p.forEach(function(O){a.call(h,O,E,this)},this)},this)},t.na=function(){mr(this);const a=Array.from(this.g.values()),h=Array.from(this.g.keys()),p=[];for(let E=0;E<h.length;E++){const O=a[E];for(let z=0;z<O.length;z++)p.push(h[E])}return p},t.V=function(a){mr(this);let h=[];if(typeof a=="string")qm(this,a)&&(h=h.concat(this.g.get(ls(this,a))));else{a=Array.from(this.g.values());for(let p=0;p<a.length;p++)h=h.concat(a[p])}return h},t.set=function(a,h){return mr(this),this.i=null,a=ls(this,a),qm(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[h]),this.h+=1,this},t.get=function(a,h){return a?(a=this.V(a),0<a.length?String(a[0]):h):h};function Gm(a,h,p){$m(a,h),0<p.length&&(a.i=null,a.g.set(ls(a,h),N(p)),a.h+=p.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const a=[],h=Array.from(this.g.keys());for(var p=0;p<h.length;p++){var E=h[p];const z=encodeURIComponent(String(E)),Q=this.V(E);for(E=0;E<Q.length;E++){var O=z;Q[E]!==""&&(O+="="+encodeURIComponent(String(Q[E]))),a.push(O)}}return this.i=a.join("&")};function ls(a,h){return h=String(h),a.j&&(h=h.toLowerCase()),h}function jI(a,h){h&&!a.j&&(mr(a),a.i=null,a.g.forEach(function(p,E){var O=E.toLowerCase();E!=O&&($m(this,E),Gm(this,O,p))},a)),a.j=h}function FI(a,h){const p=new fr;if(l.Image){const E=new Image;E.onload=R(gr,p,"TestLoadImage: loaded",!0,h,E),E.onerror=R(gr,p,"TestLoadImage: error",!1,h,E),E.onabort=R(gr,p,"TestLoadImage: abort",!1,h,E),E.ontimeout=R(gr,p,"TestLoadImage: timeout",!1,h,E),l.setTimeout(function(){E.ontimeout&&E.ontimeout()},1e4),E.src=a}else h(!1)}function BI(a,h){const p=new fr,E=new AbortController,O=setTimeout(()=>{E.abort(),gr(p,"TestPingServer: timeout",!1,h)},1e4);fetch(a,{signal:E.signal}).then(z=>{clearTimeout(O),z.ok?gr(p,"TestPingServer: ok",!0,h):gr(p,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(O),gr(p,"TestPingServer: error",!1,h)})}function gr(a,h,p,E,O){try{O&&(O.onload=null,O.onerror=null,O.onabort=null,O.ontimeout=null),E(p)}catch{}}function zI(){this.g=new D}function UI(a,h,p){const E=p||"";try{Fm(a,function(O,z){let Q=O;c(O)&&(Q=ko(O)),h.push(E+z+"="+encodeURIComponent(Q))})}catch(O){throw h.push(E+"type="+encodeURIComponent("_badmap")),O}}function Lo(a){this.l=a.Ub||null,this.j=a.eb||!1}V(Lo,F),Lo.prototype.g=function(){return new Cl(this.l,this.j)},Lo.prototype.i=function(a){return function(){return a}}({});function Cl(a,h){pt.call(this),this.D=a,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}V(Cl,pt),t=Cl.prototype,t.open=function(a,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=a,this.A=h,this.readyState=1,jo(this)},t.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const h={headers:this.u,method:this.B,credentials:this.m,cache:void 0};a&&(h.body=a),(this.D||l).fetch(new Request(this.A,h)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Mo(this)),this.readyState=0},t.Sa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,jo(this)),this.g&&(this.readyState=3,jo(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Wm(this)}else a.text().then(this.Ra.bind(this),this.ga.bind(this))};function Wm(a){a.j.read().then(a.Pa.bind(a)).catch(a.ga.bind(a))}t.Pa=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var h=a.value?a.value:new Uint8Array(0);(h=this.v.decode(h,{stream:!a.done}))&&(this.response=this.responseText+=h)}a.done?Mo(this):jo(this),this.readyState==3&&Wm(this)}},t.Ra=function(a){this.g&&(this.response=this.responseText=a,Mo(this))},t.Qa=function(a){this.g&&(this.response=a,Mo(this))},t.ga=function(){this.g&&Mo(this)};function Mo(a){a.readyState=4,a.l=null,a.j=null,a.v=null,jo(a)}t.setRequestHeader=function(a,h){this.u.append(a,h)},t.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const a=[],h=this.h.entries();for(var p=h.next();!p.done;)p=p.value,a.push(p[0]+": "+p[1]),p=h.next();return a.join(`\r
`)};function jo(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(Cl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function Km(a){let h="";return I(a,function(p,E){h+=E,h+=":",h+=p,h+=`\r
`}),h}function uh(a,h,p){e:{for(E in p){var E=!1;break e}E=!0}E||(p=Km(p),typeof a=="string"?p!=null&&encodeURIComponent(String(p)):Oe(a,h,p))}function Qe(a){pt.call(this),this.headers=new Map,this.o=a||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}V(Qe,pt);var $I=/^https?$/i,qI=["POST","PUT"];t=Qe.prototype,t.Ha=function(a){this.J=a},t.ea=function(a,h,p,E){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);h=h?h.toUpperCase():"GET",this.D=a,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():nh.g(),this.v=this.o?q(this.o):q(nh),this.g.onreadystatechange=v(this.Ea,this);try{this.B=!0,this.g.open(h,String(a),!0),this.B=!1}catch(z){Hm(this,z);return}if(a=p||"",p=new Map(this.headers),E)if(Object.getPrototypeOf(E)===Object.prototype)for(var O in E)p.set(O,E[O]);else if(typeof E.keys=="function"&&typeof E.get=="function")for(const z of E.keys())p.set(z,E.get(z));else throw Error("Unknown input type for opt_headers: "+String(E));E=Array.from(p.keys()).find(z=>z.toLowerCase()=="content-type"),O=l.FormData&&a instanceof l.FormData,!(0<=Array.prototype.indexOf.call(qI,h,void 0))||E||O||p.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[z,Q]of p)this.g.setRequestHeader(z,Q);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Xm(this),this.u=!0,this.g.send(a),this.u=!1}catch(z){Hm(this,z)}};function Hm(a,h){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=h,a.m=5,Qm(a),kl(a)}function Qm(a){a.A||(a.A=!0,rt(a,"complete"),rt(a,"error"))}t.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=a||7,rt(this,"complete"),rt(this,"abort"),kl(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),kl(this,!0)),Qe.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Ym(this):this.bb())},t.bb=function(){Ym(this)};function Ym(a){if(a.h&&typeof o<"u"&&(!a.v[1]||Kn(a)!=4||a.Z()!=2)){if(a.u&&Kn(a)==4)Co(a.Ea,0,a);else if(rt(a,"readystatechange"),Kn(a)==4){a.h=!1;try{const Q=a.Z();e:switch(Q){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var p;if(!(p=h)){var E;if(E=Q===0){var O=String(a.D).match(Bm)[1]||null;!O&&l.self&&l.self.location&&(O=l.self.location.protocol.slice(0,-1)),E=!$I.test(O?O.toLowerCase():"")}p=E}if(p)rt(a,"complete"),rt(a,"success");else{a.m=6;try{var z=2<Kn(a)?a.g.statusText:""}catch{z=""}a.l=z+" ["+a.Z()+"]",Qm(a)}}finally{kl(a)}}}}function kl(a,h){if(a.g){Xm(a);const p=a.g,E=a.v[0]?()=>{}:null;a.g=null,a.v=null,h||rt(a,"ready");try{p.onreadystatechange=E}catch{}}}function Xm(a){a.I&&(l.clearTimeout(a.I),a.I=null)}t.isActive=function(){return!!this.g};function Kn(a){return a.g?a.g.readyState:0}t.Z=function(){try{return 2<Kn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(a){if(this.g){var h=this.g.responseText;return a&&h.indexOf(a)==0&&(h=h.substring(a.length)),U(h)}};function Jm(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.H){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function GI(a){const h={};a=(a.g&&2<=Kn(a)&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let E=0;E<a.length;E++){if(P(a[E]))continue;var p=A(a[E]);const O=p[0];if(p=p[1],typeof p!="string")continue;p=p.trim();const z=h[O]||[];h[O]=z,z.push(p)}_(h,function(E){return E.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Fo(a,h,p){return p&&p.internalChannelParams&&p.internalChannelParams[a]||h}function Zm(a){this.Aa=0,this.i=[],this.j=new fr,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Fo("failFast",!1,a),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Fo("baseRetryDelayMs",5e3,a),this.cb=Fo("retryDelaySeedMs",1e4,a),this.Wa=Fo("forwardChannelMaxRetries",2,a),this.wa=Fo("forwardChannelRequestTimeoutMs",2e4,a),this.pa=a&&a.xmlHttpFactory||void 0,this.Xa=a&&a.Tb||void 0,this.Ca=a&&a.useFetchStreams||!1,this.L=void 0,this.J=a&&a.supportsCrossDomainXhr||!1,this.K="",this.h=new Vm(a&&a.concurrentRequestLimit),this.Da=new zI,this.P=a&&a.fastHandshake||!1,this.O=a&&a.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=a&&a.Rb||!1,a&&a.xa&&this.j.xa(),a&&a.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&a&&a.detectBufferingProxy||!1,this.ja=void 0,a&&a.longPollingTimeout&&0<a.longPollingTimeout&&(this.ja=a.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Zm.prototype,t.la=8,t.G=1,t.connect=function(a,h,p,E){_e(0),this.W=a,this.H=h||{},p&&E!==void 0&&(this.H.OSID=p,this.H.OAID=E),this.F=this.X,this.I=lg(this,null,this.W),Nl(this)};function ch(a){if(eg(a),a.G==3){var h=a.U++,p=Wn(a.I);if(Oe(p,"SID",a.K),Oe(p,"RID",h),Oe(p,"TYPE","terminate"),Bo(a,p),h=new pr(a,a.j,h),h.L=2,h.v=Rl(Wn(p)),p=!1,l.navigator&&l.navigator.sendBeacon)try{p=l.navigator.sendBeacon(h.v.toString(),"")}catch{}!p&&l.Image&&(new Image().src=h.v,p=!0),p||(h.g=ug(h.j,null),h.g.ea(h.v)),h.F=Date.now(),Pl(h)}ag(a)}function Dl(a){a.g&&(dh(a),a.g.cancel(),a.g=null)}function eg(a){Dl(a),a.u&&(l.clearTimeout(a.u),a.u=null),Vl(a),a.h.cancel(),a.s&&(typeof a.s=="number"&&l.clearTimeout(a.s),a.s=null)}function Nl(a){if(!Om(a.h)&&!a.s){a.s=!0;var h=a.Ga;He||te(),H||(He(),H=!0),ne.add(h,a),a.B=0}}function WI(a,h){return Lm(a.h)>=a.h.j-(a.s?1:0)?!1:a.s?(a.i=h.D.concat(a.i),!0):a.G==1||a.G==2||a.B>=(a.Va?0:a.Wa)?!1:(a.s=Gn(v(a.Ga,a,h),og(a,a.B)),a.B++,!0)}t.Ga=function(a){if(this.s)if(this.s=null,this.G==1){if(!a){this.U=Math.floor(1e5*Math.random()),a=this.U++;const O=new pr(this,this.j,a);let z=this.o;if(this.S&&(z?(z=y(z),S(z,this.S)):z=this.S),this.m!==null||this.O||(O.H=z,z=null),this.P)e:{for(var h=0,p=0;p<this.i.length;p++){t:{var E=this.i[p];if("__data__"in E.map&&(E=E.map.__data__,typeof E=="string")){E=E.length;break t}E=void 0}if(E===void 0)break;if(h+=E,4096<h){h=p;break e}if(h===4096||p===this.i.length-1){h=p+1;break e}}h=1e3}else h=1e3;h=ng(this,O,h),p=Wn(this.I),Oe(p,"RID",a),Oe(p,"CVER",22),this.D&&Oe(p,"X-HTTP-Session-Id",this.D),Bo(this,p),z&&(this.O?h="headers="+encodeURIComponent(String(Km(z)))+"&"+h:this.m&&uh(p,this.m,z)),lh(this.h,O),this.Ua&&Oe(p,"TYPE","init"),this.P?(Oe(p,"$req",h),Oe(p,"SID","null"),O.T=!0,ih(O,p,null)):ih(O,p,h),this.G=2}}else this.G==3&&(a?tg(this,a):this.i.length==0||Om(this.h)||tg(this))};function tg(a,h){var p;h?p=h.l:p=a.U++;const E=Wn(a.I);Oe(E,"SID",a.K),Oe(E,"RID",p),Oe(E,"AID",a.T),Bo(a,E),a.m&&a.o&&uh(E,a.m,a.o),p=new pr(a,a.j,p,a.B+1),a.m===null&&(p.H=a.o),h&&(a.i=h.D.concat(a.i)),h=ng(a,p,1e3),p.I=Math.round(.5*a.wa)+Math.round(.5*a.wa*Math.random()),lh(a.h,p),ih(p,E,h)}function Bo(a,h){a.H&&I(a.H,function(p,E){Oe(h,E,p)}),a.l&&Fm({},function(p,E){Oe(h,E,p)})}function ng(a,h,p){p=Math.min(a.i.length,p);var E=a.l?v(a.l.Na,a.l,a):null;e:{var O=a.i;let z=-1;for(;;){const Q=["count="+p];z==-1?0<p?(z=O[0].g,Q.push("ofs="+z)):z=0:Q.push("ofs="+z);let Ce=!0;for(let It=0;It<p;It++){let Te=O[It].g;const At=O[It].map;if(Te-=z,0>Te)z=Math.max(0,O[It].g-100),Ce=!1;else try{UI(At,Q,"req"+Te+"_")}catch{E&&E(At)}}if(Ce){E=Q.join("&");break e}}}return a=a.i.splice(0,p),h.D=a,E}function rg(a){if(!a.g&&!a.u){a.Y=1;var h=a.Fa;He||te(),H||(He(),H=!0),ne.add(h,a),a.v=0}}function hh(a){return a.g||a.u||3<=a.v?!1:(a.Y++,a.u=Gn(v(a.Fa,a),og(a,a.v)),a.v++,!0)}t.Fa=function(){if(this.u=null,ig(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var a=2*this.R;this.j.info("BP detection timer enabled: "+a),this.A=Gn(v(this.ab,this),a)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,_e(10),Dl(this),ig(this))};function dh(a){a.A!=null&&(l.clearTimeout(a.A),a.A=null)}function ig(a){a.g=new pr(a,a.j,"rpc",a.Y),a.m===null&&(a.g.H=a.o),a.g.O=0;var h=Wn(a.qa);Oe(h,"RID","rpc"),Oe(h,"SID",a.K),Oe(h,"AID",a.T),Oe(h,"CI",a.F?"0":"1"),!a.F&&a.ja&&Oe(h,"TO",a.ja),Oe(h,"TYPE","xmlhttp"),Bo(a,h),a.m&&a.o&&uh(h,a.m,a.o),a.L&&(a.g.I=a.L);var p=a.g;a=a.ia,p.L=1,p.v=Rl(Wn(h)),p.m=null,p.P=!0,km(p,a)}t.Za=function(){this.C!=null&&(this.C=null,Dl(this),hh(this),_e(19))};function Vl(a){a.C!=null&&(l.clearTimeout(a.C),a.C=null)}function sg(a,h){var p=null;if(a.g==h){Vl(a),dh(a),a.g=null;var E=2}else if(ah(a.h,h))p=h.D,Mm(a.h,h),E=1;else return;if(a.G!=0){if(h.o)if(E==1){p=h.m?h.m.length:0,h=Date.now()-h.F;var O=a.B;E=Ae(),rt(E,new st(E,p)),Nl(a)}else rg(a);else if(O=h.s,O==3||O==0&&0<h.X||!(E==1&&WI(a,h)||E==2&&hh(a)))switch(p&&0<p.length&&(h=a.h,h.i=h.i.concat(p)),O){case 1:li(a,5);break;case 4:li(a,10);break;case 3:li(a,6);break;default:li(a,2)}}}function og(a,h){let p=a.Ta+Math.floor(Math.random()*a.cb);return a.isActive()||(p*=2),p*h}function li(a,h){if(a.j.info("Error code "+h),h==2){var p=v(a.fb,a),E=a.Xa;const O=!E;E=new ai(E||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||bl(E,"https"),Rl(E),O?FI(E.toString(),p):BI(E.toString(),p)}else _e(2);a.G=0,a.l&&a.l.sa(h),ag(a),eg(a)}t.fb=function(a){a?(this.j.info("Successfully pinged google.com"),_e(2)):(this.j.info("Failed to ping google.com"),_e(1))};function ag(a){if(a.G=0,a.ka=[],a.l){const h=jm(a.h);(h.length!=0||a.i.length!=0)&&(L(a.ka,h),L(a.ka,a.i),a.h.i.length=0,N(a.i),a.i.length=0),a.l.ra()}}function lg(a,h,p){var E=p instanceof ai?Wn(p):new ai(p);if(E.g!="")h&&(E.g=h+"."+E.g),Al(E,E.s);else{var O=l.location;E=O.protocol,h=h?h+"."+O.hostname:O.hostname,O=+O.port;var z=new ai(null);E&&bl(z,E),h&&(z.g=h),O&&Al(z,O),p&&(z.l=p),E=z}return p=a.D,h=a.ya,p&&h&&Oe(E,p,h),Oe(E,"VER",a.la),Bo(a,E),E}function ug(a,h,p){if(h&&!a.J)throw Error("Can't create secondary domain capable XhrIo object.");return h=a.Ca&&!a.pa?new Qe(new Lo({eb:p})):new Qe(a.pa),h.Ha(a.J),h}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function cg(){}t=cg.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Ol(){}Ol.prototype.g=function(a,h){return new rn(a,h)};function rn(a,h){pt.call(this),this.g=new Zm(h),this.l=a,this.h=h&&h.messageUrlParams||null,a=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(a?a["X-WebChannel-Content-Type"]=h.messageContentType:a={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.va&&(a?a["X-WebChannel-Client-Profile"]=h.va:a={"X-WebChannel-Client-Profile":h.va}),this.g.S=a,(a=h&&h.Sb)&&!P(a)&&(this.g.m=a),this.v=h&&h.supportsCrossDomainXhr||!1,this.u=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!P(h)&&(this.g.D=h,a=this.h,a!==null&&h in a&&(a=this.h,h in a&&delete a[h])),this.j=new us(this)}V(rn,pt),rn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},rn.prototype.close=function(){ch(this.g)},rn.prototype.o=function(a){var h=this.g;if(typeof a=="string"){var p={};p.__data__=a,a=p}else this.u&&(p={},p.__data__=ko(a),a=p);h.i.push(new RI(h.Ya++,a)),h.G==3&&Nl(h)},rn.prototype.N=function(){this.g.l=null,delete this.j,ch(this.g),delete this.g,rn.aa.N.call(this)};function hg(a){oe.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var h=a.__sm__;if(h){e:{for(const p in h){a=p;break e}a=void 0}(this.i=a)&&(a=this.i,h=h!==null&&a in h?h[a]:void 0),this.data=h}else this.data=a}V(hg,oe);function dg(){se.call(this),this.status=1}V(dg,se);function us(a){this.g=a}V(us,cg),us.prototype.ua=function(){rt(this.g,"a")},us.prototype.ta=function(a){rt(this.g,new hg(a))},us.prototype.sa=function(a){rt(this.g,new dg)},us.prototype.ra=function(){rt(this.g,"b")},Ol.prototype.createWebChannel=Ol.prototype.g,rn.prototype.send=rn.prototype.o,rn.prototype.open=rn.prototype.m,rn.prototype.close=rn.prototype.close,t1=function(){return new Ol},e1=function(){return Ae()},Zw=ae,Yd={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},xl.NO_ERROR=0,xl.TIMEOUT=8,xl.HTTP_ERROR=6,_u=xl,Am.COMPLETE="complete",Jw=Am,j.EventType=$,$.OPEN="a",$.CLOSE="b",$.ERROR="c",$.MESSAGE="d",pt.prototype.listen=pt.prototype.K,ia=j,Xw=Lo,Qe.prototype.listenOnce=Qe.prototype.L,Qe.prototype.getLastError=Qe.prototype.Ka,Qe.prototype.getLastErrorCode=Qe.prototype.Ba,Qe.prototype.getStatus=Qe.prototype.Z,Qe.prototype.getResponseJson=Qe.prototype.Oa,Qe.prototype.getResponseText=Qe.prototype.oa,Qe.prototype.send=Qe.prototype.ea,Qe.prototype.setWithCredentials=Qe.prototype.Ha,Yw=Qe}).apply(typeof eu<"u"?eu:typeof self<"u"?self:typeof window<"u"?window:{});const zy="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}yt.UNAUTHENTICATED=new yt(null),yt.GOOGLE_CREDENTIALS=new yt("google-credentials-uid"),yt.FIRST_PARTY=new yt("first-party-uid"),yt.MOCK_USER=new yt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let yo="10.12.3";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qr=new wp("@firebase/firestore");function ys(){return qr.logLevel}function Mb(t){qr.setLogLevel(t)}function W(t,...e){if(qr.logLevel<=ye.DEBUG){const n=e.map(Sp);qr.debug(`Firestore (${yo}): ${t}`,...n)}}function et(t,...e){if(qr.logLevel<=ye.ERROR){const n=e.map(Sp);qr.error(`Firestore (${yo}): ${t}`,...n)}}function Cn(t,...e){if(qr.logLevel<=ye.WARN){const n=e.map(Sp);qr.warn(`Firestore (${yo}): ${t}`,...n)}}function Sp(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J(t="Unexpected state"){const e=`FIRESTORE (${yo}) INTERNAL ASSERTION FAILED: `+t;throw et(e),new Error(e)}function re(t,e){t||J()}function jb(t,e){t||J()}function X(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class G extends Hi{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vt{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n1{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Fb{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(yt.UNAUTHENTICATED))}shutdown(){}}class Bb{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class zb{constructor(e){this.t=e,this.currentUser=yt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i;const i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let s=new vt;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new vt,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const u=s;e.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},l=u=>{W("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):(W("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new vt)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(W("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(re(typeof r.accessToken=="string"),new n1(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return re(e===null||typeof e=="string"),new yt(e)}}class Ub{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=yt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class $b{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new Ub(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(yt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class qb{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Gb{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){const r=s=>{s.error!=null&&W("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,W("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{W("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):W("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(re(typeof n.token=="string"),this.R=n.token,new qb(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wb(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r1{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=Wb(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}}function le(t,e){return t<e?-1:t>e?1:0}function Zs(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}function i1(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ue{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new G(B.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new G(B.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new G(B.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new G(B.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Ue.fromMillis(Date.now())}static fromDate(e){return Ue.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Ue(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?le(this.nanoseconds,e.nanoseconds):le(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ie{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ie(e)}static min(){return new ie(new Ue(0,0))}static max(){return new ie(new Ue(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $a{constructor(e,n,r){n===void 0?n=0:n>e.length&&J(),r===void 0?r=e.length-n:r>e.length-n&&J(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return $a.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof $a?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class me extends $a{construct(e,n,r){return new me(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new G(B.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new me(n)}static emptyPath(){return new me([])}}const Kb=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Be extends $a{construct(e,n,r){return new Be(e,n,r)}static isValidIdentifier(e){return Kb.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Be.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Be(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new G(B.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const l=e[i];if(l==="\\"){if(i+1===e.length)throw new G(B.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new G(B.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else l==="`"?(o=!o,i++):l!=="."||o?(r+=l,i++):(s(),i++)}if(s(),o)throw new G(B.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Be(n)}static emptyPath(){return new Be([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y{constructor(e){this.path=e}static fromPath(e){return new Y(me.fromString(e))}static fromName(e){return new Y(me.fromString(e).popFirst(5))}static empty(){return new Y(me.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&me.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return me.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Y(new me(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ic{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}}function Xd(t){return t.fields.find(e=>e.kind===2)}function mi(t){return t.fields.filter(e=>e.kind!==2)}ic.UNKNOWN_ID=-1;class vu{constructor(e,n){this.fieldPath=e,this.kind=n}}class qa{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new qa(0,un.min())}}function s1(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=ie.fromTimestamp(r===1e9?new Ue(n+1,0):new Ue(n,r));return new un(i,Y.empty(),e)}function o1(t){return new un(t.readTime,t.key,-1)}class un{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new un(ie.min(),Y.empty(),-1)}static max(){return new un(ie.max(),Y.empty(),-1)}}function Pp(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Y.comparator(t.documentKey,e.documentKey),n!==0?n:le(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a1="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class l1{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ti(t){if(t.code!==B.FAILED_PRECONDITION||t.message!==a1)throw t;W("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&J(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new M((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof M?n:M.resolve(n)}catch(n){return M.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):M.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):M.reject(n)}static resolve(e){return new M((n,r)=>{n(e)})}static reject(e){return new M((n,r)=>{r(e)})}static waitFor(e){return new M((n,r)=>{let i=0,s=0,o=!1;e.forEach(l=>{++i,l.next(()=>{++s,o&&s===i&&n()},u=>r(u))}),o=!0,s===i&&n()})}static or(e){let n=M.resolve(!1);for(const r of e)n=n.next(i=>i?M.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new M((r,i)=>{const s=e.length,o=new Array(s);let l=0;for(let u=0;u<s;u++){const c=u;n(e[c]).next(f=>{o[c]=f,++l,l===s&&r(o)},f=>i(f))}})}static doWhile(e,n){return new M((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vc{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.V=new vt,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{n.error?this.V.reject(new ya(e,n.error)):this.V.resolve()},this.transaction.onerror=r=>{const i=bp(r.target.error);this.V.reject(new ya(e,i))}}static open(e,n,r,i){try{return new Vc(n,e.transaction(i,r))}catch(s){throw new ya(n,s)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(W("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const n=this.transaction.objectStore(e);return new Qb(n)}}class Fn{constructor(e,n,r){this.name=e,this.version=n,this.p=r,Fn.S(nc())===12.2&&et("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return W("SimpleDb","Removing database:",e),gi(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!Lw())return!1;if(Fn.C())return!0;const e=nc(),n=Fn.S(e),r=0<n&&n<10,i=u1(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static C(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.v)==="YES"}static F(e,n){return e.store(n)}static S(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}async M(e){return this.db||(W("SimpleDb","Opening database:",this.name),this.db=await new Promise((n,r)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=s=>{const o=s.target.result;n(o)},i.onblocked=()=>{r(new ya(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=s=>{const o=s.target.error;o.name==="VersionError"?r(new G(B.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?r(new G(B.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):r(new ya(e,o))},i.onupgradeneeded=s=>{W("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);const o=s.target.result;this.p.O(o,i.transaction,s.oldVersion,this.version).next(()=>{W("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=n=>this.N(n)),this.db}L(e){this.N=e,this.db&&(this.db.onversionchange=n=>e(n))}async runTransaction(e,n,r,i){const s=n==="readonly";let o=0;for(;;){++o;try{this.db=await this.M(e);const l=Vc.open(this.db,e,s?"readonly":"readwrite",r),u=i(l).next(c=>(l.g(),c)).catch(c=>(l.abort(c),M.reject(c))).toPromise();return u.catch(()=>{}),await l.m,u}catch(l){const u=l,c=u.name!=="FirebaseError"&&o<3;if(W("SimpleDb","Transaction failed with error:",u.message,"Retrying:",c),this.close(),!c)return Promise.reject(u)}}}close(){this.db&&this.db.close(),this.db=void 0}}function u1(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}class Hb{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return gi(this.B.delete())}}class ya extends G{constructor(e,n){super(B.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function ni(t){return t.name==="IndexedDbTransactionError"}class Qb{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(W("SimpleDb","PUT",this.store.name,e,n),r=this.store.put(n,e)):(W("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),gi(r)}add(e){return W("SimpleDb","ADD",this.store.name,e,e),gi(this.store.add(e))}get(e){return gi(this.store.get(e)).next(n=>(n===void 0&&(n=null),W("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return W("SimpleDb","DELETE",this.store.name,e),gi(this.store.delete(e))}count(){return W("SimpleDb","COUNT",this.store.name),gi(this.store.count())}U(e,n){const r=this.options(e,n),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){const s=i.getAll(r.range);return new M((o,l)=>{s.onerror=u=>{l(u.target.error)},s.onsuccess=u=>{o(u.target.result)}})}{const s=this.cursor(r),o=[];return this.W(s,(l,u)=>{o.push(u)}).next(()=>o)}}G(e,n){const r=this.store.getAll(e,n===null?void 0:n);return new M((i,s)=>{r.onerror=o=>{s(o.target.error)},r.onsuccess=o=>{i(o.target.result)}})}j(e,n){W("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,n);r.H=!1;const i=this.cursor(r);return this.W(i,(s,o,l)=>l.delete())}J(e,n){let r;n?r=e:(r={},n=e);const i=this.cursor(r);return this.W(i,n)}Y(e){const n=this.cursor({});return new M((r,i)=>{n.onerror=s=>{const o=bp(s.target.error);i(o)},n.onsuccess=s=>{const o=s.target.result;o?e(o.primaryKey,o.value).next(l=>{l?o.continue():r()}):r()}})}W(e,n){const r=[];return new M((i,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{const l=o.target.result;if(!l)return void i();const u=new Hb(l),c=n(l.primaryKey,l.value,u);if(c instanceof M){const f=c.catch(m=>(u.done(),M.reject(m)));r.push(f)}u.isDone?i():u.K===null?l.continue():l.continue(u.K)}}).next(()=>M.waitFor(r))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function gi(t){return new M((e,n)=>{t.onsuccess=r=>{const i=r.target.result;e(i)},t.onerror=r=>{const i=bp(r.target.error);n(i)}})}let Uy=!1;function bp(t){const e=Fn.S(nc());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const r=new G("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Uy||(Uy=!0,setTimeout(()=>{throw r},0)),r}}return t}class Yb{constructor(e,n){this.asyncQueue=e,this.Z=n,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){W("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{W("IndexBackfiller",`Documents written: ${await this.Z.ee()}`)}catch(n){ni(n)?W("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",n):await ti(n)}await this.X(6e4)})}}class Xb{constructor(e,n){this.localStore=e,this.persistence=n}async ee(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>this.te(n,e))}te(e,n){const r=new Set;let i=n,s=!0;return M.doWhile(()=>s===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(o!==null&&!r.has(o))return W("IndexBackfiller",`Processing collection: ${o}`),this.ne(e,o,i).next(l=>{i-=l,r.add(o)});s=!1})).next(()=>n-i)}ne(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(i=>this.localStore.localDocuments.getNextDocuments(e,n,i,r).next(s=>{const o=s.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this.re(i,s)).next(l=>(W("IndexBackfiller",`Updating offset: ${l}`),this.localStore.indexManager.updateCollectionGroup(e,n,l))).next(()=>o.size)}))}re(e,n){let r=e;return n.changes.forEach((i,s)=>{const o=o1(s);Pp(o,r)>0&&(r=o)}),new un(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xt{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Xt.oe=-1;function al(t){return t==null}function Ga(t){return t===0&&1/t==-1/0}function c1(t){return typeof t=="number"&&Number.isInteger(t)&&!Ga(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zt(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=$y(e)),e=Jb(t.get(n),e);return $y(e)}function Jb(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const s=t.charAt(i);switch(s){case"\0":n+="";break;case"":n+="";break;default:n+=s}}return n}function $y(t){return t+""}function On(t){const e=t.length;if(re(e>=2),e===2)return re(t.charAt(0)===""&&t.charAt(1)===""),me.emptyPath();const n=e-2,r=[];let i="";for(let s=0;s<e;){const o=t.indexOf("",s);switch((o<0||o>n)&&J(),t.charAt(o+1)){case"":const l=t.substring(s,o);let u;i.length===0?u=l:(i+=l,u=i,i=""),r.push(u);break;case"":i+=t.substring(s,o),i+="\0";break;case"":i+=t.substring(s,o+1);break;default:J()}s=o+2}return new me(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qy=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wu(t,e){return[t,zt(e)]}function h1(t,e,n){return[t,zt(e),n]}const Zb={},eA=["prefixPath","collectionGroup","readTime","documentId"],tA=["prefixPath","collectionGroup","documentId"],nA=["collectionGroup","readTime","prefixPath","documentId"],rA=["canonicalId","targetId"],iA=["targetId","path"],sA=["path","targetId"],oA=["collectionId","parent"],aA=["indexId","uid"],lA=["uid","sequenceNumber"],uA=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],cA=["indexId","uid","orderedDocumentKey"],hA=["userId","collectionPath","documentId"],dA=["userId","collectionPath","largestBatchId"],fA=["userId","collectionGroup","largestBatchId"],d1=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],pA=[...d1,"documentOverlays"],f1=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],p1=f1,m1=[...p1,"indexConfiguration","indexState","indexEntries"],mA=m1;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jd extends l1{constructor(e,n){super(),this._e=e,this.currentSequenceNumber=n}}function wt(t,e){const n=X(t);return Fn.F(n._e,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gy(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Qi(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function g1(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ne{constructor(e,n){this.comparator=e,this.root=n||xt.EMPTY}insert(e,n){return new Ne(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,xt.BLACK,null,null))}remove(e){return new Ne(this.comparator,this.root.remove(e,this.comparator).copy(null,null,xt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new tu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new tu(this.root,e,this.comparator,!1)}getReverseIterator(){return new tu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new tu(this.root,e,this.comparator,!0)}}class tu{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class xt{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??xt.RED,this.left=i??xt.EMPTY,this.right=s??xt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new xt(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return xt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return xt.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,xt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,xt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw J();const e=this.left.check();if(e!==this.right.check())throw J();return e+(this.isRed()?0:1)}}xt.EMPTY=null,xt.RED=!0,xt.BLACK=!1;xt.EMPTY=new class{constructor(){this.size=0}get key(){throw J()}get value(){throw J()}get color(){throw J()}get left(){throw J()}get right(){throw J()}copy(e,n,r,i,s){return this}insert(e,n,r){return new xt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Re{constructor(e){this.comparator=e,this.data=new Ne(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Wy(this.data.getIterator())}getIteratorFrom(e){return new Wy(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Re)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Re(this.comparator);return n.data=e,n}}class Wy{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function fs(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jt{constructor(e){this.fields=e,e.sort(Be.comparator)}static empty(){return new Jt([])}unionWith(e){let n=new Re(Be.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Jt(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Zs(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y1 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gA(){return typeof atob<"u"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new y1("Invalid base64 string: "+s):s}}(e);return new dt(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new dt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return le(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}dt.EMPTY_BYTE_STRING=new dt("");const yA=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function or(t){if(re(!!t),typeof t=="string"){let e=0;const n=yA.exec(t);if(re(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Xe(t.seconds),nanos:Xe(t.nanos)}}function Xe(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Gr(t){return typeof t=="string"?dt.fromBase64String(t):dt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oc(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Ap(t){const e=t.mapValue.fields.__previous_value__;return Oc(e)?Ap(e):e}function Wa(t){const e=or(t.mapValue.fields.__local_write_time__.timestampValue);return new Ue(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _A{constructor(e,n,r,i,s,o,l,u,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=c}}class Wr{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Wr("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Wr&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rr={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Eu={nullValue:"NULL_VALUE"};function Mi(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Oc(t)?4:_1(t)?9007199254740991:10:J()}function zn(t,e){if(t===e)return!0;const n=Mi(t);if(n!==Mi(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Wa(t).isEqual(Wa(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=or(i.timestampValue),l=or(s.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return Gr(i.bytesValue).isEqual(Gr(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return Xe(i.geoPointValue.latitude)===Xe(s.geoPointValue.latitude)&&Xe(i.geoPointValue.longitude)===Xe(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Xe(i.integerValue)===Xe(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=Xe(i.doubleValue),l=Xe(s.doubleValue);return o===l?Ga(o)===Ga(l):isNaN(o)&&isNaN(l)}return!1}(t,e);case 9:return Zs(t.arrayValue.values||[],e.arrayValue.values||[],zn);case 10:return function(i,s){const o=i.mapValue.fields||{},l=s.mapValue.fields||{};if(Gy(o)!==Gy(l))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(l[u]===void 0||!zn(o[u],l[u])))return!1;return!0}(t,e);default:return J()}}function Ka(t,e){return(t.values||[]).find(n=>zn(n,e))!==void 0}function Kr(t,e){if(t===e)return 0;const n=Mi(t),r=Mi(e);if(n!==r)return le(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return le(t.booleanValue,e.booleanValue);case 2:return function(s,o){const l=Xe(s.integerValue||s.doubleValue),u=Xe(o.integerValue||o.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1}(t,e);case 3:return Ky(t.timestampValue,e.timestampValue);case 4:return Ky(Wa(t),Wa(e));case 5:return le(t.stringValue,e.stringValue);case 6:return function(s,o){const l=Gr(s),u=Gr(o);return l.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const l=s.split("/"),u=o.split("/");for(let c=0;c<l.length&&c<u.length;c++){const f=le(l[c],u[c]);if(f!==0)return f}return le(l.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const l=le(Xe(s.latitude),Xe(o.latitude));return l!==0?l:le(Xe(s.longitude),Xe(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(s,o){const l=s.values||[],u=o.values||[];for(let c=0;c<l.length&&c<u.length;++c){const f=Kr(l[c],u[c]);if(f)return f}return le(l.length,u.length)}(t.arrayValue,e.arrayValue);case 10:return function(s,o){if(s===Rr.mapValue&&o===Rr.mapValue)return 0;if(s===Rr.mapValue)return 1;if(o===Rr.mapValue)return-1;const l=s.fields||{},u=Object.keys(l),c=o.fields||{},f=Object.keys(c);u.sort(),f.sort();for(let m=0;m<u.length&&m<f.length;++m){const v=le(u[m],f[m]);if(v!==0)return v;const R=Kr(l[u[m]],c[f[m]]);if(R!==0)return R}return le(u.length,f.length)}(t.mapValue,e.mapValue);default:throw J()}}function Ky(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return le(t,e);const n=or(t),r=or(e),i=le(n.seconds,r.seconds);return i!==0?i:le(n.nanos,r.nanos)}function eo(t){return Zd(t)}function Zd(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=or(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Gr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return Y.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=Zd(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${Zd(n.fields[o])}`;return i+"}"}(t.mapValue):J()}function ji(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function ef(t){return!!t&&"integerValue"in t}function Ha(t){return!!t&&"arrayValue"in t}function Hy(t){return!!t&&"nullValue"in t}function Qy(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Iu(t){return!!t&&"mapValue"in t}function _a(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Qi(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=_a(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=_a(t.arrayValue.values[n]);return e}return Object.assign({},t)}function _1(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}function vA(t){return"nullValue"in t?Eu:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?ji(Wr.empty(),Y.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?{mapValue:{}}:J()}function wA(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?ji(Wr.empty(),Y.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?{mapValue:{}}:"mapValue"in t?Rr:J()}function Yy(t,e){const n=Kr(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function Xy(t,e){const n=Kr(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class St{constructor(e){this.value=e}static empty(){return new St({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Iu(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=_a(n)}setAll(e){let n=Be.emptyPath(),r={},i=[];e.forEach((o,l)=>{if(!n.isImmediateParentOf(l)){const u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=l.popLast()}o?r[l.lastSegment()]=_a(o):i.push(l.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());Iu(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return zn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Iu(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Qi(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new St(_a(this.value))}}function v1(t){const e=[];return Qi(t.fields,(n,r)=>{const i=new Be([n]);if(Iu(r)){const s=v1(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new Jt(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Me{constructor(e,n,r,i,s,o,l){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=l}static newInvalidDocument(e){return new Me(e,0,ie.min(),ie.min(),ie.min(),St.empty(),0)}static newFoundDocument(e,n,r,i){return new Me(e,1,n,ie.min(),r,i,0)}static newNoDocument(e,n){return new Me(e,2,n,ie.min(),ie.min(),St.empty(),0)}static newUnknownDocument(e,n){return new Me(e,3,n,ie.min(),ie.min(),St.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ie.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=St.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=St.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ie.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Me&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Me(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hr{constructor(e,n){this.position=e,this.inclusive=n}}function Jy(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=Y.comparator(Y.fromName(o.referenceValue),n.key):r=Kr(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function Zy(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!zn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qa{constructor(e,n="asc"){this.field=e,this.dir=n}}function EA(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w1{}class ge extends w1{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new IA(e,n,r):n==="array-contains"?new SA(e,r):n==="in"?new P1(e,r):n==="not-in"?new PA(e,r):n==="array-contains-any"?new bA(e,r):new ge(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new TA(e,r):new xA(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Kr(n,this.value)):n!==null&&Mi(this.value)===Mi(n)&&this.matchesComparison(Kr(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return J()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Pe extends w1{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new Pe(e,n)}matches(e){return to(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function to(t){return t.op==="and"}function tf(t){return t.op==="or"}function Rp(t){return E1(t)&&to(t)}function E1(t){for(const e of t.filters)if(e instanceof Pe)return!1;return!0}function nf(t){if(t instanceof ge)return t.field.canonicalString()+t.op.toString()+eo(t.value);if(Rp(t))return t.filters.map(e=>nf(e)).join(",");{const e=t.filters.map(n=>nf(n)).join(",");return`${t.op}(${e})`}}function I1(t,e){return t instanceof ge?function(r,i){return i instanceof ge&&r.op===i.op&&r.field.isEqual(i.field)&&zn(r.value,i.value)}(t,e):t instanceof Pe?function(r,i){return i instanceof Pe&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,l)=>s&&I1(o,i.filters[l]),!0):!1}(t,e):void J()}function T1(t,e){const n=t.filters.concat(e);return Pe.create(n,t.op)}function x1(t){return t instanceof ge?function(n){return`${n.field.canonicalString()} ${n.op} ${eo(n.value)}`}(t):t instanceof Pe?function(n){return n.op.toString()+" {"+n.getFilters().map(x1).join(" ,")+"}"}(t):"Filter"}class IA extends ge{constructor(e,n,r){super(e,n,r),this.key=Y.fromName(r.referenceValue)}matches(e){const n=Y.comparator(e.key,this.key);return this.matchesComparison(n)}}class TA extends ge{constructor(e,n){super(e,"in",n),this.keys=S1("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class xA extends ge{constructor(e,n){super(e,"not-in",n),this.keys=S1("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function S1(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>Y.fromName(r.referenceValue))}class SA extends ge{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Ha(n)&&Ka(n.arrayValue,this.value)}}class P1 extends ge{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Ka(this.value.arrayValue,n)}}class PA extends ge{constructor(e,n){super(e,"not-in",n)}matches(e){if(Ka(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Ka(this.value.arrayValue,n)}}class bA extends ge{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Ha(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Ka(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AA{constructor(e,n=null,r=[],i=[],s=null,o=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=l,this.ue=null}}function rf(t,e=null,n=[],r=[],i=null,s=null,o=null){return new AA(t,e,n,r,i,s,o)}function Fi(t){const e=X(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>nf(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),al(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>eo(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>eo(r)).join(",")),e.ue=n}return e.ue}function ll(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!EA(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!I1(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Zy(t.startAt,e.startAt)&&Zy(t.endAt,e.endAt)}function sc(t){return Y.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function oc(t,e){return t.filters.filter(n=>n instanceof ge&&n.field.isEqual(e))}function e0(t,e,n){let r=Eu,i=!0;for(const s of oc(t,e)){let o=Eu,l=!0;switch(s.op){case"<":case"<=":o=vA(s.value);break;case"==":case"in":case">=":o=s.value;break;case">":o=s.value,l=!1;break;case"!=":case"not-in":o=Eu}Yy({value:r,inclusive:i},{value:o,inclusive:l})<0&&(r=o,i=l)}if(n!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const o=n.position[s];Yy({value:r,inclusive:i},{value:o,inclusive:n.inclusive})<0&&(r=o,i=n.inclusive);break}}return{value:r,inclusive:i}}function t0(t,e,n){let r=Rr,i=!0;for(const s of oc(t,e)){let o=Rr,l=!0;switch(s.op){case">=":case">":o=wA(s.value),l=!1;break;case"==":case"in":case"<=":o=s.value;break;case"<":o=s.value,l=!1;break;case"!=":case"not-in":o=Rr}Xy({value:r,inclusive:i},{value:o,inclusive:l})>0&&(r=o,i=l)}if(n!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const o=n.position[s];Xy({value:r,inclusive:i},{value:o,inclusive:n.inclusive})>0&&(r=o,i=n.inclusive);break}}return{value:r,inclusive:i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ur{constructor(e,n=null,r=[],i=[],s=null,o="F",l=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=l,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function b1(t,e,n,r,i,s,o,l){return new ur(t,e,n,r,i,s,o,l)}function _o(t){return new ur(t)}function n0(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Cp(t){return t.collectionGroup!==null}function zs(t){const e=X(t);if(e.ce===null){e.ce=[];const n=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new Re(Be.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(c=>{c.isInequality()&&(l=l.add(c.field))})}),l})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new Qa(s,r))}),n.has(Be.keyField().canonicalString())||e.ce.push(new Qa(Be.keyField(),r))}return e.ce}function Ut(t){const e=X(t);return e.le||(e.le=RA(e,zs(t))),e.le}function RA(t,e){if(t.limitType==="F")return rf(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new Qa(i.field,s)});const n=t.endAt?new Hr(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Hr(t.startAt.position,t.startAt.inclusive):null;return rf(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function sf(t,e){const n=t.filters.concat([e]);return new ur(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function ac(t,e,n){return new ur(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function ul(t,e){return ll(Ut(t),Ut(e))&&t.limitType===e.limitType}function A1(t){return`${Fi(Ut(t))}|lt:${t.limitType}`}function _s(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>x1(i)).join(", ")}]`),al(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>eo(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>eo(i)).join(",")),`Target(${r})`}(Ut(t))}; limitType=${t.limitType})`}function cl(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):Y.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of zs(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,l,u){const c=Jy(o,l,u);return o.inclusive?c<=0:c<0}(r.startAt,zs(r),i)||r.endAt&&!function(o,l,u){const c=Jy(o,l,u);return o.inclusive?c>=0:c>0}(r.endAt,zs(r),i))}(t,e)}function R1(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function C1(t){return(e,n)=>{let r=!1;for(const i of zs(t)){const s=CA(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function CA(t,e,n){const r=t.field.isKeyField()?Y.comparator(e.key,n.key):function(s,o,l){const u=o.data.field(s),c=l.data.field(s);return u!==null&&c!==null?Kr(u,c):J()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return J()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ri{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Qi(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return g1(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kA=new Ne(Y.comparator);function Zt(){return kA}const k1=new Ne(Y.comparator);function sa(...t){let e=k1;for(const n of t)e=e.insert(n.key,n);return e}function D1(t){let e=k1;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Ln(){return va()}function N1(){return va()}function va(){return new ri(t=>t.toString(),(t,e)=>t.isEqual(e))}const DA=new Ne(Y.comparator),NA=new Re(Y.comparator);function ue(...t){let e=NA;for(const n of t)e=e.add(n);return e}const VA=new Re(le);function kp(){return VA}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V1(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ga(e)?"-0":e}}function O1(t){return{integerValue:""+t}}function L1(t,e){return c1(e)?O1(e):V1(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lc{constructor(){this._=void 0}}function OA(t,e,n){return t instanceof no?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&Oc(s)&&(s=Ap(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof Bi?j1(t,e):t instanceof zi?F1(t,e):function(i,s){const o=M1(i,s),l=r0(o)+r0(i.Pe);return ef(o)&&ef(i.Pe)?O1(l):V1(i.serializer,l)}(t,e)}function LA(t,e,n){return t instanceof Bi?j1(t,e):t instanceof zi?F1(t,e):n}function M1(t,e){return t instanceof ro?function(r){return ef(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class no extends Lc{}class Bi extends Lc{constructor(e){super(),this.elements=e}}function j1(t,e){const n=B1(e);for(const r of t.elements)n.some(i=>zn(i,r))||n.push(r);return{arrayValue:{values:n}}}class zi extends Lc{constructor(e){super(),this.elements=e}}function F1(t,e){let n=B1(e);for(const r of t.elements)n=n.filter(i=>!zn(i,r));return{arrayValue:{values:n}}}class ro extends Lc{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function r0(t){return Xe(t.integerValue||t.doubleValue)}function B1(t){return Ha(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hl{constructor(e,n){this.field=e,this.transform=n}}function MA(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof Bi&&i instanceof Bi||r instanceof zi&&i instanceof zi?Zs(r.elements,i.elements,zn):r instanceof ro&&i instanceof ro?zn(r.Pe,i.Pe):r instanceof no&&i instanceof no}(t.transform,e.transform)}class jA{constructor(e,n){this.version=e,this.transformResults=n}}class ze{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new ze}static exists(e){return new ze(void 0,e)}static updateTime(e){return new ze(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Tu(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Mc{}function z1(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new wo(t.key,ze.none()):new vo(t.key,t.data,ze.none());{const n=t.data,r=St.empty();let i=new Re(Be.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new cr(t.key,r,new Jt(i.toArray()),ze.none())}}function FA(t,e,n){t instanceof vo?function(i,s,o){const l=i.value.clone(),u=s0(i.fieldTransforms,s,o.transformResults);l.setAll(u),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):t instanceof cr?function(i,s,o){if(!Tu(i.precondition,s))return void s.convertToUnknownDocument(o.version);const l=s0(i.fieldTransforms,s,o.transformResults),u=s.data;u.setAll(U1(i)),u.setAll(l),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function wa(t,e,n,r){return t instanceof vo?function(s,o,l,u){if(!Tu(s.precondition,o))return l;const c=s.value.clone(),f=o0(s.fieldTransforms,u,o);return c.setAll(f),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof cr?function(s,o,l,u){if(!Tu(s.precondition,o))return l;const c=o0(s.fieldTransforms,u,o),f=o.data;return f.setAll(U1(s)),f.setAll(c),o.convertToFoundDocument(o.version,f).setHasLocalMutations(),l===null?null:l.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(m=>m.field))}(t,e,n,r):function(s,o,l){return Tu(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(t,e,n)}function BA(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=M1(r.transform,i||null);s!=null&&(n===null&&(n=St.empty()),n.set(r.field,s))}return n||null}function i0(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Zs(r,i,(s,o)=>MA(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class vo extends Mc{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class cr extends Mc{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function U1(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function s0(t,e,n){const r=new Map;re(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,l=e.data.field(s.field);r.set(s.field,LA(o,l,n[i]))}return r}function o0(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,OA(s,o,e))}return r}class wo extends Mc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Dp extends Mc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Np{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&FA(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=wa(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=wa(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=N1();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let l=this.applyToLocalView(o,s.mutatedFields);l=n.has(i.key)?null:l;const u=z1(o,l);u!==null&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(ie.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ue())}isEqual(e){return this.batchId===e.batchId&&Zs(this.mutations,e.mutations,(n,r)=>i0(n,r))&&Zs(this.baseMutations,e.baseMutations,(n,r)=>i0(n,r))}}class Vp{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){re(e.mutations.length===r.length);let i=function(){return DA}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new Vp(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Op{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zA{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ot,ve;function $1(t){switch(t){default:return J();case B.CANCELLED:case B.UNKNOWN:case B.DEADLINE_EXCEEDED:case B.RESOURCE_EXHAUSTED:case B.INTERNAL:case B.UNAVAILABLE:case B.UNAUTHENTICATED:return!1;case B.INVALID_ARGUMENT:case B.NOT_FOUND:case B.ALREADY_EXISTS:case B.PERMISSION_DENIED:case B.FAILED_PRECONDITION:case B.ABORTED:case B.OUT_OF_RANGE:case B.UNIMPLEMENTED:case B.DATA_LOSS:return!0}}function q1(t){if(t===void 0)return et("GRPC error has no .code"),B.UNKNOWN;switch(t){case ot.OK:return B.OK;case ot.CANCELLED:return B.CANCELLED;case ot.UNKNOWN:return B.UNKNOWN;case ot.DEADLINE_EXCEEDED:return B.DEADLINE_EXCEEDED;case ot.RESOURCE_EXHAUSTED:return B.RESOURCE_EXHAUSTED;case ot.INTERNAL:return B.INTERNAL;case ot.UNAVAILABLE:return B.UNAVAILABLE;case ot.UNAUTHENTICATED:return B.UNAUTHENTICATED;case ot.INVALID_ARGUMENT:return B.INVALID_ARGUMENT;case ot.NOT_FOUND:return B.NOT_FOUND;case ot.ALREADY_EXISTS:return B.ALREADY_EXISTS;case ot.PERMISSION_DENIED:return B.PERMISSION_DENIED;case ot.FAILED_PRECONDITION:return B.FAILED_PRECONDITION;case ot.ABORTED:return B.ABORTED;case ot.OUT_OF_RANGE:return B.OUT_OF_RANGE;case ot.UNIMPLEMENTED:return B.UNIMPLEMENTED;case ot.DATA_LOSS:return B.DATA_LOSS;default:return J()}}(ve=ot||(ot={}))[ve.OK=0]="OK",ve[ve.CANCELLED=1]="CANCELLED",ve[ve.UNKNOWN=2]="UNKNOWN",ve[ve.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ve[ve.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ve[ve.NOT_FOUND=5]="NOT_FOUND",ve[ve.ALREADY_EXISTS=6]="ALREADY_EXISTS",ve[ve.PERMISSION_DENIED=7]="PERMISSION_DENIED",ve[ve.UNAUTHENTICATED=16]="UNAUTHENTICATED",ve[ve.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ve[ve.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ve[ve.ABORTED=10]="ABORTED",ve[ve.OUT_OF_RANGE=11]="OUT_OF_RANGE",ve[ve.UNIMPLEMENTED=12]="UNIMPLEMENTED",ve[ve.INTERNAL=13]="INTERNAL",ve[ve.UNAVAILABLE=14]="UNAVAILABLE",ve[ve.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G1(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UA=new Ri([4294967295,4294967295],0);function a0(t){const e=G1().encode(t),n=new Qw;return n.update(e),new Uint8Array(n.digest())}function l0(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Ri([n,r],0),new Ri([i,s],0)]}class Lp{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new oa(`Invalid padding: ${n}`);if(r<0)throw new oa(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new oa(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new oa(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Ri.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(Ri.fromNumber(r)));return i.compare(UA)===1&&(i=new Ri([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=a0(e),[r,i]=l0(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new Lp(s,i,n);return r.forEach(l=>o.insert(l)),o}insert(e){if(this.Ie===0)return;const n=a0(e),[r,i]=l0(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class oa extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dl{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,fl.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new dl(ie.min(),i,new Ne(le),Zt(),ue())}}class fl{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new fl(r,n,ue(),ue(),ue())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xu{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}}class W1{constructor(e,n){this.targetId=e,this.me=n}}class K1{constructor(e,n,r=dt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class u0{constructor(){this.fe=0,this.ge=h0(),this.pe=dt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}Ce(){let e=ue(),n=ue(),r=ue();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:J()}}),new fl(this.pe,this.ye,e,n,r)}ve(){this.we=!1,this.ge=h0()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,re(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class $A{constructor(e){this.Le=e,this.Be=new Map,this.ke=Zt(),this.qe=c0(),this.Qe=new Ne(le)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.ve(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:J()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){const n=e.targetId,r=e.me.count,i=this.Je(n);if(i){const s=i.target;if(sc(s))if(r===0){const o=new Y(s.path);this.Ue(n,o,Me.newNoDocument(o,ie.min()))}else re(r===1);else{const o=this.Ye(n);if(o!==r){const l=this.Ze(e),u=l?this.Xe(l,e,o):1;if(u!==0){this.je(n);const c=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,c)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,l;try{o=Gr(r).toUint8Array()}catch(u){if(u instanceof y1)return Cn("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{l=new Lp(o,i,s)}catch(u){return Cn(u instanceof oa?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return l.Ie===0?null:l}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Le.tt(),l=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(l)||(this.Ue(n,s,null),i++)}),i}rt(e){const n=new Map;this.Be.forEach((s,o)=>{const l=this.Je(o);if(l){if(s.current&&sc(l.target)){const u=new Y(l.target.path);this.ke.get(u)!==null||this.it(o,u)||this.Ue(o,u,Me.newNoDocument(u,e))}s.be&&(n.set(o,s.Ce()),s.ve())}});let r=ue();this.qe.forEach((s,o)=>{let l=!0;o.forEachWhile(u=>{const c=this.Je(u);return!c||c.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));const i=new dl(e,n,this.Qe,this.ke,r);return this.ke=Zt(),this.qe=c0(),this.Qe=new Ne(le),i}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).Ce();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new u0,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new Re(le),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||W("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new u0),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function c0(){return new Ne(Y.comparator)}function h0(){return new Ne(Y.comparator)}const qA={asc:"ASCENDING",desc:"DESCENDING"},GA={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},WA={and:"AND",or:"OR"};class KA{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function of(t,e){return t.useProto3Json||al(e)?e:{value:e}}function io(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function H1(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function HA(t,e){return io(t,e.toTimestamp())}function tt(t){return re(!!t),ie.fromTimestamp(function(n){const r=or(n);return new Ue(r.seconds,r.nanos)}(t))}function Mp(t,e){return af(t,e).canonicalString()}function af(t,e){const n=function(i){return new me(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function Q1(t){const e=me.fromString(t);return re(sE(e)),e}function Ya(t,e){return Mp(t.databaseId,e.path)}function Bn(t,e){const n=Q1(e);if(n.get(1)!==t.databaseId.projectId)throw new G(B.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new G(B.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Y(J1(n))}function Y1(t,e){return Mp(t.databaseId,e)}function X1(t){const e=Q1(t);return e.length===4?me.emptyPath():J1(e)}function lf(t){return new me(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function J1(t){return re(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function d0(t,e,n){return{name:Ya(t,e),fields:n.value.mapValue.fields}}function Z1(t,e,n){const r=Bn(t,e.name),i=tt(e.updateTime),s=e.createTime?tt(e.createTime):ie.min(),o=new St({mapValue:{fields:e.fields}}),l=Me.newFoundDocument(r,i,s,o);return n&&l.setHasCommittedMutations(),n?l.setHasCommittedMutations():l}function QA(t,e){return"found"in e?function(r,i){re(!!i.found),i.found.name,i.found.updateTime;const s=Bn(r,i.found.name),o=tt(i.found.updateTime),l=i.found.createTime?tt(i.found.createTime):ie.min(),u=new St({mapValue:{fields:i.found.fields}});return Me.newFoundDocument(s,o,l,u)}(t,e):"missing"in e?function(r,i){re(!!i.missing),re(!!i.readTime);const s=Bn(r,i.missing),o=tt(i.readTime);return Me.newNoDocument(s,o)}(t,e):J()}function YA(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:J()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(c,f){return c.useProto3Json?(re(f===void 0||typeof f=="string"),dt.fromBase64String(f||"")):(re(f===void 0||f instanceof Buffer||f instanceof Uint8Array),dt.fromUint8Array(f||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&function(c){const f=c.code===void 0?B.UNKNOWN:q1(c.code);return new G(f,c.message||"")}(o);n=new K1(r,i,s,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Bn(t,r.document.name),s=tt(r.document.updateTime),o=r.document.createTime?tt(r.document.createTime):ie.min(),l=new St({mapValue:{fields:r.document.fields}}),u=Me.newFoundDocument(i,s,o,l),c=r.targetIds||[],f=r.removedTargetIds||[];n=new xu(c,f,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Bn(t,r.document),s=r.readTime?tt(r.readTime):ie.min(),o=Me.newNoDocument(i,s),l=r.removedTargetIds||[];n=new xu([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Bn(t,r.document),s=r.removedTargetIds||[];n=new xu([],s,i,null)}else{if(!("filter"in e))return J();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new zA(i,s),l=r.targetId;n=new W1(l,o)}}return n}function Xa(t,e){let n;if(e instanceof vo)n={update:d0(t,e.key,e.value)};else if(e instanceof wo)n={delete:Ya(t,e.key)};else if(e instanceof cr)n={update:d0(t,e.key,e.data),updateMask:n2(e.fieldMask)};else{if(!(e instanceof Dp))return J();n={verify:Ya(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const l=o.transform;if(l instanceof no)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Bi)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof zi)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof ro)return{fieldPath:o.field.canonicalString(),increment:l.Pe};throw J()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:HA(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:J()}(t,e.precondition)),n}function uf(t,e){const n=e.currentDocument?function(s){return s.updateTime!==void 0?ze.updateTime(tt(s.updateTime)):s.exists!==void 0?ze.exists(s.exists):ze.none()}(e.currentDocument):ze.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(o,l){let u=null;if("setToServerValue"in l)re(l.setToServerValue==="REQUEST_TIME"),u=new no;else if("appendMissingElements"in l){const f=l.appendMissingElements.values||[];u=new Bi(f)}else if("removeAllFromArray"in l){const f=l.removeAllFromArray.values||[];u=new zi(f)}else"increment"in l?u=new ro(o,l.increment):J();const c=Be.fromServerFormat(l.fieldPath);return new hl(c,u)}(t,i)):[];if(e.update){e.update.name;const i=Bn(t,e.update.name),s=new St({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=function(u){const c=u.fieldPaths||[];return new Jt(c.map(f=>Be.fromServerFormat(f)))}(e.updateMask);return new cr(i,s,o,n,r)}return new vo(i,s,n,r)}if(e.delete){const i=Bn(t,e.delete);return new wo(i,n)}if(e.verify){const i=Bn(t,e.verify);return new Dp(i,n)}return J()}function XA(t,e){return t&&t.length>0?(re(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?tt(i.updateTime):tt(s);return o.isEqual(ie.min())&&(o=tt(s)),new jA(o,i.transformResults||[])}(n,e))):[]}function eE(t,e){return{documents:[Y1(t,e.path)]}}function tE(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Y1(t,i);const s=function(c){if(c.length!==0)return iE(Pe.create(c,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(c){if(c.length!==0)return c.map(f=>function(v){return{field:vs(v.field),direction:ZA(v.dir)}}(f))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const l=of(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{_t:n,parent:i}}function nE(t){let e=X1(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){re(r===1);const f=n.from[0];f.allDescendants?i=f.collectionId:e=e.child(f.collectionId)}let s=[];n.where&&(s=function(m){const v=rE(m);return v instanceof Pe&&Rp(v)?v.getFilters():[v]}(n.where));let o=[];n.orderBy&&(o=function(m){return m.map(v=>function(V){return new Qa(ws(V.field),function(L){switch(L){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(V.direction))}(v))}(n.orderBy));let l=null;n.limit&&(l=function(m){let v;return v=typeof m=="object"?m.value:m,al(v)?null:v}(n.limit));let u=null;n.startAt&&(u=function(m){const v=!!m.before,R=m.values||[];return new Hr(R,v)}(n.startAt));let c=null;return n.endAt&&(c=function(m){const v=!m.before,R=m.values||[];return new Hr(R,v)}(n.endAt)),b1(e,i,o,s,l,"F",u,c)}function JA(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return J()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function rE(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=ws(n.unaryFilter.field);return ge.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=ws(n.unaryFilter.field);return ge.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=ws(n.unaryFilter.field);return ge.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=ws(n.unaryFilter.field);return ge.create(o,"!=",{nullValue:"NULL_VALUE"});default:return J()}}(t):t.fieldFilter!==void 0?function(n){return ge.create(ws(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return J()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Pe.create(n.compositeFilter.filters.map(r=>rE(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return J()}}(n.compositeFilter.op))}(t):J()}function ZA(t){return qA[t]}function e2(t){return GA[t]}function t2(t){return WA[t]}function vs(t){return{fieldPath:t.canonicalString()}}function ws(t){return Be.fromServerFormat(t.fieldPath)}function iE(t){return t instanceof ge?function(n){if(n.op==="=="){if(Qy(n.value))return{unaryFilter:{field:vs(n.field),op:"IS_NAN"}};if(Hy(n.value))return{unaryFilter:{field:vs(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Qy(n.value))return{unaryFilter:{field:vs(n.field),op:"IS_NOT_NAN"}};if(Hy(n.value))return{unaryFilter:{field:vs(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:vs(n.field),op:e2(n.op),value:n.value}}}(t):t instanceof Pe?function(n){const r=n.getFilters().map(i=>iE(i));return r.length===1?r[0]:{compositeFilter:{op:t2(n.op),filters:r}}}(t):J()}function n2(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function sE(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zn{constructor(e,n,r,i,s=ie.min(),o=ie.min(),l=dt.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(e){return new Zn(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Zn(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Zn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Zn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oE{constructor(e){this.ct=e}}function r2(t,e){let n;if(e.document)n=Z1(t.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Y.fromSegments(e.noDocument.path),i=$i(e.noDocument.readTime);n=Me.newNoDocument(r,i),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return J();{const r=Y.fromSegments(e.unknownDocument.path),i=$i(e.unknownDocument.version);n=Me.newUnknownDocument(r,i)}}return e.readTime&&n.setReadTime(function(i){const s=new Ue(i[0],i[1]);return ie.fromTimestamp(s)}(e.readTime)),n}function f0(t,e){const n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:lc(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(s,o){return{name:Ya(s,o.key),fields:o.data.value.mapValue.fields,updateTime:io(s,o.version.toTimestamp()),createTime:io(s,o.createTime.toTimestamp())}}(t.ct,e);else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:Ui(e.version)};else{if(!e.isUnknownDocument())return J();r.unknownDocument={path:n.path.toArray(),version:Ui(e.version)}}return r}function lc(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Ui(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function $i(t){const e=new Ue(t.seconds,t.nanoseconds);return ie.fromTimestamp(e)}function yi(t,e){const n=(e.baseMutations||[]).map(s=>uf(t.ct,s));for(let s=0;s<e.mutations.length-1;++s){const o=e.mutations[s];if(s+1<e.mutations.length&&e.mutations[s+1].transform!==void 0){const l=e.mutations[s+1];o.updateTransforms=l.transform.fieldTransforms,e.mutations.splice(s+1,1),++s}}const r=e.mutations.map(s=>uf(t.ct,s)),i=Ue.fromMillis(e.localWriteTimeMs);return new Np(e.batchId,i,n,r)}function aa(t){const e=$i(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?$i(t.lastLimboFreeSnapshotVersion):ie.min();let r;return r=function(s){return s.documents!==void 0}(t.query)?function(s){return re(s.documents.length===1),Ut(_o(X1(s.documents[0])))}(t.query):function(s){return Ut(nE(s))}(t.query),new Zn(r,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,dt.fromBase64String(t.resumeToken))}function aE(t,e){const n=Ui(e.snapshotVersion),r=Ui(e.lastLimboFreeSnapshotVersion);let i;i=sc(e.target)?eE(t.ct,e.target):tE(t.ct,e.target)._t;const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Fi(e.target),readTime:n,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function jp(t){const e=nE({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?ac(e,e.limit,"L"):e}function Gh(t,e){return new Op(e.largestBatchId,uf(t.ct,e.overlayMutation))}function p0(t,e){const n=e.path.lastSegment();return[t,zt(e.path.popLast()),n]}function m0(t,e,n,r){return{indexId:t,uid:e,sequenceNumber:n,readTime:Ui(r.readTime),documentKey:zt(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i2{getBundleMetadata(e,n){return g0(e).get(n).next(r=>{if(r)return function(s){return{id:s.bundleId,createTime:$i(s.createTime),version:s.version}}(r)})}saveBundleMetadata(e,n){return g0(e).put(function(i){return{bundleId:i.id,createTime:Ui(tt(i.createTime)),version:i.version}}(n))}getNamedQuery(e,n){return y0(e).get(n).next(r=>{if(r)return function(s){return{name:s.name,query:jp(s.bundledQuery),readTime:$i(s.readTime)}}(r)})}saveNamedQuery(e,n){return y0(e).put(function(i){return{name:i.name,readTime:Ui(tt(i.readTime)),bundledQuery:i.bundledQuery}}(n))}}function g0(t){return wt(t,"bundles")}function y0(t){return wt(t,"namedQueries")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jc{constructor(e,n){this.serializer=e,this.userId=n}static lt(e,n){const r=n.uid||"";return new jc(e,r)}getOverlay(e,n){return Qo(e).get(p0(this.userId,n)).next(r=>r?Gh(this.serializer,r):null)}getOverlays(e,n){const r=Ln();return M.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){const i=[];return r.forEach((s,o)=>{const l=new Op(n,o);i.push(this.ht(e,l))}),M.waitFor(i)}removeOverlaysForBatchId(e,n,r){const i=new Set;n.forEach(o=>i.add(zt(o.getCollectionPath())));const s=[];return i.forEach(o=>{const l=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);s.push(Qo(e).j("collectionPathOverlayIndex",l))}),M.waitFor(s)}getOverlaysForCollection(e,n,r){const i=Ln(),s=zt(n),o=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return Qo(e).U("collectionPathOverlayIndex",o).next(l=>{for(const u of l){const c=Gh(this.serializer,u);i.set(c.getKey(),c)}return i})}getOverlaysForCollectionGroup(e,n,r,i){const s=Ln();let o;const l=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return Qo(e).J({index:"collectionGroupOverlayIndex",range:l},(u,c,f)=>{const m=Gh(this.serializer,c);s.size()<i||m.largestBatchId===o?(s.set(m.getKey(),m),o=m.largestBatchId):f.done()}).next(()=>s)}ht(e,n){return Qo(e).put(function(i,s,o){const[l,u,c]=p0(s,o.mutation.key);return{userId:s,collectionPath:u,documentId:c,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:Xa(i.ct,o.mutation)}}(this.serializer,this.userId,n))}}function Qo(t){return wt(t,"documentOverlays")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _i{constructor(){}Pt(e,n){this.It(e,n),n.Tt()}It(e,n){if("nullValue"in e)this.Et(n,5);else if("booleanValue"in e)this.Et(n,10),n.dt(e.booleanValue?1:0);else if("integerValue"in e)this.Et(n,15),n.dt(Xe(e.integerValue));else if("doubleValue"in e){const r=Xe(e.doubleValue);isNaN(r)?this.Et(n,13):(this.Et(n,15),Ga(r)?n.dt(0):n.dt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Et(n,20),typeof r=="string"&&(r=or(r)),n.At(`${r.seconds||""}`),n.dt(r.nanos||0)}else if("stringValue"in e)this.Rt(e.stringValue,n),this.Vt(n);else if("bytesValue"in e)this.Et(n,30),n.ft(Gr(e.bytesValue)),this.Vt(n);else if("referenceValue"in e)this.gt(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.Et(n,45),n.dt(r.latitude||0),n.dt(r.longitude||0)}else"mapValue"in e?_1(e)?this.Et(n,Number.MAX_SAFE_INTEGER):(this.yt(e.mapValue,n),this.Vt(n)):"arrayValue"in e?(this.wt(e.arrayValue,n),this.Vt(n)):J()}Rt(e,n){this.Et(n,25),this.St(e,n)}St(e,n){n.At(e)}yt(e,n){const r=e.fields||{};this.Et(n,55);for(const i of Object.keys(r))this.Rt(i,n),this.It(r[i],n)}wt(e,n){const r=e.values||[];this.Et(n,50);for(const i of r)this.It(i,n)}gt(e,n){this.Et(n,37),Y.fromName(e).path.forEach(r=>{this.Et(n,60),this.St(r,n)})}Et(e,n){e.dt(n)}Vt(e){e.dt(2)}}_i.bt=new _i;function s2(t){if(t===0)return 8;let e=0;return!(t>>4)&&(e+=4,t<<=4),!(t>>6)&&(e+=2,t<<=2),!(t>>7)&&(e+=1),e}function _0(t){const e=64-function(r){let i=0;for(let s=0;s<8;++s){const o=s2(255&r[s]);if(i+=o,o!==8)break}return i}(t);return Math.ceil(e/8)}class o2{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Dt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Ct(r.value),r=n.next();this.vt()}Ft(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Mt(r.value),r=n.next();this.xt()}Ot(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Ct(r);else if(r<2048)this.Ct(960|r>>>6),this.Ct(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Ct(480|r>>>12),this.Ct(128|63&r>>>6),this.Ct(128|63&r);else{const i=n.codePointAt(0);this.Ct(240|i>>>18),this.Ct(128|63&i>>>12),this.Ct(128|63&i>>>6),this.Ct(128|63&i)}}this.vt()}Nt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Mt(r);else if(r<2048)this.Mt(960|r>>>6),this.Mt(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Mt(480|r>>>12),this.Mt(128|63&r>>>6),this.Mt(128|63&r);else{const i=n.codePointAt(0);this.Mt(240|i>>>18),this.Mt(128|63&i>>>12),this.Mt(128|63&i>>>6),this.Mt(128|63&i)}}this.xt()}Lt(e){const n=this.Bt(e),r=_0(n);this.kt(1+r),this.buffer[this.position++]=255&r;for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=255&n[i]}qt(e){const n=this.Bt(e),r=_0(n);this.kt(1+r),this.buffer[this.position++]=~(255&r);for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=~(255&n[i])}Qt(){this.Kt(255),this.Kt(255)}$t(){this.Ut(255),this.Ut(255)}reset(){this.position=0}seed(e){this.kt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Wt(){return this.buffer.slice(0,this.position)}Bt(e){const n=function(s){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,s,!1),new Uint8Array(o.buffer)}(e),r=(128&n[0])!=0;n[0]^=r?255:128;for(let i=1;i<n.length;++i)n[i]^=r?255:0;return n}Ct(e){const n=255&e;n===0?(this.Kt(0),this.Kt(255)):n===255?(this.Kt(255),this.Kt(0)):this.Kt(n)}Mt(e){const n=255&e;n===0?(this.Ut(0),this.Ut(255)):n===255?(this.Ut(255),this.Ut(0)):this.Ut(e)}vt(){this.Kt(0),this.Kt(1)}xt(){this.Ut(0),this.Ut(1)}Kt(e){this.kt(1),this.buffer[this.position++]=e}Ut(e){this.kt(1),this.buffer[this.position++]=~e}kt(e){const n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class a2{constructor(e){this.Gt=e}ft(e){this.Gt.Dt(e)}At(e){this.Gt.Ot(e)}dt(e){this.Gt.Lt(e)}Tt(){this.Gt.Qt()}}class l2{constructor(e){this.Gt=e}ft(e){this.Gt.Ft(e)}At(e){this.Gt.Nt(e)}dt(e){this.Gt.qt(e)}Tt(){this.Gt.$t()}}class Yo{constructor(){this.Gt=new o2,this.zt=new a2(this.Gt),this.jt=new l2(this.Gt)}seed(e){this.Gt.seed(e)}Ht(e){return e===0?this.zt:this.jt}Wt(){return this.Gt.Wt()}reset(){this.Gt.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vi{constructor(e,n,r,i){this.indexId=e,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}Jt(){const e=this.directionalValue.length,n=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new vi(this.indexId,this.documentKey,this.arrayValue,r)}}function _r(t,e){let n=t.indexId-e.indexId;return n!==0?n:(n=v0(t.arrayValue,e.arrayValue),n!==0?n:(n=v0(t.directionalValue,e.directionalValue),n!==0?n:Y.comparator(t.documentKey,e.documentKey)))}function v0(t,e){for(let n=0;n<t.length&&n<e.length;++n){const r=t[n]-e[n];if(r!==0)return r}return t.length-e.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w0{constructor(e){this.Yt=new Re((n,r)=>Be.comparator(n.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.Zt=e.orderBy,this.Xt=[];for(const n of e.filters){const r=n;r.isInequality()?this.Yt=this.Yt.add(r):this.Xt.push(r)}}get en(){return this.Yt.size>1}tn(e){if(re(e.collectionGroup===this.collectionId),this.en)return!1;const n=Xd(e);if(n!==void 0&&!this.nn(n))return!1;const r=mi(e);let i=new Set,s=0,o=0;for(;s<r.length&&this.nn(r[s]);++s)i=i.add(r[s].fieldPath.canonicalString());if(s===r.length)return!0;if(this.Yt.size>0){const l=this.Yt.getIterator().getNext();if(!i.has(l.field.canonicalString())){const u=r[s];if(!this.rn(l,u)||!this.sn(this.Zt[o++],u))return!1}++s}for(;s<r.length;++s){const l=r[s];if(o>=this.Zt.length||!this.sn(this.Zt[o++],l))return!1}return!0}on(){if(this.en)return null;let e=new Re(Be.comparator);const n=[];for(const r of this.Xt)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")n.push(new vu(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),n.push(new vu(r.field,0))}for(const r of this.Zt)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),n.push(new vu(r.field,r.dir==="asc"?0:1)));return new ic(ic.UNKNOWN_ID,this.collectionId,n,qa.empty())}nn(e){for(const n of this.Xt)if(this.rn(n,e))return!0;return!1}rn(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===r}sn(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lE(t){var e,n;if(re(t instanceof ge||t instanceof Pe),t instanceof ge){if(t instanceof P1){const i=((n=(e=t.value.arrayValue)===null||e===void 0?void 0:e.values)===null||n===void 0?void 0:n.map(s=>ge.create(t.field,"==",s)))||[];return Pe.create(i,"or")}return t}const r=t.filters.map(i=>lE(i));return Pe.create(r,t.op)}function u2(t){if(t.getFilters().length===0)return[];const e=df(lE(t));return re(uE(e)),cf(e)||hf(e)?[e]:e.getFilters()}function cf(t){return t instanceof ge}function hf(t){return t instanceof Pe&&Rp(t)}function uE(t){return cf(t)||hf(t)||function(n){if(n instanceof Pe&&tf(n)){for(const r of n.getFilters())if(!cf(r)&&!hf(r))return!1;return!0}return!1}(t)}function df(t){if(re(t instanceof ge||t instanceof Pe),t instanceof ge)return t;if(t.filters.length===1)return df(t.filters[0]);const e=t.filters.map(r=>df(r));let n=Pe.create(e,t.op);return n=uc(n),uE(n)?n:(re(n instanceof Pe),re(to(n)),re(n.filters.length>1),n.filters.reduce((r,i)=>Fp(r,i)))}function Fp(t,e){let n;return re(t instanceof ge||t instanceof Pe),re(e instanceof ge||e instanceof Pe),n=t instanceof ge?e instanceof ge?function(i,s){return Pe.create([i,s],"and")}(t,e):E0(t,e):e instanceof ge?E0(e,t):function(i,s){if(re(i.filters.length>0&&s.filters.length>0),to(i)&&to(s))return T1(i,s.getFilters());const o=tf(i)?i:s,l=tf(i)?s:i,u=o.filters.map(c=>Fp(c,l));return Pe.create(u,"or")}(t,e),uc(n)}function E0(t,e){if(to(e))return T1(e,t.getFilters());{const n=e.filters.map(r=>Fp(t,r));return Pe.create(n,"or")}}function uc(t){if(re(t instanceof ge||t instanceof Pe),t instanceof ge)return t;const e=t.getFilters();if(e.length===1)return uc(e[0]);if(E1(t))return t;const n=e.map(i=>uc(i)),r=[];return n.forEach(i=>{i instanceof ge?r.push(i):i instanceof Pe&&(i.op===t.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:Pe.create(r,t.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c2{constructor(){this._n=new Bp}addToCollectionParentIndex(e,n){return this._n.add(n),M.resolve()}getCollectionParents(e,n){return M.resolve(this._n.getEntries(n))}addFieldIndex(e,n){return M.resolve()}deleteFieldIndex(e,n){return M.resolve()}deleteAllFieldIndexes(e){return M.resolve()}createTargetIndexes(e,n){return M.resolve()}getDocumentsMatchingTarget(e,n){return M.resolve(null)}getIndexType(e,n){return M.resolve(0)}getFieldIndexes(e,n){return M.resolve([])}getNextCollectionGroupToUpdate(e){return M.resolve(null)}getMinOffset(e,n){return M.resolve(un.min())}getMinOffsetFromCollectionGroup(e,n){return M.resolve(un.min())}updateCollectionGroup(e,n,r){return M.resolve()}updateIndexEntries(e,n){return M.resolve()}}class Bp{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Re(me.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Re(me.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nu=new Uint8Array(0);class h2{constructor(e,n){this.databaseId=n,this.an=new Bp,this.un=new ri(r=>Fi(r),(r,i)=>ll(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.an.has(n)){const r=n.lastSegment(),i=n.popLast();e.addOnCommittedListener(()=>{this.an.add(n)});const s={collectionId:r,parent:zt(i)};return I0(e).put(s)}return M.resolve()}getCollectionParents(e,n){const r=[],i=IDBKeyRange.bound([n,""],[i1(n),""],!1,!0);return I0(e).U(i).next(s=>{for(const o of s){if(o.collectionId!==n)break;r.push(On(o.parent))}return r})}addFieldIndex(e,n){const r=Xo(e),i=function(l){return{indexId:l.indexId,collectionGroup:l.collectionGroup,fields:l.fields.map(u=>[u.fieldPath.canonicalString(),u.kind])}}(n);delete i.indexId;const s=r.add(i);if(n.indexState){const o=ms(e);return s.next(l=>{o.put(m0(l,this.uid,n.indexState.sequenceNumber,n.indexState.offset))})}return s.next()}deleteFieldIndex(e,n){const r=Xo(e),i=ms(e),s=ps(e);return r.delete(n.indexId).next(()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const n=Xo(e),r=ps(e),i=ms(e);return n.j().next(()=>r.j()).next(()=>i.j())}createTargetIndexes(e,n){return M.forEach(this.cn(n),r=>this.getIndexType(e,r).next(i=>{if(i===0||i===1){const s=new w0(r).on();if(s!=null)return this.addFieldIndex(e,s)}}))}getDocumentsMatchingTarget(e,n){const r=ps(e);let i=!0;const s=new Map;return M.forEach(this.cn(n),o=>this.ln(e,o).next(l=>{i&&(i=!!l),s.set(o,l)})).next(()=>{if(i){let o=ue();const l=[];return M.forEach(s,(u,c)=>{W("IndexedDbIndexManager",`Using index ${function(x){return`id=${x.indexId}|cg=${x.collectionGroup}|f=${x.fields.map(d=>`${d.fieldPath}:${d.kind}`).join(",")}`}(u)} to execute ${Fi(n)}`);const f=function(x,d){const g=Xd(d);if(g===void 0)return null;for(const I of oc(x,g.fieldPath))switch(I.op){case"array-contains-any":return I.value.arrayValue.values||[];case"array-contains":return[I.value]}return null}(c,u),m=function(x,d){const g=new Map;for(const I of mi(d))for(const _ of oc(x,I.fieldPath))switch(_.op){case"==":case"in":g.set(I.fieldPath.canonicalString(),_.value);break;case"not-in":case"!=":return g.set(I.fieldPath.canonicalString(),_.value),Array.from(g.values())}return null}(c,u),v=function(x,d){const g=[];let I=!0;for(const _ of mi(d)){const y=_.kind===0?e0(x,_.fieldPath,x.startAt):t0(x,_.fieldPath,x.startAt);g.push(y.value),I&&(I=y.inclusive)}return new Hr(g,I)}(c,u),R=function(x,d){const g=[];let I=!0;for(const _ of mi(d)){const y=_.kind===0?t0(x,_.fieldPath,x.endAt):e0(x,_.fieldPath,x.endAt);g.push(y.value),I&&(I=y.inclusive)}return new Hr(g,I)}(c,u),V=this.hn(u,c,v),N=this.hn(u,c,R),L=this.Pn(u,c,m),C=this.In(u.indexId,f,V,v.inclusive,N,R.inclusive,L);return M.forEach(C,P=>r.G(P,n.limit).next(x=>{x.forEach(d=>{const g=Y.fromSegments(d.documentKey);o.has(g)||(o=o.add(g),l.push(g))})}))}).next(()=>l)}return M.resolve(null)})}cn(e){let n=this.un.get(e);return n||(e.filters.length===0?n=[e]:n=u2(Pe.create(e.filters,"and")).map(r=>rf(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,n),n)}In(e,n,r,i,s,o,l){const u=(n!=null?n.length:1)*Math.max(r.length,s.length),c=u/(n!=null?n.length:1),f=[];for(let m=0;m<u;++m){const v=n?this.Tn(n[m/c]):nu,R=this.En(e,v,r[m%c],i),V=this.dn(e,v,s[m%c],o),N=l.map(L=>this.En(e,v,L,!0));f.push(...this.createRange(R,V,N))}return f}En(e,n,r,i){const s=new vi(e,Y.empty(),n,r);return i?s:s.Jt()}dn(e,n,r,i){const s=new vi(e,Y.empty(),n,r);return i?s.Jt():s}ln(e,n){const r=new w0(n),i=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,i).next(s=>{let o=null;for(const l of s)r.tn(l)&&(!o||l.fields.length>o.fields.length)&&(o=l);return o})}getIndexType(e,n){let r=2;const i=this.cn(n);return M.forEach(i,s=>this.ln(e,s).next(o=>{o?r!==0&&o.fields.length<function(u){let c=new Re(Be.comparator),f=!1;for(const m of u.filters)for(const v of m.getFlattenedFilters())v.field.isKeyField()||(v.op==="array-contains"||v.op==="array-contains-any"?f=!0:c=c.add(v.field));for(const m of u.orderBy)m.field.isKeyField()||(c=c.add(m.field));return c.size+(f?1:0)}(s)&&(r=1):r=0})).next(()=>function(o){return o.limit!==null}(n)&&i.length>1&&r===2?1:r)}An(e,n){const r=new Yo;for(const i of mi(e)){const s=n.data.field(i.fieldPath);if(s==null)return null;const o=r.Ht(i.kind);_i.bt.Pt(s,o)}return r.Wt()}Tn(e){const n=new Yo;return _i.bt.Pt(e,n.Ht(0)),n.Wt()}Rn(e,n){const r=new Yo;return _i.bt.Pt(ji(this.databaseId,n),r.Ht(function(s){const o=mi(s);return o.length===0?0:o[o.length-1].kind}(e))),r.Wt()}Pn(e,n,r){if(r===null)return[];let i=[];i.push(new Yo);let s=0;for(const o of mi(e)){const l=r[s++];for(const u of i)if(this.Vn(n,o.fieldPath)&&Ha(l))i=this.mn(i,o,l);else{const c=u.Ht(o.kind);_i.bt.Pt(l,c)}}return this.fn(i)}hn(e,n,r){return this.Pn(e,n,r.position)}fn(e){const n=[];for(let r=0;r<e.length;++r)n[r]=e[r].Wt();return n}mn(e,n,r){const i=[...e],s=[];for(const o of r.arrayValue.values||[])for(const l of i){const u=new Yo;u.seed(l.Wt()),_i.bt.Pt(o,u.Ht(n.kind)),s.push(u)}return s}Vn(e,n){return!!e.filters.find(r=>r instanceof ge&&r.field.isEqual(n)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,n){const r=Xo(e),i=ms(e);return(n?r.U("collectionGroupIndex",IDBKeyRange.bound(n,n)):r.U()).next(s=>{const o=[];return M.forEach(s,l=>i.get([l.indexId,this.uid]).next(u=>{o.push(function(f,m){const v=m?new qa(m.sequenceNumber,new un($i(m.readTime),new Y(On(m.documentKey)),m.largestBatchId)):qa.empty(),R=f.fields.map(([V,N])=>new vu(Be.fromServerFormat(V),N));return new ic(f.indexId,f.collectionGroup,R,v)}(l,u))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>n.length===0?null:(n.sort((r,i)=>{const s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return s!==0?s:le(r.collectionGroup,i.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,r){const i=Xo(e),s=ms(e);return this.gn(e).next(o=>i.U("collectionGroupIndex",IDBKeyRange.bound(n,n)).next(l=>M.forEach(l,u=>s.put(m0(u.indexId,this.uid,o,r)))))}updateIndexEntries(e,n){const r=new Map;return M.forEach(n,(i,s)=>{const o=r.get(i.collectionGroup);return(o?M.resolve(o):this.getFieldIndexes(e,i.collectionGroup)).next(l=>(r.set(i.collectionGroup,l),M.forEach(l,u=>this.pn(e,i,u).next(c=>{const f=this.yn(s,u);return c.isEqual(f)?M.resolve():this.wn(e,s,u,c,f)}))))})}Sn(e,n,r,i){return ps(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.Rn(r,n.key),documentKey:n.key.path.toArray()})}bn(e,n,r,i){return ps(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.Rn(r,n.key),n.key.path.toArray()])}pn(e,n,r){const i=ps(e);let s=new Re(_r);return i.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.Rn(r,n)])},(o,l)=>{s=s.add(new vi(r.indexId,n,l.arrayValue,l.directionalValue))}).next(()=>s)}yn(e,n){let r=new Re(_r);const i=this.An(n,e);if(i==null)return r;const s=Xd(n);if(s!=null){const o=e.data.field(s.fieldPath);if(Ha(o))for(const l of o.arrayValue.values||[])r=r.add(new vi(n.indexId,e.key,this.Tn(l),i))}else r=r.add(new vi(n.indexId,e.key,nu,i));return r}wn(e,n,r,i,s){W("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);const o=[];return function(u,c,f,m,v){const R=u.getIterator(),V=c.getIterator();let N=fs(R),L=fs(V);for(;N||L;){let C=!1,P=!1;if(N&&L){const x=f(N,L);x<0?P=!0:x>0&&(C=!0)}else N!=null?P=!0:C=!0;C?(m(L),L=fs(V)):P?(v(N),N=fs(R)):(N=fs(R),L=fs(V))}}(i,s,_r,l=>{o.push(this.Sn(e,n,r,l))},l=>{o.push(this.bn(e,n,r,l))}),M.waitFor(o)}gn(e){let n=1;return ms(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,s)=>{s.done(),n=i.sequenceNumber+1}).next(()=>n)}createRange(e,n,r){r=r.sort((o,l)=>_r(o,l)).filter((o,l,u)=>!l||_r(o,u[l-1])!==0);const i=[];i.push(e);for(const o of r){const l=_r(o,e),u=_r(o,n);if(l===0)i[0]=e.Jt();else if(l>0&&u<0)i.push(o),i.push(o.Jt());else if(u>0)break}i.push(n);const s=[];for(let o=0;o<i.length;o+=2){if(this.Dn(i[o],i[o+1]))return[];const l=[i[o].indexId,this.uid,i[o].arrayValue,i[o].directionalValue,nu,[]],u=[i[o+1].indexId,this.uid,i[o+1].arrayValue,i[o+1].directionalValue,nu,[]];s.push(IDBKeyRange.bound(l,u))}return s}Dn(e,n){return _r(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(T0)}getMinOffset(e,n){return M.mapArray(this.cn(n),r=>this.ln(e,r).next(i=>i||J())).next(T0)}}function I0(t){return wt(t,"collectionParents")}function ps(t){return wt(t,"indexEntries")}function Xo(t){return wt(t,"indexConfiguration")}function ms(t){return wt(t,"indexState")}function T0(t){re(t.length!==0);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){const i=t[r].indexState.offset;Pp(i,e)<0&&(e=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new un(e.readTime,e.documentKey,n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x0={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Kt{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Kt(e,Kt.DEFAULT_COLLECTION_PERCENTILE,Kt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cE(t,e,n){const r=t.store("mutations"),i=t.store("documentMutations"),s=[],o=IDBKeyRange.only(n.batchId);let l=0;const u=r.J({range:o},(f,m,v)=>(l++,v.delete()));s.push(u.next(()=>{re(l===1)}));const c=[];for(const f of n.mutations){const m=h1(e,f.key.path,n.batchId);s.push(i.delete(m)),c.push(f.key)}return M.waitFor(s).next(()=>c)}function cc(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw J();e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Kt.DEFAULT_COLLECTION_PERCENTILE=10,Kt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Kt.DEFAULT=new Kt(41943040,Kt.DEFAULT_COLLECTION_PERCENTILE,Kt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Kt.DISABLED=new Kt(-1,0,0);class Fc{constructor(e,n,r,i){this.userId=e,this.serializer=n,this.indexManager=r,this.referenceDelegate=i,this.Cn={}}static lt(e,n,r,i){re(e.uid!=="");const s=e.isAuthenticated()?e.uid:"";return new Fc(s,n,r,i)}checkEmpty(e){let n=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return vr(e).J({index:"userMutationsIndex",range:r},(i,s,o)=>{n=!1,o.done()}).next(()=>n)}addMutationBatch(e,n,r,i){const s=Es(e),o=vr(e);return o.add({}).next(l=>{re(typeof l=="number");const u=new Np(l,n,r,i),c=function(R,V,N){const L=N.baseMutations.map(P=>Xa(R.ct,P)),C=N.mutations.map(P=>Xa(R.ct,P));return{userId:V,batchId:N.batchId,localWriteTimeMs:N.localWriteTime.toMillis(),baseMutations:L,mutations:C}}(this.serializer,this.userId,u),f=[];let m=new Re((v,R)=>le(v.canonicalString(),R.canonicalString()));for(const v of i){const R=h1(this.userId,v.key.path,l);m=m.add(v.key.path.popLast()),f.push(o.put(c)),f.push(s.put(R,Zb))}return m.forEach(v=>{f.push(this.indexManager.addToCollectionParentIndex(e,v))}),e.addOnCommittedListener(()=>{this.Cn[l]=u.keys()}),M.waitFor(f).next(()=>u)})}lookupMutationBatch(e,n){return vr(e).get(n).next(r=>r?(re(r.userId===this.userId),yi(this.serializer,r)):null)}vn(e,n){return this.Cn[n]?M.resolve(this.Cn[n]):this.lookupMutationBatch(e,n).next(r=>{if(r){const i=r.keys();return this.Cn[n]=i,i}return null})}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=IDBKeyRange.lowerBound([this.userId,r]);let s=null;return vr(e).J({index:"userMutationsIndex",range:i},(o,l,u)=>{l.userId===this.userId&&(re(l.batchId>=r),s=yi(this.serializer,l)),u.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return vr(e).J({index:"userMutationsIndex",range:n,reverse:!0},(i,s,o)=>{r=s.batchId,o.done()}).next(()=>r)}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return vr(e).U("userMutationsIndex",n).next(r=>r.map(i=>yi(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,n){const r=wu(this.userId,n.path),i=IDBKeyRange.lowerBound(r),s=[];return Es(e).J({range:i},(o,l,u)=>{const[c,f,m]=o,v=On(f);if(c===this.userId&&n.path.isEqual(v))return vr(e).get(m).next(R=>{if(!R)throw J();re(R.userId===this.userId),s.push(yi(this.serializer,R))});u.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Re(le);const i=[];return n.forEach(s=>{const o=wu(this.userId,s.path),l=IDBKeyRange.lowerBound(o),u=Es(e).J({range:l},(c,f,m)=>{const[v,R,V]=c,N=On(R);v===this.userId&&s.path.isEqual(N)?r=r.add(V):m.done()});i.push(u)}),M.waitFor(i).next(()=>this.Fn(e,r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1,s=wu(this.userId,r),o=IDBKeyRange.lowerBound(s);let l=new Re(le);return Es(e).J({range:o},(u,c,f)=>{const[m,v,R]=u,V=On(v);m===this.userId&&r.isPrefixOf(V)?V.length===i&&(l=l.add(R)):f.done()}).next(()=>this.Fn(e,l))}Fn(e,n){const r=[],i=[];return n.forEach(s=>{i.push(vr(e).get(s).next(o=>{if(o===null)throw J();re(o.userId===this.userId),r.push(yi(this.serializer,o))}))}),M.waitFor(i).next(()=>r)}removeMutationBatch(e,n){return cE(e._e,this.userId,n).next(r=>(e.addOnCommittedListener(()=>{this.Mn(n.batchId)}),M.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}Mn(e){delete this.Cn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return M.resolve();const r=IDBKeyRange.lowerBound(function(o){return[o]}(this.userId)),i=[];return Es(e).J({range:r},(s,o,l)=>{if(s[0]===this.userId){const u=On(s[1]);i.push(u)}else l.done()}).next(()=>{re(i.length===0)})})}containsKey(e,n){return hE(e,this.userId,n)}xn(e){return dE(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function hE(t,e,n){const r=wu(e,n.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return Es(t).J({range:s,H:!0},(l,u,c)=>{const[f,m,v]=l;f===e&&m===i&&(o=!0),c.done()}).next(()=>o)}function vr(t){return wt(t,"mutations")}function Es(t){return wt(t,"documentMutations")}function dE(t){return wt(t,"mutationQueues")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qi{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new qi(0)}static Ln(){return new qi(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d2{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.Bn(e).next(n=>{const r=new qi(n.highestTargetId);return n.highestTargetId=r.next(),this.kn(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Bn(e).next(n=>ie.fromTimestamp(new Ue(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Bn(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,r){return this.Bn(e).next(i=>(i.highestListenSequenceNumber=n,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),n>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=n),this.kn(e,i)))}addTargetData(e,n){return this.qn(e,n).next(()=>this.Bn(e).next(r=>(r.targetCount+=1,this.Qn(n,r),this.kn(e,r))))}updateTargetData(e,n){return this.qn(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>gs(e).delete(n.targetId)).next(()=>this.Bn(e)).next(r=>(re(r.targetCount>0),r.targetCount-=1,this.kn(e,r)))}removeTargets(e,n,r){let i=0;const s=[];return gs(e).J((o,l)=>{const u=aa(l);u.sequenceNumber<=n&&r.get(u.targetId)===null&&(i++,s.push(this.removeTargetData(e,u)))}).next(()=>M.waitFor(s)).next(()=>i)}forEachTarget(e,n){return gs(e).J((r,i)=>{const s=aa(i);n(s)})}Bn(e){return S0(e).get("targetGlobalKey").next(n=>(re(n!==null),n))}kn(e,n){return S0(e).put("targetGlobalKey",n)}qn(e,n){return gs(e).put(aE(this.serializer,n))}Qn(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Bn(e).next(n=>n.targetCount)}getTargetData(e,n){const r=Fi(n),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let s=null;return gs(e).J({range:i,index:"queryTargetsIndex"},(o,l,u)=>{const c=aa(l);ll(n,c.target)&&(s=c,u.done())}).next(()=>s)}addMatchingKeys(e,n,r){const i=[],s=Sr(e);return n.forEach(o=>{const l=zt(o.path);i.push(s.put({targetId:r,path:l})),i.push(this.referenceDelegate.addReference(e,r,o))}),M.waitFor(i)}removeMatchingKeys(e,n,r){const i=Sr(e);return M.forEach(n,s=>{const o=zt(s.path);return M.waitFor([i.delete([r,o]),this.referenceDelegate.removeReference(e,r,s)])})}removeMatchingKeysForTargetId(e,n){const r=Sr(e),i=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,n){const r=IDBKeyRange.bound([n],[n+1],!1,!0),i=Sr(e);let s=ue();return i.J({range:r,H:!0},(o,l,u)=>{const c=On(o[1]),f=new Y(c);s=s.add(f)}).next(()=>s)}containsKey(e,n){const r=zt(n.path),i=IDBKeyRange.bound([r],[i1(r)],!1,!0);let s=0;return Sr(e).J({index:"documentTargetsIndex",H:!0,range:i},([o,l],u,c)=>{o!==0&&(s++,c.done())}).next(()=>s>0)}ot(e,n){return gs(e).get(n).next(r=>r?aa(r):null)}}function gs(t){return wt(t,"targets")}function S0(t){return wt(t,"targetGlobal")}function Sr(t){return wt(t,"targetDocuments")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P0([t,e],[n,r]){const i=le(t,n);return i===0?le(e,r):i}class f2{constructor(e){this.Kn=e,this.buffer=new Re(P0),this.$n=0}Un(){return++this.$n}Wn(e){const n=[e,this.Un()];if(this.buffer.size<this.Kn)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();P0(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class p2{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Gn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.zn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return this.Gn!==null}zn(e){W("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Gn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){ni(n)?W("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n):await ti(n)}await this.zn(3e5)})}}class m2{constructor(e,n){this.jn=e,this.params=n}calculateTargetCount(e,n){return this.jn.Hn(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return M.resolve(Xt.oe);const r=new f2(n);return this.jn.forEachTarget(e,i=>r.Wn(i.sequenceNumber)).next(()=>this.jn.Jn(e,i=>r.Wn(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.jn.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.jn.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(W("LruGarbageCollector","Garbage collection skipped; disabled"),M.resolve(x0)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(W("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),x0):this.Yn(e,n))}getCacheSize(e){return this.jn.getCacheSize(e)}Yn(e,n){let r,i,s,o,l,u,c;const f=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(m=>(m>this.params.maximumSequenceNumbersToCollect?(W("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${m}`),i=this.params.maximumSequenceNumbersToCollect):i=m,o=Date.now(),this.nthSequenceNumber(e,i))).next(m=>(r=m,l=Date.now(),this.removeTargets(e,r,n))).next(m=>(s=m,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(m=>(c=Date.now(),ys()<=ye.DEBUG&&W("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-f}ms
	Determined least recently used ${i} in `+(l-o)+`ms
	Removed ${s} targets in `+(u-l)+`ms
	Removed ${m} documents in `+(c-u)+`ms
Total Duration: ${c-f}ms`),M.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:m})))}}function g2(t,e){return new m2(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y2{constructor(e,n){this.db=e,this.garbageCollector=g2(this,n)}Hn(e){const n=this.Zn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}Zn(e){let n=0;return this.Jn(e,r=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}Jn(e,n){return this.Xn(e,(r,i)=>n(i))}addReference(e,n,r){return ru(e,r)}removeReference(e,n,r){return ru(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return ru(e,n)}er(e,n){return function(i,s){let o=!1;return dE(i).Y(l=>hE(i,l,s).next(u=>(u&&(o=!0),M.resolve(!u)))).next(()=>o)}(e,n)}removeOrphanedDocuments(e,n){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.Xn(e,(o,l)=>{if(l<=n){const u=this.er(e,o).next(c=>{if(!c)return s++,r.getEntry(e,o).next(()=>(r.removeEntry(o,ie.min()),Sr(e).delete(function(m){return[0,zt(m.path)]}(o))))});i.push(u)}}).next(()=>M.waitFor(i)).next(()=>r.apply(e)).next(()=>s)}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return ru(e,n)}Xn(e,n){const r=Sr(e);let i,s=Xt.oe;return r.J({index:"documentTargetsIndex"},([o,l],{path:u,sequenceNumber:c})=>{o===0?(s!==Xt.oe&&n(new Y(On(i)),s),s=c,i=u):s=Xt.oe}).next(()=>{s!==Xt.oe&&n(new Y(On(i)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function ru(t,e){return Sr(t).put(function(r,i){return{targetId:0,path:zt(r.path),sequenceNumber:i}}(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fE{constructor(){this.changes=new ri(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Me.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?M.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _2{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return hi(e).put(r)}removeEntry(e,n,r){return hi(e).delete(function(s,o){const l=s.path.toArray();return[l.slice(0,l.length-2),l[l.length-2],lc(o),l[l.length-1]]}(n,r))}updateMetadata(e,n){return this.getMetadata(e).next(r=>(r.byteSize+=n,this.tr(e,r)))}getEntry(e,n){let r=Me.newInvalidDocument(n);return hi(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Jo(n))},(i,s)=>{r=this.nr(n,s)}).next(()=>r)}rr(e,n){let r={size:0,document:Me.newInvalidDocument(n)};return hi(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Jo(n))},(i,s)=>{r={document:this.nr(n,s),size:cc(s)}}).next(()=>r)}getEntries(e,n){let r=Zt();return this.ir(e,n,(i,s)=>{const o=this.nr(i,s);r=r.insert(i,o)}).next(()=>r)}sr(e,n){let r=Zt(),i=new Ne(Y.comparator);return this.ir(e,n,(s,o)=>{const l=this.nr(s,o);r=r.insert(s,l),i=i.insert(s,cc(o))}).next(()=>({documents:r,_r:i}))}ir(e,n,r){if(n.isEmpty())return M.resolve();let i=new Re(R0);n.forEach(u=>i=i.add(u));const s=IDBKeyRange.bound(Jo(i.first()),Jo(i.last())),o=i.getIterator();let l=o.getNext();return hi(e).J({index:"documentKeyIndex",range:s},(u,c,f)=>{const m=Y.fromSegments([...c.prefixPath,c.collectionGroup,c.documentId]);for(;l&&R0(l,m)<0;)r(l,null),l=o.getNext();l&&l.isEqual(m)&&(r(l,c),l=o.hasNext()?o.getNext():null),l?f.$(Jo(l)):f.done()}).next(()=>{for(;l;)r(l,null),l=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,n,r,i,s){const o=n.path,l=[o.popLast().toArray(),o.lastSegment(),lc(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return hi(e).U(IDBKeyRange.bound(l,u,!0)).next(c=>{s==null||s.incrementDocumentReadCount(c.length);let f=Zt();for(const m of c){const v=this.nr(Y.fromSegments(m.prefixPath.concat(m.collectionGroup,m.documentId)),m);v.isFoundDocument()&&(cl(n,v)||i.has(v.key))&&(f=f.insert(v.key,v))}return f})}getAllFromCollectionGroup(e,n,r,i){let s=Zt();const o=A0(n,r),l=A0(n,un.max());return hi(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,l,!0)},(u,c,f)=>{const m=this.nr(Y.fromSegments(c.prefixPath.concat(c.collectionGroup,c.documentId)),c);s=s.insert(m.key,m),s.size===i&&f.done()}).next(()=>s)}newChangeBuffer(e){return new v2(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return b0(e).get("remoteDocumentGlobalKey").next(n=>(re(!!n),n))}tr(e,n){return b0(e).put("remoteDocumentGlobalKey",n)}nr(e,n){if(n){const r=r2(this.serializer,n);if(!(r.isNoDocument()&&r.version.isEqual(ie.min())))return r}return Me.newInvalidDocument(e)}}function pE(t){return new _2(t)}class v2 extends fE{constructor(e,n){super(),this.ar=e,this.trackRemovals=n,this.ur=new ri(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const n=[];let r=0,i=new Re((s,o)=>le(s.canonicalString(),o.canonicalString()));return this.changes.forEach((s,o)=>{const l=this.ur.get(s);if(n.push(this.ar.removeEntry(e,s,l.readTime)),o.isValidDocument()){const u=f0(this.ar.serializer,o);i=i.add(s.path.popLast());const c=cc(u);r+=c-l.size,n.push(this.ar.addEntry(e,s,u))}else if(r-=l.size,this.trackRemovals){const u=f0(this.ar.serializer,o.convertToNoDocument(ie.min()));n.push(this.ar.addEntry(e,s,u))}}),i.forEach(s=>{n.push(this.ar.indexManager.addToCollectionParentIndex(e,s))}),n.push(this.ar.updateMetadata(e,r)),M.waitFor(n)}getFromCache(e,n){return this.ar.rr(e,n).next(r=>(this.ur.set(n,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,n){return this.ar.sr(e,n).next(({documents:r,_r:i})=>(i.forEach((s,o)=>{this.ur.set(s,{size:o,readTime:r.get(s).readTime})}),r))}}function b0(t){return wt(t,"remoteDocumentGlobal")}function hi(t){return wt(t,"remoteDocumentsV14")}function Jo(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function A0(t,e){const n=e.documentKey.path.toArray();return[t,lc(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function R0(t,e){const n=t.path.toArray(),r=e.path.toArray();let i=0;for(let s=0;s<n.length-2&&s<r.length-2;++s)if(i=le(n[s],r[s]),i)return i;return i=le(n.length,r.length),i||(i=le(n[n.length-2],r[r.length-2]),i||le(n[n.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w2{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mE{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&wa(r.mutation,i,Jt.empty(),Ue.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ue()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ue()){const i=Ln();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=sa();return s.forEach((l,u)=>{o=o.insert(l,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Ln();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ue()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,l)=>{n.set(o,l)})})}computeViews(e,n,r,i){let s=Zt();const o=va(),l=function(){return va()}();return n.forEach((u,c)=>{const f=r.get(c.key);i.has(c.key)&&(f===void 0||f.mutation instanceof cr)?s=s.insert(c.key,c):f!==void 0?(o.set(c.key,f.mutation.getFieldMask()),wa(f.mutation,c,f.mutation.getFieldMask(),Ue.now())):o.set(c.key,Jt.empty())}),this.recalculateAndSaveOverlays(e,s).next(u=>(u.forEach((c,f)=>o.set(c,f)),n.forEach((c,f)=>{var m;return l.set(c,new w2(f,(m=o.get(c))!==null&&m!==void 0?m:null))}),l))}recalculateAndSaveOverlays(e,n){const r=va();let i=new Ne((o,l)=>o-l),s=ue();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const l of o)l.keys().forEach(u=>{const c=n.get(u);if(c===null)return;let f=r.get(u)||Jt.empty();f=l.applyToLocalView(c,f),r.set(u,f);const m=(i.get(l.batchId)||ue()).add(u);i=i.insert(l.batchId,m)})}).next(()=>{const o=[],l=i.getReverseIterator();for(;l.hasNext();){const u=l.getNext(),c=u.key,f=u.value,m=N1();f.forEach(v=>{if(!s.has(v)){const R=z1(n.get(v),r.get(v));R!==null&&m.set(v,R),s=s.add(v)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,m))}return M.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return Y.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Cp(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):M.resolve(Ln());let l=-1,u=s;return o.next(c=>M.forEach(c,(f,m)=>(l<m.largestBatchId&&(l=m.largestBatchId),s.get(f)?M.resolve():this.remoteDocumentCache.getEntry(e,f).next(v=>{u=u.insert(f,v)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,u,c,ue())).next(f=>({batchId:l,changes:D1(f)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Y(n)).next(r=>{let i=sa();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=sa();return this.indexManager.getCollectionParents(e,s).next(l=>M.forEach(l,u=>{const c=function(m,v){return new ur(v,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)}(n,u.child(s));return this.getDocumentsMatchingCollectionQuery(e,c,r,i).next(f=>{f.forEach((m,v)=>{o=o.insert(m,v)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((u,c)=>{const f=c.getKey();o.get(f)===null&&(o=o.insert(f,Me.newInvalidDocument(f)))});let l=sa();return o.forEach((u,c)=>{const f=s.get(u);f!==void 0&&wa(f.mutation,c,Jt.empty(),Ue.now()),cl(n,c)&&(l=l.insert(u,c))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E2{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,n){return M.resolve(this.cr.get(n))}saveBundleMetadata(e,n){return this.cr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:tt(i.createTime)}}(n)),M.resolve()}getNamedQuery(e,n){return M.resolve(this.lr.get(n))}saveNamedQuery(e,n){return this.lr.set(n.name,function(i){return{name:i.name,query:jp(i.bundledQuery),readTime:tt(i.readTime)}}(n)),M.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I2{constructor(){this.overlays=new Ne(Y.comparator),this.hr=new Map}getOverlay(e,n){return M.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Ln();return M.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ht(e,n,s)}),M.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.hr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.hr.delete(r)),M.resolve()}getOverlaysForCollection(e,n,r){const i=Ln(),s=n.length+1,o=new Y(n.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const u=l.getNext().value,c=u.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return M.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Ne((c,f)=>c-f);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let f=s.get(c.largestBatchId);f===null&&(f=Ln(),s=s.insert(c.largestBatchId,f)),f.set(c.getKey(),c)}}const l=Ln(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((c,f)=>l.set(c,f)),!(l.size()>=i)););return M.resolve(l)}ht(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.hr.get(i.largestBatchId).delete(r.key);this.hr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new Op(n,r));let s=this.hr.get(n);s===void 0&&(s=ue(),this.hr.set(n,s)),this.hr.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zp{constructor(){this.Pr=new Re(mt.Ir),this.Tr=new Re(mt.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,n){const r=new mt(e,n);this.Pr=this.Pr.add(r),this.Tr=this.Tr.add(r)}dr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Ar(new mt(e,n))}Rr(e,n){e.forEach(r=>this.removeReference(r,n))}Vr(e){const n=new Y(new me([])),r=new mt(n,e),i=new mt(n,e+1),s=[];return this.Tr.forEachInRange([r,i],o=>{this.Ar(o),s.push(o.key)}),s}mr(){this.Pr.forEach(e=>this.Ar(e))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){const n=new Y(new me([])),r=new mt(n,e),i=new mt(n,e+1);let s=ue();return this.Tr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new mt(e,0),r=this.Pr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class mt{constructor(e,n){this.key=e,this.pr=n}static Ir(e,n){return Y.comparator(e.key,n.key)||le(e.pr,n.pr)}static Er(e,n){return le(e.pr,n.pr)||Y.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T2{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.yr=1,this.wr=new Re(mt.Ir)}checkEmpty(e){return M.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new Np(s,n,r,i);this.mutationQueue.push(o);for(const l of i)this.wr=this.wr.add(new mt(l.key,s)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return M.resolve(o)}lookupMutationBatch(e,n){return M.resolve(this.Sr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.br(r),s=i<0?0:i;return M.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return M.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(e){return M.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new mt(n,0),i=new mt(n,Number.POSITIVE_INFINITY),s=[];return this.wr.forEachInRange([r,i],o=>{const l=this.Sr(o.pr);s.push(l)}),M.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Re(le);return n.forEach(i=>{const s=new mt(i,0),o=new mt(i,Number.POSITIVE_INFINITY);this.wr.forEachInRange([s,o],l=>{r=r.add(l.pr)})}),M.resolve(this.Dr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;Y.isDocumentKey(s)||(s=s.child(""));const o=new mt(new Y(s),0);let l=new Re(le);return this.wr.forEachWhile(u=>{const c=u.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(l=l.add(u.pr)),!0)},o),M.resolve(this.Dr(l))}Dr(e){const n=[];return e.forEach(r=>{const i=this.Sr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){re(this.Cr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.wr;return M.forEach(n.mutations,i=>{const s=new mt(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.wr=r})}Mn(e){}containsKey(e,n){const r=new mt(n,0),i=this.wr.firstAfterOrEqual(r);return M.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,M.resolve()}Cr(e,n){return this.br(e)}br(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Sr(e){const n=this.br(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x2{constructor(e){this.vr=e,this.docs=function(){return new Ne(Y.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.vr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return M.resolve(r?r.document.mutableCopy():Me.newInvalidDocument(n))}getEntries(e,n){let r=Zt();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Me.newInvalidDocument(i))}),M.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=Zt();const o=n.path,l=new Y(o.child("")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:c,value:{document:f}}=u.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||Pp(o1(f),r)<=0||(i.has(f.key)||cl(n,f))&&(s=s.insert(f.key,f.mutableCopy()))}return M.resolve(s)}getAllFromCollectionGroup(e,n,r,i){J()}Fr(e,n){return M.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new S2(this)}getSize(e){return M.resolve(this.size)}}class S2 extends fE{constructor(e){super(),this.ar=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.ar.addEntry(e,i)):this.ar.removeEntry(r)}),M.waitFor(n)}getFromCache(e,n){return this.ar.getEntry(e,n)}getAllFromCache(e,n){return this.ar.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P2{constructor(e){this.persistence=e,this.Mr=new ri(n=>Fi(n),ll),this.lastRemoteSnapshotVersion=ie.min(),this.highestTargetId=0,this.Or=0,this.Nr=new zp,this.targetCount=0,this.Lr=qi.Nn()}forEachTarget(e,n){return this.Mr.forEach((r,i)=>n(i)),M.resolve()}getLastRemoteSnapshotVersion(e){return M.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return M.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Lr.next(),M.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Or&&(this.Or=n),M.resolve()}qn(e){this.Mr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Lr=new qi(n),this.highestTargetId=n),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,n){return this.qn(n),this.targetCount+=1,M.resolve()}updateTargetData(e,n){return this.qn(n),M.resolve()}removeTargetData(e,n){return this.Mr.delete(n.target),this.Nr.Vr(n.targetId),this.targetCount-=1,M.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Mr.forEach((o,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.Mr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,l.targetId)),i++)}),M.waitFor(s).next(()=>i)}getTargetCount(e){return M.resolve(this.targetCount)}getTargetData(e,n){const r=this.Mr.get(n)||null;return M.resolve(r)}addMatchingKeys(e,n,r){return this.Nr.dr(n,r),M.resolve()}removeMatchingKeys(e,n,r){this.Nr.Rr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),M.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Nr.Vr(n),M.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Nr.gr(n);return M.resolve(r)}containsKey(e,n){return M.resolve(this.Nr.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gE{constructor(e,n){this.Br={},this.overlays={},this.kr=new Xt(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new P2(this),this.indexManager=new c2,this.remoteDocumentCache=function(i){return new x2(i)}(r=>this.referenceDelegate.Kr(r)),this.serializer=new oE(n),this.$r=new E2(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new I2,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Br[e.toKey()];return r||(r=new T2(n,this.referenceDelegate),this.Br[e.toKey()]=r),r}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,n,r){W("MemoryPersistence","Starting transaction:",e);const i=new b2(this.kr.next());return this.referenceDelegate.Ur(),r(i).next(s=>this.referenceDelegate.Wr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Gr(e,n){return M.or(Object.values(this.Br).map(r=>()=>r.containsKey(e,n)))}}class b2 extends l1{constructor(e){super(),this.currentSequenceNumber=e}}class Bc{constructor(e){this.persistence=e,this.zr=new zp,this.jr=null}static Hr(e){return new Bc(e)}get Jr(){if(this.jr)return this.jr;throw J()}addReference(e,n,r){return this.zr.addReference(r,n),this.Jr.delete(r.toString()),M.resolve()}removeReference(e,n,r){return this.zr.removeReference(r,n),this.Jr.add(r.toString()),M.resolve()}markPotentiallyOrphaned(e,n){return this.Jr.add(n.toString()),M.resolve()}removeTarget(e,n){this.zr.Vr(n.targetId).forEach(i=>this.Jr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Jr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}Ur(){this.jr=new Set}Wr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return M.forEach(this.Jr,r=>{const i=Y.fromPath(r);return this.Yr(e,i).next(s=>{s||n.removeEntry(i,ie.min())})}).next(()=>(this.jr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Yr(e,n).next(r=>{r?this.Jr.delete(n.toString()):this.Jr.add(n.toString())})}Kr(e){return 0}Yr(e,n){return M.or([()=>M.resolve(this.zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Gr(e,n)])}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A2{constructor(e){this.serializer=e}O(e,n,r,i){const s=new Vc("createOrUpgrade",n);r<1&&i>=1&&(function(u){u.createObjectStore("owner")}(e),function(u){u.createObjectStore("mutationQueues",{keyPath:"userId"}),u.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",qy,{unique:!0}),u.createObjectStore("documentMutations")}(e),C0(e),function(u){u.createObjectStore("remoteDocuments")}(e));let o=M.resolve();return r<3&&i>=3&&(r!==0&&(function(u){u.deleteObjectStore("targetDocuments"),u.deleteObjectStore("targets"),u.deleteObjectStore("targetGlobal")}(e),C0(e)),o=o.next(()=>function(u){const c=u.store("targetGlobal"),f={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:ie.min().toTimestamp(),targetCount:0};return c.put("targetGlobalKey",f)}(s))),r<4&&i>=4&&(r!==0&&(o=o.next(()=>function(u,c){return c.store("mutations").U().next(f=>{u.deleteObjectStore("mutations"),u.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",qy,{unique:!0});const m=c.store("mutations"),v=f.map(R=>m.put(R));return M.waitFor(v)})}(e,s))),o=o.next(()=>{(function(u){u.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),r<5&&i>=5&&(o=o.next(()=>this.Xr(s))),r<6&&i>=6&&(o=o.next(()=>(function(u){u.createObjectStore("remoteDocumentGlobal")}(e),this.ei(s)))),r<7&&i>=7&&(o=o.next(()=>this.ti(s))),r<8&&i>=8&&(o=o.next(()=>this.ni(e,s))),r<9&&i>=9&&(o=o.next(()=>{(function(u){u.objectStoreNames.contains("remoteDocumentChanges")&&u.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(o=o.next(()=>this.ri(s))),r<11&&i>=11&&(o=o.next(()=>{(function(u){u.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(u){u.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(o=o.next(()=>{(function(u){const c=u.createObjectStore("documentOverlays",{keyPath:hA});c.createIndex("collectionPathOverlayIndex",dA,{unique:!1}),c.createIndex("collectionGroupOverlayIndex",fA,{unique:!1})})(e)})),r<13&&i>=13&&(o=o.next(()=>function(u){const c=u.createObjectStore("remoteDocumentsV14",{keyPath:eA});c.createIndex("documentKeyIndex",tA),c.createIndex("collectionGroupIndex",nA)}(e)).next(()=>this.ii(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(o=o.next(()=>this.si(e,s))),r<15&&i>=15&&(o=o.next(()=>function(u){u.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),u.createObjectStore("indexState",{keyPath:aA}).createIndex("sequenceNumberIndex",lA,{unique:!1}),u.createObjectStore("indexEntries",{keyPath:uA}).createIndex("documentKeyIndex",cA,{unique:!1})}(e))),r<16&&i>=16&&(o=o.next(()=>{n.objectStore("indexState").clear()}).next(()=>{n.objectStore("indexEntries").clear()})),o}ei(e){let n=0;return e.store("remoteDocuments").J((r,i)=>{n+=cc(i)}).next(()=>{const r={byteSize:n};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Xr(e){const n=e.store("mutationQueues"),r=e.store("mutations");return n.U().next(i=>M.forEach(i,s=>{const o=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return r.U("userMutationsIndex",o).next(l=>M.forEach(l,u=>{re(u.userId===s.userId);const c=yi(this.serializer,u);return cE(e,s.userId,c).next(()=>{})}))}))}ti(e){const n=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const s=[];return r.J((o,l)=>{const u=new me(o),c=function(m){return[0,zt(m)]}(u);s.push(n.get(c).next(f=>f?M.resolve():(m=>n.put({targetId:0,path:zt(m),sequenceNumber:i.highestListenSequenceNumber}))(u)))}).next(()=>M.waitFor(s))})}ni(e,n){e.createObjectStore("collectionParents",{keyPath:oA});const r=n.store("collectionParents"),i=new Bp,s=o=>{if(i.add(o)){const l=o.lastSegment(),u=o.popLast();return r.put({collectionId:l,parent:zt(u)})}};return n.store("remoteDocuments").J({H:!0},(o,l)=>{const u=new me(o);return s(u.popLast())}).next(()=>n.store("documentMutations").J({H:!0},([o,l,u],c)=>{const f=On(l);return s(f.popLast())}))}ri(e){const n=e.store("targets");return n.J((r,i)=>{const s=aa(i),o=aE(this.serializer,s);return n.put(o)})}ii(e,n){const r=n.store("remoteDocuments"),i=[];return r.J((s,o)=>{const l=n.store("remoteDocumentsV14"),u=function(m){return m.document?new Y(me.fromString(m.document.name).popFirst(5)):m.noDocument?Y.fromSegments(m.noDocument.path):m.unknownDocument?Y.fromSegments(m.unknownDocument.path):J()}(o).path.toArray(),c={prefixPath:u.slice(0,u.length-2),collectionGroup:u[u.length-2],documentId:u[u.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};i.push(l.put(c))}).next(()=>M.waitFor(i))}si(e,n){const r=n.store("mutations"),i=pE(this.serializer),s=new gE(Bc.Hr,this.serializer.ct);return r.U().next(o=>{const l=new Map;return o.forEach(u=>{var c;let f=(c=l.get(u.userId))!==null&&c!==void 0?c:ue();yi(this.serializer,u).keys().forEach(m=>f=f.add(m)),l.set(u.userId,f)}),M.forEach(l,(u,c)=>{const f=new yt(c),m=jc.lt(this.serializer,f),v=s.getIndexManager(f),R=Fc.lt(f,this.serializer,v,s.referenceDelegate);return new mE(i,R,m,v).recalculateAndSaveOverlaysForDocumentKeys(new Jd(n,Xt.oe),u).next()})})}}function C0(t){t.createObjectStore("targetDocuments",{keyPath:iA}).createIndex("documentTargetsIndex",sA,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",rA,{unique:!0}),t.createObjectStore("targetGlobal")}const Wh="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Up{constructor(e,n,r,i,s,o,l,u,c,f,m=16){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.oi=s,this.window=o,this.document=l,this._i=c,this.ai=f,this.ui=m,this.kr=null,this.qr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.li=null,this.hi=null,this.Pi=Number.NEGATIVE_INFINITY,this.Ii=v=>Promise.resolve(),!Up.D())throw new G(B.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new y2(this,i),this.Ti=n+"main",this.serializer=new oE(u),this.Ei=new Fn(this.Ti,this.ui,new A2(this.serializer)),this.Qr=new d2(this.referenceDelegate,this.serializer),this.remoteDocumentCache=pE(this.serializer),this.$r=new i2,this.window&&this.window.localStorage?this.di=this.window.localStorage:(this.di=null,f===!1&&et("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Ai().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new G(B.FAILED_PRECONDITION,Wh);return this.Ri(),this.Vi(),this.mi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Qr.getHighestSequenceNumber(e))}).then(e=>{this.kr=new Xt(e,this._i)}).then(()=>{this.qr=!0}).catch(e=>(this.Ei&&this.Ei.close(),Promise.reject(e)))}fi(e){return this.Ii=async n=>{if(this.started)return e(n)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ei.L(async n=>{n.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.oi.enqueueAndForget(async()=>{this.started&&await this.Ai()}))}Ai(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>iu(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.gi(e).next(n=>{n||(this.isPrimary=!1,this.oi.enqueueRetryable(()=>this.Ii(!1)))})}).next(()=>this.pi(e)).next(n=>this.isPrimary&&!n?this.yi(e).next(()=>!1):!!n&&this.wi(e).next(()=>!0))).catch(e=>{if(ni(e))return W("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return W("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.oi.enqueueRetryable(()=>this.Ii(e)),this.isPrimary=e})}gi(e){return Zo(e).get("owner").next(n=>M.resolve(this.Si(n)))}bi(e){return iu(e).delete(this.clientId)}async Di(){if(this.isPrimary&&!this.Ci(this.Pi,18e5)){this.Pi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{const r=wt(n,"clientMetadata");return r.U().next(i=>{const s=this.vi(i,18e5),o=i.filter(l=>s.indexOf(l)===-1);return M.forEach(o,l=>r.delete(l.clientId)).next(()=>o)})}).catch(()=>[]);if(this.di)for(const n of e)this.di.removeItem(this.Fi(n.clientId))}}mi(){this.hi=this.oi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Ai().then(()=>this.Di()).then(()=>this.mi()))}Si(e){return!!e&&e.ownerId===this.clientId}pi(e){return this.ai?M.resolve(!0):Zo(e).get("owner").next(n=>{if(n!==null&&this.Ci(n.leaseTimestampMs,5e3)&&!this.Mi(n.ownerId)){if(this.Si(n)&&this.networkEnabled)return!0;if(!this.Si(n)){if(!n.allowTabSynchronization)throw new G(B.FAILED_PRECONDITION,Wh);return!1}}return!(!this.networkEnabled||!this.inForeground)||iu(e).U().next(r=>this.vi(r,5e3).find(i=>{if(this.clientId!==i.clientId){const s=!this.networkEnabled&&i.networkEnabled,o=!this.inForeground&&i.inForeground,l=this.networkEnabled===i.networkEnabled;if(s||o&&l)return!0}return!1})===void 0)}).next(n=>(this.isPrimary!==n&&W("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}async shutdown(){this.qr=!1,this.xi(),this.hi&&(this.hi.cancel(),this.hi=null),this.Oi(),this.Ni(),await this.Ei.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{const n=new Jd(e,Xt.oe);return this.yi(n).next(()=>this.bi(n))}),this.Ei.close(),this.Li()}vi(e,n){return e.filter(r=>this.Ci(r.updateTimeMs,n)&&!this.Mi(r.clientId))}Bi(){return this.runTransaction("getActiveClients","readonly",e=>iu(e).U().next(n=>this.vi(n,18e5).map(r=>r.clientId)))}get started(){return this.qr}getMutationQueue(e,n){return Fc.lt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new h2(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return jc.lt(this.serializer,e)}getBundleCache(){return this.$r}runTransaction(e,n,r){W("IndexedDbPersistence","Starting transaction:",e);const i=n==="readonly"?"readonly":"readwrite",s=function(u){return u===16?mA:u===15?m1:u===14?p1:u===13?f1:u===12?pA:u===11?d1:void J()}(this.ui);let o;return this.Ei.runTransaction(e,i,s,l=>(o=new Jd(l,this.kr?this.kr.next():Xt.oe),n==="readwrite-primary"?this.gi(o).next(u=>!!u||this.pi(o)).next(u=>{if(!u)throw et(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.oi.enqueueRetryable(()=>this.Ii(!1)),new G(B.FAILED_PRECONDITION,a1);return r(o)}).next(u=>this.wi(o).next(()=>u)):this.ki(o).next(()=>r(o)))).then(l=>(o.raiseOnCommittedEvent(),l))}ki(e){return Zo(e).get("owner").next(n=>{if(n!==null&&this.Ci(n.leaseTimestampMs,5e3)&&!this.Mi(n.ownerId)&&!this.Si(n)&&!(this.ai||this.allowTabSynchronization&&n.allowTabSynchronization))throw new G(B.FAILED_PRECONDITION,Wh)})}wi(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Zo(e).put("owner",n)}static D(){return Fn.D()}yi(e){const n=Zo(e);return n.get("owner").next(r=>this.Si(r)?(W("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):M.resolve())}Ci(e,n){const r=Date.now();return!(e<r-n)&&(!(e>r)||(et(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Ri(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.li=()=>{this.oi.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.Ai()))},this.document.addEventListener("visibilitychange",this.li),this.inForeground=this.document.visibilityState==="visible")}Oi(){this.li&&(this.document.removeEventListener("visibilitychange",this.li),this.li=null)}Vi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.ci=()=>{this.xi();const n=/(?:Version|Mobile)\/1[456]/;Ow()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.oi.enterRestrictedMode(!0),this.oi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}Ni(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Mi(e){var n;try{const r=((n=this.di)===null||n===void 0?void 0:n.getItem(this.Fi(e)))!==null;return W("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return et("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}xi(){if(this.di)try{this.di.setItem(this.Fi(this.clientId),String(Date.now()))}catch(e){et("Failed to set zombie client id.",e)}}Li(){if(this.di)try{this.di.removeItem(this.Fi(this.clientId))}catch{}}Fi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Zo(t){return wt(t,"owner")}function iu(t){return wt(t,"clientMetadata")}function $p(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qp{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.qi=r,this.Qi=i}static Ki(e,n){let r=ue(),i=ue();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new qp(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R2{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yE{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=function(){return Ow()?8:u1(nc())>0?6:4}()}initialize(e,n){this.zi=e,this.indexManager=n,this.$i=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.ji(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Hi(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new R2;return this.Ji(e,n,o).next(l=>{if(s.result=l,this.Ui)return this.Yi(e,n,o,l.size)})}).next(()=>s.result)}Yi(e,n,r,i){return r.documentReadCount<this.Wi?(ys()<=ye.DEBUG&&W("QueryEngine","SDK will not create cache indexes for query:",_s(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),M.resolve()):(ys()<=ye.DEBUG&&W("QueryEngine","Query:",_s(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Gi*i?(ys()<=ye.DEBUG&&W("QueryEngine","The SDK decides to create cache indexes for query:",_s(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ut(n))):M.resolve())}ji(e,n){if(n0(n))return M.resolve(null);let r=Ut(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=ac(n,null,"F"),r=Ut(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=ue(...s);return this.zi.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,r).next(u=>{const c=this.Zi(n,l);return this.Xi(n,c,o,u.readTime)?this.ji(e,ac(n,null,"F")):this.es(e,c,n,u)}))})))}Hi(e,n,r,i){return n0(n)||i.isEqual(ie.min())?M.resolve(null):this.zi.getDocuments(e,r).next(s=>{const o=this.Zi(n,s);return this.Xi(n,o,r,i)?M.resolve(null):(ys()<=ye.DEBUG&&W("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),_s(n)),this.es(e,o,n,s1(i,-1)).next(l=>l))})}Zi(e,n){let r=new Re(C1(e));return n.forEach((i,s)=>{cl(e,s)&&(r=r.add(s))}),r}Xi(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ji(e,n,r){return ys()<=ye.DEBUG&&W("QueryEngine","Using full collection scan to execute query:",_s(n)),this.zi.getDocumentsMatchingQuery(e,n,un.min(),r)}es(e,n,r,i){return this.zi.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C2{constructor(e,n,r,i){this.persistence=e,this.ts=n,this.serializer=i,this.ns=new Ne(le),this.rs=new ri(s=>Fi(s),ll),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(r)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new mE(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.ns))}}function _E(t,e,n,r){return new C2(t,e,n,r)}async function vE(t,e){const n=X(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n._s(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],l=[];let u=ue();for(const c of i){o.push(c.batchId);for(const f of c.mutations)u=u.add(f.key)}for(const c of s){l.push(c.batchId);for(const f of c.mutations)u=u.add(f.key)}return n.localDocuments.getDocuments(r,u).next(c=>({us:c,removedBatchIds:o,addedBatchIds:l}))})})}function k2(t,e){const n=X(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.os.newChangeBuffer({trackRemovals:!0});return function(l,u,c,f){const m=c.batch,v=m.keys();let R=M.resolve();return v.forEach(V=>{R=R.next(()=>f.getEntry(u,V)).next(N=>{const L=c.docVersions.get(V);re(L!==null),N.version.compareTo(L)<0&&(m.applyToRemoteDocument(N,c),N.isValidDocument()&&(N.setReadTime(c.commitVersion),f.addEntry(N)))})}),R.next(()=>l.mutationQueue.removeMutationBatch(u,m))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let u=ue();for(let c=0;c<l.mutationResults.length;++c)l.mutationResults[c].transformResults.length>0&&(u=u.add(l.batch.mutations[c].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function wE(t){const e=X(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Qr.getLastRemoteSnapshotVersion(n))}function D2(t,e){const n=X(t),r=e.snapshotVersion;let i=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.os.newChangeBuffer({trackRemovals:!0});i=n.ns;const l=[];e.targetChanges.forEach((f,m)=>{const v=i.get(m);if(!v)return;l.push(n.Qr.removeMatchingKeys(s,f.removedDocuments,m).next(()=>n.Qr.addMatchingKeys(s,f.addedDocuments,m)));let R=v.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(m)!==null?R=R.withResumeToken(dt.EMPTY_BYTE_STRING,ie.min()).withLastLimboFreeSnapshotVersion(ie.min()):f.resumeToken.approximateByteSize()>0&&(R=R.withResumeToken(f.resumeToken,r)),i=i.insert(m,R),function(N,L,C){return N.resumeToken.approximateByteSize()===0||L.snapshotVersion.toMicroseconds()-N.snapshotVersion.toMicroseconds()>=3e8?!0:C.addedDocuments.size+C.modifiedDocuments.size+C.removedDocuments.size>0}(v,R,f)&&l.push(n.Qr.updateTargetData(s,R))});let u=Zt(),c=ue();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(s,f))}),l.push(EE(s,o,e.documentUpdates).next(f=>{u=f.cs,c=f.ls})),!r.isEqual(ie.min())){const f=n.Qr.getLastRemoteSnapshotVersion(s).next(m=>n.Qr.setTargetsMetadata(s,s.currentSequenceNumber,r));l.push(f)}return M.waitFor(l).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,u,c)).next(()=>u)}).then(s=>(n.ns=i,s))}function EE(t,e,n){let r=ue(),i=ue();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=Zt();return n.forEach((l,u)=>{const c=s.get(l);u.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(l)),u.isNoDocument()&&u.version.isEqual(ie.min())?(e.removeEntry(l,u.readTime),o=o.insert(l,u)):!c.isValidDocument()||u.version.compareTo(c.version)>0||u.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(u),o=o.insert(l,u)):W("LocalStore","Ignoring outdated watch update for ",l,". Current version:",c.version," Watch version:",u.version)}),{cs:o,ls:i}})}function N2(t,e){const n=X(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function so(t,e){const n=X(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Qr.getTargetData(r,e).next(s=>s?(i=s,M.resolve(i)):n.Qr.allocateTargetId(r).next(o=>(i=new Zn(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Qr.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.ns.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.ns=n.ns.insert(r.targetId,r),n.rs.set(e,r.targetId)),r})}async function oo(t,e,n){const r=X(t),i=r.ns.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!ni(o))throw o;W("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.ns=r.ns.remove(e),r.rs.delete(i.target)}function hc(t,e,n){const r=X(t);let i=ie.min(),s=ue();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,c,f){const m=X(u),v=m.rs.get(f);return v!==void 0?M.resolve(m.ns.get(v)):m.Qr.getTargetData(c,f)}(r,o,Ut(e)).next(l=>{if(l)return i=l.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(o,l.targetId).next(u=>{s=u})}).next(()=>r.ts.getDocumentsMatchingQuery(o,e,n?i:ie.min(),n?s:ue())).next(l=>(xE(r,R1(e),l),{documents:l,hs:s})))}function IE(t,e){const n=X(t),r=X(n.Qr),i=n.ns.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",s=>r.ot(s,e).next(o=>o?o.target:null))}function TE(t,e){const n=X(t),r=n.ss.get(e)||ie.min();return n.persistence.runTransaction("Get new document changes","readonly",i=>n.os.getAllFromCollectionGroup(i,e,s1(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(xE(n,e,i),i))}function xE(t,e,n){let r=t.ss.get(e)||ie.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.ss.set(e,r)}async function V2(t,e,n,r){const i=X(t);let s=ue(),o=Zt();for(const c of n){const f=e.Ps(c.metadata.name);c.document&&(s=s.add(f));const m=e.Is(c);m.setReadTime(e.Ts(c.metadata.readTime)),o=o.insert(f,m)}const l=i.os.newChangeBuffer({trackRemovals:!0}),u=await so(i,function(f){return Ut(_o(me.fromString(`__bundle__/docs/${f}`)))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",c=>EE(c,l,o).next(f=>(l.apply(c),f)).next(f=>i.Qr.removeMatchingKeysForTargetId(c,u.targetId).next(()=>i.Qr.addMatchingKeys(c,s,u.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(c,f.cs,f.ls)).next(()=>f.cs)))}async function O2(t,e,n=ue()){const r=await so(t,Ut(jp(e.bundledQuery))),i=X(t);return i.persistence.runTransaction("Save named query","readwrite",s=>{const o=tt(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.$r.saveNamedQuery(s,e);const l=r.withResumeToken(dt.EMPTY_BYTE_STRING,o);return i.ns=i.ns.insert(l.targetId,l),i.Qr.updateTargetData(s,l).next(()=>i.Qr.removeMatchingKeysForTargetId(s,r.targetId)).next(()=>i.Qr.addMatchingKeys(s,n,r.targetId)).next(()=>i.$r.saveNamedQuery(s,e))})}function k0(t,e){return`firestore_clients_${t}_${e}`}function D0(t,e,n){let r=`firestore_mutations_${t}_${n}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function Kh(t,e){return`firestore_targets_${t}_${e}`}class dc{constructor(e,n,r,i){this.user=e,this.batchId=n,this.state=r,this.error=i}static Es(e,n,r){const i=JSON.parse(r);let s,o=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return o&&i.error&&(o=typeof i.error.message=="string"&&typeof i.error.code=="string",o&&(s=new G(i.error.code,i.error.message))),o?new dc(e,n,i.state,s):(et("SharedClientState",`Failed to parse mutation state for ID '${n}': ${r}`),null)}ds(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Ea{constructor(e,n,r){this.targetId=e,this.state=n,this.error=r}static Es(e,n){const r=JSON.parse(n);let i,s=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return s&&r.error&&(s=typeof r.error.message=="string"&&typeof r.error.code=="string",s&&(i=new G(r.error.code,r.error.message))),s?new Ea(e,r.state,i):(et("SharedClientState",`Failed to parse target state for ID '${e}': ${n}`),null)}ds(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class fc{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Es(e,n){const r=JSON.parse(n);let i=typeof r=="object"&&r.activeTargetIds instanceof Array,s=kp();for(let o=0;i&&o<r.activeTargetIds.length;++o)i=c1(r.activeTargetIds[o]),s=s.add(r.activeTargetIds[o]);return i?new fc(e,s):(et("SharedClientState",`Failed to parse client data for instance '${e}': ${n}`),null)}}class Gp{constructor(e,n){this.clientId=e,this.onlineState=n}static Es(e){const n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new Gp(n.clientId,n.onlineState):(et("SharedClientState",`Failed to parse online state: ${e}`),null)}}class ff{constructor(){this.activeTargetIds=kp()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Hh{constructor(e,n,r,i,s){this.window=e,this.oi=n,this.persistenceKey=r,this.Vs=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.fs=this.gs.bind(this),this.ps=new Ne(le),this.started=!1,this.ys=[];const o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.ws=k0(this.persistenceKey,this.Vs),this.Ss=function(u){return`firestore_sequence_number_${u}`}(this.persistenceKey),this.ps=this.ps.insert(this.Vs,new ff),this.bs=new RegExp(`^firestore_clients_${o}_([^_]*)$`),this.Ds=new RegExp(`^firestore_mutations_${o}_(\\d+)(?:_(.*))?$`),this.Cs=new RegExp(`^firestore_targets_${o}_(\\d+)$`),this.vs=function(u){return`firestore_online_state_${u}`}(this.persistenceKey),this.Fs=function(u){return`firestore_bundle_loaded_v2_${u}`}(this.persistenceKey),this.window.addEventListener("storage",this.fs)}static D(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Bi();for(const r of e){if(r===this.Vs)continue;const i=this.getItem(k0(this.persistenceKey,r));if(i){const s=fc.Es(r,i);s&&(this.ps=this.ps.insert(s.clientId,s))}}this.Ms();const n=this.storage.getItem(this.vs);if(n){const r=this.xs(n);r&&this.Os(r)}for(const r of this.ys)this.gs(r);this.ys=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.Ss,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ns(this.ps)}isActiveQueryTarget(e){let n=!1;return this.ps.forEach((r,i)=>{i.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.Ls(e,"pending")}updateMutationState(e,n,r){this.Ls(e,n,r),this.Bs(e)}addLocalQueryTarget(e){let n="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(Kh(this.persistenceKey,e));if(r){const i=Ea.Es(e,r);i&&(n=i.state)}}return this.ks.As(e),this.Ms(),n}removeLocalQueryTarget(e){this.ks.Rs(e),this.Ms()}isLocalQueryTarget(e){return this.ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Kh(this.persistenceKey,e))}updateQueryState(e,n,r){this.qs(e,n,r)}handleUserChange(e,n,r){n.forEach(i=>{this.Bs(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Qs(e)}notifyBundleLoaded(e){this.Ks(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.fs),this.removeItem(this.ws),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return W("SharedClientState","READ",e,n),n}setItem(e,n){W("SharedClientState","SET",e,n),this.storage.setItem(e,n)}removeItem(e){W("SharedClientState","REMOVE",e),this.storage.removeItem(e)}gs(e){const n=e;if(n.storageArea===this.storage){if(W("SharedClientState","EVENT",n.key,n.newValue),n.key===this.ws)return void et("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.oi.enqueueRetryable(async()=>{if(this.started){if(n.key!==null){if(this.bs.test(n.key)){if(n.newValue==null){const r=this.$s(n.key);return this.Us(r,null)}{const r=this.Ws(n.key,n.newValue);if(r)return this.Us(r.clientId,r)}}else if(this.Ds.test(n.key)){if(n.newValue!==null){const r=this.Gs(n.key,n.newValue);if(r)return this.zs(r)}}else if(this.Cs.test(n.key)){if(n.newValue!==null){const r=this.js(n.key,n.newValue);if(r)return this.Hs(r)}}else if(n.key===this.vs){if(n.newValue!==null){const r=this.xs(n.newValue);if(r)return this.Os(r)}}else if(n.key===this.Ss){const r=function(s){let o=Xt.oe;if(s!=null)try{const l=JSON.parse(s);re(typeof l=="number"),o=l}catch(l){et("SharedClientState","Failed to read sequence number from WebStorage",l)}return o}(n.newValue);r!==Xt.oe&&this.sequenceNumberHandler(r)}else if(n.key===this.Fs){const r=this.Js(n.newValue);await Promise.all(r.map(i=>this.syncEngine.Ys(i)))}}}else this.ys.push(n)})}}get ks(){return this.ps.get(this.Vs)}Ms(){this.setItem(this.ws,this.ks.ds())}Ls(e,n,r){const i=new dc(this.currentUser,e,n,r),s=D0(this.persistenceKey,this.currentUser,e);this.setItem(s,i.ds())}Bs(e){const n=D0(this.persistenceKey,this.currentUser,e);this.removeItem(n)}Qs(e){const n={clientId:this.Vs,onlineState:e};this.storage.setItem(this.vs,JSON.stringify(n))}qs(e,n,r){const i=Kh(this.persistenceKey,e),s=new Ea(e,n,r);this.setItem(i,s.ds())}Ks(e){const n=JSON.stringify(Array.from(e));this.setItem(this.Fs,n)}$s(e){const n=this.bs.exec(e);return n?n[1]:null}Ws(e,n){const r=this.$s(e);return fc.Es(r,n)}Gs(e,n){const r=this.Ds.exec(e),i=Number(r[1]),s=r[2]!==void 0?r[2]:null;return dc.Es(new yt(s),i,n)}js(e,n){const r=this.Cs.exec(e),i=Number(r[1]);return Ea.Es(i,n)}xs(e){return Gp.Es(e)}Js(e){return JSON.parse(e)}async zs(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Zs(e.batchId,e.state,e.error);W("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)}Hs(e){return this.syncEngine.Xs(e.targetId,e.state,e.error)}Us(e,n){const r=n?this.ps.insert(e,n):this.ps.remove(e),i=this.Ns(this.ps),s=this.Ns(r),o=[],l=[];return s.forEach(u=>{i.has(u)||o.push(u)}),i.forEach(u=>{s.has(u)||l.push(u)}),this.syncEngine.eo(o,l).then(()=>{this.ps=r})}Os(e){this.ps.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ns(e){let n=kp();return e.forEach((r,i)=>{n=n.unionWith(i.activeTargetIds)}),n}}class SE{constructor(){this.no=new ff,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,n,r){this.ro[e]=n}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new ff,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L2{io(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N0{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){W("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.uo)e(0)}ao(){W("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.uo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let su=null;function Qh(){return su===null?su=function(){return 268435456+Math.round(2147483648*Math.random())}():su++,"0x"+su.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M2={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j2{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}Ao(e){this.Ro=e}onMessage(e){this.Vo=e}close(){this.ho()}send(e){this.lo(e)}mo(){this.Io()}fo(){this.Eo()}po(e){this.Ro(e)}yo(e){this.Vo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dt="WebChannelConnection";class F2 extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.wo=r+"://"+n.host,this.So=`projects/${i}/databases/${s}`,this.bo=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Do(){return!1}Co(n,r,i,s,o){const l=Qh(),u=this.vo(n,r.toUriEncodedString());W("RestConnection",`Sending RPC '${n}' ${l}:`,u,i);const c={"google-cloud-resource-prefix":this.So,"x-goog-request-params":this.bo};return this.Fo(c,s,o),this.Mo(n,u,c,i).then(f=>(W("RestConnection",`Received RPC '${n}' ${l}: `,f),f),f=>{throw Cn("RestConnection",`RPC '${n}' ${l} failed with error: `,f,"url: ",u,"request:",i),f})}xo(n,r,i,s,o,l){return this.Co(n,r,i,s,o)}Fo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+yo}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}vo(n,r){const i=M2[n];return`${this.wo}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Mo(e,n,r,i){const s=Qh();return new Promise((o,l)=>{const u=new Yw;u.setWithCredentials(!0),u.listenOnce(Jw.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case _u.NO_ERROR:const f=u.getResponseJson();W(Dt,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(f)),o(f);break;case _u.TIMEOUT:W(Dt,`RPC '${e}' ${s} timed out`),l(new G(B.DEADLINE_EXCEEDED,"Request time out"));break;case _u.HTTP_ERROR:const m=u.getStatus();if(W(Dt,`RPC '${e}' ${s} failed with status:`,m,"response text:",u.getResponseText()),m>0){let v=u.getResponseJson();Array.isArray(v)&&(v=v[0]);const R=v==null?void 0:v.error;if(R&&R.status&&R.message){const V=function(L){const C=L.toLowerCase().replace(/_/g,"-");return Object.values(B).indexOf(C)>=0?C:B.UNKNOWN}(R.status);l(new G(V,R.message))}else l(new G(B.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new G(B.UNAVAILABLE,"Connection failed."));break;default:J()}}finally{W(Dt,`RPC '${e}' ${s} completed.`)}});const c=JSON.stringify(i);W(Dt,`RPC '${e}' ${s} sending request:`,i),u.send(n,"POST",c,r,15)})}Oo(e,n,r){const i=Qh(),s=[this.wo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=t1(),l=e1(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(u.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(u.xmlHttpFactory=new Xw({})),this.Fo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const f=s.join("");W(Dt,`Creating RPC '${e}' stream ${i}: ${f}`,u);const m=o.createWebChannel(f,u);let v=!1,R=!1;const V=new j2({lo:L=>{R?W(Dt,`Not sending because RPC '${e}' stream ${i} is closed:`,L):(v||(W(Dt,`Opening RPC '${e}' stream ${i} transport.`),m.open(),v=!0),W(Dt,`RPC '${e}' stream ${i} sending:`,L),m.send(L))},ho:()=>m.close()}),N=(L,C,P)=>{L.listen(C,x=>{try{P(x)}catch(d){setTimeout(()=>{throw d},0)}})};return N(m,ia.EventType.OPEN,()=>{R||(W(Dt,`RPC '${e}' stream ${i} transport opened.`),V.mo())}),N(m,ia.EventType.CLOSE,()=>{R||(R=!0,W(Dt,`RPC '${e}' stream ${i} transport closed`),V.po())}),N(m,ia.EventType.ERROR,L=>{R||(R=!0,Cn(Dt,`RPC '${e}' stream ${i} transport errored:`,L),V.po(new G(B.UNAVAILABLE,"The operation could not be completed")))}),N(m,ia.EventType.MESSAGE,L=>{var C;if(!R){const P=L.data[0];re(!!P);const x=P,d=x.error||((C=x[0])===null||C===void 0?void 0:C.error);if(d){W(Dt,`RPC '${e}' stream ${i} received error:`,d);const g=d.status;let I=function(w){const S=ot[w];if(S!==void 0)return q1(S)}(g),_=d.message;I===void 0&&(I=B.INTERNAL,_="Unknown error status: "+g+" with message "+d.message),R=!0,V.po(new G(I,_)),m.close()}else W(Dt,`RPC '${e}' stream ${i} received:`,P),V.yo(P)}}),N(l,Zw.STAT_EVENT,L=>{L.stat===Yd.PROXY?W(Dt,`RPC '${e}' stream ${i} detected buffering proxy`):L.stat===Yd.NOPROXY&&W(Dt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{V.fo()},0),V}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PE(){return typeof window<"u"?window:null}function Su(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pl(t){return new KA(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wp{constructor(e,n,r=1e3,i=1.5,s=6e4){this.oi=e,this.timerId=n,this.No=r,this.Lo=i,this.Bo=s,this.ko=0,this.qo=null,this.Qo=Date.now(),this.reset()}reset(){this.ko=0}Ko(){this.ko=this.Bo}$o(e){this.cancel();const n=Math.floor(this.ko+this.Uo()),r=Math.max(0,Date.now()-this.Qo),i=Math.max(0,n-r);i>0&&W("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.qo=this.oi.enqueueAfterDelay(this.timerId,i,()=>(this.Qo=Date.now(),e())),this.ko*=this.Lo,this.ko<this.No&&(this.ko=this.No),this.ko>this.Bo&&(this.ko=this.Bo)}Wo(){this.qo!==null&&(this.qo.skipDelay(),this.qo=null)}cancel(){this.qo!==null&&(this.qo.cancel(),this.qo=null)}Uo(){return(Math.random()-.5)*this.ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bE{constructor(e,n,r,i,s,o,l,u){this.oi=e,this.Go=r,this.zo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.jo=0,this.Ho=null,this.Jo=null,this.stream=null,this.Yo=new Wp(e,n)}Zo(){return this.state===1||this.state===5||this.Xo()}Xo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.e_()}async stop(){this.Zo()&&await this.close(0)}t_(){this.state=0,this.Yo.reset()}n_(){this.Xo()&&this.Ho===null&&(this.Ho=this.oi.enqueueAfterDelay(this.Go,6e4,()=>this.r_()))}i_(e){this.s_(),this.stream.send(e)}async r_(){if(this.Xo())return this.close(0)}s_(){this.Ho&&(this.Ho.cancel(),this.Ho=null)}o_(){this.Jo&&(this.Jo.cancel(),this.Jo=null)}async close(e,n){this.s_(),this.o_(),this.Yo.cancel(),this.jo++,e!==4?this.Yo.reset():n&&n.code===B.RESOURCE_EXHAUSTED?(et(n.toString()),et("Using maximum backoff delay to prevent overloading the backend."),this.Yo.Ko()):n&&n.code===B.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.__(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Ao(n)}__(){}auth(){this.state=1;const e=this.a_(this.jo),n=this.jo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.jo===n&&this.u_(r,i)},r=>{e(()=>{const i=new G(B.UNKNOWN,"Fetching auth token failed: "+r.message);return this.c_(i)})})}u_(e,n){const r=this.a_(this.jo);this.stream=this.l_(e,n),this.stream.Po(()=>{r(()=>this.listener.Po())}),this.stream.To(()=>{r(()=>(this.state=2,this.Jo=this.oi.enqueueAfterDelay(this.zo,1e4,()=>(this.Xo()&&(this.state=3),Promise.resolve())),this.listener.To()))}),this.stream.Ao(i=>{r(()=>this.c_(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}e_(){this.state=5,this.Yo.$o(async()=>{this.state=0,this.start()})}c_(e){return W("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}a_(e){return n=>{this.oi.enqueueAndForget(()=>this.jo===e?n():(W("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class B2 extends bE{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}l_(e,n){return this.connection.Oo("Listen",e,n)}onMessage(e){this.Yo.reset();const n=YA(this.serializer,e),r=function(s){if(!("targetChange"in s))return ie.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?ie.min():o.readTime?tt(o.readTime):ie.min()}(e);return this.listener.h_(n,r)}P_(e){const n={};n.database=lf(this.serializer),n.addTarget=function(s,o){let l;const u=o.target;if(l=sc(u)?{documents:eE(s,u)}:{query:tE(s,u)._t},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=H1(s,o.resumeToken);const c=of(s,o.expectedCount);c!==null&&(l.expectedCount=c)}else if(o.snapshotVersion.compareTo(ie.min())>0){l.readTime=io(s,o.snapshotVersion.toTimestamp());const c=of(s,o.expectedCount);c!==null&&(l.expectedCount=c)}return l}(this.serializer,e);const r=JA(this.serializer,e);r&&(n.labels=r),this.i_(n)}I_(e){const n={};n.database=lf(this.serializer),n.removeTarget=e,this.i_(n)}}class z2 extends bE{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s,this.T_=!1}get E_(){return this.T_}start(){this.T_=!1,this.lastStreamToken=void 0,super.start()}__(){this.T_&&this.d_([])}l_(e,n){return this.connection.Oo("Write",e,n)}onMessage(e){if(re(!!e.streamToken),this.lastStreamToken=e.streamToken,this.T_){this.Yo.reset();const n=XA(e.writeResults,e.commitTime),r=tt(e.commitTime);return this.listener.A_(r,n)}return re(!e.writeResults||e.writeResults.length===0),this.T_=!0,this.listener.R_()}V_(){const e={};e.database=lf(this.serializer),this.i_(e)}d_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>Xa(this.serializer,r))};this.i_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U2 extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.m_=!1}f_(){if(this.m_)throw new G(B.FAILED_PRECONDITION,"The client has already been terminated.")}Co(e,n,r,i){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Co(e,af(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===B.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new G(B.UNKNOWN,s.toString())})}xo(e,n,r,i,s){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.xo(e,af(n,r),i,o,l,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===B.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new G(B.UNKNOWN,o.toString())})}terminate(){this.m_=!0,this.connection.terminate()}}class $2{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.g_=0,this.p_=null,this.y_=!0}w_(){this.g_===0&&(this.S_("Unknown"),this.p_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.p_=null,this.b_("Backend didn't respond within 10 seconds."),this.S_("Offline"),Promise.resolve())))}D_(e){this.state==="Online"?this.S_("Unknown"):(this.g_++,this.g_>=1&&(this.C_(),this.b_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.S_("Offline")))}set(e){this.C_(),this.g_=0,e==="Online"&&(this.y_=!1),this.S_(e)}S_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}b_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.y_?(et(n),this.y_=!1):W("OnlineStateTracker",n)}C_(){this.p_!==null&&(this.p_.cancel(),this.p_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q2{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.v_=[],this.F_=new Map,this.M_=new Set,this.x_=[],this.O_=s,this.O_.io(o=>{r.enqueueAndForget(async()=>{ii(this)&&(W("RemoteStore","Restarting streams for network reachability change."),await async function(u){const c=X(u);c.M_.add(4),await Eo(c),c.N_.set("Unknown"),c.M_.delete(4),await ml(c)}(this))})}),this.N_=new $2(r,i)}}async function ml(t){if(ii(t))for(const e of t.x_)await e(!0)}async function Eo(t){for(const e of t.x_)await e(!1)}function zc(t,e){const n=X(t);n.F_.has(e.targetId)||(n.F_.set(e.targetId,e),Qp(n)?Hp(n):To(n).Xo()&&Kp(n,e))}function ao(t,e){const n=X(t),r=To(n);n.F_.delete(e),r.Xo()&&AE(n,e),n.F_.size===0&&(r.Xo()?r.n_():ii(n)&&n.N_.set("Unknown"))}function Kp(t,e){if(t.L_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ie.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}To(t).P_(e)}function AE(t,e){t.L_.xe(e),To(t).I_(e)}function Hp(t){t.L_=new $A({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.F_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),To(t).start(),t.N_.w_()}function Qp(t){return ii(t)&&!To(t).Zo()&&t.F_.size>0}function ii(t){return X(t).M_.size===0}function RE(t){t.L_=void 0}async function G2(t){t.N_.set("Online")}async function W2(t){t.F_.forEach((e,n)=>{Kp(t,e)})}async function K2(t,e){RE(t),Qp(t)?(t.N_.D_(e),Hp(t)):t.N_.set("Unknown")}async function H2(t,e,n){if(t.N_.set("Online"),e instanceof K1&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const l of s.targetIds)i.F_.has(l)&&(await i.remoteSyncer.rejectListen(l,o),i.F_.delete(l),i.L_.removeTarget(l))}(t,e)}catch(r){W("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await pc(t,r)}else if(e instanceof xu?t.L_.Ke(e):e instanceof W1?t.L_.He(e):t.L_.We(e),!n.isEqual(ie.min()))try{const r=await wE(t.localStore);n.compareTo(r)>=0&&await function(s,o){const l=s.L_.rt(o);return l.targetChanges.forEach((u,c)=>{if(u.resumeToken.approximateByteSize()>0){const f=s.F_.get(c);f&&s.F_.set(c,f.withResumeToken(u.resumeToken,o))}}),l.targetMismatches.forEach((u,c)=>{const f=s.F_.get(u);if(!f)return;s.F_.set(u,f.withResumeToken(dt.EMPTY_BYTE_STRING,f.snapshotVersion)),AE(s,u);const m=new Zn(f.target,u,c,f.sequenceNumber);Kp(s,m)}),s.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(r){W("RemoteStore","Failed to raise snapshot:",r),await pc(t,r)}}async function pc(t,e,n){if(!ni(e))throw e;t.M_.add(1),await Eo(t),t.N_.set("Offline"),n||(n=()=>wE(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{W("RemoteStore","Retrying IndexedDB access"),await n(),t.M_.delete(1),await ml(t)})}function CE(t,e){return e().catch(n=>pc(t,n,e))}async function Io(t){const e=X(t),n=Qr(e);let r=e.v_.length>0?e.v_[e.v_.length-1].batchId:-1;for(;Q2(e);)try{const i=await N2(e.localStore,r);if(i===null){e.v_.length===0&&n.n_();break}r=i.batchId,Y2(e,i)}catch(i){await pc(e,i)}kE(e)&&DE(e)}function Q2(t){return ii(t)&&t.v_.length<10}function Y2(t,e){t.v_.push(e);const n=Qr(t);n.Xo()&&n.E_&&n.d_(e.mutations)}function kE(t){return ii(t)&&!Qr(t).Zo()&&t.v_.length>0}function DE(t){Qr(t).start()}async function X2(t){Qr(t).V_()}async function J2(t){const e=Qr(t);for(const n of t.v_)e.d_(n.mutations)}async function Z2(t,e,n){const r=t.v_.shift(),i=Vp.from(r,e,n);await CE(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await Io(t)}async function eR(t,e){e&&Qr(t).E_&&await async function(r,i){if(function(o){return $1(o)&&o!==B.ABORTED}(i.code)){const s=r.v_.shift();Qr(r).t_(),await CE(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await Io(r)}}(t,e),kE(t)&&DE(t)}async function V0(t,e){const n=X(t);n.asyncQueue.verifyOperationInProgress(),W("RemoteStore","RemoteStore received new credentials");const r=ii(n);n.M_.add(3),await Eo(n),r&&n.N_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.M_.delete(3),await ml(n)}async function pf(t,e){const n=X(t);e?(n.M_.delete(2),await ml(n)):e||(n.M_.add(2),await Eo(n),n.N_.set("Unknown"))}function To(t){return t.B_||(t.B_=function(n,r,i){const s=X(n);return s.f_(),new B2(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Po:G2.bind(null,t),To:W2.bind(null,t),Ao:K2.bind(null,t),h_:H2.bind(null,t)}),t.x_.push(async e=>{e?(t.B_.t_(),Qp(t)?Hp(t):t.N_.set("Unknown")):(await t.B_.stop(),RE(t))})),t.B_}function Qr(t){return t.k_||(t.k_=function(n,r,i){const s=X(n);return s.f_(),new z2(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Po:()=>Promise.resolve(),To:X2.bind(null,t),Ao:eR.bind(null,t),R_:J2.bind(null,t),A_:Z2.bind(null,t)}),t.x_.push(async e=>{e?(t.k_.t_(),await Io(t)):(await t.k_.stop(),t.v_.length>0&&(W("RemoteStore",`Stopping write stream with ${t.v_.length} pending writes`),t.v_=[]))})),t.k_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yp{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new vt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,l=new Yp(e,n,o,i,s);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new G(B.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function xo(t,e){if(et("AsyncQueue",`${e}: ${t}`),ni(t))return new G(B.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Us{constructor(e){this.comparator=e?(n,r)=>e(n,r)||Y.comparator(n.key,r.key):(n,r)=>Y.comparator(n.key,r.key),this.keyedMap=sa(),this.sortedSet=new Ne(this.comparator)}static emptySet(e){return new Us(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Us)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Us;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O0{constructor(){this.q_=new Ne(Y.comparator)}track(e){const n=e.doc.key,r=this.q_.get(n);r?e.type!==0&&r.type===3?this.q_=this.q_.insert(n,e):e.type===3&&r.type!==1?this.q_=this.q_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.q_=this.q_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.q_=this.q_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.q_=this.q_.remove(n):e.type===1&&r.type===2?this.q_=this.q_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.q_=this.q_.insert(n,{type:2,doc:e.doc}):J():this.q_=this.q_.insert(n,e)}Q_(){const e=[];return this.q_.inorderTraversal((n,r)=>{e.push(r)}),e}}class lo{constructor(e,n,r,i,s,o,l,u,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(l=>{o.push({type:0,doc:l})}),new lo(e,n,Us.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ul(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tR{constructor(){this.K_=void 0,this.U_=[]}W_(){return this.U_.some(e=>e.G_())}}class nR{constructor(){this.queries=new ri(e=>A1(e),ul),this.onlineState="Unknown",this.z_=new Set}}async function Xp(t,e){const n=X(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.W_()&&e.G_()&&(r=2):(s=new tR,r=e.G_()?0:1);try{switch(r){case 0:s.K_=await n.onListen(i,!0);break;case 1:s.K_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const l=xo(o,`Initialization of query '${_s(e.query)}' failed`);return void e.onError(l)}n.queries.set(i,s),s.U_.push(e),e.j_(n.onlineState),s.K_&&e.H_(s.K_)&&Zp(n)}async function Jp(t,e){const n=X(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const o=s.U_.indexOf(e);o>=0&&(s.U_.splice(o,1),s.U_.length===0?i=e.G_()?0:1:!s.W_()&&e.G_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function rR(t,e){const n=X(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const l of o.U_)l.H_(i)&&(r=!0);o.K_=i}}r&&Zp(n)}function iR(t,e,n){const r=X(t),i=r.queries.get(e);if(i)for(const s of i.U_)s.onError(n);r.queries.delete(e)}function Zp(t){t.z_.forEach(e=>{e.next()})}var mf,L0;(L0=mf||(mf={})).J_="default",L0.Cache="cache";class em{constructor(e,n,r){this.query=e,this.Y_=n,this.Z_=!1,this.X_=null,this.onlineState="Unknown",this.options=r||{}}H_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new lo(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Z_?this.ea(e)&&(this.Y_.next(e),n=!0):this.ta(e,this.onlineState)&&(this.na(e),n=!0),this.X_=e,n}onError(e){this.Y_.error(e)}j_(e){this.onlineState=e;let n=!1;return this.X_&&!this.Z_&&this.ta(this.X_,e)&&(this.na(this.X_),n=!0),n}ta(e,n){if(!e.fromCache||!this.G_())return!0;const r=n!=="Offline";return(!this.options.ra||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ea(e){if(e.docChanges.length>0)return!0;const n=this.X_&&this.X_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}na(e){e=lo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Z_=!0,this.Y_.next(e)}G_(){return this.options.source!==mf.Cache}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sR{constructor(e,n){this.ia=e,this.byteLength=n}sa(){return"metadata"in this.ia}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M0{constructor(e){this.serializer=e}Ps(e){return Bn(this.serializer,e)}Is(e){return e.metadata.exists?Z1(this.serializer,e.document,!1):Me.newNoDocument(this.Ps(e.metadata.name),this.Ts(e.metadata.readTime))}Ts(e){return tt(e)}}class oR{constructor(e,n,r){this.oa=e,this.localStore=n,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=NE(e)}_a(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.ia.namedQuery)this.queries.push(e.ia.namedQuery);else if(e.ia.documentMetadata){this.documents.push({metadata:e.ia.documentMetadata}),e.ia.documentMetadata.exists||++n;const r=me.fromString(e.ia.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.ia.document&&(this.documents[this.documents.length-1].document=e.ia.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,Object.assign({},this.progress)):null}aa(e){const n=new Map,r=new M0(this.serializer);for(const i of e)if(i.metadata.queries){const s=r.Ps(i.metadata.name);for(const o of i.metadata.queries){const l=(n.get(o)||ue()).add(s);n.set(o,l)}}return n}async complete(){const e=await V2(this.localStore,new M0(this.serializer),this.documents,this.oa.id),n=this.aa(this.documents);for(const r of this.queries)await O2(this.localStore,r,n.get(r.name));return this.progress.taskState="Success",{progress:this.progress,ua:this.collectionGroups,ca:e}}}function NE(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VE{constructor(e){this.key=e}}class OE{constructor(e){this.key=e}}class LE{constructor(e,n){this.query=e,this.la=n,this.ha=null,this.hasCachedResults=!1,this.current=!1,this.Pa=ue(),this.mutatedKeys=ue(),this.Ia=C1(e),this.Ta=new Us(this.Ia)}get Ea(){return this.la}da(e,n){const r=n?n.Aa:new O0,i=n?n.Ta:this.Ta;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,l=!1;const u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,c=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((f,m)=>{const v=i.get(f),R=cl(this.query,m)?m:null,V=!!v&&this.mutatedKeys.has(v.key),N=!!R&&(R.hasLocalMutations||this.mutatedKeys.has(R.key)&&R.hasCommittedMutations);let L=!1;v&&R?v.data.isEqual(R.data)?V!==N&&(r.track({type:3,doc:R}),L=!0):this.Ra(v,R)||(r.track({type:2,doc:R}),L=!0,(u&&this.Ia(R,u)>0||c&&this.Ia(R,c)<0)&&(l=!0)):!v&&R?(r.track({type:0,doc:R}),L=!0):v&&!R&&(r.track({type:1,doc:v}),L=!0,(u||c)&&(l=!0)),L&&(R?(o=o.add(R),s=N?s.add(f):s.delete(f)):(o=o.delete(f),s=s.delete(f)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const f=this.query.limitType==="F"?o.last():o.first();o=o.delete(f.key),s=s.delete(f.key),r.track({type:1,doc:f})}return{Ta:o,Aa:r,Xi:l,mutatedKeys:s}}Ra(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.Ta;this.Ta=e.Ta,this.mutatedKeys=e.mutatedKeys;const o=e.Aa.Q_();o.sort((f,m)=>function(R,V){const N=L=>{switch(L){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return J()}};return N(R)-N(V)}(f.type,m.type)||this.Ia(f.doc,m.doc)),this.Va(r),i=i!=null&&i;const l=n&&!i?this.ma():[],u=this.Pa.size===0&&this.current&&!i?1:0,c=u!==this.ha;return this.ha=u,o.length!==0||c?{snapshot:new lo(this.query,e.Ta,s,o,e.mutatedKeys,u===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),fa:l}:{fa:l}}j_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ta:this.Ta,Aa:new O0,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{fa:[]}}ga(e){return!this.la.has(e)&&!!this.Ta.has(e)&&!this.Ta.get(e).hasLocalMutations}Va(e){e&&(e.addedDocuments.forEach(n=>this.la=this.la.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.la=this.la.delete(n)),this.current=e.current)}ma(){if(!this.current)return[];const e=this.Pa;this.Pa=ue(),this.Ta.forEach(r=>{this.ga(r.key)&&(this.Pa=this.Pa.add(r.key))});const n=[];return e.forEach(r=>{this.Pa.has(r)||n.push(new OE(r))}),this.Pa.forEach(r=>{e.has(r)||n.push(new VE(r))}),n}pa(e){this.la=e.hs,this.Pa=ue();const n=this.da(e.documents);return this.applyChanges(n,!0)}ya(){return lo.fromInitialDocuments(this.query,this.Ta,this.mutatedKeys,this.ha===0,this.hasCachedResults)}}class aR{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class lR{constructor(e){this.key=e,this.wa=!1}}class uR{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Sa={},this.ba=new ri(l=>A1(l),ul),this.Da=new Map,this.Ca=new Set,this.va=new Ne(Y.comparator),this.Fa=new Map,this.Ma=new zp,this.xa={},this.Oa=new Map,this.Na=qi.Ln(),this.onlineState="Unknown",this.La=void 0}get isPrimaryClient(){return this.La===!0}}async function cR(t,e,n=!0){const r=Uc(t);let i;const s=r.ba.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.ya()):i=await ME(r,e,n,!0),i}async function hR(t,e){const n=Uc(t);await ME(n,e,!0,!1)}async function ME(t,e,n,r){const i=await so(t.localStore,Ut(e)),s=i.targetId,o=n?t.sharedClientState.addLocalQueryTarget(s):"not-current";let l;return r&&(l=await tm(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&zc(t.remoteStore,i),l}async function tm(t,e,n,r,i){t.Ba=(m,v,R)=>async function(N,L,C,P){let x=L.view.da(C);x.Xi&&(x=await hc(N.localStore,L.query,!1).then(({documents:_})=>L.view.da(_,x)));const d=P&&P.targetChanges.get(L.targetId),g=P&&P.targetMismatches.get(L.targetId)!=null,I=L.view.applyChanges(x,N.isPrimaryClient,d,g);return gf(N,L.targetId,I.fa),I.snapshot}(t,m,v,R);const s=await hc(t.localStore,e,!0),o=new LE(e,s.hs),l=o.da(s.documents),u=fl.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),c=o.applyChanges(l,t.isPrimaryClient,u);gf(t,n,c.fa);const f=new aR(e,n,o);return t.ba.set(e,f),t.Da.has(n)?t.Da.get(n).push(e):t.Da.set(n,[e]),c.snapshot}async function dR(t,e,n){const r=X(t),i=r.ba.get(e),s=r.Da.get(i.targetId);if(s.length>1)return r.Da.set(i.targetId,s.filter(o=>!ul(o,e))),void r.ba.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await oo(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&ao(r.remoteStore,i.targetId),uo(r,i.targetId)}).catch(ti)):(uo(r,i.targetId),await oo(r.localStore,i.targetId,!0))}async function fR(t,e){const n=X(t),r=n.ba.get(e),i=n.Da.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),ao(n.remoteStore,r.targetId))}async function pR(t,e,n){const r=sm(t);try{const i=await function(o,l){const u=X(o),c=Ue.now(),f=l.reduce((R,V)=>R.add(V.key),ue());let m,v;return u.persistence.runTransaction("Locally write mutations","readwrite",R=>{let V=Zt(),N=ue();return u.os.getEntries(R,f).next(L=>{V=L,V.forEach((C,P)=>{P.isValidDocument()||(N=N.add(C))})}).next(()=>u.localDocuments.getOverlayedDocuments(R,V)).next(L=>{m=L;const C=[];for(const P of l){const x=BA(P,m.get(P.key).overlayedDocument);x!=null&&C.push(new cr(P.key,x,v1(x.value.mapValue),ze.exists(!0)))}return u.mutationQueue.addMutationBatch(R,c,C,l)}).next(L=>{v=L;const C=L.applyToLocalDocumentSet(m,N);return u.documentOverlayCache.saveOverlays(R,L.batchId,C)})}).then(()=>({batchId:v.batchId,changes:D1(m)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,l,u){let c=o.xa[o.currentUser.toKey()];c||(c=new Ne(le)),c=c.insert(l,u),o.xa[o.currentUser.toKey()]=c}(r,i.batchId,n),await hr(r,i.changes),await Io(r.remoteStore)}catch(i){const s=xo(i,"Failed to persist write");n.reject(s)}}async function jE(t,e){const n=X(t);try{const r=await D2(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.Fa.get(s);o&&(re(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.wa=!0:i.modifiedDocuments.size>0?re(o.wa):i.removedDocuments.size>0&&(re(o.wa),o.wa=!1))}),await hr(n,r,e)}catch(r){await ti(r)}}function j0(t,e,n){const r=X(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.ba.forEach((s,o)=>{const l=o.view.j_(e);l.snapshot&&i.push(l.snapshot)}),function(o,l){const u=X(o);u.onlineState=l;let c=!1;u.queries.forEach((f,m)=>{for(const v of m.U_)v.j_(l)&&(c=!0)}),c&&Zp(u)}(r.eventManager,e),i.length&&r.Sa.h_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function mR(t,e,n){const r=X(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Fa.get(e),s=i&&i.key;if(s){let o=new Ne(Y.comparator);o=o.insert(s,Me.newNoDocument(s,ie.min()));const l=ue().add(s),u=new dl(ie.min(),new Map,new Ne(le),o,l);await jE(r,u),r.va=r.va.remove(s),r.Fa.delete(e),im(r)}else await oo(r.localStore,e,!1).then(()=>uo(r,e,n)).catch(ti)}async function gR(t,e){const n=X(t),r=e.batch.batchId;try{const i=await k2(n.localStore,e);rm(n,r,null),nm(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await hr(n,i)}catch(i){await ti(i)}}async function yR(t,e,n){const r=X(t);try{const i=await function(o,l){const u=X(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let f;return u.mutationQueue.lookupMutationBatch(c,l).next(m=>(re(m!==null),f=m.keys(),u.mutationQueue.removeMutationBatch(c,m))).next(()=>u.mutationQueue.performConsistencyCheck(c)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(c,f,l)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,f)).next(()=>u.localDocuments.getDocuments(c,f))})}(r.localStore,e);rm(r,e,n),nm(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await hr(r,i)}catch(i){await ti(i)}}async function _R(t,e){const n=X(t);ii(n.remoteStore)||W("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=await function(o){const l=X(o);return l.persistence.runTransaction("Get highest unacknowledged batch id","readonly",u=>l.mutationQueue.getHighestUnacknowledgedBatchId(u))}(n.localStore);if(r===-1)return void e.resolve();const i=n.Oa.get(r)||[];i.push(e),n.Oa.set(r,i)}catch(r){const i=xo(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}function nm(t,e){(t.Oa.get(e)||[]).forEach(n=>{n.resolve()}),t.Oa.delete(e)}function rm(t,e,n){const r=X(t);let i=r.xa[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.xa[r.currentUser.toKey()]=i}}function uo(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Da.get(e))t.ba.delete(r),n&&t.Sa.ka(r,n);t.Da.delete(e),t.isPrimaryClient&&t.Ma.Vr(e).forEach(r=>{t.Ma.containsKey(r)||FE(t,r)})}function FE(t,e){t.Ca.delete(e.path.canonicalString());const n=t.va.get(e);n!==null&&(ao(t.remoteStore,n),t.va=t.va.remove(e),t.Fa.delete(n),im(t))}function gf(t,e,n){for(const r of n)r instanceof VE?(t.Ma.addReference(r.key,e),vR(t,r)):r instanceof OE?(W("SyncEngine","Document no longer in limbo: "+r.key),t.Ma.removeReference(r.key,e),t.Ma.containsKey(r.key)||FE(t,r.key)):J()}function vR(t,e){const n=e.key,r=n.path.canonicalString();t.va.get(n)||t.Ca.has(r)||(W("SyncEngine","New document in limbo: "+n),t.Ca.add(r),im(t))}function im(t){for(;t.Ca.size>0&&t.va.size<t.maxConcurrentLimboResolutions;){const e=t.Ca.values().next().value;t.Ca.delete(e);const n=new Y(me.fromString(e)),r=t.Na.next();t.Fa.set(r,new lR(n)),t.va=t.va.insert(n,r),zc(t.remoteStore,new Zn(Ut(_o(n.path)),r,"TargetPurposeLimboResolution",Xt.oe))}}async function hr(t,e,n){const r=X(t),i=[],s=[],o=[];r.ba.isEmpty()||(r.ba.forEach((l,u)=>{o.push(r.Ba(u,e,n).then(c=>{var f;if((c||n)&&r.isPrimaryClient){const m=c?!c.fromCache:(f=n==null?void 0:n.targetChanges.get(u.targetId))===null||f===void 0?void 0:f.current;r.sharedClientState.updateQueryState(u.targetId,m?"current":"not-current")}if(c){i.push(c);const m=qp.Ki(u.targetId,c);s.push(m)}}))}),await Promise.all(o),r.Sa.h_(i),await async function(u,c){const f=X(u);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>M.forEach(c,v=>M.forEach(v.qi,R=>f.persistence.referenceDelegate.addReference(m,v.targetId,R)).next(()=>M.forEach(v.Qi,R=>f.persistence.referenceDelegate.removeReference(m,v.targetId,R)))))}catch(m){if(!ni(m))throw m;W("LocalStore","Failed to update sequence numbers: "+m)}for(const m of c){const v=m.targetId;if(!m.fromCache){const R=f.ns.get(v),V=R.snapshotVersion,N=R.withLastLimboFreeSnapshotVersion(V);f.ns=f.ns.insert(v,N)}}}(r.localStore,s))}async function wR(t,e){const n=X(t);if(!n.currentUser.isEqual(e)){W("SyncEngine","User change. New user:",e.toKey());const r=await vE(n.localStore,e);n.currentUser=e,function(s,o){s.Oa.forEach(l=>{l.forEach(u=>{u.reject(new G(B.CANCELLED,o))})}),s.Oa.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await hr(n,r.us)}}function ER(t,e){const n=X(t),r=n.Fa.get(e);if(r&&r.wa)return ue().add(r.key);{let i=ue();const s=n.Da.get(e);if(!s)return i;for(const o of s){const l=n.ba.get(o);i=i.unionWith(l.view.Ea)}return i}}async function IR(t,e){const n=X(t),r=await hc(n.localStore,e.query,!0),i=e.view.pa(r);return n.isPrimaryClient&&gf(n,e.targetId,i.fa),i}async function TR(t,e){const n=X(t);return TE(n.localStore,e).then(r=>hr(n,r))}async function xR(t,e,n,r){const i=X(t),s=await function(l,u){const c=X(l),f=X(c.mutationQueue);return c.persistence.runTransaction("Lookup mutation documents","readonly",m=>f.vn(m,u).next(v=>v?c.localDocuments.getDocuments(m,v):M.resolve(null)))}(i.localStore,e);s!==null?(n==="pending"?await Io(i.remoteStore):n==="acknowledged"||n==="rejected"?(rm(i,e,r||null),nm(i,e),function(l,u){X(X(l).mutationQueue).Mn(u)}(i.localStore,e)):J(),await hr(i,s)):W("SyncEngine","Cannot apply mutation batch with id: "+e)}async function SR(t,e){const n=X(t);if(Uc(n),sm(n),e===!0&&n.La!==!0){const r=n.sharedClientState.getAllActiveQueryTargets(),i=await F0(n,r.toArray());n.La=!0,await pf(n.remoteStore,!0);for(const s of i)zc(n.remoteStore,s)}else if(e===!1&&n.La!==!1){const r=[];let i=Promise.resolve();n.Da.forEach((s,o)=>{n.sharedClientState.isLocalQueryTarget(o)?r.push(o):i=i.then(()=>(uo(n,o),oo(n.localStore,o,!0))),ao(n.remoteStore,o)}),await i,await F0(n,r),function(o){const l=X(o);l.Fa.forEach((u,c)=>{ao(l.remoteStore,c)}),l.Ma.mr(),l.Fa=new Map,l.va=new Ne(Y.comparator)}(n),n.La=!1,await pf(n.remoteStore,!1)}}async function F0(t,e,n){const r=X(t),i=[],s=[];for(const o of e){let l;const u=r.Da.get(o);if(u&&u.length!==0){l=await so(r.localStore,Ut(u[0]));for(const c of u){const f=r.ba.get(c),m=await IR(r,f);m.snapshot&&s.push(m.snapshot)}}else{const c=await IE(r.localStore,o);l=await so(r.localStore,c),await tm(r,BE(c),o,!1,l.resumeToken)}i.push(l)}return r.Sa.h_(s),i}function BE(t){return b1(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function PR(t){return function(n){return X(X(n).persistence).Bi()}(X(t).localStore)}async function bR(t,e,n,r){const i=X(t);if(i.La)return void W("SyncEngine","Ignoring unexpected query state notification.");const s=i.Da.get(e);if(s&&s.length>0)switch(n){case"current":case"not-current":{const o=await TE(i.localStore,R1(s[0])),l=dl.createSynthesizedRemoteEventForCurrentChange(e,n==="current",dt.EMPTY_BYTE_STRING);await hr(i,o,l);break}case"rejected":await oo(i.localStore,e,!0),uo(i,e,r);break;default:J()}}async function AR(t,e,n){const r=Uc(t);if(r.La){for(const i of e){if(r.Da.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){W("SyncEngine","Adding an already active target "+i);continue}const s=await IE(r.localStore,i),o=await so(r.localStore,s);await tm(r,BE(s),o.targetId,!1,o.resumeToken),zc(r.remoteStore,o)}for(const i of n)r.Da.has(i)&&await oo(r.localStore,i,!1).then(()=>{ao(r.remoteStore,i),uo(r,i)}).catch(ti)}}function Uc(t){const e=X(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=jE.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=ER.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=mR.bind(null,e),e.Sa.h_=rR.bind(null,e.eventManager),e.Sa.ka=iR.bind(null,e.eventManager),e}function sm(t){const e=X(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=gR.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=yR.bind(null,e),e}function RR(t,e,n){const r=X(t);(async function(s,o,l){try{const u=await o.getMetadata();if(await function(R,V){const N=X(R),L=tt(V.createTime);return N.persistence.runTransaction("hasNewerBundle","readonly",C=>N.$r.getBundleMetadata(C,V.id)).then(C=>!!C&&C.createTime.compareTo(L)>=0)}(s.localStore,u))return await o.close(),l._completeWith(function(R){return{taskState:"Success",documentsLoaded:R.totalDocuments,bytesLoaded:R.totalBytes,totalDocuments:R.totalDocuments,totalBytes:R.totalBytes}}(u)),Promise.resolve(new Set);l._updateProgress(NE(u));const c=new oR(u,s.localStore,o.serializer);let f=await o.qa();for(;f;){const v=await c._a(f);v&&l._updateProgress(v),f=await o.qa()}const m=await c.complete();return await hr(s,m.ca,void 0),await function(R,V){const N=X(R);return N.persistence.runTransaction("Save bundle","readwrite",L=>N.$r.saveBundleMetadata(L,V))}(s.localStore,u),l._completeWith(m.progress),Promise.resolve(m.ua)}catch(u){return Cn("SyncEngine",`Loading bundle failed with ${u}`),l._failWith(u),Promise.resolve(new Set)}})(r,e,n).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}class yf{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=pl(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return _E(this.persistence,new yE,e.initialUser,this.serializer)}createPersistence(e){return new gE(Bc.Hr,this.serializer)}createSharedClientState(e){return new SE}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class zE extends yf{constructor(e,n,r){super(),this.Qa=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Qa.initialize(this,e),await sm(this.Qa.syncEngine),await Io(this.Qa.remoteStore),await this.persistence.fi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}createLocalStore(e){return _E(this.persistence,new yE,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,n){const r=this.persistence.referenceDelegate.garbageCollector;return new p2(r,e.asyncQueue,n)}createIndexBackfillerScheduler(e,n){const r=new Xb(n,this.persistence);return new Yb(e.asyncQueue,r)}createPersistence(e){const n=$p(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?Kt.withCacheSize(this.cacheSizeBytes):Kt.DEFAULT;return new Up(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,PE(),Su(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new SE}}class CR extends zE{constructor(e,n){super(e,n,!1),this.Qa=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const n=this.Qa.syncEngine;this.sharedClientState instanceof Hh&&(this.sharedClientState.syncEngine={Zs:xR.bind(null,n),Xs:bR.bind(null,n),eo:AR.bind(null,n),Bi:PR.bind(null,n),Ys:TR.bind(null,n)},await this.sharedClientState.start()),await this.persistence.fi(async r=>{await SR(this.Qa.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())})}createSharedClientState(e){const n=PE();if(!Hh.D(n))throw new G(B.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=$p(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Hh(n,e.asyncQueue,r,e.clientId,e.initialUser)}}class om{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>j0(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=wR.bind(null,this.syncEngine),await pf(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new nR}()}createDatastore(e){const n=pl(e.databaseInfo.databaseId),r=function(s){return new F2(s)}(e.databaseInfo);return function(s,o,l,u){return new U2(s,o,l,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,l){return new q2(r,i,s,o,l)}(this.localStore,this.datastore,e.asyncQueue,n=>j0(this.syncEngine,n,0),function(){return N0.D()?new N0:new L2}())}createSyncEngine(e,n){return function(i,s,o,l,u,c,f){const m=new uR(i,s,o,l,u,c);return f&&(m.La=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e;await async function(r){const i=X(r);W("RemoteStore","RemoteStore shutting down."),i.M_.add(5),await Eo(i),i.O_.shutdown(),i.N_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B0(t,e=10240){let n=0;return{async read(){if(n<t.byteLength){const r={value:t.slice(n,n+e),done:!1};return n+=e,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $c{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ka(this.observer.next,e)}error(e){this.observer.error?this.Ka(this.observer.error,e):et("Uncaught Error in snapshot listener:",e.toString())}$a(){this.muted=!0}Ka(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kR{constructor(e,n){this.Ua=e,this.serializer=n,this.metadata=new vt,this.buffer=new Uint8Array,this.Wa=function(){return new TextDecoder("utf-8")}(),this.Ga().then(r=>{r&&r.sa()?this.metadata.resolve(r.ia.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r==null?void 0:r.ia)}`))},r=>this.metadata.reject(r))}close(){return this.Ua.cancel()}async getMetadata(){return this.metadata.promise}async qa(){return await this.getMetadata(),this.Ga()}async Ga(){const e=await this.za();if(e===null)return null;const n=this.Wa.decode(e),r=Number(n);isNaN(r)&&this.ja(`length string (${n}) is not valid number`);const i=await this.Ha(r);return new sR(JSON.parse(i),e.length+r)}Ja(){return this.buffer.findIndex(e=>e===123)}async za(){for(;this.Ja()<0&&!await this.Ya(););if(this.buffer.length===0)return null;const e=this.Ja();e<0&&this.ja("Reached the end of bundle when a length string is expected.");const n=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),n}async Ha(e){for(;this.buffer.length<e;)await this.Ya()&&this.ja("Reached the end of bundle when more is expected.");const n=this.Wa.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),n}ja(e){throw this.Ua.cancel(),new Error(`Invalid bundle format: ${e}`)}async Ya(){const e=await this.Ua.read();if(!e.done){const n=new Uint8Array(this.buffer.length+e.value.length);n.set(this.buffer),n.set(e.value,this.buffer.length),this.buffer=n}return e.done}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DR{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new G(B.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const n=await async function(i,s){const o=X(i),l={documents:s.map(m=>Ya(o.serializer,m))},u=await o.xo("BatchGetDocuments",o.serializer.databaseId,me.emptyPath(),l,s.length),c=new Map;u.forEach(m=>{const v=QA(o.serializer,m);c.set(v.key.toString(),v)});const f=[];return s.forEach(m=>{const v=c.get(m.toString());re(!!v),f.push(v)}),f}(this.datastore,e);return n.forEach(r=>this.recordVersion(r)),n}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new wo(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach(n=>{e.delete(n.key.toString())}),e.forEach((n,r)=>{const i=Y.fromPath(r);this.mutations.push(new Dp(i,this.precondition(i)))}),await async function(r,i){const s=X(r),o={writes:i.map(l=>Xa(s.serializer,l))};await s.Co("Commit",s.serializer.databaseId,me.emptyPath(),o)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw J();n=ie.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!n.isEqual(r))throw new G(B.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(ie.min())?ze.exists(!1):ze.updateTime(n):ze.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(ie.min()))throw new G(B.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return ze.updateTime(n)}return ze.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NR{constructor(e,n,r,i,s){this.asyncQueue=e,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=s,this.Za=r.maxAttempts,this.Yo=new Wp(this.asyncQueue,"transaction_retry")}Xa(){this.Za-=1,this.eu()}eu(){this.Yo.$o(async()=>{const e=new DR(this.datastore),n=this.tu(e);n&&n.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(i=>{this.nu(i)}))}).catch(r=>{this.nu(r)})})}tu(e){try{const n=this.updateFunction(e);return!al(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}nu(e){this.Za>0&&this.ru(e)?(this.Za-=1,this.asyncQueue.enqueueAndForget(()=>(this.eu(),Promise.resolve()))):this.deferred.reject(e)}ru(e){if(e.name==="FirebaseError"){const n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!$1(n)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VR{constructor(e,n,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=yt.UNAUTHENTICATED,this.clientId=r1.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async s=>{W("FirestoreClient","Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>(W("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new G(B.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new vt;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=xo(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Pu(t,e){t.asyncQueue.verifyOperationInProgress(),W("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await vE(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function _f(t,e){t.asyncQueue.verifyOperationInProgress();const n=await am(t);W("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>V0(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>V0(e.remoteStore,i)),t._onlineComponents=e}function UE(t){return t.name==="FirebaseError"?t.code===B.FAILED_PRECONDITION||t.code===B.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}async function am(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){W("FirestoreClient","Using user provided OfflineComponentProvider");try{await Pu(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!UE(n))throw n;Cn("Error using user provided cache. Falling back to memory cache: "+n),await Pu(t,new yf)}}else W("FirestoreClient","Using default OfflineComponentProvider"),await Pu(t,new yf);return t._offlineComponents}async function qc(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(W("FirestoreClient","Using user provided OnlineComponentProvider"),await _f(t,t._uninitializedComponentsProvider._online)):(W("FirestoreClient","Using default OnlineComponentProvider"),await _f(t,new om))),t._onlineComponents}function $E(t){return am(t).then(e=>e.persistence)}function lm(t){return am(t).then(e=>e.localStore)}function qE(t){return qc(t).then(e=>e.remoteStore)}function um(t){return qc(t).then(e=>e.syncEngine)}function OR(t){return qc(t).then(e=>e.datastore)}async function co(t){const e=await qc(t),n=e.eventManager;return n.onListen=cR.bind(null,e.syncEngine),n.onUnlisten=dR.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=hR.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=fR.bind(null,e.syncEngine),n}function LR(t){return t.asyncQueue.enqueue(async()=>{const e=await $E(t),n=await qE(t);return e.setNetworkEnabled(!0),function(i){const s=X(i);return s.M_.delete(0),ml(s)}(n)})}function MR(t){return t.asyncQueue.enqueue(async()=>{const e=await $E(t),n=await qE(t);return e.setNetworkEnabled(!1),async function(i){const s=X(i);s.M_.add(0),await Eo(s),s.N_.set("Offline")}(n)})}function jR(t,e){const n=new vt;return t.asyncQueue.enqueueAndForget(async()=>async function(i,s,o){try{const l=await function(c,f){const m=X(c);return m.persistence.runTransaction("read document","readonly",v=>m.localDocuments.getDocument(v,f))}(i,s);l.isFoundDocument()?o.resolve(l):l.isNoDocument()?o.resolve(null):o.reject(new G(B.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(l){const u=xo(l,`Failed to get document '${s} from cache`);o.reject(u)}}(await lm(t),e,n)),n.promise}function GE(t,e,n={}){const r=new vt;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,l,u,c){const f=new $c({next:v=>{o.enqueueAndForget(()=>Jp(s,m));const R=v.docs.has(l);!R&&v.fromCache?c.reject(new G(B.UNAVAILABLE,"Failed to get document because the client is offline.")):R&&v.fromCache&&u&&u.source==="server"?c.reject(new G(B.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(v)},error:v=>c.reject(v)}),m=new em(_o(l.path),f,{includeMetadataChanges:!0,ra:!0});return Xp(s,m)}(await co(t),t.asyncQueue,e,n,r)),r.promise}function FR(t,e){const n=new vt;return t.asyncQueue.enqueueAndForget(async()=>async function(i,s,o){try{const l=await hc(i,s,!0),u=new LE(s,l.hs),c=u.da(l.documents),f=u.applyChanges(c,!1);o.resolve(f.snapshot)}catch(l){const u=xo(l,`Failed to execute query '${s} against cache`);o.reject(u)}}(await lm(t),e,n)),n.promise}function WE(t,e,n={}){const r=new vt;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,l,u,c){const f=new $c({next:v=>{o.enqueueAndForget(()=>Jp(s,m)),v.fromCache&&u.source==="server"?c.reject(new G(B.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(v)},error:v=>c.reject(v)}),m=new em(l,f,{includeMetadataChanges:!0,ra:!0});return Xp(s,m)}(await co(t),t.asyncQueue,e,n,r)),r.promise}function BR(t,e){const n=new $c(e);return t.asyncQueue.enqueueAndForget(async()=>function(i,s){X(i).z_.add(s),s.next()}(await co(t),n)),()=>{n.$a(),t.asyncQueue.enqueueAndForget(async()=>function(i,s){X(i).z_.delete(s)}(await co(t),n))}}function zR(t,e,n,r){const i=function(o,l){let u;return u=typeof o=="string"?G1().encode(o):o,function(f,m){return new kR(f,m)}(function(f,m){if(f instanceof Uint8Array)return B0(f,m);if(f instanceof ArrayBuffer)return B0(new Uint8Array(f),m);if(f instanceof ReadableStream)return f.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(u),l)}(n,pl(e));t.asyncQueue.enqueueAndForget(async()=>{RR(await um(t),i,r)})}function UR(t,e){return t.asyncQueue.enqueue(async()=>function(r,i){const s=X(r);return s.persistence.runTransaction("Get named query","readonly",o=>s.$r.getNamedQuery(o,i))}(await lm(t),e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KE(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z0=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cm(t,e,n){if(!n)throw new G(B.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function HE(t,e,n,r){if(e===!0&&r===!0)throw new G(B.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function U0(t){if(!Y.isDocumentKey(t))throw new G(B.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function $0(t){if(Y.isDocumentKey(t))throw new G(B.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Gc(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":J()}function Ee(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new G(B.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Gc(t);throw new G(B.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function QE(t,e){if(e<=0)throw new G(B.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q0{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new G(B.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new G(B.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}HE("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=KE((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new G(B.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new G(B.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new G(B.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class gl{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new q0({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new G(B.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new G(B.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new q0(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new Fb;switch(r.type){case"firstParty":return new $b(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new G(B.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=z0.get(n);r&&(W("ComponentProvider","Removing Datastore"),z0.delete(n),r.terminate())}(this),Promise.resolve()}}function $R(t,e,n,r={}){var i;const s=(t=Ee(t,gl))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&Cn("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let l,u;if(typeof r.mockUserToken=="string")l=r.mockUserToken,u=yt.MOCK_USER;else{l=gP(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new G(B.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new yt(c)}t._authCredentials=new Bb(new n1(l,u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $t=class YE{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new YE(this.firestore,e,this._query)}},We=class XE{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Fr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new XE(this.firestore,e,this._key)}},Fr=class JE extends $t{constructor(e,n,r){super(e,n,_o(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new We(this.firestore,null,new Y(e))}withConverter(e){return new JE(this.firestore,e,this._path)}};function ZE(t,e,...n){if(t=lt(t),cm("collection","path",e),t instanceof gl){const r=me.fromString(e,...n);return $0(r),new Fr(t,null,r)}{if(!(t instanceof We||t instanceof Fr))throw new G(B.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(me.fromString(e,...n));return $0(r),new Fr(t.firestore,null,r)}}function qR(t,e){if(t=Ee(t,gl),cm("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new G(B.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new $t(t,null,function(r){return new ur(me.emptyPath(),r)}(e))}function mc(t,e,...n){if(t=lt(t),arguments.length===1&&(e=r1.newId()),cm("doc","path",e),t instanceof gl){const r=me.fromString(e,...n);return U0(r),new We(t,null,new Y(r))}{if(!(t instanceof We||t instanceof Fr))throw new G(B.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(me.fromString(e,...n));return U0(r),new We(t.firestore,t instanceof Fr?t.converter:null,new Y(r))}}function eI(t,e){return t=lt(t),e=lt(e),(t instanceof We||t instanceof Fr)&&(e instanceof We||e instanceof Fr)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function hm(t,e){return t=lt(t),e=lt(e),t instanceof $t&&e instanceof $t&&t.firestore===e.firestore&&ul(t._query,e._query)&&t.converter===e.converter}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GR{constructor(){this.iu=Promise.resolve(),this.su=[],this.ou=!1,this._u=[],this.au=null,this.uu=!1,this.cu=!1,this.lu=[],this.Yo=new Wp(this,"async_queue_retry"),this.hu=()=>{const n=Su();n&&W("AsyncQueue","Visibility state changed to "+n.visibilityState),this.Yo.Wo()};const e=Su();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.hu)}get isShuttingDown(){return this.ou}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Pu(),this.Iu(e)}enterRestrictedMode(e){if(!this.ou){this.ou=!0,this.cu=e||!1;const n=Su();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.hu)}}enqueue(e){if(this.Pu(),this.ou)return new Promise(()=>{});const n=new vt;return this.Iu(()=>this.ou&&this.cu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.su.push(e),this.Tu()))}async Tu(){if(this.su.length!==0){try{await this.su[0](),this.su.shift(),this.Yo.reset()}catch(e){if(!ni(e))throw e;W("AsyncQueue","Operation failed with retryable error: "+e)}this.su.length>0&&this.Yo.$o(()=>this.Tu())}}Iu(e){const n=this.iu.then(()=>(this.uu=!0,e().catch(r=>{this.au=r,this.uu=!1;const i=function(o){let l=o.message||"";return o.stack&&(l=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),l}(r);throw et("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.uu=!1,r))));return this.iu=n,n}enqueueAfterDelay(e,n,r){this.Pu(),this.lu.indexOf(e)>-1&&(n=0);const i=Yp.createAndSchedule(this,e,n,r,s=>this.Eu(s));return this._u.push(i),i}Pu(){this.au&&J()}verifyOperationInProgress(){}async du(){let e;do e=this.iu,await e;while(e!==this.iu)}Au(e){for(const n of this._u)if(n.timerId===e)return!0;return!1}Ru(e){return this.du().then(()=>{this._u.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this._u)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.du()})}Vu(e){this.lu.push(e)}Eu(e){const n=this._u.indexOf(e);this._u.splice(n,1)}}function vf(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(t,["next","error","complete"])}class WR{constructor(){this._progressObserver={},this._taskCompletionResolver=new vt,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,r){this._progressObserver={next:e,error:n,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KR=-1;let Je=class extends gl{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=function(){return new GR}(),this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||tI(this),this._firestoreClient.terminate()}};function Et(t){return t._firestoreClient||tI(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function tI(t){var e,n,r;const i=t._freezeSettings(),s=function(l,u,c,f){return new _A(l,u,c,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,KE(f.experimentalLongPollingOptions),f.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._firestoreClient=new VR(t._authCredentials,t._appCheckCredentials,t._queue,s),!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function HR(t,e){rI(t=Ee(t,Je));const n=Et(t);if(n._uninitializedComponentsProvider)throw new G(B.FAILED_PRECONDITION,"SDK cache is already specified.");Cn("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=t._freezeSettings(),i=new om;return nI(n,i,new zE(i,r.cacheSizeBytes,e==null?void 0:e.forceOwnership))}function QR(t){rI(t=Ee(t,Je));const e=Et(t);if(e._uninitializedComponentsProvider)throw new G(B.FAILED_PRECONDITION,"SDK cache is already specified.");Cn("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=t._freezeSettings(),r=new om;return nI(e,r,new CR(r,n.cacheSizeBytes))}function nI(t,e,n){const r=new vt;return t.asyncQueue.enqueue(async()=>{try{await Pu(t,n),await _f(t,e),r.resolve()}catch(i){const s=i;if(!UE(s))throw s;Cn("Error enabling indexeddb cache. Falling back to memory cache: "+s),r.reject(s)}}).then(()=>r.promise)}function YR(t){if(t._initialized&&!t._terminated)throw new G(B.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new vt;return t._queue.enqueueAndForgetEvenWhileRestricted(async()=>{try{await async function(r){if(!Fn.D())return Promise.resolve();const i=r+"main";await Fn.delete(i)}($p(t._databaseId,t._persistenceKey)),e.resolve()}catch(n){e.reject(n)}}),e.promise}function XR(t){return function(n){const r=new vt;return n.asyncQueue.enqueueAndForget(async()=>_R(await um(n),r)),r.promise}(Et(t=Ee(t,Je)))}function JR(t){return LR(Et(t=Ee(t,Je)))}function ZR(t){return MR(Et(t=Ee(t,Je)))}function eC(t,e){const n=Et(t=Ee(t,Je)),r=new WR;return zR(n,t._databaseId,e,r),r}function tC(t,e){return UR(Et(t=Ee(t,Je)),e).then(n=>n?new $t(t,null,n.query):null)}function rI(t){if(t._initialized||t._terminated)throw new G(B.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Un{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Un(dt.fromBase64String(e))}catch(n){throw new G(B.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Un(dt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Yr=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new G(B.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Be(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Yi=class{constructor(e){this._methodName=e}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wc{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new G(B.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new G(B.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return le(this._lat,e._lat)||le(this._long,e._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nC=/^__.*__$/;class rC{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new cr(e,this.data,this.fieldMask,n,this.fieldTransforms):new vo(e,this.data,n,this.fieldTransforms)}}class iI{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new cr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function sI(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw J()}}class Kc{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.mu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get fu(){return this.settings.fu}gu(e){return new Kc(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}pu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.gu({path:r,yu:!1});return i.wu(e),i}Su(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.gu({path:r,yu:!1});return i.mu(),i}bu(e){return this.gu({path:void 0,yu:!0})}Du(e){return gc(e,this.settings.methodName,this.settings.Cu||!1,this.path,this.settings.vu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}mu(){if(this.path)for(let e=0;e<this.path.length;e++)this.wu(this.path.get(e))}wu(e){if(e.length===0)throw this.Du("Document fields must not be empty");if(sI(this.fu)&&nC.test(e))throw this.Du('Document fields cannot begin and end with "__"')}}class iC{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||pl(e)}Fu(e,n,r,i=!1){return new Kc({fu:e,methodName:n,vu:r,path:Be.emptyPath(),yu:!1,Cu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Xi(t){const e=t._freezeSettings(),n=pl(t._databaseId);return new iC(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Hc(t,e,n,r,i,s={}){const o=t.Fu(s.merge||s.mergeFields?2:0,e,n,i);_m("Data must be an object, but it was:",o,r);const l=lI(r,o);let u,c;if(s.merge)u=new Jt(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const f=[];for(const m of s.mergeFields){const v=wf(e,m,n);if(!o.contains(v))throw new G(B.INVALID_ARGUMENT,`Field '${v}' is specified in your field mask but missing from your input data.`);cI(f,v)||f.push(v)}u=new Jt(f),c=o.fieldTransforms.filter(m=>u.covers(m.field))}else u=null,c=o.fieldTransforms;return new rC(new St(l),u,c)}class yl extends Yi{_toFieldTransform(e){if(e.fu!==2)throw e.fu===1?e.Du(`${this._methodName}() can only appear at the top level of your update data`):e.Du(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof yl}}function oI(t,e,n){return new Kc({fu:3,vu:e.settings.vu,methodName:t._methodName,yu:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class dm extends Yi{_toFieldTransform(e){return new hl(e.path,new no)}isEqual(e){return e instanceof dm}}class fm extends Yi{constructor(e,n){super(e),this.Mu=n}_toFieldTransform(e){const n=oI(this,e,!0),r=this.Mu.map(s=>Ji(s,n)),i=new Bi(r);return new hl(e.path,i)}isEqual(e){return e instanceof fm&&Ba(this.Mu,e.Mu)}}class pm extends Yi{constructor(e,n){super(e),this.Mu=n}_toFieldTransform(e){const n=oI(this,e,!0),r=this.Mu.map(s=>Ji(s,n)),i=new zi(r);return new hl(e.path,i)}isEqual(e){return e instanceof pm&&Ba(this.Mu,e.Mu)}}class mm extends Yi{constructor(e,n){super(e),this.xu=n}_toFieldTransform(e){const n=new ro(e.serializer,L1(e.serializer,this.xu));return new hl(e.path,n)}isEqual(e){return e instanceof mm&&this.xu===e.xu}}function gm(t,e,n,r){const i=t.Fu(1,e,n);_m("Data must be an object, but it was:",i,r);const s=[],o=St.empty();Qi(r,(u,c)=>{const f=vm(e,u,n);c=lt(c);const m=i.Su(f);if(c instanceof yl)s.push(f);else{const v=Ji(c,m);v!=null&&(s.push(f),o.set(f,v))}});const l=new Jt(s);return new iI(o,l,i.fieldTransforms)}function ym(t,e,n,r,i,s){const o=t.Fu(1,e,n),l=[wf(e,r,n)],u=[i];if(s.length%2!=0)throw new G(B.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let v=0;v<s.length;v+=2)l.push(wf(e,s[v])),u.push(s[v+1]);const c=[],f=St.empty();for(let v=l.length-1;v>=0;--v)if(!cI(c,l[v])){const R=l[v];let V=u[v];V=lt(V);const N=o.Su(R);if(V instanceof yl)c.push(R);else{const L=Ji(V,N);L!=null&&(c.push(R),f.set(R,L))}}const m=new Jt(c);return new iI(f,m,o.fieldTransforms)}function aI(t,e,n,r=!1){return Ji(n,t.Fu(r?4:3,e))}function Ji(t,e){if(uI(t=lt(t)))return _m("Unsupported field value:",e,t),lI(t,e);if(t instanceof Yi)return function(r,i){if(!sI(i.fu))throw i.Du(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Du(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.yu&&e.fu!==4)throw e.Du("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const l of r){let u=Ji(l,i.bu(o));u==null&&(u={nullValue:"NULL_VALUE"}),s.push(u),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=lt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return L1(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=Ue.fromDate(r);return{timestampValue:io(i.serializer,s)}}if(r instanceof Ue){const s=new Ue(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:io(i.serializer,s)}}if(r instanceof Wc)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Un)return{bytesValue:H1(i.serializer,r._byteString)};if(r instanceof We){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Du(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:Mp(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.Du(`Unsupported field value: ${Gc(r)}`)}(t,e)}function lI(t,e){const n={};return g1(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Qi(t,(r,i)=>{const s=Ji(i,e.pu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function uI(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ue||t instanceof Wc||t instanceof Un||t instanceof We||t instanceof Yi)}function _m(t,e,n){if(!uI(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=Gc(n);throw r==="an object"?e.Du(t+" a custom object"):e.Du(t+" "+r)}}function wf(t,e,n){if((e=lt(e))instanceof Yr)return e._internalPath;if(typeof e=="string")return vm(t,e);throw gc("Field path arguments must be of type string or ",t,!1,void 0,n)}const sC=new RegExp("[~\\*/\\[\\]]");function vm(t,e,n){if(e.search(sC)>=0)throw gc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Yr(...e.split("."))._internalPath}catch{throw gc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function gc(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new G(B.INVALID_ARGUMENT,l+t+u)}function cI(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ja{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new We(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new oC(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Qc("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class oC extends Ja{data(){return super.data()}}function Qc(t,e){return typeof e=="string"?vm(t,e):e instanceof Yr?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hI(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new G(B.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class wm{}class _l extends wm{}function wr(t,e,...n){let r=[];e instanceof wm&&r.push(e),r=r.concat(n),function(s){const o=s.filter(u=>u instanceof Em).length,l=s.filter(u=>u instanceof Yc).length;if(o>1||o>0&&l>0)throw new G(B.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class Yc extends _l{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Yc(e,n,r)}_apply(e){const n=this._parse(e);return fI(e._query,n),new $t(e.firestore,e.converter,sf(e._query,n))}_parse(e){const n=Xi(e.firestore);return function(s,o,l,u,c,f,m){let v;if(c.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new G(B.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){W0(m,f);const R=[];for(const V of m)R.push(G0(u,s,V));v={arrayValue:{values:R}}}else v=G0(u,s,m)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||W0(m,f),v=aI(l,o,m,f==="in"||f==="not-in");return ge.create(c,f,v)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function aC(t,e,n){const r=e,i=Qc("where",t);return Yc._create(i,r,n)}class Em extends wm{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Em(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Pe.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i;const l=s.getFlattenedFilters();for(const u of l)fI(o,u),o=sf(o,u)}(e._query,n),new $t(e.firestore,e.converter,sf(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Im extends _l{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Im(e,n)}_apply(e){const n=function(i,s,o){if(i.startAt!==null)throw new G(B.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new G(B.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Qa(s,o)}(e._query,this._field,this._direction);return new $t(e.firestore,e.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new ur(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function lC(t,e="asc"){const n=e,r=Qc("orderBy",t);return Im._create(r,n)}class Xc extends _l{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new Xc(e,n,r)}_apply(e){return new $t(e.firestore,e.converter,ac(e._query,this._limit,this._limitType))}}function uC(t){return QE("limit",t),Xc._create("limit",t,"F")}function cC(t){return QE("limitToLast",t),Xc._create("limitToLast",t,"L")}class Jc extends _l{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new Jc(e,n,r)}_apply(e){const n=dI(e,this.type,this._docOrFields,this._inclusive);return new $t(e.firestore,e.converter,function(i,s){return new ur(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,s,i.endAt)}(e._query,n))}}function hC(...t){return Jc._create("startAt",t,!0)}function dC(...t){return Jc._create("startAfter",t,!1)}class Zc extends _l{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new Zc(e,n,r)}_apply(e){const n=dI(e,this.type,this._docOrFields,this._inclusive);return new $t(e.firestore,e.converter,function(i,s){return new ur(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,s)}(e._query,n))}}function fC(...t){return Zc._create("endBefore",t,!1)}function pC(...t){return Zc._create("endAt",t,!0)}function dI(t,e,n,r){if(n[0]=lt(n[0]),n[0]instanceof Ja)return function(s,o,l,u,c){if(!u)throw new G(B.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${l}().`);const f=[];for(const m of zs(s))if(m.field.isKeyField())f.push(ji(o,u.key));else{const v=u.data.field(m.field);if(Oc(v))throw new G(B.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+m.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(v===null){const R=m.field.canonicalString();throw new G(B.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${R}' (used as the orderBy) does not exist.`)}f.push(v)}return new Hr(f,c)}(t._query,t.firestore._databaseId,e,n[0]._document,r);{const i=Xi(t.firestore);return function(o,l,u,c,f,m){const v=o.explicitOrderBy;if(f.length>v.length)throw new G(B.INVALID_ARGUMENT,`Too many arguments provided to ${c}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const R=[];for(let V=0;V<f.length;V++){const N=f[V];if(v[V].field.isKeyField()){if(typeof N!="string")throw new G(B.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${c}(), but got a ${typeof N}`);if(!Cp(o)&&N.indexOf("/")!==-1)throw new G(B.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${c}() must be a plain document ID, but '${N}' contains a slash.`);const L=o.path.child(me.fromString(N));if(!Y.isDocumentKey(L))throw new G(B.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${c}() must result in a valid document path, but '${L}' is not because it contains an odd number of segments.`);const C=new Y(L);R.push(ji(l,C))}else{const L=aI(u,c,N);R.push(L)}}return new Hr(R,m)}(t._query,t.firestore._databaseId,i,e,n,r)}}function G0(t,e,n){if(typeof(n=lt(n))=="string"){if(n==="")throw new G(B.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Cp(e)&&n.indexOf("/")!==-1)throw new G(B.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(me.fromString(n));if(!Y.isDocumentKey(r))throw new G(B.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return ji(t,new Y(r))}if(n instanceof We)return ji(t,n._key);throw new G(B.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Gc(n)}.`)}function W0(t,e){if(!Array.isArray(t)||t.length===0)throw new G(B.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function fI(t,e){const n=function(i,s){for(const o of i)for(const l of o.getFlattenedFilters())if(s.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new G(B.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new G(B.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class Tm{convertValue(e,n="none"){switch(Mi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Xe(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Gr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw J()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Qi(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertGeoPoint(e){return new Wc(Xe(e.latitude),Xe(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Ap(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Wa(e));default:return null}}convertTimestamp(e){const n=or(e);return new Ue(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=me.fromString(e);re(sE(r));const i=new Wr(r.get(1),r.get(3)),s=new Y(r.popFirst(5));return i.isEqual(n)||et(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eh(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class mC extends Tm{constructor(e){super(),this.firestore=e}convertBytes(e){return new Un(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new We(this.firestore,null,n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Si{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}let ar=class extends Ja{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Ia(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Qc("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}},Ia=class extends ar{data(e={}){return super.data(e)}},Xr=class{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Si(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Ia(this._firestore,this._userDataWriter,r.key,r,new Si(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new G(B.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(l=>{const u=new Ia(i._firestore,i._userDataWriter,l.doc.key,l.doc,new Si(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);return l.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(l=>s||l.type!==3).map(l=>{const u=new Ia(i._firestore,i._userDataWriter,l.doc.key,l.doc,new Si(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);let c=-1,f=-1;return l.type!==0&&(c=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),f=o.indexOf(l.doc.key)),{type:gC(l.type),doc:u,oldIndex:c,newIndex:f}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}};function gC(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return J()}}function pI(t,e){return t instanceof ar&&e instanceof ar?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(t._document===null?e._document===null:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof Xr&&e instanceof Xr&&t._firestore===e._firestore&&hm(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yC(t){t=Ee(t,We);const e=Ee(t.firestore,Je);return GE(Et(e),t._key).then(n=>Sm(e,t,n))}class Zi extends Tm{constructor(e){super(),this.firestore=e}convertBytes(e){return new Un(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new We(this.firestore,null,n)}}function _C(t){t=Ee(t,We);const e=Ee(t.firestore,Je),n=Et(e),r=new Zi(e);return jR(n,t._key).then(i=>new ar(e,r,t._key,i,new Si(i!==null&&i.hasLocalMutations,!0),t.converter))}function vC(t){t=Ee(t,We);const e=Ee(t.firestore,Je);return GE(Et(e),t._key,{source:"server"}).then(n=>Sm(e,t,n))}function wC(t){t=Ee(t,$t);const e=Ee(t.firestore,Je),n=Et(e),r=new Zi(e);return hI(t._query),WE(n,t._query).then(i=>new Xr(e,r,t,i))}function EC(t){t=Ee(t,$t);const e=Ee(t.firestore,Je),n=Et(e),r=new Zi(e);return FR(n,t._query).then(i=>new Xr(e,r,t,i))}function IC(t){t=Ee(t,$t);const e=Ee(t.firestore,Je),n=Et(e),r=new Zi(e);return WE(n,t._query,{source:"server"}).then(i=>new Xr(e,r,t,i))}function K0(t,e,n){t=Ee(t,We);const r=Ee(t.firestore,Je),i=eh(t.converter,e,n);return vl(r,[Hc(Xi(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,ze.none())])}function H0(t,e,n,...r){t=Ee(t,We);const i=Ee(t.firestore,Je),s=Xi(i);let o;return o=typeof(e=lt(e))=="string"||e instanceof Yr?ym(s,"updateDoc",t._key,e,n,r):gm(s,"updateDoc",t._key,e),vl(i,[o.toMutation(t._key,ze.exists(!0))])}function TC(t){return vl(Ee(t.firestore,Je),[new wo(t._key,ze.none())])}function xC(t,e){const n=Ee(t.firestore,Je),r=mc(t),i=eh(t.converter,e);return vl(n,[Hc(Xi(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,ze.exists(!1))]).then(()=>r)}function xm(t,...e){var n,r,i;t=lt(t);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||vf(e[o])||(s=e[o],o++);const l={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(vf(e[o])){const m=e[o];e[o]=(n=m.next)===null||n===void 0?void 0:n.bind(m),e[o+1]=(r=m.error)===null||r===void 0?void 0:r.bind(m),e[o+2]=(i=m.complete)===null||i===void 0?void 0:i.bind(m)}let u,c,f;if(t instanceof We)c=Ee(t.firestore,Je),f=_o(t._key.path),u={next:m=>{e[o]&&e[o](Sm(c,t,m))},error:e[o+1],complete:e[o+2]};else{const m=Ee(t,$t);c=Ee(m.firestore,Je),f=m._query;const v=new Zi(c);u={next:R=>{e[o]&&e[o](new Xr(c,v,m,R))},error:e[o+1],complete:e[o+2]},hI(t._query)}return function(v,R,V,N){const L=new $c(N),C=new em(R,L,V);return v.asyncQueue.enqueueAndForget(async()=>Xp(await co(v),C)),()=>{L.$a(),v.asyncQueue.enqueueAndForget(async()=>Jp(await co(v),C))}}(Et(c),f,l,u)}function SC(t,e){return BR(Et(t=Ee(t,Je)),vf(e)?e:{next:e})}function vl(t,e){return function(r,i){const s=new vt;return r.asyncQueue.enqueueAndForget(async()=>pR(await um(r),i,s)),s.promise}(Et(t),e)}function Sm(t,e,n){const r=n.docs.get(e._key),i=new Zi(t);return new ar(t,i,e._key,r,new Si(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PC={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let bC=class{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Xi(e)}set(e,n,r){this._verifyNotCommitted();const i=Pr(e,this._firestore),s=eh(i.converter,n,r),o=Hc(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,r);return this._mutations.push(o.toMutation(i._key,ze.none())),this}update(e,n,r,...i){this._verifyNotCommitted();const s=Pr(e,this._firestore);let o;return o=typeof(n=lt(n))=="string"||n instanceof Yr?ym(this._dataReader,"WriteBatch.update",s._key,n,r,i):gm(this._dataReader,"WriteBatch.update",s._key,n),this._mutations.push(o.toMutation(s._key,ze.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=Pr(e,this._firestore);return this._mutations=this._mutations.concat(new wo(n._key,ze.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new G(B.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function Pr(t,e){if((t=lt(t)).firestore!==e)throw new G(B.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let AC=class extends class{constructor(n,r){this._firestore=n,this._transaction=r,this._dataReader=Xi(n)}get(n){const r=Pr(n,this._firestore),i=new mC(this._firestore);return this._transaction.lookup([r._key]).then(s=>{if(!s||s.length!==1)return J();const o=s[0];if(o.isFoundDocument())return new Ja(this._firestore,i,o.key,o,r.converter);if(o.isNoDocument())return new Ja(this._firestore,i,r._key,null,r.converter);throw J()})}set(n,r,i){const s=Pr(n,this._firestore),o=eh(s.converter,r,i),l=Hc(this._dataReader,"Transaction.set",s._key,o,s.converter!==null,i);return this._transaction.set(s._key,l),this}update(n,r,i,...s){const o=Pr(n,this._firestore);let l;return l=typeof(r=lt(r))=="string"||r instanceof Yr?ym(this._dataReader,"Transaction.update",o._key,r,i,s):gm(this._dataReader,"Transaction.update",o._key,r),this._transaction.update(o._key,l),this}delete(n){const r=Pr(n,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=Pr(e,this._firestore),r=new Zi(this._firestore);return super.get(e).then(i=>new ar(this._firestore,r,n._key,i._document,new Si(!1,!1),n.converter))}};function RC(t,e,n){t=Ee(t,Je);const r=Object.assign(Object.assign({},PC),n);return function(s){if(s.maxAttempts<1)throw new G(B.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(s,o,l){const u=new vt;return s.asyncQueue.enqueueAndForget(async()=>{const c=await OR(s);new NR(s.asyncQueue,c,l,o,u).Xa()}),u.promise}(Et(t),i=>e(new AC(t,i)),r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CC(){return new yl("deleteField")}function kC(){return new dm("serverTimestamp")}function DC(...t){return new fm("arrayUnion",t)}function NC(...t){return new pm("arrayRemove",t)}function VC(t){return new mm("increment",t)}(function(e,n=!0){(function(i){yo=i})(Ip),Js(new Oi("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),l=new Je(new zb(r.getProvider("auth-internal")),new Gb(r.getProvider("app-check-internal")),function(c,f){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new G(B.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Wr(c.options.projectId,f)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),l._setSettings(s),l},"PUBLIC").setMultipleInstances(!0)),tr(zy,"4.6.4",e),tr(zy,"4.6.4","esm2017")})();/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Vs=function(){return Vs=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Vs.apply(this,arguments)},mI=function(t){return{loading:t==null,value:t}},OC=function(){return function(t,e){switch(e.type){case"error":return Vs(Vs({},t),{error:e.error,loading:!1,value:void 0});case"reset":return mI(e.defaultValue);case"value":return Vs(Vs({},t),{error:void 0,loading:!1,value:e.value});default:return t}}},LC=function(t){var e=void 0,n=ee.useReducer(OC(),mI(e)),r=n[0],i=n[1],s=ee.useCallback(function(){var u=void 0;i({type:"reset",defaultValue:u})},[t]),o=ee.useCallback(function(u){i({type:"error",error:u})},[]),l=ee.useCallback(function(u){i({type:"value",value:u})},[]);return ee.useMemo(function(){return{error:r.error,loading:r.loading,reset:s,setError:o,setValue:l,value:r.value}},[r.error,r.loading,s,o,l,r.value])},MC=function(t,e,n){var r=ee.useRef(t);return ee.useEffect(function(){e(t,r.current)||(r.current=t,n&&n())}),r},jC=function(t,e){var n=!t&&!e,r=!!t&&!!e&&hm(t,e);return n||r},FC=function(t,e){return MC(t,jC,e)},BC=function(t,e){var n=LC(),r=n.error,i=n.loading,s=n.reset,o=n.setError,l=n.setValue,u=n.value,c=FC(t,s);return ee.useEffect(function(){if(!c.current){l(void 0);return}var f=xm(c.current,l,o);return function(){f()}},[c.current]),[u,i,r]},zC=function(t,e){var n=BC(t),r=n[0],i=n[1],s=n[2],o=UC(r,void 0,void 0);return[o,i,s,r]},UC=function(t,e,n){return ee.useMemo(function(){var r;return(r=t==null?void 0:t.docs.map(function(i){return i.data(e)}))!==null&&r!==void 0?r:n},[t,e])};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $C{constructor(e,n){this._delegate=e,this.firebase=n,za(e,new Oi("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),xp(this._delegate)))}_getService(e,n=Ur){var r;this._delegate.checkDestroyed();const i=this._delegate.container.getProvider(e);return!i.isInitialized()&&((r=i.getComponent())===null||r===void 0?void 0:r.instantiationMode)==="EXPLICIT"&&i.initialize(),i.getImmediate({identifier:n})}_removeServiceInstance(e,n=Ur){this._delegate.container.getProvider(e).clearInstance(n)}_addComponent(e){za(this._delegate,e)}_addOrOverwriteComponent(e){zw(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qC={"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."},Q0=new Nc("app-compat","Firebase",qC);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GC(t){const e={},n={__esModule:!0,initializeApp:s,app:i,registerVersion:tr,setLogLevel:Ww,onLog:Gw,apps:null,SDK_VERSION:Ip,INTERNAL:{registerComponent:l,removeApp:r,useAsService:u,modularAPIs:Lb}};n.default=n,Object.defineProperty(n,"apps",{get:o});function r(c){delete e[c]}function i(c){if(c=c||Ur,!Dy(e,c))throw Q0.create("no-app",{appName:c});return e[c]}i.App=t;function s(c,f={}){const m=Tp(c,f);if(Dy(e,m.name))return e[m.name];const v=new t(m,n);return e[m.name]=v,v}function o(){return Object.keys(e).map(c=>e[c])}function l(c){const f=c.name,m=f.replace("-compat","");if(Js(c)&&c.type==="PUBLIC"){const v=(R=i())=>{if(typeof R[m]!="function")throw Q0.create("invalid-app-argument",{appName:f});return R[m]()};c.serviceProps!==void 0&&tc(v,c.serviceProps),n[m]=v,t.prototype[m]=function(...R){return this._getService.bind(this,f).apply(this,c.multipleInstances?R:[])}}return c.type==="PUBLIC"?n[m]:null}function u(c,f){return f==="serverAuth"?null:f}return n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gI(){const t=GC($C);t.INTERNAL=Object.assign(Object.assign({},t.INTERNAL),{createFirebaseNamespace:gI,extendNamespace:e,createSubscribe:IP,ErrorFactory:Nc,deepExtend:tc});function e(n){tc(t,n)}return t}const WC=gI();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y0=new wp("@firebase/app-compat"),KC="@firebase/app-compat",HC="0.2.37";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QC(t){tr(KC,HC,t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */if(Nw()&&self.firebase!==void 0){Y0.warn(`
    Warning: Firebase is already defined in the global scope. Please make sure
    Firebase library is only loaded once.
  `);const t=self.firebase.SDK_VERSION;t&&t.indexOf("LITE")>=0&&Y0.warn(`
    Warning: You are trying to load Firebase while using Firebase Performance standalone script.
    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.
    `)}const ho=WC;QC();var YC="firebase",XC="10.12.4";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ho.registerVersion(YC,XC,"app-compat");const JC="@firebase/firestore-compat",ZC="0.3.33";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pm(t,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new G("invalid-argument",`Invalid options passed to function ${t}(): You cannot specify both "merge" and "mergeFields".`);return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X0(){if(typeof Uint8Array>"u")throw new G("unimplemented","Uint8Arrays are not available in this environment.")}function J0(){if(!gA())throw new G("unimplemented","Blobs are unavailable in Firestore in this environment.")}class Za{constructor(e){this._delegate=e}static fromBase64String(e){return J0(),new Za(Un.fromBase64String(e))}static fromUint8Array(e){return X0(),new Za(Un.fromUint8Array(e))}toBase64(){return J0(),this._delegate.toBase64()}toUint8Array(){return X0(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ef(t){return ek(t,["next","error","complete"])}function ek(t,e){if(typeof t!="object"||t===null)return!1;const n=t;for(const r of e)if(r in n&&typeof n[r]=="function")return!0;return!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tk{enableIndexedDbPersistence(e,n){return HR(e._delegate,{forceOwnership:n})}enableMultiTabIndexedDbPersistence(e){return QR(e._delegate)}clearIndexedDbPersistence(e){return YR(e._delegate)}}class yI{constructor(e,n,r){this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Wr||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const n=this._delegate._getSettings();!e.merge&&n.host!==e.host&&Cn("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},n),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,n,r={}){$R(this._delegate,e,n,r)}enableNetwork(){return JR(this._delegate)}disableNetwork(){return ZR(this._delegate)}enablePersistence(e){let n=!1,r=!1;return e&&(n=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,HE("synchronizeTabs",n,"experimentalForceOwningTab",r)),n?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return XR(this._delegate)}onSnapshotsInSync(e){return SC(this._delegate,e)}get app(){if(!this._appCompat)throw new G("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new fo(this,ZE(this._delegate,e))}catch(n){throw Ft(n,"collection()","Firestore.collection()")}}doc(e){try{return new yn(this,mc(this._delegate,e))}catch(n){throw Ft(n,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new jt(this,qR(this._delegate,e))}catch(n){throw Ft(n,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return RC(this._delegate,n=>e(new _I(this,n)))}batch(){return Et(this._delegate),new vI(new bC(this._delegate,e=>vl(this._delegate,e)))}loadBundle(e){return eC(this._delegate,e)}namedQuery(e){return tC(this._delegate,e).then(n=>n?new jt(this,n):null)}}class th extends Tm{constructor(e){super(),this.firestore=e}convertBytes(e){return new Za(new Un(e))}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return yn.forKey(n,this.firestore,null)}}function nk(t){Mb(t)}class _I{constructor(e,n){this._firestore=e,this._delegate=n,this._userDataWriter=new th(e)}get(e){const n=Pi(e);return this._delegate.get(n).then(r=>new el(this._firestore,new ar(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,n.converter)))}set(e,n,r){const i=Pi(e);return r?(Pm("Transaction.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){const s=Pi(e);return arguments.length===2?this._delegate.update(s,n):this._delegate.update(s,n,r,...i),this}delete(e){const n=Pi(e);return this._delegate.delete(n),this}}class vI{constructor(e){this._delegate=e}set(e,n,r){const i=Pi(e);return r?(Pm("WriteBatch.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){const s=Pi(e);return arguments.length===2?this._delegate.update(s,n):this._delegate.update(s,n,r,...i),this}delete(e){const n=Pi(e);return this._delegate.delete(n),this}commit(){return this._delegate.commit()}}class Gi{constructor(e,n,r){this._firestore=e,this._userDataWriter=n,this._delegate=r}fromFirestore(e,n){const r=new Ia(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new tl(this._firestore,r),n??{})}toFirestore(e,n){return n?this._delegate.toFirestore(e,n):this._delegate.toFirestore(e)}static getInstance(e,n){const r=Gi.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let s=i.get(n);return s||(s=new Gi(e,new th(e),n),i.set(n,s)),s}}Gi.INSTANCES=new WeakMap;class yn{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new th(e)}static forPath(e,n,r){if(e.length%2!==0)throw new G("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new yn(n,new We(n._delegate,r,new Y(e)))}static forKey(e,n,r){return new yn(n,new We(n._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new fo(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new fo(this.firestore,ZE(this._delegate,e))}catch(n){throw Ft(n,"collection()","DocumentReference.collection()")}}isEqual(e){return e=lt(e),e instanceof We?eI(this._delegate,e):!1}set(e,n){n=Pm("DocumentReference.set",n);try{return n?K0(this._delegate,e,n):K0(this._delegate,e)}catch(r){throw Ft(r,"setDoc()","DocumentReference.set()")}}update(e,n,...r){try{return arguments.length===1?H0(this._delegate,e):H0(this._delegate,e,n,...r)}catch(i){throw Ft(i,"updateDoc()","DocumentReference.update()")}}delete(){return TC(this._delegate)}onSnapshot(...e){const n=wI(e),r=EI(e,i=>new el(this.firestore,new ar(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return xm(this._delegate,n,r)}get(e){let n;return(e==null?void 0:e.source)==="cache"?n=_C(this._delegate):(e==null?void 0:e.source)==="server"?n=vC(this._delegate):n=yC(this._delegate),n.then(r=>new el(this.firestore,new ar(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new yn(this.firestore,e?this._delegate.withConverter(Gi.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function Ft(t,e,n){return t.message=t.message.replace(e,n),t}function wI(t){for(const e of t)if(typeof e=="object"&&!Ef(e))return e;return{}}function EI(t,e){var n,r;let i;return Ef(t[0])?i=t[0]:Ef(t[1])?i=t[1]:typeof t[0]=="function"?i={next:t[0],error:t[1],complete:t[2]}:i={next:t[1],error:t[2],complete:t[3]},{next:s=>{i.next&&i.next(e(s))},error:(n=i.error)===null||n===void 0?void 0:n.bind(i),complete:(r=i.complete)===null||r===void 0?void 0:r.bind(i)}}class el{constructor(e,n){this._firestore=e,this._delegate=n}get ref(){return new yn(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,n){return this._delegate.get(e,n)}isEqual(e){return pI(this._delegate,e._delegate)}}class tl extends el{data(e){const n=this._delegate.data(e);return this._delegate._converter||jb(n!==void 0),n}}class jt{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new th(e)}where(e,n,r){try{return new jt(this.firestore,wr(this._delegate,aC(e,n,r)))}catch(i){throw Ft(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,n){try{return new jt(this.firestore,wr(this._delegate,lC(e,n)))}catch(r){throw Ft(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new jt(this.firestore,wr(this._delegate,uC(e)))}catch(n){throw Ft(n,"limit()","Query.limit()")}}limitToLast(e){try{return new jt(this.firestore,wr(this._delegate,cC(e)))}catch(n){throw Ft(n,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new jt(this.firestore,wr(this._delegate,hC(...e)))}catch(n){throw Ft(n,"startAt()","Query.startAt()")}}startAfter(...e){try{return new jt(this.firestore,wr(this._delegate,dC(...e)))}catch(n){throw Ft(n,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new jt(this.firestore,wr(this._delegate,fC(...e)))}catch(n){throw Ft(n,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new jt(this.firestore,wr(this._delegate,pC(...e)))}catch(n){throw Ft(n,"endAt()","Query.endAt()")}}isEqual(e){return hm(this._delegate,e._delegate)}get(e){let n;return(e==null?void 0:e.source)==="cache"?n=EC(this._delegate):(e==null?void 0:e.source)==="server"?n=IC(this._delegate):n=wC(this._delegate),n.then(r=>new If(this.firestore,new Xr(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const n=wI(e),r=EI(e,i=>new If(this.firestore,new Xr(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return xm(this._delegate,n,r)}withConverter(e){return new jt(this.firestore,e?this._delegate.withConverter(Gi.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}class rk{constructor(e,n){this._firestore=e,this._delegate=n}get type(){return this._delegate.type}get doc(){return new tl(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class If{constructor(e,n){this._firestore=e,this._delegate=n}get query(){return new jt(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new tl(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(n=>new rk(this._firestore,n))}forEach(e,n){this._delegate.forEach(r=>{e.call(n,new tl(this._firestore,r))})}isEqual(e){return pI(this._delegate,e._delegate)}}class fo extends jt{constructor(e,n){super(e,n),this.firestore=e,this._delegate=n}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new yn(this.firestore,e):null}doc(e){try{return e===void 0?new yn(this.firestore,mc(this._delegate)):new yn(this.firestore,mc(this._delegate,e))}catch(n){throw Ft(n,"doc()","CollectionReference.doc()")}}add(e){return xC(this._delegate,e).then(n=>new yn(this.firestore,n))}isEqual(e){return eI(this._delegate,e._delegate)}withConverter(e){return new fo(this.firestore,e?this._delegate.withConverter(Gi.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function Pi(t){return Ee(t,We)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bm{constructor(...e){this._delegate=new Yr(...e)}static documentId(){return new bm(Be.keyField().canonicalString())}isEqual(e){return e=lt(e),e instanceof Yr?this._delegate._internalPath.isEqual(e._internalPath):!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wi{constructor(e){this._delegate=e}static serverTimestamp(){const e=kC();return e._methodName="FieldValue.serverTimestamp",new wi(e)}static delete(){const e=CC();return e._methodName="FieldValue.delete",new wi(e)}static arrayUnion(...e){const n=DC(...e);return n._methodName="FieldValue.arrayUnion",new wi(n)}static arrayRemove(...e){const n=NC(...e);return n._methodName="FieldValue.arrayRemove",new wi(n)}static increment(e){const n=VC(e);return n._methodName="FieldValue.increment",new wi(n)}isEqual(e){return this._delegate.isEqual(e._delegate)}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ik={Firestore:yI,GeoPoint:Wc,Timestamp:Ue,Blob:Za,Transaction:_I,WriteBatch:vI,DocumentReference:yn,DocumentSnapshot:el,Query:jt,QueryDocumentSnapshot:tl,QuerySnapshot:If,CollectionReference:fo,FieldPath:bm,FieldValue:wi,setLogLevel:nk,CACHE_SIZE_UNLIMITED:KR};function sk(t,e){t.INTERNAL.registerComponent(new Oi("firestore-compat",n=>{const r=n.getProvider("app-compat").getImmediate(),i=n.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},ik)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ok(t){sk(t,(e,n)=>new yI(e,n,new tk)),t.registerVersion(JC,ZC)}ok(ho);ho.apps.length||ho.initializeApp({apiKey:"AIzaSyCKyv3D-nJsLkWYxh5ZuFIP8qoB8SkgFv8",authDomain:"undanganku-56e72.firebaseapp.com",projectId:"undanganku-56e72",storageBucket:"undanganku-56e72.appspot.com",messagingSenderId:"805250040859",appId:"1:805250040859:web:45a329e288f04ba65ee4be",measurementId:"G-8JNP42398Q"});const Z0=ho.firestore(),ak=()=>{const[t,e]=ee.useState(""),[n,r]=ee.useState(""),[i,s,o]=zC(Z0.collection("messages").orderBy("createdAt","desc")),[l,u]=ee.useState([]),[c,f]=ee.useState(null),[m,v]=ee.useState(!1),R=async N=>{if(N.preventDefault(),!(!t.trim()||!n.trim())){try{await Z0.collection("messages").add({name:t,text:n,createdAt:ho.firestore.FieldValue.serverTimestamp()}),e(""),r(""),f("success"),v(!0),setTimeout(()=>{v(!1)},3e4)}catch(L){console.error("Error adding message: ",L),f("error")}setTimeout(()=>f(null),3e3)}};ee.useEffect(()=>{i&&u(i.slice(0,i.length))},[i]);const V=({messages:N})=>{const L=()=>{const C=[eP,tP,nP,rP,iP,sP],P=Math.floor(Math.random()*C.length);return C[P]};return T.jsx("div",{className:"max-h-72 overflow-y-auto w-full",children:N.map((C,P)=>{const x=P%2===0,d=L();return T.jsxs("div",{className:`chat ${x?"chat-start":"chat-end"} p-2 m-2`,children:[T.jsx("div",{className:"chat-image avatar",children:T.jsx("div",{className:"w-10",children:T.jsx(d,{className:"text-gray-500 w-8 h-8"})})}),T.jsx("div",{className:"chat-header",children:T.jsx("p",{className:"font-bold",children:C.name})}),T.jsx("div",{className:"chat-bubble",children:C.text})]},P)})})};return T.jsxs("div",{className:"flex flex-col items-center justify-center p-8 border bg-[#F4ECE8] border-gray-300 shadow-lg h-full w-full relative fade-in-up",children:[c==="success"&&T.jsx("div",{className:"absolute top-4 right-4 bg-green-500 text-white px-4 py-2 rounded shadow-md",children:"Ucapan berhasil dikirim 😆"}),c==="error"&&T.jsx("div",{className:"absolute top-4 right-4 bg-red-500 text-white px-4 py-2 rounded shadow-md",children:"Ucapan gagal dikirim 😓"}),T.jsxs("div",{className:"flex flex-col items-center justify-center text-center",children:[T.jsx("h1",{className:"text-3xl font-bold mb-5 font-playfair",children:"Kirim Ucapan"}),T.jsx("div",{className:"w-20 h-[1px] bg-black mb-5"}),T.jsxs("form",{onSubmit:R,className:"mb-8",children:[T.jsx("input",{type:"text",value:t,onChange:N=>e(N.target.value),placeholder:"Nama kamu ...",className:"w-full px-4 py-2 mb-4 rounded border border-gray-300 focus:outline-none focus:border-gray-400",maxLength:20,disabled:m}),T.jsx("textarea",{value:n,onChange:N=>r(N.target.value),placeholder:"Tulis pesan kamu...",className:"w-full px-4 py-2 mb-4 rounded border border-gray-300 focus:outline-none focus:border-gray-400",rows:"4",maxLength:100,disabled:m}),T.jsx("button",{type:"submit",className:"w-full px-4 py-2 bg-[#E0C9C2] text-white rounded hover:bg-gray-400 focus:outline-none",disabled:m,children:"Kirim"})]}),s&&T.jsx("p",{children:"Loading..."}),o&&T.jsxs("p",{children:["Error: ",o.message]}),T.jsx("h1",{className:"text-3xl font-bold mb-5 font-playfair",children:"Kumpulan Ucapan"}),T.jsx("div",{className:"w-20 h-[1px] bg-black mb-5"}),T.jsx(V,{messages:l})]})]})},lk="/undang-aku/assets/flower-journey-CAPiRJkO.jpg",II=ee.forwardRef((t,e)=>{const n=[T.jsxs(T.Fragment,{children:[T.jsx("p",{className:"mb-4",children:"Suatu siang, di balik tumpukan tugas kelompok matematika. Dipaksa bertukar suara. Soal demi soal merangkai pertemanan. Hingga terbiasa menjadi teman belajar. Namun tanpa suara. Hanya ada buku, kertas dan sedikit usaha untuk menyerahkan buku ke arah meja salah satu siswa yang sejajar dengannya. Hanya berjarak dua meja di kelas itu."}),T.jsx("p",{className:"mb-4",children:"Gadis itu melipat pojok kanan halaman menyerupai segitiga. Menandai bahwa halaman ini yang perlu diperhatikan. Menyelipkan secarik kertas. Berisikan “Aku tidak mengerti soal no. 15 dan 27. Bantu jelasin ya”. Menutup buku itu. Dan kemudian menyerahkan ke teman di sebelahnya dengan ucapaan “Kasih ke Thariq.”"}),T.jsx("p",{className:"mb-4",children:"Lelaki itu mencoret selebar kertas, mencurahkan isi kepala untuk menuntaskan pertanyaan yang dikirimkan kepadanya. kemudian ia melakukan hal yang sama. menyerahkan buku ke teman sebelahnya dan berbisik “Titip ke Sherly”"}),T.jsx("p",{className:"mb-4",children:"Begitulah pertemanan mereka hingga tamat SMA."})]}),T.jsxs(T.Fragment,{children:[T.jsx("h2",{className:"text-lg font-semibold mb-2",children:"Tahun 2016"}),T.jsx("p",{className:"mb-4",children:"Thariq meneruskan perkuliahan di ITB sedangkan sherly dihampiri kegalauan. UNPAD dengan biaya pribadi, atau STMIK Indonesia Padang dengan beasiswa."}),T.jsx("p",{className:"mb-4",children:"Gundah tersebut disampaikan pada pembina asramanya, Pak Yamin, yang akrab dipanggil “Ayah”. “Kalau di UNPAD, kalian akan sama-sama di Bandung, kemungkinan untuk bertemu lebih besar. Kalau UNPAD lebih baik menikah dengan biaya dari orang tua masing-masing.” Suara ayah lembut."}),T.jsx("p",{className:"mb-4",children:"Gemuruh hadir di dada sherly. Sama sekali tidak ada ia menyinggung nama Thariq dalam pertemuan itu. Apalagi ketika ia mendengar kalimat ‘menikah’. Rasanya ingin menyampaikan “Yah, kami hanya teman”."}),T.jsxs("p",{className:"mb-4",children:["Sepertinya ayah membaca kerutan di wajah gadis itu. Kemudian ayah melanjutkan ucapannya. “Ketika hendak Sidang Asrama kelas 12. ",T.jsx("i",{children:"Kan"})," ","teman-teman menuliskan nama yang dianggap melanggar aturan asrama. Ayah menemukan satu pengaduan untuk nama Sherly dan Thariq”"]})]}),T.jsxs(T.Fragment,{children:[T.jsx("p",{className:"mb-4",children:"Akhirnya Sherly memutuskan berkuliah di STMIK Indonesia Padang. Di tahun-tahun berikutnya cerita mereka samar. Nyaris hilang."}),T.jsx("h2",{className:"text-lg font-semibold mb-2",children:"Tahun 2020"}),T.jsx("p",{className:"mb-4",children:"Hanya ada cerita di beberapa bulan tahun 2020. Ketika Sherly meminta Thariq menjadi teman diskusi untuk Menyelesaikan Skripsinya."}),T.jsx("h2",{className:"text-lg font-semibold mb-2",children:"Pertengahan Tahun 2022"}),T.jsx("p",{className:"mb-4",children:"“Ly, mau jadi english speaking partner aku ngga?”. Pesan singkat itu dikirim Thariq tanpa basa basi."}),T.jsx("p",{className:"mb-4",children:"Mereka kembali menjadi teman belajar."}),T.jsx("h2",{className:"text-lg font-semibold mb-2",children:"Tahun 2023"}),T.jsx("p",{className:"mb-4",children:"Thariq mengutarakan keinginannya untuk memiliki seorang teman belajar seumur hidup."}),T.jsx("p",{className:"mb-4",children:"Gadis itu menolaknya. Ia masih memiliki mimpi untuk berkarir."}),T.jsx("p",{className:"mb-4",children:"Tahun itu juga, Thariq mulai merancang kurikulum belajar untuk Sherly. Memaksa belajar hingga larut malam."})]}),T.jsxs(T.Fragment,{children:[T.jsx("p",{className:"mb-4",children:"Sebelum tahun berakhir, mimpi itu menghampiri Sherly."}),T.jsx("p",{className:"mb-4",children:"Dan kemudian Thariq menyampaikan. “Aku ingin saling merawat agar terus bertumbuh seperti mawar merah yang tumbuh di dalam buku”"}),T.jsx("img",{src:lk,alt:"Flower Journey Image",className:"max-w-[150px] h-auto mx-auto"})]})];return T.jsx(T.Fragment,{children:n.map((r,i)=>T.jsxs("div",{ref:e,className:"flex flex-col items-center justify-center p-8 border bg-[#F4ECE8] border-gray-300 shadow-lg h-full w-full",children:[T.jsx("h1",{className:"text-3xl font-bold mb-2 font-playfair",children:"Our Journey"}),T.jsx("div",{className:"w-20 h-[1px] bg-gray-400 mb-2"}),T.jsx("div",{className:"bg-white p-6 rounded-lg shadow-lg max-w-2xl mx-auto mt-8 text-xs text-justify h-[552px] w-full",children:r},i),T.jsx("div",{className:"block absolute bottom-4 left-5 transform -translate-x-1/2 text-gray-600 text-sm pulse-animation",children:T.jsx("p",{children:"<<<"})}),T.jsx("div",{className:"block absolute bottom-4 right-5 transform -translate-x-1/2 text-gray-600 text-sm pulse-animation",children:T.jsx("p",{children:">>>"})})]},i))})});II.displayName="OurJourney";const uk="/undang-aku/assets/back-cover-CH91ZyXW.png",TI=ee.forwardRef((t,e)=>{const r=new URLSearchParams(window.location.search).get("sebagai");return T.jsxs("div",{ref:e,className:"relative flex flex-col items-center justify-center border bg-[#F4ECE8] border-gray-300 shadow-lg h-full w-full overflow-hidden",children:[T.jsxs("div",{className:"w-[340px] h-[695px] relative",children:[T.jsx(Yn.LazyLoadImage,{src:uk,alt:"Back Cover",effect:"opacity",className:"absolute inset-0 w-full h-full object-cover"}),T.jsx("div",{className:"absolute inset-0 flex flex-col",children:T.jsxs("div",{className:"pt-14 px-12",children:[T.jsx("h1",{className:"text-4xl font-bold mb-4 font-dancing",children:"Epilog"}),T.jsxs("p",{className:"text-sm font-montserrat",children:['"Semerbak ',T.jsx("i",{children:"atsiri"}),", ",T.jsx("i",{children:"linalol"}),", ",T.jsx("i",{children:"kumarin"}),","," ",T.jsx("i",{children:"etil vanilin"}),", dan ",T.jsx("i",{children:"benzil asetat"})," telah hadir. Di lembar-lembar berikutnya.",T.jsx("b",{children:r?" "+r+", ":""}),r?"kaulah ":"Kaulah ",'bunganya. Aromamu telah dipanggil untuk menyempurnakan cerita di halaman buku ini."']})]})})]}),T.jsx("div",{className:"block absolute bottom-4 left-5 transform -translate-x-1/2 text-gray-600 text-sm pulse-animation",children:T.jsx("p",{children:"<<<"})})]})});TI.displayName="BackCover";const ck="/undang-aku/assets/page-flip-7jPrVe61.mp3",hk="/undang-aku/assets/photo-1-Bs8xqIuc.jpg",dk="/undang-aku/assets/photo-2-fBxeKpUP.jpg",fk="/undang-aku/assets/photo-3-5foJCiM7.jpg",pk="/undang-aku/assets/photo-4-CmtkXt3U.jpg",mk="/undang-aku/assets/photo-5-DkOGhZ3v.jpg",xI=ee.forwardRef((t,e)=>T.jsxs("div",{ref:e,className:"flex flex-col items-center justify-center p-8 bg-white border-gray-300 shadow-lg h-full w-full",children:[T.jsxs("div",{className:"flex flex-col items-center justify-center text-center mb-8",children:[T.jsx("h1",{className:"text-3xl font-bold mb-5 font-playfair",children:"Photo Gallery"}),T.jsx("div",{className:"w-20 h-[1px] bg-gray-400 mb-5"})]}),T.jsxs("div",{className:"grid grid-cols-12 gap-4 w-full",children:[T.jsx("div",{className:"col-span-5",children:T.jsx(Yn.LazyLoadImage,{src:hk,alt:"Gallery Image 1",className:"w-full h-32 object-cover shadow-md",effect:"opacity"})}),T.jsx("div",{className:"col-span-7",children:T.jsx(Yn.LazyLoadImage,{src:dk,alt:"Gallery Image 2",className:"w-full h-32 object-cover shadow-md",style:{objectPosition:"center 20%"},effect:"opacity"})}),T.jsx("div",{className:"col-span-7",children:T.jsx(Yn.LazyLoadImage,{src:fk,alt:"Gallery Image 3",className:"w-full h-48 object-cover shadow-md",effect:"opacity"})}),T.jsx("div",{className:"col-span-5",children:T.jsx(Yn.LazyLoadImage,{src:pk,alt:"Gallery Image 4",className:"w-full h-48 object-cover shadow-md",effect:"opacity"})}),T.jsx("div",{className:"col-span-12 flex justify-center",children:T.jsx(Yn.LazyLoadImage,{src:mk,alt:"Gallery Image 5",className:"w-72 h-32 object-cover shadow-md",effect:"opacity"})})]}),T.jsx("div",{className:"block absolute bottom-4 left-5 transform -translate-x-1/2 text-gray-600 text-sm pulse-animation",children:T.jsx("p",{children:"<<<"})}),T.jsx("div",{className:"block absolute bottom-4 right-5 transform -translate-x-1/2 text-gray-600 text-sm pulse-animation",children:T.jsx("p",{children:">>>"})})]}));xI.displayName="PhotoGallery";function gk(){const[t,e]=ee.useState(!1),[n,r]=ee.useState(1),[i,s]=ee.useState(0),o=ee.useRef(null),l=ee.useRef(null),u=()=>{e(!t)},c=m=>{o.current&&o.current.play(),r(m.data+1)},f=()=>{l.current&&s(l.current.pageFlip().getPageCount())};return T.jsxs("div",{className:"grid place-items-center h-screen gap-2",children:[!t&&T.jsxs("div",{className:"fade-in-up",children:[T.jsxs(LS,{width:340,height:695,maxShadowOpacity:.5,showCover:!0,onFlip:m=>c(m),ref:l,onInit:f,children:[T.jsx(yw,{}),T.jsx(ww,{}),T.jsx(Ew,{}),T.jsx(Sw,{}),T.jsx(Pw,{}),T.jsx(bw,{}),T.jsx(II,{}),T.jsx(Aw,{}),T.jsx(xI,{}),T.jsx(TI,{})]}),T.jsxs("div",{className:"flex justify-center items-center mt-4 text-sm font-bold text-gray-800",children:["Halaman ",n," dari ",i]})]}),T.jsxs("div",{className:"flex flex-col items-center",children:[T.jsx("button",{className:"btn btn-wide bg-gray-200 mb-10 transition-transform transform hover:scale-105 hover:bg-gray-300",onClick:u,children:t?"Lihat Undangan":"Kirim Ucapan"}),t&&T.jsx("div",{children:T.jsx(ak,{})})]}),T.jsx("audio",{ref:o,src:ck,preload:"auto"})]})}function yk(t){return dn({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M22 8a.76.76 0 0 0 0-.21v-.08a.77.77 0 0 0-.07-.16.35.35 0 0 0-.05-.08l-.1-.13-.08-.06-.12-.09-9-5a1 1 0 0 0-1 0l-9 5-.09.07-.11.08a.41.41 0 0 0-.07.11.39.39 0 0 0-.08.1.59.59 0 0 0-.06.14.3.3 0 0 0 0 .1A.76.76 0 0 0 2 8v8a1 1 0 0 0 .52.87l9 5a.75.75 0 0 0 .13.06h.1a1.06 1.06 0 0 0 .5 0h.1l.14-.06 9-5A1 1 0 0 0 22 16V8zm-10 3.87L5.06 8l2.76-1.52 6.83 3.9zm0-7.72L18.94 8 16.7 9.25 9.87 5.34zM4 9.7l7 3.92v5.68l-7-3.89zm9 9.6v-5.68l3-1.68V15l2-1v-3.18l2-1.11v5.7z"},child:[]}]})(t)}const _k=()=>{const[t,e]=ee.useState(""),n=ee.useRef(),r=RS();return ee.useEffect(()=>{const s=new URLSearchParams(r.search).get("sebagai");s&&e(s),n.current&&n.current.showModal()},[r]),T.jsx("dialog",{ref:n,id:"my_modal_5",className:"modal fixed inset-x-0 bg-black bg-opacity-80 flex justify-center items-start pt-14",children:T.jsxs("div",{className:"modal-box bg-white bg-opacity-60 backdrop-blur-sm p-4 rounded-lg shadow-md max-w-xs w-full",children:[T.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[T.jsx(yk,{className:"text-2xl"}),T.jsxs("h3",{className:"font-bold text-xl",children:["Hai, ",t||"Orang Baik","!"]})]}),T.jsxs("p",{className:"py-2 text-sm font-medium",children:["Kamu dikirimin buku nih.",T.jsx("br",{})," Selamat membaca ya..."]}),T.jsx("div",{className:"flex justify-center mt-4",children:T.jsx("form",{method:"dialog",children:T.jsx("button",{className:"btn btn-sm text-sm btn-wide",children:"Terima"})})})]})})};function vk(t){return dn({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M6 17m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0"},child:[]},{tag:"path",attr:{d:"M14.42 14.45a3 3 0 1 0 4.138 4.119"},child:[]},{tag:"path",attr:{d:"M9 17v-8m0 -4v-1h10v11"},child:[]},{tag:"path",attr:{d:"M12 8h7"},child:[]},{tag:"path",attr:{d:"M3 3l18 18"},child:[]}]})(t)}function wk(t){return dn({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M3 17a3 3 0 1 0 6 0a3 3 0 0 0 -6 0"},child:[]},{tag:"path",attr:{d:"M13 17a3 3 0 1 0 6 0a3 3 0 0 0 -6 0"},child:[]},{tag:"path",attr:{d:"M9 17v-13h10v13"},child:[]},{tag:"path",attr:{d:"M9 8h10"},child:[]}]})(t)}const Ek="/undang-aku/assets/Together_We_Fly-Bo4iheMS.mp3",Ik=()=>{const[t,e]=ee.useState(!1),[n,r]=ee.useState(!1),i=ee.useRef(null),s=()=>{e(!t),i.current&&(i.current.muted=!t)},o=()=>{i.current&&!n&&i.current.play().then(()=>r(!0)).catch(l=>{console.log("Playback was prevented by the browser",l)})};return ee.useEffect(()=>(document.addEventListener("click",o),document.addEventListener("keydown",o),()=>{document.removeEventListener("click",o),document.removeEventListener("keydown",o)}),[n]),T.jsxs("div",{className:"absolute top-4 right-4 z-50 flex items-center",children:[T.jsx("audio",{ref:i,src:Ek,loop:!0}),T.jsx("button",{onClick:s,className:"bg-gray-700 text-white rounded-full p-2 flex items-center justify-center shadow-md",children:t?T.jsx(vk,{size:24}):T.jsx(wk,{size:24})})]})},Tk="/undang-aku/assets/wood-background-CG-hnHMo.jpg";function xk(){return T.jsx(NS,{children:T.jsxs("div",{className:"App min-h-screen bg-cover bg-center bg-no-repeat",style:{backgroundImage:`url(${Tk})`},children:[T.jsx(_k,{}),T.jsx(gk,{}),T.jsx(Ik,{})]})})}Yh.createRoot(document.getElementById("root")).render(T.jsx(Qt.StrictMode,{children:T.jsx(xk,{})}));
