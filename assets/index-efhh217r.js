function UI(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var $I=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function qI(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var q_={exports:{}},Lu={},G_={exports:{}},te={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ea=Symbol.for("react.element"),GI=Symbol.for("react.portal"),WI=Symbol.for("react.fragment"),KI=Symbol.for("react.strict_mode"),HI=Symbol.for("react.profiler"),QI=Symbol.for("react.provider"),YI=Symbol.for("react.context"),XI=Symbol.for("react.forward_ref"),JI=Symbol.for("react.suspense"),ZI=Symbol.for("react.memo"),eT=Symbol.for("react.lazy"),rg=Symbol.iterator;function tT(t){return t===null||typeof t!="object"?null:(t=rg&&t[rg]||t["@@iterator"],typeof t=="function"?t:null)}var W_={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},K_=Object.assign,H_={};function Ns(t,e,n){this.props=t,this.context=e,this.refs=H_,this.updater=n||W_}Ns.prototype.isReactComponent={};Ns.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Ns.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Q_(){}Q_.prototype=Ns.prototype;function Jd(t,e,n){this.props=t,this.context=e,this.refs=H_,this.updater=n||W_}var Zd=Jd.prototype=new Q_;Zd.constructor=Jd;K_(Zd,Ns.prototype);Zd.isPureReactComponent=!0;var ig=Array.isArray,Y_=Object.prototype.hasOwnProperty,ef={current:null},X_={key:!0,ref:!0,__self:!0,__source:!0};function J_(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)Y_.call(e,r)&&!X_.hasOwnProperty(r)&&(i[r]=e[r]);var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){for(var u=Array(l),c=0;c<l;c++)u[c]=arguments[c+2];i.children=u}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)i[r]===void 0&&(i[r]=l[r]);return{$$typeof:Ea,type:t,key:s,ref:o,props:i,_owner:ef.current}}function nT(t,e){return{$$typeof:Ea,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function tf(t){return typeof t=="object"&&t!==null&&t.$$typeof===Ea}function rT(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var sg=/\/+/g;function qc(t,e){return typeof t=="object"&&t!==null&&t.key!=null?rT(""+t.key):e.toString(36)}function Sl(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Ea:case GI:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+qc(o,0):r,ig(i)?(n="",t!=null&&(n=t.replace(sg,"$&/")+"/"),Sl(i,e,n,"",function(c){return c})):i!=null&&(tf(i)&&(i=nT(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(sg,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",ig(t))for(var l=0;l<t.length;l++){s=t[l];var u=r+qc(s,l);o+=Sl(s,e,n,u,i)}else if(u=tT(t),typeof u=="function")for(t=u.call(t),l=0;!(s=t.next()).done;)s=s.value,u=r+qc(s,l++),o+=Sl(s,e,n,u,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function nl(t,e,n){if(t==null)return t;var r=[],i=0;return Sl(t,r,"","",function(s){return e.call(n,s,i++)}),r}function iT(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var wt={current:null},Pl={transition:null},sT={ReactCurrentDispatcher:wt,ReactCurrentBatchConfig:Pl,ReactCurrentOwner:ef};function Z_(){throw Error("act(...) is not supported in production builds of React.")}te.Children={map:nl,forEach:function(t,e,n){nl(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return nl(t,function(){e++}),e},toArray:function(t){return nl(t,function(e){return e})||[]},only:function(t){if(!tf(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};te.Component=Ns;te.Fragment=WI;te.Profiler=HI;te.PureComponent=Jd;te.StrictMode=KI;te.Suspense=JI;te.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=sT;te.act=Z_;te.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=K_({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=ef.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(u in e)Y_.call(e,u)&&!X_.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&l!==void 0?l[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){l=Array(u);for(var c=0;c<u;c++)l[c]=arguments[c+2];r.children=l}return{$$typeof:Ea,type:t.type,key:i,ref:s,props:r,_owner:o}};te.createContext=function(t){return t={$$typeof:YI,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:QI,_context:t},t.Consumer=t};te.createElement=J_;te.createFactory=function(t){var e=J_.bind(null,t);return e.type=t,e};te.createRef=function(){return{current:null}};te.forwardRef=function(t){return{$$typeof:XI,render:t}};te.isValidElement=tf;te.lazy=function(t){return{$$typeof:eT,_payload:{_status:-1,_result:t},_init:iT}};te.memo=function(t,e){return{$$typeof:ZI,type:t,compare:e===void 0?null:e}};te.startTransition=function(t){var e=Pl.transition;Pl.transition={};try{t()}finally{Pl.transition=e}};te.unstable_act=Z_;te.useCallback=function(t,e){return wt.current.useCallback(t,e)};te.useContext=function(t){return wt.current.useContext(t)};te.useDebugValue=function(){};te.useDeferredValue=function(t){return wt.current.useDeferredValue(t)};te.useEffect=function(t,e){return wt.current.useEffect(t,e)};te.useId=function(){return wt.current.useId()};te.useImperativeHandle=function(t,e,n){return wt.current.useImperativeHandle(t,e,n)};te.useInsertionEffect=function(t,e){return wt.current.useInsertionEffect(t,e)};te.useLayoutEffect=function(t,e){return wt.current.useLayoutEffect(t,e)};te.useMemo=function(t,e){return wt.current.useMemo(t,e)};te.useReducer=function(t,e,n){return wt.current.useReducer(t,e,n)};te.useRef=function(t){return wt.current.useRef(t)};te.useState=function(t){return wt.current.useState(t)};te.useSyncExternalStore=function(t,e,n){return wt.current.useSyncExternalStore(t,e,n)};te.useTransition=function(){return wt.current.useTransition()};te.version="18.3.1";G_.exports=te;var H=G_.exports;const xt=qI(H),oT=UI({__proto__:null,default:xt},[H]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aT=H,lT=Symbol.for("react.element"),uT=Symbol.for("react.fragment"),cT=Object.prototype.hasOwnProperty,hT=aT.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,dT={key:!0,ref:!0,__self:!0,__source:!0};function e0(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)cT.call(e,r)&&!dT.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:lT,type:t,key:s,ref:o,props:i,_owner:hT.current}}Lu.Fragment=uT;Lu.jsx=e0;Lu.jsxs=e0;q_.exports=Lu;var b=q_.exports,Ph={},t0={exports:{}},Bt={},n0={exports:{}},r0={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(G,X){var ee=G.length;G.push(X);e:for(;0<ee;){var Se=ee-1>>>1,de=G[Se];if(0<i(de,X))G[Se]=X,G[ee]=de,ee=Se;else break e}}function n(G){return G.length===0?null:G[0]}function r(G){if(G.length===0)return null;var X=G[0],ee=G.pop();if(ee!==X){G[0]=ee;e:for(var Se=0,de=G.length,Ve=de>>>1;Se<Ve;){var yn=2*(Se+1)-1,_n=G[yn],vn=yn+1,wn=G[vn];if(0>i(_n,ee))vn<de&&0>i(wn,_n)?(G[Se]=wn,G[vn]=ee,Se=vn):(G[Se]=_n,G[yn]=ee,Se=yn);else if(vn<de&&0>i(wn,ee))G[Se]=wn,G[vn]=ee,Se=vn;else break e}}return X}function i(G,X){var ee=G.sortIndex-X.sortIndex;return ee!==0?ee:G.id-X.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var u=[],c=[],f=1,m=null,v=3,A=!1,k=!1,N=!1,L=typeof setTimeout=="function"?setTimeout:null,R=typeof clearTimeout=="function"?clearTimeout:null,S=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function T(G){for(var X=n(c);X!==null;){if(X.callback===null)r(c);else if(X.startTime<=G)r(c),X.sortIndex=X.expirationTime,e(u,X);else break;X=n(c)}}function d(G){if(N=!1,T(G),!k)if(n(u)!==null)k=!0,qs(g);else{var X=n(c);X!==null&&gn(d,X.startTime-G)}}function g(G,X){k=!1,N&&(N=!1,R(y),y=-1),A=!0;var ee=v;try{for(T(X),m=n(u);m!==null&&(!(m.expirationTime>X)||G&&!C());){var Se=m.callback;if(typeof Se=="function"){m.callback=null,v=m.priorityLevel;var de=Se(m.expirationTime<=X);X=t.unstable_now(),typeof de=="function"?m.callback=de:m===n(u)&&r(u),T(X)}else r(u);m=n(u)}if(m!==null)var Ve=!0;else{var yn=n(c);yn!==null&&gn(d,yn.startTime-X),Ve=!1}return Ve}finally{m=null,v=ee,A=!1}}var I=!1,_=null,y=-1,w=5,x=-1;function C(){return!(t.unstable_now()-x<w)}function D(){if(_!==null){var G=t.unstable_now();x=G;var X=!0;try{X=_(!0,G)}finally{X?P():(I=!1,_=null)}}else I=!1}var P;if(typeof S=="function")P=function(){S(D)};else if(typeof MessageChannel<"u"){var xe=new MessageChannel,Dt=xe.port2;xe.port1.onmessage=D,P=function(){Dt.postMessage(null)}}else P=function(){L(D,0)};function qs(G){_=G,I||(I=!0,P())}function gn(G,X){y=L(function(){G(t.unstable_now())},X)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(G){G.callback=null},t.unstable_continueExecution=function(){k||A||(k=!0,qs(g))},t.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):w=0<G?Math.floor(1e3/G):5},t.unstable_getCurrentPriorityLevel=function(){return v},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(G){switch(v){case 1:case 2:case 3:var X=3;break;default:X=v}var ee=v;v=X;try{return G()}finally{v=ee}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(G,X){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var ee=v;v=G;try{return X()}finally{v=ee}},t.unstable_scheduleCallback=function(G,X,ee){var Se=t.unstable_now();switch(typeof ee=="object"&&ee!==null?(ee=ee.delay,ee=typeof ee=="number"&&0<ee?Se+ee:Se):ee=Se,G){case 1:var de=-1;break;case 2:de=250;break;case 5:de=1073741823;break;case 4:de=1e4;break;default:de=5e3}return de=ee+de,G={id:f++,callback:X,priorityLevel:G,startTime:ee,expirationTime:de,sortIndex:-1},ee>Se?(G.sortIndex=ee,e(c,G),n(u)===null&&G===n(c)&&(N?(R(y),y=-1):N=!0,gn(d,ee-Se))):(G.sortIndex=de,e(u,G),k||A||(k=!0,qs(g))),G},t.unstable_shouldYield=C,t.unstable_wrapCallback=function(G){var X=v;return function(){var ee=v;v=X;try{return G.apply(this,arguments)}finally{v=ee}}}})(r0);n0.exports=r0;var fT=n0.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pT=H,Ot=fT;function z(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i0=new Set,Uo={};function vi(t,e){us(t,e),us(t+"Capture",e)}function us(t,e){for(Uo[t]=e,t=0;t<e.length;t++)i0.add(e[t])}var bn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ah=Object.prototype.hasOwnProperty,mT=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,og={},ag={};function gT(t){return Ah.call(ag,t)?!0:Ah.call(og,t)?!1:mT.test(t)?ag[t]=!0:(og[t]=!0,!1)}function yT(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function _T(t,e,n,r){if(e===null||typeof e>"u"||yT(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Et(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var nt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){nt[t]=new Et(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];nt[e]=new Et(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){nt[t]=new Et(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){nt[t]=new Et(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){nt[t]=new Et(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){nt[t]=new Et(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){nt[t]=new Et(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){nt[t]=new Et(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){nt[t]=new Et(t,5,!1,t.toLowerCase(),null,!1,!1)});var nf=/[\-:]([a-z])/g;function rf(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(nf,rf);nt[e]=new Et(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(nf,rf);nt[e]=new Et(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(nf,rf);nt[e]=new Et(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){nt[t]=new Et(t,1,!1,t.toLowerCase(),null,!1,!1)});nt.xlinkHref=new Et("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){nt[t]=new Et(t,1,!1,t.toLowerCase(),null,!0,!0)});function sf(t,e,n,r){var i=nt.hasOwnProperty(e)?nt[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(_T(e,n,i,r)&&(n=null),r||i===null?gT(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Ln=pT.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,rl=Symbol.for("react.element"),Ui=Symbol.for("react.portal"),$i=Symbol.for("react.fragment"),of=Symbol.for("react.strict_mode"),Rh=Symbol.for("react.profiler"),s0=Symbol.for("react.provider"),o0=Symbol.for("react.context"),af=Symbol.for("react.forward_ref"),Ch=Symbol.for("react.suspense"),bh=Symbol.for("react.suspense_list"),lf=Symbol.for("react.memo"),Kn=Symbol.for("react.lazy"),a0=Symbol.for("react.offscreen"),lg=Symbol.iterator;function so(t){return t===null||typeof t!="object"?null:(t=lg&&t[lg]||t["@@iterator"],typeof t=="function"?t:null)}var Ce=Object.assign,Gc;function vo(t){if(Gc===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Gc=e&&e[1]||""}return`
`+Gc+t}var Wc=!1;function Kc(t,e){if(!t||Wc)return"";Wc=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,l=s.length-1;1<=o&&0<=l&&i[o]!==s[l];)l--;for(;1<=o&&0<=l;o--,l--)if(i[o]!==s[l]){if(o!==1||l!==1)do if(o--,l--,0>l||i[o]!==s[l]){var u=`
`+i[o].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=o&&0<=l);break}}}finally{Wc=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?vo(t):""}function vT(t){switch(t.tag){case 5:return vo(t.type);case 16:return vo("Lazy");case 13:return vo("Suspense");case 19:return vo("SuspenseList");case 0:case 2:case 15:return t=Kc(t.type,!1),t;case 11:return t=Kc(t.type.render,!1),t;case 1:return t=Kc(t.type,!0),t;default:return""}}function kh(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case $i:return"Fragment";case Ui:return"Portal";case Rh:return"Profiler";case of:return"StrictMode";case Ch:return"Suspense";case bh:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case o0:return(t.displayName||"Context")+".Consumer";case s0:return(t._context.displayName||"Context")+".Provider";case af:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case lf:return e=t.displayName||null,e!==null?e:kh(t.type)||"Memo";case Kn:e=t._payload,t=t._init;try{return kh(t(e))}catch{}}return null}function wT(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return kh(e);case 8:return e===of?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function dr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function l0(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function ET(t){var e=l0(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function il(t){t._valueTracker||(t._valueTracker=ET(t))}function u0(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=l0(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Wl(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Dh(t,e){var n=e.checked;return Ce({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function ug(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=dr(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function c0(t,e){e=e.checked,e!=null&&sf(t,"checked",e,!1)}function Nh(t,e){c0(t,e);var n=dr(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Vh(t,e.type,n):e.hasOwnProperty("defaultValue")&&Vh(t,e.type,dr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function cg(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Vh(t,e,n){(e!=="number"||Wl(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var wo=Array.isArray;function ts(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+dr(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Mh(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(z(91));return Ce({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function hg(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(z(92));if(wo(n)){if(1<n.length)throw Error(z(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:dr(n)}}function h0(t,e){var n=dr(e.value),r=dr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function dg(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function d0(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Lh(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?d0(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var sl,f0=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(sl=sl||document.createElement("div"),sl.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=sl.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function $o(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Ao={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},IT=["Webkit","ms","Moz","O"];Object.keys(Ao).forEach(function(t){IT.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Ao[e]=Ao[t]})});function p0(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Ao.hasOwnProperty(t)&&Ao[t]?(""+e).trim():e+"px"}function m0(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=p0(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var TT=Ce({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Oh(t,e){if(e){if(TT[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(z(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(z(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(z(61))}if(e.style!=null&&typeof e.style!="object")throw Error(z(62))}}function Fh(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Bh=null;function uf(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var jh=null,ns=null,rs=null;function fg(t){if(t=xa(t)){if(typeof jh!="function")throw Error(z(280));var e=t.stateNode;e&&(e=zu(e),jh(t.stateNode,t.type,e))}}function g0(t){ns?rs?rs.push(t):rs=[t]:ns=t}function y0(){if(ns){var t=ns,e=rs;if(rs=ns=null,fg(t),e)for(t=0;t<e.length;t++)fg(e[t])}}function _0(t,e){return t(e)}function v0(){}var Hc=!1;function w0(t,e,n){if(Hc)return t(e,n);Hc=!0;try{return _0(t,e,n)}finally{Hc=!1,(ns!==null||rs!==null)&&(v0(),y0())}}function qo(t,e){var n=t.stateNode;if(n===null)return null;var r=zu(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(z(231,e,typeof n));return n}var zh=!1;if(bn)try{var oo={};Object.defineProperty(oo,"passive",{get:function(){zh=!0}}),window.addEventListener("test",oo,oo),window.removeEventListener("test",oo,oo)}catch{zh=!1}function xT(t,e,n,r,i,s,o,l,u){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(f){this.onError(f)}}var Ro=!1,Kl=null,Hl=!1,Uh=null,ST={onError:function(t){Ro=!0,Kl=t}};function PT(t,e,n,r,i,s,o,l,u){Ro=!1,Kl=null,xT.apply(ST,arguments)}function AT(t,e,n,r,i,s,o,l,u){if(PT.apply(this,arguments),Ro){if(Ro){var c=Kl;Ro=!1,Kl=null}else throw Error(z(198));Hl||(Hl=!0,Uh=c)}}function wi(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function E0(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function pg(t){if(wi(t)!==t)throw Error(z(188))}function RT(t){var e=t.alternate;if(!e){if(e=wi(t),e===null)throw Error(z(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return pg(i),t;if(s===r)return pg(i),e;s=s.sibling}throw Error(z(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o){for(l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o)throw Error(z(189))}}if(n.alternate!==r)throw Error(z(190))}if(n.tag!==3)throw Error(z(188));return n.stateNode.current===n?t:e}function I0(t){return t=RT(t),t!==null?T0(t):null}function T0(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=T0(t);if(e!==null)return e;t=t.sibling}return null}var x0=Ot.unstable_scheduleCallback,mg=Ot.unstable_cancelCallback,CT=Ot.unstable_shouldYield,bT=Ot.unstable_requestPaint,Me=Ot.unstable_now,kT=Ot.unstable_getCurrentPriorityLevel,cf=Ot.unstable_ImmediatePriority,S0=Ot.unstable_UserBlockingPriority,Ql=Ot.unstable_NormalPriority,DT=Ot.unstable_LowPriority,P0=Ot.unstable_IdlePriority,Ou=null,cn=null;function NT(t){if(cn&&typeof cn.onCommitFiberRoot=="function")try{cn.onCommitFiberRoot(Ou,t,void 0,(t.current.flags&128)===128)}catch{}}var en=Math.clz32?Math.clz32:LT,VT=Math.log,MT=Math.LN2;function LT(t){return t>>>=0,t===0?32:31-(VT(t)/MT|0)|0}var ol=64,al=4194304;function Eo(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Yl(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var l=o&~i;l!==0?r=Eo(l):(s&=o,s!==0&&(r=Eo(s)))}else o=n&~i,o!==0?r=Eo(o):s!==0&&(r=Eo(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-en(e),i=1<<n,r|=t[n],e&=~i;return r}function OT(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function FT(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-en(s),l=1<<o,u=i[o];u===-1?(!(l&n)||l&r)&&(i[o]=OT(l,e)):u<=e&&(t.expiredLanes|=l),s&=~l}}function $h(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function A0(){var t=ol;return ol<<=1,!(ol&4194240)&&(ol=64),t}function Qc(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Ia(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-en(e),t[e]=n}function BT(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-en(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function hf(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-en(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var ce=0;function R0(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var C0,df,b0,k0,D0,qh=!1,ll=[],nr=null,rr=null,ir=null,Go=new Map,Wo=new Map,Qn=[],jT="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function gg(t,e){switch(t){case"focusin":case"focusout":nr=null;break;case"dragenter":case"dragleave":rr=null;break;case"mouseover":case"mouseout":ir=null;break;case"pointerover":case"pointerout":Go.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Wo.delete(e.pointerId)}}function ao(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=xa(e),e!==null&&df(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function zT(t,e,n,r,i){switch(e){case"focusin":return nr=ao(nr,t,e,n,r,i),!0;case"dragenter":return rr=ao(rr,t,e,n,r,i),!0;case"mouseover":return ir=ao(ir,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return Go.set(s,ao(Go.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Wo.set(s,ao(Wo.get(s)||null,t,e,n,r,i)),!0}return!1}function N0(t){var e=Hr(t.target);if(e!==null){var n=wi(e);if(n!==null){if(e=n.tag,e===13){if(e=E0(n),e!==null){t.blockedOn=e,D0(t.priority,function(){b0(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Al(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Gh(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Bh=r,n.target.dispatchEvent(r),Bh=null}else return e=xa(n),e!==null&&df(e),t.blockedOn=n,!1;e.shift()}return!0}function yg(t,e,n){Al(t)&&n.delete(e)}function UT(){qh=!1,nr!==null&&Al(nr)&&(nr=null),rr!==null&&Al(rr)&&(rr=null),ir!==null&&Al(ir)&&(ir=null),Go.forEach(yg),Wo.forEach(yg)}function lo(t,e){t.blockedOn===e&&(t.blockedOn=null,qh||(qh=!0,Ot.unstable_scheduleCallback(Ot.unstable_NormalPriority,UT)))}function Ko(t){function e(i){return lo(i,t)}if(0<ll.length){lo(ll[0],t);for(var n=1;n<ll.length;n++){var r=ll[n];r.blockedOn===t&&(r.blockedOn=null)}}for(nr!==null&&lo(nr,t),rr!==null&&lo(rr,t),ir!==null&&lo(ir,t),Go.forEach(e),Wo.forEach(e),n=0;n<Qn.length;n++)r=Qn[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Qn.length&&(n=Qn[0],n.blockedOn===null);)N0(n),n.blockedOn===null&&Qn.shift()}var is=Ln.ReactCurrentBatchConfig,Xl=!0;function $T(t,e,n,r){var i=ce,s=is.transition;is.transition=null;try{ce=1,ff(t,e,n,r)}finally{ce=i,is.transition=s}}function qT(t,e,n,r){var i=ce,s=is.transition;is.transition=null;try{ce=4,ff(t,e,n,r)}finally{ce=i,is.transition=s}}function ff(t,e,n,r){if(Xl){var i=Gh(t,e,n,r);if(i===null)sh(t,e,r,Jl,n),gg(t,r);else if(zT(i,t,e,n,r))r.stopPropagation();else if(gg(t,r),e&4&&-1<jT.indexOf(t)){for(;i!==null;){var s=xa(i);if(s!==null&&C0(s),s=Gh(t,e,n,r),s===null&&sh(t,e,r,Jl,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else sh(t,e,r,null,n)}}var Jl=null;function Gh(t,e,n,r){if(Jl=null,t=uf(r),t=Hr(t),t!==null)if(e=wi(t),e===null)t=null;else if(n=e.tag,n===13){if(t=E0(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Jl=t,null}function V0(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(kT()){case cf:return 1;case S0:return 4;case Ql:case DT:return 16;case P0:return 536870912;default:return 16}default:return 16}}var Zn=null,pf=null,Rl=null;function M0(){if(Rl)return Rl;var t,e=pf,n=e.length,r,i="value"in Zn?Zn.value:Zn.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return Rl=i.slice(t,1<r?1-r:void 0)}function Cl(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function ul(){return!0}function _g(){return!1}function jt(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(s):s[l]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?ul:_g,this.isPropagationStopped=_g,this}return Ce(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ul)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ul)},persist:function(){},isPersistent:ul}),e}var Vs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},mf=jt(Vs),Ta=Ce({},Vs,{view:0,detail:0}),GT=jt(Ta),Yc,Xc,uo,Fu=Ce({},Ta,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:gf,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==uo&&(uo&&t.type==="mousemove"?(Yc=t.screenX-uo.screenX,Xc=t.screenY-uo.screenY):Xc=Yc=0,uo=t),Yc)},movementY:function(t){return"movementY"in t?t.movementY:Xc}}),vg=jt(Fu),WT=Ce({},Fu,{dataTransfer:0}),KT=jt(WT),HT=Ce({},Ta,{relatedTarget:0}),Jc=jt(HT),QT=Ce({},Vs,{animationName:0,elapsedTime:0,pseudoElement:0}),YT=jt(QT),XT=Ce({},Vs,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),JT=jt(XT),ZT=Ce({},Vs,{data:0}),wg=jt(ZT),ex={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},tx={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},nx={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function rx(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=nx[t])?!!e[t]:!1}function gf(){return rx}var ix=Ce({},Ta,{key:function(t){if(t.key){var e=ex[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Cl(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?tx[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:gf,charCode:function(t){return t.type==="keypress"?Cl(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Cl(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),sx=jt(ix),ox=Ce({},Fu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Eg=jt(ox),ax=Ce({},Ta,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:gf}),lx=jt(ax),ux=Ce({},Vs,{propertyName:0,elapsedTime:0,pseudoElement:0}),cx=jt(ux),hx=Ce({},Fu,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),dx=jt(hx),fx=[9,13,27,32],yf=bn&&"CompositionEvent"in window,Co=null;bn&&"documentMode"in document&&(Co=document.documentMode);var px=bn&&"TextEvent"in window&&!Co,L0=bn&&(!yf||Co&&8<Co&&11>=Co),Ig=" ",Tg=!1;function O0(t,e){switch(t){case"keyup":return fx.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function F0(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var qi=!1;function mx(t,e){switch(t){case"compositionend":return F0(e);case"keypress":return e.which!==32?null:(Tg=!0,Ig);case"textInput":return t=e.data,t===Ig&&Tg?null:t;default:return null}}function gx(t,e){if(qi)return t==="compositionend"||!yf&&O0(t,e)?(t=M0(),Rl=pf=Zn=null,qi=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return L0&&e.locale!=="ko"?null:e.data;default:return null}}var yx={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function xg(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!yx[t.type]:e==="textarea"}function B0(t,e,n,r){g0(r),e=Zl(e,"onChange"),0<e.length&&(n=new mf("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var bo=null,Ho=null;function _x(t){Y0(t,0)}function Bu(t){var e=Ki(t);if(u0(e))return t}function vx(t,e){if(t==="change")return e}var j0=!1;if(bn){var Zc;if(bn){var eh="oninput"in document;if(!eh){var Sg=document.createElement("div");Sg.setAttribute("oninput","return;"),eh=typeof Sg.oninput=="function"}Zc=eh}else Zc=!1;j0=Zc&&(!document.documentMode||9<document.documentMode)}function Pg(){bo&&(bo.detachEvent("onpropertychange",z0),Ho=bo=null)}function z0(t){if(t.propertyName==="value"&&Bu(Ho)){var e=[];B0(e,Ho,t,uf(t)),w0(_x,e)}}function wx(t,e,n){t==="focusin"?(Pg(),bo=e,Ho=n,bo.attachEvent("onpropertychange",z0)):t==="focusout"&&Pg()}function Ex(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Bu(Ho)}function Ix(t,e){if(t==="click")return Bu(e)}function Tx(t,e){if(t==="input"||t==="change")return Bu(e)}function xx(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var nn=typeof Object.is=="function"?Object.is:xx;function Qo(t,e){if(nn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Ah.call(e,i)||!nn(t[i],e[i]))return!1}return!0}function Ag(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Rg(t,e){var n=Ag(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Ag(n)}}function U0(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?U0(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function $0(){for(var t=window,e=Wl();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Wl(t.document)}return e}function _f(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Sx(t){var e=$0(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&U0(n.ownerDocument.documentElement,n)){if(r!==null&&_f(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=Rg(n,s);var o=Rg(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Px=bn&&"documentMode"in document&&11>=document.documentMode,Gi=null,Wh=null,ko=null,Kh=!1;function Cg(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Kh||Gi==null||Gi!==Wl(r)||(r=Gi,"selectionStart"in r&&_f(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),ko&&Qo(ko,r)||(ko=r,r=Zl(Wh,"onSelect"),0<r.length&&(e=new mf("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Gi)))}function cl(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Wi={animationend:cl("Animation","AnimationEnd"),animationiteration:cl("Animation","AnimationIteration"),animationstart:cl("Animation","AnimationStart"),transitionend:cl("Transition","TransitionEnd")},th={},q0={};bn&&(q0=document.createElement("div").style,"AnimationEvent"in window||(delete Wi.animationend.animation,delete Wi.animationiteration.animation,delete Wi.animationstart.animation),"TransitionEvent"in window||delete Wi.transitionend.transition);function ju(t){if(th[t])return th[t];if(!Wi[t])return t;var e=Wi[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in q0)return th[t]=e[n];return t}var G0=ju("animationend"),W0=ju("animationiteration"),K0=ju("animationstart"),H0=ju("transitionend"),Q0=new Map,bg="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function xr(t,e){Q0.set(t,e),vi(e,[t])}for(var nh=0;nh<bg.length;nh++){var rh=bg[nh],Ax=rh.toLowerCase(),Rx=rh[0].toUpperCase()+rh.slice(1);xr(Ax,"on"+Rx)}xr(G0,"onAnimationEnd");xr(W0,"onAnimationIteration");xr(K0,"onAnimationStart");xr("dblclick","onDoubleClick");xr("focusin","onFocus");xr("focusout","onBlur");xr(H0,"onTransitionEnd");us("onMouseEnter",["mouseout","mouseover"]);us("onMouseLeave",["mouseout","mouseover"]);us("onPointerEnter",["pointerout","pointerover"]);us("onPointerLeave",["pointerout","pointerover"]);vi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));vi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));vi("onBeforeInput",["compositionend","keypress","textInput","paste"]);vi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));vi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));vi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Io="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Cx=new Set("cancel close invalid load scroll toggle".split(" ").concat(Io));function kg(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,AT(r,e,void 0,t),t.currentTarget=null}function Y0(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var l=r[o],u=l.instance,c=l.currentTarget;if(l=l.listener,u!==s&&i.isPropagationStopped())break e;kg(i,l,c),s=u}else for(o=0;o<r.length;o++){if(l=r[o],u=l.instance,c=l.currentTarget,l=l.listener,u!==s&&i.isPropagationStopped())break e;kg(i,l,c),s=u}}}if(Hl)throw t=Uh,Hl=!1,Uh=null,t}function ye(t,e){var n=e[Jh];n===void 0&&(n=e[Jh]=new Set);var r=t+"__bubble";n.has(r)||(X0(e,t,2,!1),n.add(r))}function ih(t,e,n){var r=0;e&&(r|=4),X0(n,t,r,e)}var hl="_reactListening"+Math.random().toString(36).slice(2);function Yo(t){if(!t[hl]){t[hl]=!0,i0.forEach(function(n){n!=="selectionchange"&&(Cx.has(n)||ih(n,!1,t),ih(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[hl]||(e[hl]=!0,ih("selectionchange",!1,e))}}function X0(t,e,n,r){switch(V0(e)){case 1:var i=$T;break;case 4:i=qT;break;default:i=ff}n=i.bind(null,e,n,t),i=void 0,!zh||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function sh(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===i||l.nodeType===8&&l.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===i||u.nodeType===8&&u.parentNode===i))return;o=o.return}for(;l!==null;){if(o=Hr(l),o===null)return;if(u=o.tag,u===5||u===6){r=s=o;continue e}l=l.parentNode}}r=r.return}w0(function(){var c=s,f=uf(n),m=[];e:{var v=Q0.get(t);if(v!==void 0){var A=mf,k=t;switch(t){case"keypress":if(Cl(n)===0)break e;case"keydown":case"keyup":A=sx;break;case"focusin":k="focus",A=Jc;break;case"focusout":k="blur",A=Jc;break;case"beforeblur":case"afterblur":A=Jc;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":A=vg;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":A=KT;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":A=lx;break;case G0:case W0:case K0:A=YT;break;case H0:A=cx;break;case"scroll":A=GT;break;case"wheel":A=dx;break;case"copy":case"cut":case"paste":A=JT;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":A=Eg}var N=(e&4)!==0,L=!N&&t==="scroll",R=N?v!==null?v+"Capture":null:v;N=[];for(var S=c,T;S!==null;){T=S;var d=T.stateNode;if(T.tag===5&&d!==null&&(T=d,R!==null&&(d=qo(S,R),d!=null&&N.push(Xo(S,d,T)))),L)break;S=S.return}0<N.length&&(v=new A(v,k,null,n,f),m.push({event:v,listeners:N}))}}if(!(e&7)){e:{if(v=t==="mouseover"||t==="pointerover",A=t==="mouseout"||t==="pointerout",v&&n!==Bh&&(k=n.relatedTarget||n.fromElement)&&(Hr(k)||k[kn]))break e;if((A||v)&&(v=f.window===f?f:(v=f.ownerDocument)?v.defaultView||v.parentWindow:window,A?(k=n.relatedTarget||n.toElement,A=c,k=k?Hr(k):null,k!==null&&(L=wi(k),k!==L||k.tag!==5&&k.tag!==6)&&(k=null)):(A=null,k=c),A!==k)){if(N=vg,d="onMouseLeave",R="onMouseEnter",S="mouse",(t==="pointerout"||t==="pointerover")&&(N=Eg,d="onPointerLeave",R="onPointerEnter",S="pointer"),L=A==null?v:Ki(A),T=k==null?v:Ki(k),v=new N(d,S+"leave",A,n,f),v.target=L,v.relatedTarget=T,d=null,Hr(f)===c&&(N=new N(R,S+"enter",k,n,f),N.target=T,N.relatedTarget=L,d=N),L=d,A&&k)t:{for(N=A,R=k,S=0,T=N;T;T=ki(T))S++;for(T=0,d=R;d;d=ki(d))T++;for(;0<S-T;)N=ki(N),S--;for(;0<T-S;)R=ki(R),T--;for(;S--;){if(N===R||R!==null&&N===R.alternate)break t;N=ki(N),R=ki(R)}N=null}else N=null;A!==null&&Dg(m,v,A,N,!1),k!==null&&L!==null&&Dg(m,L,k,N,!0)}}e:{if(v=c?Ki(c):window,A=v.nodeName&&v.nodeName.toLowerCase(),A==="select"||A==="input"&&v.type==="file")var g=vx;else if(xg(v))if(j0)g=Tx;else{g=Ex;var I=wx}else(A=v.nodeName)&&A.toLowerCase()==="input"&&(v.type==="checkbox"||v.type==="radio")&&(g=Ix);if(g&&(g=g(t,c))){B0(m,g,n,f);break e}I&&I(t,v,c),t==="focusout"&&(I=v._wrapperState)&&I.controlled&&v.type==="number"&&Vh(v,"number",v.value)}switch(I=c?Ki(c):window,t){case"focusin":(xg(I)||I.contentEditable==="true")&&(Gi=I,Wh=c,ko=null);break;case"focusout":ko=Wh=Gi=null;break;case"mousedown":Kh=!0;break;case"contextmenu":case"mouseup":case"dragend":Kh=!1,Cg(m,n,f);break;case"selectionchange":if(Px)break;case"keydown":case"keyup":Cg(m,n,f)}var _;if(yf)e:{switch(t){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else qi?O0(t,n)&&(y="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(y="onCompositionStart");y&&(L0&&n.locale!=="ko"&&(qi||y!=="onCompositionStart"?y==="onCompositionEnd"&&qi&&(_=M0()):(Zn=f,pf="value"in Zn?Zn.value:Zn.textContent,qi=!0)),I=Zl(c,y),0<I.length&&(y=new wg(y,t,null,n,f),m.push({event:y,listeners:I}),_?y.data=_:(_=F0(n),_!==null&&(y.data=_)))),(_=px?mx(t,n):gx(t,n))&&(c=Zl(c,"onBeforeInput"),0<c.length&&(f=new wg("onBeforeInput","beforeinput",null,n,f),m.push({event:f,listeners:c}),f.data=_))}Y0(m,e)})}function Xo(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Zl(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=qo(t,n),s!=null&&r.unshift(Xo(t,s,i)),s=qo(t,e),s!=null&&r.push(Xo(t,s,i))),t=t.return}return r}function ki(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Dg(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var l=n,u=l.alternate,c=l.stateNode;if(u!==null&&u===r)break;l.tag===5&&c!==null&&(l=c,i?(u=qo(n,s),u!=null&&o.unshift(Xo(n,u,l))):i||(u=qo(n,s),u!=null&&o.push(Xo(n,u,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var bx=/\r\n?/g,kx=/\u0000|\uFFFD/g;function Ng(t){return(typeof t=="string"?t:""+t).replace(bx,`
`).replace(kx,"")}function dl(t,e,n){if(e=Ng(e),Ng(t)!==e&&n)throw Error(z(425))}function eu(){}var Hh=null,Qh=null;function Yh(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Xh=typeof setTimeout=="function"?setTimeout:void 0,Dx=typeof clearTimeout=="function"?clearTimeout:void 0,Vg=typeof Promise=="function"?Promise:void 0,Nx=typeof queueMicrotask=="function"?queueMicrotask:typeof Vg<"u"?function(t){return Vg.resolve(null).then(t).catch(Vx)}:Xh;function Vx(t){setTimeout(function(){throw t})}function oh(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Ko(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Ko(e)}function sr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Mg(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Ms=Math.random().toString(36).slice(2),an="__reactFiber$"+Ms,Jo="__reactProps$"+Ms,kn="__reactContainer$"+Ms,Jh="__reactEvents$"+Ms,Mx="__reactListeners$"+Ms,Lx="__reactHandles$"+Ms;function Hr(t){var e=t[an];if(e)return e;for(var n=t.parentNode;n;){if(e=n[kn]||n[an]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Mg(t);t!==null;){if(n=t[an])return n;t=Mg(t)}return e}t=n,n=t.parentNode}return null}function xa(t){return t=t[an]||t[kn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Ki(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(z(33))}function zu(t){return t[Jo]||null}var Zh=[],Hi=-1;function Sr(t){return{current:t}}function ve(t){0>Hi||(t.current=Zh[Hi],Zh[Hi]=null,Hi--)}function pe(t,e){Hi++,Zh[Hi]=t.current,t.current=e}var fr={},ct=Sr(fr),Ct=Sr(!1),ri=fr;function cs(t,e){var n=t.type.contextTypes;if(!n)return fr;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function bt(t){return t=t.childContextTypes,t!=null}function tu(){ve(Ct),ve(ct)}function Lg(t,e,n){if(ct.current!==fr)throw Error(z(168));pe(ct,e),pe(Ct,n)}function J0(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(z(108,wT(t)||"Unknown",i));return Ce({},n,r)}function nu(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||fr,ri=ct.current,pe(ct,t),pe(Ct,Ct.current),!0}function Og(t,e,n){var r=t.stateNode;if(!r)throw Error(z(169));n?(t=J0(t,e,ri),r.__reactInternalMemoizedMergedChildContext=t,ve(Ct),ve(ct),pe(ct,t)):ve(Ct),pe(Ct,n)}var xn=null,Uu=!1,ah=!1;function Z0(t){xn===null?xn=[t]:xn.push(t)}function Ox(t){Uu=!0,Z0(t)}function Pr(){if(!ah&&xn!==null){ah=!0;var t=0,e=ce;try{var n=xn;for(ce=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}xn=null,Uu=!1}catch(i){throw xn!==null&&(xn=xn.slice(t+1)),x0(cf,Pr),i}finally{ce=e,ah=!1}}return null}var Qi=[],Yi=0,ru=null,iu=0,zt=[],Ut=0,ii=null,Sn=1,Pn="";function Br(t,e){Qi[Yi++]=iu,Qi[Yi++]=ru,ru=t,iu=e}function ev(t,e,n){zt[Ut++]=Sn,zt[Ut++]=Pn,zt[Ut++]=ii,ii=t;var r=Sn;t=Pn;var i=32-en(r)-1;r&=~(1<<i),n+=1;var s=32-en(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Sn=1<<32-en(e)+i|n<<i|r,Pn=s+t}else Sn=1<<s|n<<i|r,Pn=t}function vf(t){t.return!==null&&(Br(t,1),ev(t,1,0))}function wf(t){for(;t===ru;)ru=Qi[--Yi],Qi[Yi]=null,iu=Qi[--Yi],Qi[Yi]=null;for(;t===ii;)ii=zt[--Ut],zt[Ut]=null,Pn=zt[--Ut],zt[Ut]=null,Sn=zt[--Ut],zt[Ut]=null}var Lt=null,Mt=null,we=!1,Zt=null;function tv(t,e){var n=$t(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Fg(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Lt=t,Mt=sr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Lt=t,Mt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=ii!==null?{id:Sn,overflow:Pn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=$t(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Lt=t,Mt=null,!0):!1;default:return!1}}function ed(t){return(t.mode&1)!==0&&(t.flags&128)===0}function td(t){if(we){var e=Mt;if(e){var n=e;if(!Fg(t,e)){if(ed(t))throw Error(z(418));e=sr(n.nextSibling);var r=Lt;e&&Fg(t,e)?tv(r,n):(t.flags=t.flags&-4097|2,we=!1,Lt=t)}}else{if(ed(t))throw Error(z(418));t.flags=t.flags&-4097|2,we=!1,Lt=t}}}function Bg(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Lt=t}function fl(t){if(t!==Lt)return!1;if(!we)return Bg(t),we=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Yh(t.type,t.memoizedProps)),e&&(e=Mt)){if(ed(t))throw nv(),Error(z(418));for(;e;)tv(t,e),e=sr(e.nextSibling)}if(Bg(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(z(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Mt=sr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Mt=null}}else Mt=Lt?sr(t.stateNode.nextSibling):null;return!0}function nv(){for(var t=Mt;t;)t=sr(t.nextSibling)}function hs(){Mt=Lt=null,we=!1}function Ef(t){Zt===null?Zt=[t]:Zt.push(t)}var Fx=Ln.ReactCurrentBatchConfig;function co(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(z(309));var r=n.stateNode}if(!r)throw Error(z(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var l=i.refs;o===null?delete l[s]:l[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(z(284));if(!n._owner)throw Error(z(290,t))}return t}function pl(t,e){throw t=Object.prototype.toString.call(e),Error(z(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function jg(t){var e=t._init;return e(t._payload)}function rv(t){function e(R,S){if(t){var T=R.deletions;T===null?(R.deletions=[S],R.flags|=16):T.push(S)}}function n(R,S){if(!t)return null;for(;S!==null;)e(R,S),S=S.sibling;return null}function r(R,S){for(R=new Map;S!==null;)S.key!==null?R.set(S.key,S):R.set(S.index,S),S=S.sibling;return R}function i(R,S){return R=ur(R,S),R.index=0,R.sibling=null,R}function s(R,S,T){return R.index=T,t?(T=R.alternate,T!==null?(T=T.index,T<S?(R.flags|=2,S):T):(R.flags|=2,S)):(R.flags|=1048576,S)}function o(R){return t&&R.alternate===null&&(R.flags|=2),R}function l(R,S,T,d){return S===null||S.tag!==6?(S=ph(T,R.mode,d),S.return=R,S):(S=i(S,T),S.return=R,S)}function u(R,S,T,d){var g=T.type;return g===$i?f(R,S,T.props.children,d,T.key):S!==null&&(S.elementType===g||typeof g=="object"&&g!==null&&g.$$typeof===Kn&&jg(g)===S.type)?(d=i(S,T.props),d.ref=co(R,S,T),d.return=R,d):(d=Ll(T.type,T.key,T.props,null,R.mode,d),d.ref=co(R,S,T),d.return=R,d)}function c(R,S,T,d){return S===null||S.tag!==4||S.stateNode.containerInfo!==T.containerInfo||S.stateNode.implementation!==T.implementation?(S=mh(T,R.mode,d),S.return=R,S):(S=i(S,T.children||[]),S.return=R,S)}function f(R,S,T,d,g){return S===null||S.tag!==7?(S=ti(T,R.mode,d,g),S.return=R,S):(S=i(S,T),S.return=R,S)}function m(R,S,T){if(typeof S=="string"&&S!==""||typeof S=="number")return S=ph(""+S,R.mode,T),S.return=R,S;if(typeof S=="object"&&S!==null){switch(S.$$typeof){case rl:return T=Ll(S.type,S.key,S.props,null,R.mode,T),T.ref=co(R,null,S),T.return=R,T;case Ui:return S=mh(S,R.mode,T),S.return=R,S;case Kn:var d=S._init;return m(R,d(S._payload),T)}if(wo(S)||so(S))return S=ti(S,R.mode,T,null),S.return=R,S;pl(R,S)}return null}function v(R,S,T,d){var g=S!==null?S.key:null;if(typeof T=="string"&&T!==""||typeof T=="number")return g!==null?null:l(R,S,""+T,d);if(typeof T=="object"&&T!==null){switch(T.$$typeof){case rl:return T.key===g?u(R,S,T,d):null;case Ui:return T.key===g?c(R,S,T,d):null;case Kn:return g=T._init,v(R,S,g(T._payload),d)}if(wo(T)||so(T))return g!==null?null:f(R,S,T,d,null);pl(R,T)}return null}function A(R,S,T,d,g){if(typeof d=="string"&&d!==""||typeof d=="number")return R=R.get(T)||null,l(S,R,""+d,g);if(typeof d=="object"&&d!==null){switch(d.$$typeof){case rl:return R=R.get(d.key===null?T:d.key)||null,u(S,R,d,g);case Ui:return R=R.get(d.key===null?T:d.key)||null,c(S,R,d,g);case Kn:var I=d._init;return A(R,S,T,I(d._payload),g)}if(wo(d)||so(d))return R=R.get(T)||null,f(S,R,d,g,null);pl(S,d)}return null}function k(R,S,T,d){for(var g=null,I=null,_=S,y=S=0,w=null;_!==null&&y<T.length;y++){_.index>y?(w=_,_=null):w=_.sibling;var x=v(R,_,T[y],d);if(x===null){_===null&&(_=w);break}t&&_&&x.alternate===null&&e(R,_),S=s(x,S,y),I===null?g=x:I.sibling=x,I=x,_=w}if(y===T.length)return n(R,_),we&&Br(R,y),g;if(_===null){for(;y<T.length;y++)_=m(R,T[y],d),_!==null&&(S=s(_,S,y),I===null?g=_:I.sibling=_,I=_);return we&&Br(R,y),g}for(_=r(R,_);y<T.length;y++)w=A(_,R,y,T[y],d),w!==null&&(t&&w.alternate!==null&&_.delete(w.key===null?y:w.key),S=s(w,S,y),I===null?g=w:I.sibling=w,I=w);return t&&_.forEach(function(C){return e(R,C)}),we&&Br(R,y),g}function N(R,S,T,d){var g=so(T);if(typeof g!="function")throw Error(z(150));if(T=g.call(T),T==null)throw Error(z(151));for(var I=g=null,_=S,y=S=0,w=null,x=T.next();_!==null&&!x.done;y++,x=T.next()){_.index>y?(w=_,_=null):w=_.sibling;var C=v(R,_,x.value,d);if(C===null){_===null&&(_=w);break}t&&_&&C.alternate===null&&e(R,_),S=s(C,S,y),I===null?g=C:I.sibling=C,I=C,_=w}if(x.done)return n(R,_),we&&Br(R,y),g;if(_===null){for(;!x.done;y++,x=T.next())x=m(R,x.value,d),x!==null&&(S=s(x,S,y),I===null?g=x:I.sibling=x,I=x);return we&&Br(R,y),g}for(_=r(R,_);!x.done;y++,x=T.next())x=A(_,R,y,x.value,d),x!==null&&(t&&x.alternate!==null&&_.delete(x.key===null?y:x.key),S=s(x,S,y),I===null?g=x:I.sibling=x,I=x);return t&&_.forEach(function(D){return e(R,D)}),we&&Br(R,y),g}function L(R,S,T,d){if(typeof T=="object"&&T!==null&&T.type===$i&&T.key===null&&(T=T.props.children),typeof T=="object"&&T!==null){switch(T.$$typeof){case rl:e:{for(var g=T.key,I=S;I!==null;){if(I.key===g){if(g=T.type,g===$i){if(I.tag===7){n(R,I.sibling),S=i(I,T.props.children),S.return=R,R=S;break e}}else if(I.elementType===g||typeof g=="object"&&g!==null&&g.$$typeof===Kn&&jg(g)===I.type){n(R,I.sibling),S=i(I,T.props),S.ref=co(R,I,T),S.return=R,R=S;break e}n(R,I);break}else e(R,I);I=I.sibling}T.type===$i?(S=ti(T.props.children,R.mode,d,T.key),S.return=R,R=S):(d=Ll(T.type,T.key,T.props,null,R.mode,d),d.ref=co(R,S,T),d.return=R,R=d)}return o(R);case Ui:e:{for(I=T.key;S!==null;){if(S.key===I)if(S.tag===4&&S.stateNode.containerInfo===T.containerInfo&&S.stateNode.implementation===T.implementation){n(R,S.sibling),S=i(S,T.children||[]),S.return=R,R=S;break e}else{n(R,S);break}else e(R,S);S=S.sibling}S=mh(T,R.mode,d),S.return=R,R=S}return o(R);case Kn:return I=T._init,L(R,S,I(T._payload),d)}if(wo(T))return k(R,S,T,d);if(so(T))return N(R,S,T,d);pl(R,T)}return typeof T=="string"&&T!==""||typeof T=="number"?(T=""+T,S!==null&&S.tag===6?(n(R,S.sibling),S=i(S,T),S.return=R,R=S):(n(R,S),S=ph(T,R.mode,d),S.return=R,R=S),o(R)):n(R,S)}return L}var ds=rv(!0),iv=rv(!1),su=Sr(null),ou=null,Xi=null,If=null;function Tf(){If=Xi=ou=null}function xf(t){var e=su.current;ve(su),t._currentValue=e}function nd(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function ss(t,e){ou=t,If=Xi=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(St=!0),t.firstContext=null)}function Kt(t){var e=t._currentValue;if(If!==t)if(t={context:t,memoizedValue:e,next:null},Xi===null){if(ou===null)throw Error(z(308));Xi=t,ou.dependencies={lanes:0,firstContext:t}}else Xi=Xi.next=t;return e}var Qr=null;function Sf(t){Qr===null?Qr=[t]:Qr.push(t)}function sv(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,Sf(e)):(n.next=i.next,i.next=n),e.interleaved=n,Dn(t,r)}function Dn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Hn=!1;function Pf(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ov(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Rn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function or(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,oe&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Dn(t,n)}return i=r.interleaved,i===null?(e.next=e,Sf(r)):(e.next=i.next,i.next=e),r.interleaved=e,Dn(t,n)}function bl(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,hf(t,n)}}function zg(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function au(t,e,n,r){var i=t.updateQueue;Hn=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var u=l,c=u.next;u.next=null,o===null?s=c:o.next=c,o=u;var f=t.alternate;f!==null&&(f=f.updateQueue,l=f.lastBaseUpdate,l!==o&&(l===null?f.firstBaseUpdate=c:l.next=c,f.lastBaseUpdate=u))}if(s!==null){var m=i.baseState;o=0,f=c=u=null,l=s;do{var v=l.lane,A=l.eventTime;if((r&v)===v){f!==null&&(f=f.next={eventTime:A,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var k=t,N=l;switch(v=e,A=n,N.tag){case 1:if(k=N.payload,typeof k=="function"){m=k.call(A,m,v);break e}m=k;break e;case 3:k.flags=k.flags&-65537|128;case 0:if(k=N.payload,v=typeof k=="function"?k.call(A,m,v):k,v==null)break e;m=Ce({},m,v);break e;case 2:Hn=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,v=i.effects,v===null?i.effects=[l]:v.push(l))}else A={eventTime:A,lane:v,tag:l.tag,payload:l.payload,callback:l.callback,next:null},f===null?(c=f=A,u=m):f=f.next=A,o|=v;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;v=l,l=v.next,v.next=null,i.lastBaseUpdate=v,i.shared.pending=null}}while(!0);if(f===null&&(u=m),i.baseState=u,i.firstBaseUpdate=c,i.lastBaseUpdate=f,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);oi|=o,t.lanes=o,t.memoizedState=m}}function Ug(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(z(191,i));i.call(r)}}}var Sa={},hn=Sr(Sa),Zo=Sr(Sa),ea=Sr(Sa);function Yr(t){if(t===Sa)throw Error(z(174));return t}function Af(t,e){switch(pe(ea,e),pe(Zo,t),pe(hn,Sa),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Lh(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Lh(e,t)}ve(hn),pe(hn,e)}function fs(){ve(hn),ve(Zo),ve(ea)}function av(t){Yr(ea.current);var e=Yr(hn.current),n=Lh(e,t.type);e!==n&&(pe(Zo,t),pe(hn,n))}function Rf(t){Zo.current===t&&(ve(hn),ve(Zo))}var Pe=Sr(0);function lu(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var lh=[];function Cf(){for(var t=0;t<lh.length;t++)lh[t]._workInProgressVersionPrimary=null;lh.length=0}var kl=Ln.ReactCurrentDispatcher,uh=Ln.ReactCurrentBatchConfig,si=0,Ae=null,ze=null,Ge=null,uu=!1,Do=!1,ta=0,Bx=0;function ot(){throw Error(z(321))}function bf(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!nn(t[n],e[n]))return!1;return!0}function kf(t,e,n,r,i,s){if(si=s,Ae=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,kl.current=t===null||t.memoizedState===null?$x:qx,t=n(r,i),Do){s=0;do{if(Do=!1,ta=0,25<=s)throw Error(z(301));s+=1,Ge=ze=null,e.updateQueue=null,kl.current=Gx,t=n(r,i)}while(Do)}if(kl.current=cu,e=ze!==null&&ze.next!==null,si=0,Ge=ze=Ae=null,uu=!1,e)throw Error(z(300));return t}function Df(){var t=ta!==0;return ta=0,t}function on(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ge===null?Ae.memoizedState=Ge=t:Ge=Ge.next=t,Ge}function Ht(){if(ze===null){var t=Ae.alternate;t=t!==null?t.memoizedState:null}else t=ze.next;var e=Ge===null?Ae.memoizedState:Ge.next;if(e!==null)Ge=e,ze=t;else{if(t===null)throw Error(z(310));ze=t,t={memoizedState:ze.memoizedState,baseState:ze.baseState,baseQueue:ze.baseQueue,queue:ze.queue,next:null},Ge===null?Ae.memoizedState=Ge=t:Ge=Ge.next=t}return Ge}function na(t,e){return typeof e=="function"?e(t):e}function ch(t){var e=Ht(),n=e.queue;if(n===null)throw Error(z(311));n.lastRenderedReducer=t;var r=ze,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var l=o=null,u=null,c=s;do{var f=c.lane;if((si&f)===f)u!==null&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var m={lane:f,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};u===null?(l=u=m,o=r):u=u.next=m,Ae.lanes|=f,oi|=f}c=c.next}while(c!==null&&c!==s);u===null?o=r:u.next=l,nn(r,e.memoizedState)||(St=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,Ae.lanes|=s,oi|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function hh(t){var e=Ht(),n=e.queue;if(n===null)throw Error(z(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);nn(s,e.memoizedState)||(St=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function lv(){}function uv(t,e){var n=Ae,r=Ht(),i=e(),s=!nn(r.memoizedState,i);if(s&&(r.memoizedState=i,St=!0),r=r.queue,Nf(dv.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||Ge!==null&&Ge.memoizedState.tag&1){if(n.flags|=2048,ra(9,hv.bind(null,n,r,i,e),void 0,null),Ke===null)throw Error(z(349));si&30||cv(n,e,i)}return i}function cv(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Ae.updateQueue,e===null?(e={lastEffect:null,stores:null},Ae.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function hv(t,e,n,r){e.value=n,e.getSnapshot=r,fv(e)&&pv(t)}function dv(t,e,n){return n(function(){fv(e)&&pv(t)})}function fv(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!nn(t,n)}catch{return!0}}function pv(t){var e=Dn(t,1);e!==null&&tn(e,t,1,-1)}function $g(t){var e=on();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:na,lastRenderedState:t},e.queue=t,t=t.dispatch=Ux.bind(null,Ae,t),[e.memoizedState,t]}function ra(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Ae.updateQueue,e===null?(e={lastEffect:null,stores:null},Ae.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function mv(){return Ht().memoizedState}function Dl(t,e,n,r){var i=on();Ae.flags|=t,i.memoizedState=ra(1|e,n,void 0,r===void 0?null:r)}function $u(t,e,n,r){var i=Ht();r=r===void 0?null:r;var s=void 0;if(ze!==null){var o=ze.memoizedState;if(s=o.destroy,r!==null&&bf(r,o.deps)){i.memoizedState=ra(e,n,s,r);return}}Ae.flags|=t,i.memoizedState=ra(1|e,n,s,r)}function qg(t,e){return Dl(8390656,8,t,e)}function Nf(t,e){return $u(2048,8,t,e)}function gv(t,e){return $u(4,2,t,e)}function yv(t,e){return $u(4,4,t,e)}function _v(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function vv(t,e,n){return n=n!=null?n.concat([t]):null,$u(4,4,_v.bind(null,e,t),n)}function Vf(){}function wv(t,e){var n=Ht();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&bf(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Ev(t,e){var n=Ht();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&bf(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Iv(t,e,n){return si&21?(nn(n,e)||(n=A0(),Ae.lanes|=n,oi|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,St=!0),t.memoizedState=n)}function jx(t,e){var n=ce;ce=n!==0&&4>n?n:4,t(!0);var r=uh.transition;uh.transition={};try{t(!1),e()}finally{ce=n,uh.transition=r}}function Tv(){return Ht().memoizedState}function zx(t,e,n){var r=lr(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},xv(t))Sv(e,n);else if(n=sv(t,e,n,r),n!==null){var i=gt();tn(n,t,r,i),Pv(n,e,r)}}function Ux(t,e,n){var r=lr(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(xv(t))Sv(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,l=s(o,n);if(i.hasEagerState=!0,i.eagerState=l,nn(l,o)){var u=e.interleaved;u===null?(i.next=i,Sf(e)):(i.next=u.next,u.next=i),e.interleaved=i;return}}catch{}finally{}n=sv(t,e,i,r),n!==null&&(i=gt(),tn(n,t,r,i),Pv(n,e,r))}}function xv(t){var e=t.alternate;return t===Ae||e!==null&&e===Ae}function Sv(t,e){Do=uu=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Pv(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,hf(t,n)}}var cu={readContext:Kt,useCallback:ot,useContext:ot,useEffect:ot,useImperativeHandle:ot,useInsertionEffect:ot,useLayoutEffect:ot,useMemo:ot,useReducer:ot,useRef:ot,useState:ot,useDebugValue:ot,useDeferredValue:ot,useTransition:ot,useMutableSource:ot,useSyncExternalStore:ot,useId:ot,unstable_isNewReconciler:!1},$x={readContext:Kt,useCallback:function(t,e){return on().memoizedState=[t,e===void 0?null:e],t},useContext:Kt,useEffect:qg,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Dl(4194308,4,_v.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Dl(4194308,4,t,e)},useInsertionEffect:function(t,e){return Dl(4,2,t,e)},useMemo:function(t,e){var n=on();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=on();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=zx.bind(null,Ae,t),[r.memoizedState,t]},useRef:function(t){var e=on();return t={current:t},e.memoizedState=t},useState:$g,useDebugValue:Vf,useDeferredValue:function(t){return on().memoizedState=t},useTransition:function(){var t=$g(!1),e=t[0];return t=jx.bind(null,t[1]),on().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Ae,i=on();if(we){if(n===void 0)throw Error(z(407));n=n()}else{if(n=e(),Ke===null)throw Error(z(349));si&30||cv(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,qg(dv.bind(null,r,s,t),[t]),r.flags|=2048,ra(9,hv.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=on(),e=Ke.identifierPrefix;if(we){var n=Pn,r=Sn;n=(r&~(1<<32-en(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=ta++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=Bx++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},qx={readContext:Kt,useCallback:wv,useContext:Kt,useEffect:Nf,useImperativeHandle:vv,useInsertionEffect:gv,useLayoutEffect:yv,useMemo:Ev,useReducer:ch,useRef:mv,useState:function(){return ch(na)},useDebugValue:Vf,useDeferredValue:function(t){var e=Ht();return Iv(e,ze.memoizedState,t)},useTransition:function(){var t=ch(na)[0],e=Ht().memoizedState;return[t,e]},useMutableSource:lv,useSyncExternalStore:uv,useId:Tv,unstable_isNewReconciler:!1},Gx={readContext:Kt,useCallback:wv,useContext:Kt,useEffect:Nf,useImperativeHandle:vv,useInsertionEffect:gv,useLayoutEffect:yv,useMemo:Ev,useReducer:hh,useRef:mv,useState:function(){return hh(na)},useDebugValue:Vf,useDeferredValue:function(t){var e=Ht();return ze===null?e.memoizedState=t:Iv(e,ze.memoizedState,t)},useTransition:function(){var t=hh(na)[0],e=Ht().memoizedState;return[t,e]},useMutableSource:lv,useSyncExternalStore:uv,useId:Tv,unstable_isNewReconciler:!1};function Xt(t,e){if(t&&t.defaultProps){e=Ce({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function rd(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Ce({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var qu={isMounted:function(t){return(t=t._reactInternals)?wi(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=gt(),i=lr(t),s=Rn(r,i);s.payload=e,n!=null&&(s.callback=n),e=or(t,s,i),e!==null&&(tn(e,t,i,r),bl(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=gt(),i=lr(t),s=Rn(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=or(t,s,i),e!==null&&(tn(e,t,i,r),bl(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=gt(),r=lr(t),i=Rn(n,r);i.tag=2,e!=null&&(i.callback=e),e=or(t,i,r),e!==null&&(tn(e,t,r,n),bl(e,t,r))}};function Gg(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!Qo(n,r)||!Qo(i,s):!0}function Av(t,e,n){var r=!1,i=fr,s=e.contextType;return typeof s=="object"&&s!==null?s=Kt(s):(i=bt(e)?ri:ct.current,r=e.contextTypes,s=(r=r!=null)?cs(t,i):fr),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=qu,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function Wg(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&qu.enqueueReplaceState(e,e.state,null)}function id(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},Pf(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Kt(s):(s=bt(e)?ri:ct.current,i.context=cs(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(rd(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&qu.enqueueReplaceState(i,i.state,null),au(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function ps(t,e){try{var n="",r=e;do n+=vT(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function dh(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function sd(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var Wx=typeof WeakMap=="function"?WeakMap:Map;function Rv(t,e,n){n=Rn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){du||(du=!0,md=r),sd(t,e)},n}function Cv(t,e,n){n=Rn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){sd(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){sd(t,e),typeof r!="function"&&(ar===null?ar=new Set([this]):ar.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Kg(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new Wx;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=oS.bind(null,t,e,n),e.then(t,t))}function Hg(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Qg(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Rn(-1,1),e.tag=2,or(n,e,1))),n.lanes|=1),t)}var Kx=Ln.ReactCurrentOwner,St=!1;function ft(t,e,n,r){e.child=t===null?iv(e,null,n,r):ds(e,t.child,n,r)}function Yg(t,e,n,r,i){n=n.render;var s=e.ref;return ss(e,i),r=kf(t,e,n,r,s,i),n=Df(),t!==null&&!St?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Nn(t,e,i)):(we&&n&&vf(e),e.flags|=1,ft(t,e,r,i),e.child)}function Xg(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!Uf(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,bv(t,e,s,r,i)):(t=Ll(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:Qo,n(o,r)&&t.ref===e.ref)return Nn(t,e,i)}return e.flags|=1,t=ur(s,r),t.ref=e.ref,t.return=e,e.child=t}function bv(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(Qo(s,r)&&t.ref===e.ref)if(St=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(St=!0);else return e.lanes=t.lanes,Nn(t,e,i)}return od(t,e,n,r,i)}function kv(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},pe(Zi,Vt),Vt|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,pe(Zi,Vt),Vt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,pe(Zi,Vt),Vt|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,pe(Zi,Vt),Vt|=r;return ft(t,e,i,n),e.child}function Dv(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function od(t,e,n,r,i){var s=bt(n)?ri:ct.current;return s=cs(e,s),ss(e,i),n=kf(t,e,n,r,s,i),r=Df(),t!==null&&!St?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Nn(t,e,i)):(we&&r&&vf(e),e.flags|=1,ft(t,e,n,i),e.child)}function Jg(t,e,n,r,i){if(bt(n)){var s=!0;nu(e)}else s=!1;if(ss(e,i),e.stateNode===null)Nl(t,e),Av(e,n,r),id(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var u=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=Kt(c):(c=bt(n)?ri:ct.current,c=cs(e,c));var f=n.getDerivedStateFromProps,m=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function";m||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||u!==c)&&Wg(e,o,r,c),Hn=!1;var v=e.memoizedState;o.state=v,au(e,r,o,i),u=e.memoizedState,l!==r||v!==u||Ct.current||Hn?(typeof f=="function"&&(rd(e,n,f,r),u=e.memoizedState),(l=Hn||Gg(e,n,l,r,v,u,c))?(m||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),o.props=r,o.state=u,o.context=c,r=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,ov(t,e),l=e.memoizedProps,c=e.type===e.elementType?l:Xt(e.type,l),o.props=c,m=e.pendingProps,v=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=Kt(u):(u=bt(n)?ri:ct.current,u=cs(e,u));var A=n.getDerivedStateFromProps;(f=typeof A=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==m||v!==u)&&Wg(e,o,r,u),Hn=!1,v=e.memoizedState,o.state=v,au(e,r,o,i);var k=e.memoizedState;l!==m||v!==k||Ct.current||Hn?(typeof A=="function"&&(rd(e,n,A,r),k=e.memoizedState),(c=Hn||Gg(e,n,c,r,v,k,u)||!1)?(f||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,k,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,k,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&v===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&v===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=k),o.props=r,o.state=k,o.context=u,r=c):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&v===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&v===t.memoizedState||(e.flags|=1024),r=!1)}return ad(t,e,n,r,s,i)}function ad(t,e,n,r,i,s){Dv(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&Og(e,n,!1),Nn(t,e,s);r=e.stateNode,Kx.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=ds(e,t.child,null,s),e.child=ds(e,null,l,s)):ft(t,e,l,s),e.memoizedState=r.state,i&&Og(e,n,!0),e.child}function Nv(t){var e=t.stateNode;e.pendingContext?Lg(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Lg(t,e.context,!1),Af(t,e.containerInfo)}function Zg(t,e,n,r,i){return hs(),Ef(i),e.flags|=256,ft(t,e,n,r),e.child}var ld={dehydrated:null,treeContext:null,retryLane:0};function ud(t){return{baseLanes:t,cachePool:null,transitions:null}}function Vv(t,e,n){var r=e.pendingProps,i=Pe.current,s=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(i&2)!==0),l?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),pe(Pe,i&1),t===null)return td(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Ku(o,r,0,null),t=ti(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=ud(n),e.memoizedState=ld,t):Mf(e,o));if(i=t.memoizedState,i!==null&&(l=i.dehydrated,l!==null))return Hx(t,e,o,r,l,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,l=i.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=ur(i,u),r.subtreeFlags=i.subtreeFlags&14680064),l!==null?s=ur(l,s):(s=ti(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?ud(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=ld,r}return s=t.child,t=s.sibling,r=ur(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Mf(t,e){return e=Ku({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function ml(t,e,n,r){return r!==null&&Ef(r),ds(e,t.child,null,n),t=Mf(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Hx(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=dh(Error(z(422))),ml(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=Ku({mode:"visible",children:r.children},i,0,null),s=ti(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&ds(e,t.child,null,o),e.child.memoizedState=ud(o),e.memoizedState=ld,s);if(!(e.mode&1))return ml(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var l=r.dgst;return r=l,s=Error(z(419)),r=dh(s,r,void 0),ml(t,e,o,r)}if(l=(o&t.childLanes)!==0,St||l){if(r=Ke,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Dn(t,i),tn(r,t,i,-1))}return zf(),r=dh(Error(z(421))),ml(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=aS.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,Mt=sr(i.nextSibling),Lt=e,we=!0,Zt=null,t!==null&&(zt[Ut++]=Sn,zt[Ut++]=Pn,zt[Ut++]=ii,Sn=t.id,Pn=t.overflow,ii=e),e=Mf(e,r.children),e.flags|=4096,e)}function ey(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),nd(t.return,e,n)}function fh(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function Mv(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(ft(t,e,r.children,n),r=Pe.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&ey(t,n,e);else if(t.tag===19)ey(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(pe(Pe,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&lu(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),fh(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&lu(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}fh(e,!0,n,null,s);break;case"together":fh(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Nl(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Nn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),oi|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(z(153));if(e.child!==null){for(t=e.child,n=ur(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=ur(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Qx(t,e,n){switch(e.tag){case 3:Nv(e),hs();break;case 5:av(e);break;case 1:bt(e.type)&&nu(e);break;case 4:Af(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;pe(su,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(pe(Pe,Pe.current&1),e.flags|=128,null):n&e.child.childLanes?Vv(t,e,n):(pe(Pe,Pe.current&1),t=Nn(t,e,n),t!==null?t.sibling:null);pe(Pe,Pe.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Mv(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),pe(Pe,Pe.current),r)break;return null;case 22:case 23:return e.lanes=0,kv(t,e,n)}return Nn(t,e,n)}var Lv,cd,Ov,Fv;Lv=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};cd=function(){};Ov=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Yr(hn.current);var s=null;switch(n){case"input":i=Dh(t,i),r=Dh(t,r),s=[];break;case"select":i=Ce({},i,{value:void 0}),r=Ce({},r,{value:void 0}),s=[];break;case"textarea":i=Mh(t,i),r=Mh(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=eu)}Oh(n,r);var o;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var l=i[c];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Uo.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var u=r[c];if(l=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&u!==l&&(u!=null||l!=null))if(c==="style")if(l){for(o in l)!l.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&l[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(s||(s=[]),s.push(c,n)),n=u;else c==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,l=l?l.__html:void 0,u!=null&&l!==u&&(s=s||[]).push(c,u)):c==="children"?typeof u!="string"&&typeof u!="number"||(s=s||[]).push(c,""+u):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Uo.hasOwnProperty(c)?(u!=null&&c==="onScroll"&&ye("scroll",t),s||l===u||(s=[])):(s=s||[]).push(c,u))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};Fv=function(t,e,n,r){n!==r&&(e.flags|=4)};function ho(t,e){if(!we)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function at(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function Yx(t,e,n){var r=e.pendingProps;switch(wf(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return at(e),null;case 1:return bt(e.type)&&tu(),at(e),null;case 3:return r=e.stateNode,fs(),ve(Ct),ve(ct),Cf(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(fl(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Zt!==null&&(_d(Zt),Zt=null))),cd(t,e),at(e),null;case 5:Rf(e);var i=Yr(ea.current);if(n=e.type,t!==null&&e.stateNode!=null)Ov(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(z(166));return at(e),null}if(t=Yr(hn.current),fl(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[an]=e,r[Jo]=s,t=(e.mode&1)!==0,n){case"dialog":ye("cancel",r),ye("close",r);break;case"iframe":case"object":case"embed":ye("load",r);break;case"video":case"audio":for(i=0;i<Io.length;i++)ye(Io[i],r);break;case"source":ye("error",r);break;case"img":case"image":case"link":ye("error",r),ye("load",r);break;case"details":ye("toggle",r);break;case"input":ug(r,s),ye("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},ye("invalid",r);break;case"textarea":hg(r,s),ye("invalid",r)}Oh(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var l=s[o];o==="children"?typeof l=="string"?r.textContent!==l&&(s.suppressHydrationWarning!==!0&&dl(r.textContent,l,t),i=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(s.suppressHydrationWarning!==!0&&dl(r.textContent,l,t),i=["children",""+l]):Uo.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&ye("scroll",r)}switch(n){case"input":il(r),cg(r,s,!0);break;case"textarea":il(r),dg(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=eu)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=d0(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[an]=e,t[Jo]=r,Lv(t,e,!1,!1),e.stateNode=t;e:{switch(o=Fh(n,r),n){case"dialog":ye("cancel",t),ye("close",t),i=r;break;case"iframe":case"object":case"embed":ye("load",t),i=r;break;case"video":case"audio":for(i=0;i<Io.length;i++)ye(Io[i],t);i=r;break;case"source":ye("error",t),i=r;break;case"img":case"image":case"link":ye("error",t),ye("load",t),i=r;break;case"details":ye("toggle",t),i=r;break;case"input":ug(t,r),i=Dh(t,r),ye("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Ce({},r,{value:void 0}),ye("invalid",t);break;case"textarea":hg(t,r),i=Mh(t,r),ye("invalid",t);break;default:i=r}Oh(n,i),l=i;for(s in l)if(l.hasOwnProperty(s)){var u=l[s];s==="style"?m0(t,u):s==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&f0(t,u)):s==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&$o(t,u):typeof u=="number"&&$o(t,""+u):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Uo.hasOwnProperty(s)?u!=null&&s==="onScroll"&&ye("scroll",t):u!=null&&sf(t,s,u,o))}switch(n){case"input":il(t),cg(t,r,!1);break;case"textarea":il(t),dg(t);break;case"option":r.value!=null&&t.setAttribute("value",""+dr(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?ts(t,!!r.multiple,s,!1):r.defaultValue!=null&&ts(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=eu)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return at(e),null;case 6:if(t&&e.stateNode!=null)Fv(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(z(166));if(n=Yr(ea.current),Yr(hn.current),fl(e)){if(r=e.stateNode,n=e.memoizedProps,r[an]=e,(s=r.nodeValue!==n)&&(t=Lt,t!==null))switch(t.tag){case 3:dl(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&dl(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[an]=e,e.stateNode=r}return at(e),null;case 13:if(ve(Pe),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(we&&Mt!==null&&e.mode&1&&!(e.flags&128))nv(),hs(),e.flags|=98560,s=!1;else if(s=fl(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(z(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(z(317));s[an]=e}else hs(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;at(e),s=!1}else Zt!==null&&(_d(Zt),Zt=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Pe.current&1?Ue===0&&(Ue=3):zf())),e.updateQueue!==null&&(e.flags|=4),at(e),null);case 4:return fs(),cd(t,e),t===null&&Yo(e.stateNode.containerInfo),at(e),null;case 10:return xf(e.type._context),at(e),null;case 17:return bt(e.type)&&tu(),at(e),null;case 19:if(ve(Pe),s=e.memoizedState,s===null)return at(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)ho(s,!1);else{if(Ue!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=lu(t),o!==null){for(e.flags|=128,ho(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return pe(Pe,Pe.current&1|2),e.child}t=t.sibling}s.tail!==null&&Me()>ms&&(e.flags|=128,r=!0,ho(s,!1),e.lanes=4194304)}else{if(!r)if(t=lu(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),ho(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!we)return at(e),null}else 2*Me()-s.renderingStartTime>ms&&n!==1073741824&&(e.flags|=128,r=!0,ho(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Me(),e.sibling=null,n=Pe.current,pe(Pe,r?n&1|2:n&1),e):(at(e),null);case 22:case 23:return jf(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Vt&1073741824&&(at(e),e.subtreeFlags&6&&(e.flags|=8192)):at(e),null;case 24:return null;case 25:return null}throw Error(z(156,e.tag))}function Xx(t,e){switch(wf(e),e.tag){case 1:return bt(e.type)&&tu(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return fs(),ve(Ct),ve(ct),Cf(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Rf(e),null;case 13:if(ve(Pe),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(z(340));hs()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return ve(Pe),null;case 4:return fs(),null;case 10:return xf(e.type._context),null;case 22:case 23:return jf(),null;case 24:return null;default:return null}}var gl=!1,ut=!1,Jx=typeof WeakSet=="function"?WeakSet:Set,K=null;function Ji(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){ke(t,e,r)}else n.current=null}function hd(t,e,n){try{n()}catch(r){ke(t,e,r)}}var ty=!1;function Zx(t,e){if(Hh=Xl,t=$0(),_f(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,l=-1,u=-1,c=0,f=0,m=t,v=null;t:for(;;){for(var A;m!==n||i!==0&&m.nodeType!==3||(l=o+i),m!==s||r!==0&&m.nodeType!==3||(u=o+r),m.nodeType===3&&(o+=m.nodeValue.length),(A=m.firstChild)!==null;)v=m,m=A;for(;;){if(m===t)break t;if(v===n&&++c===i&&(l=o),v===s&&++f===r&&(u=o),(A=m.nextSibling)!==null)break;m=v,v=m.parentNode}m=A}n=l===-1||u===-1?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(Qh={focusedElem:t,selectionRange:n},Xl=!1,K=e;K!==null;)if(e=K,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,K=t;else for(;K!==null;){e=K;try{var k=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(k!==null){var N=k.memoizedProps,L=k.memoizedState,R=e.stateNode,S=R.getSnapshotBeforeUpdate(e.elementType===e.type?N:Xt(e.type,N),L);R.__reactInternalSnapshotBeforeUpdate=S}break;case 3:var T=e.stateNode.containerInfo;T.nodeType===1?T.textContent="":T.nodeType===9&&T.documentElement&&T.removeChild(T.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(z(163))}}catch(d){ke(e,e.return,d)}if(t=e.sibling,t!==null){t.return=e.return,K=t;break}K=e.return}return k=ty,ty=!1,k}function No(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&hd(e,n,s)}i=i.next}while(i!==r)}}function Gu(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function dd(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Bv(t){var e=t.alternate;e!==null&&(t.alternate=null,Bv(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[an],delete e[Jo],delete e[Jh],delete e[Mx],delete e[Lx])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function jv(t){return t.tag===5||t.tag===3||t.tag===4}function ny(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||jv(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function fd(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=eu));else if(r!==4&&(t=t.child,t!==null))for(fd(t,e,n),t=t.sibling;t!==null;)fd(t,e,n),t=t.sibling}function pd(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(pd(t,e,n),t=t.sibling;t!==null;)pd(t,e,n),t=t.sibling}var Je=null,Jt=!1;function $n(t,e,n){for(n=n.child;n!==null;)zv(t,e,n),n=n.sibling}function zv(t,e,n){if(cn&&typeof cn.onCommitFiberUnmount=="function")try{cn.onCommitFiberUnmount(Ou,n)}catch{}switch(n.tag){case 5:ut||Ji(n,e);case 6:var r=Je,i=Jt;Je=null,$n(t,e,n),Je=r,Jt=i,Je!==null&&(Jt?(t=Je,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Je.removeChild(n.stateNode));break;case 18:Je!==null&&(Jt?(t=Je,n=n.stateNode,t.nodeType===8?oh(t.parentNode,n):t.nodeType===1&&oh(t,n),Ko(t)):oh(Je,n.stateNode));break;case 4:r=Je,i=Jt,Je=n.stateNode.containerInfo,Jt=!0,$n(t,e,n),Je=r,Jt=i;break;case 0:case 11:case 14:case 15:if(!ut&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&hd(n,e,o),i=i.next}while(i!==r)}$n(t,e,n);break;case 1:if(!ut&&(Ji(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){ke(n,e,l)}$n(t,e,n);break;case 21:$n(t,e,n);break;case 22:n.mode&1?(ut=(r=ut)||n.memoizedState!==null,$n(t,e,n),ut=r):$n(t,e,n);break;default:$n(t,e,n)}}function ry(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new Jx),e.forEach(function(r){var i=lS.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Yt(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:Je=l.stateNode,Jt=!1;break e;case 3:Je=l.stateNode.containerInfo,Jt=!0;break e;case 4:Je=l.stateNode.containerInfo,Jt=!0;break e}l=l.return}if(Je===null)throw Error(z(160));zv(s,o,i),Je=null,Jt=!1;var u=i.alternate;u!==null&&(u.return=null),i.return=null}catch(c){ke(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Uv(e,t),e=e.sibling}function Uv(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Yt(e,t),sn(t),r&4){try{No(3,t,t.return),Gu(3,t)}catch(N){ke(t,t.return,N)}try{No(5,t,t.return)}catch(N){ke(t,t.return,N)}}break;case 1:Yt(e,t),sn(t),r&512&&n!==null&&Ji(n,n.return);break;case 5:if(Yt(e,t),sn(t),r&512&&n!==null&&Ji(n,n.return),t.flags&32){var i=t.stateNode;try{$o(i,"")}catch(N){ke(t,t.return,N)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,l=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{l==="input"&&s.type==="radio"&&s.name!=null&&c0(i,s),Fh(l,o);var c=Fh(l,s);for(o=0;o<u.length;o+=2){var f=u[o],m=u[o+1];f==="style"?m0(i,m):f==="dangerouslySetInnerHTML"?f0(i,m):f==="children"?$o(i,m):sf(i,f,m,c)}switch(l){case"input":Nh(i,s);break;case"textarea":h0(i,s);break;case"select":var v=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var A=s.value;A!=null?ts(i,!!s.multiple,A,!1):v!==!!s.multiple&&(s.defaultValue!=null?ts(i,!!s.multiple,s.defaultValue,!0):ts(i,!!s.multiple,s.multiple?[]:"",!1))}i[Jo]=s}catch(N){ke(t,t.return,N)}}break;case 6:if(Yt(e,t),sn(t),r&4){if(t.stateNode===null)throw Error(z(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(N){ke(t,t.return,N)}}break;case 3:if(Yt(e,t),sn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Ko(e.containerInfo)}catch(N){ke(t,t.return,N)}break;case 4:Yt(e,t),sn(t);break;case 13:Yt(e,t),sn(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Ff=Me())),r&4&&ry(t);break;case 22:if(f=n!==null&&n.memoizedState!==null,t.mode&1?(ut=(c=ut)||f,Yt(e,t),ut=c):Yt(e,t),sn(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!f&&t.mode&1)for(K=t,f=t.child;f!==null;){for(m=K=f;K!==null;){switch(v=K,A=v.child,v.tag){case 0:case 11:case 14:case 15:No(4,v,v.return);break;case 1:Ji(v,v.return);var k=v.stateNode;if(typeof k.componentWillUnmount=="function"){r=v,n=v.return;try{e=r,k.props=e.memoizedProps,k.state=e.memoizedState,k.componentWillUnmount()}catch(N){ke(r,n,N)}}break;case 5:Ji(v,v.return);break;case 22:if(v.memoizedState!==null){sy(m);continue}}A!==null?(A.return=v,K=A):sy(m)}f=f.sibling}e:for(f=null,m=t;;){if(m.tag===5){if(f===null){f=m;try{i=m.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(l=m.stateNode,u=m.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,l.style.display=p0("display",o))}catch(N){ke(t,t.return,N)}}}else if(m.tag===6){if(f===null)try{m.stateNode.nodeValue=c?"":m.memoizedProps}catch(N){ke(t,t.return,N)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===t)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===t)break e;for(;m.sibling===null;){if(m.return===null||m.return===t)break e;f===m&&(f=null),m=m.return}f===m&&(f=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:Yt(e,t),sn(t),r&4&&ry(t);break;case 21:break;default:Yt(e,t),sn(t)}}function sn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(jv(n)){var r=n;break e}n=n.return}throw Error(z(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&($o(i,""),r.flags&=-33);var s=ny(t);pd(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,l=ny(t);fd(t,l,o);break;default:throw Error(z(161))}}catch(u){ke(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function eS(t,e,n){K=t,$v(t)}function $v(t,e,n){for(var r=(t.mode&1)!==0;K!==null;){var i=K,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||gl;if(!o){var l=i.alternate,u=l!==null&&l.memoizedState!==null||ut;l=gl;var c=ut;if(gl=o,(ut=u)&&!c)for(K=i;K!==null;)o=K,u=o.child,o.tag===22&&o.memoizedState!==null?oy(i):u!==null?(u.return=o,K=u):oy(i);for(;s!==null;)K=s,$v(s),s=s.sibling;K=i,gl=l,ut=c}iy(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,K=s):iy(t)}}function iy(t){for(;K!==null;){var e=K;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:ut||Gu(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!ut)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Xt(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&Ug(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Ug(e,o,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var f=c.memoizedState;if(f!==null){var m=f.dehydrated;m!==null&&Ko(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(z(163))}ut||e.flags&512&&dd(e)}catch(v){ke(e,e.return,v)}}if(e===t){K=null;break}if(n=e.sibling,n!==null){n.return=e.return,K=n;break}K=e.return}}function sy(t){for(;K!==null;){var e=K;if(e===t){K=null;break}var n=e.sibling;if(n!==null){n.return=e.return,K=n;break}K=e.return}}function oy(t){for(;K!==null;){var e=K;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Gu(4,e)}catch(u){ke(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(u){ke(e,i,u)}}var s=e.return;try{dd(e)}catch(u){ke(e,s,u)}break;case 5:var o=e.return;try{dd(e)}catch(u){ke(e,o,u)}}}catch(u){ke(e,e.return,u)}if(e===t){K=null;break}var l=e.sibling;if(l!==null){l.return=e.return,K=l;break}K=e.return}}var tS=Math.ceil,hu=Ln.ReactCurrentDispatcher,Lf=Ln.ReactCurrentOwner,Gt=Ln.ReactCurrentBatchConfig,oe=0,Ke=null,Be=null,tt=0,Vt=0,Zi=Sr(0),Ue=0,ia=null,oi=0,Wu=0,Of=0,Vo=null,Tt=null,Ff=0,ms=1/0,Tn=null,du=!1,md=null,ar=null,yl=!1,er=null,fu=0,Mo=0,gd=null,Vl=-1,Ml=0;function gt(){return oe&6?Me():Vl!==-1?Vl:Vl=Me()}function lr(t){return t.mode&1?oe&2&&tt!==0?tt&-tt:Fx.transition!==null?(Ml===0&&(Ml=A0()),Ml):(t=ce,t!==0||(t=window.event,t=t===void 0?16:V0(t.type)),t):1}function tn(t,e,n,r){if(50<Mo)throw Mo=0,gd=null,Error(z(185));Ia(t,n,r),(!(oe&2)||t!==Ke)&&(t===Ke&&(!(oe&2)&&(Wu|=n),Ue===4&&Yn(t,tt)),kt(t,r),n===1&&oe===0&&!(e.mode&1)&&(ms=Me()+500,Uu&&Pr()))}function kt(t,e){var n=t.callbackNode;FT(t,e);var r=Yl(t,t===Ke?tt:0);if(r===0)n!==null&&mg(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&mg(n),e===1)t.tag===0?Ox(ay.bind(null,t)):Z0(ay.bind(null,t)),Nx(function(){!(oe&6)&&Pr()}),n=null;else{switch(R0(r)){case 1:n=cf;break;case 4:n=S0;break;case 16:n=Ql;break;case 536870912:n=P0;break;default:n=Ql}n=Xv(n,qv.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function qv(t,e){if(Vl=-1,Ml=0,oe&6)throw Error(z(327));var n=t.callbackNode;if(os()&&t.callbackNode!==n)return null;var r=Yl(t,t===Ke?tt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=pu(t,r);else{e=r;var i=oe;oe|=2;var s=Wv();(Ke!==t||tt!==e)&&(Tn=null,ms=Me()+500,ei(t,e));do try{iS();break}catch(l){Gv(t,l)}while(!0);Tf(),hu.current=s,oe=i,Be!==null?e=0:(Ke=null,tt=0,e=Ue)}if(e!==0){if(e===2&&(i=$h(t),i!==0&&(r=i,e=yd(t,i))),e===1)throw n=ia,ei(t,0),Yn(t,r),kt(t,Me()),n;if(e===6)Yn(t,r);else{if(i=t.current.alternate,!(r&30)&&!nS(i)&&(e=pu(t,r),e===2&&(s=$h(t),s!==0&&(r=s,e=yd(t,s))),e===1))throw n=ia,ei(t,0),Yn(t,r),kt(t,Me()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(z(345));case 2:jr(t,Tt,Tn);break;case 3:if(Yn(t,r),(r&130023424)===r&&(e=Ff+500-Me(),10<e)){if(Yl(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){gt(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Xh(jr.bind(null,t,Tt,Tn),e);break}jr(t,Tt,Tn);break;case 4:if(Yn(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-en(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=Me()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*tS(r/1960))-r,10<r){t.timeoutHandle=Xh(jr.bind(null,t,Tt,Tn),r);break}jr(t,Tt,Tn);break;case 5:jr(t,Tt,Tn);break;default:throw Error(z(329))}}}return kt(t,Me()),t.callbackNode===n?qv.bind(null,t):null}function yd(t,e){var n=Vo;return t.current.memoizedState.isDehydrated&&(ei(t,e).flags|=256),t=pu(t,e),t!==2&&(e=Tt,Tt=n,e!==null&&_d(e)),t}function _d(t){Tt===null?Tt=t:Tt.push.apply(Tt,t)}function nS(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!nn(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Yn(t,e){for(e&=~Of,e&=~Wu,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-en(e),r=1<<n;t[n]=-1,e&=~r}}function ay(t){if(oe&6)throw Error(z(327));os();var e=Yl(t,0);if(!(e&1))return kt(t,Me()),null;var n=pu(t,e);if(t.tag!==0&&n===2){var r=$h(t);r!==0&&(e=r,n=yd(t,r))}if(n===1)throw n=ia,ei(t,0),Yn(t,e),kt(t,Me()),n;if(n===6)throw Error(z(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,jr(t,Tt,Tn),kt(t,Me()),null}function Bf(t,e){var n=oe;oe|=1;try{return t(e)}finally{oe=n,oe===0&&(ms=Me()+500,Uu&&Pr())}}function ai(t){er!==null&&er.tag===0&&!(oe&6)&&os();var e=oe;oe|=1;var n=Gt.transition,r=ce;try{if(Gt.transition=null,ce=1,t)return t()}finally{ce=r,Gt.transition=n,oe=e,!(oe&6)&&Pr()}}function jf(){Vt=Zi.current,ve(Zi)}function ei(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,Dx(n)),Be!==null)for(n=Be.return;n!==null;){var r=n;switch(wf(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&tu();break;case 3:fs(),ve(Ct),ve(ct),Cf();break;case 5:Rf(r);break;case 4:fs();break;case 13:ve(Pe);break;case 19:ve(Pe);break;case 10:xf(r.type._context);break;case 22:case 23:jf()}n=n.return}if(Ke=t,Be=t=ur(t.current,null),tt=Vt=e,Ue=0,ia=null,Of=Wu=oi=0,Tt=Vo=null,Qr!==null){for(e=0;e<Qr.length;e++)if(n=Qr[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}Qr=null}return t}function Gv(t,e){do{var n=Be;try{if(Tf(),kl.current=cu,uu){for(var r=Ae.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}uu=!1}if(si=0,Ge=ze=Ae=null,Do=!1,ta=0,Lf.current=null,n===null||n.return===null){Ue=1,ia=e,Be=null;break}e:{var s=t,o=n.return,l=n,u=e;if(e=tt,l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var c=u,f=l,m=f.tag;if(!(f.mode&1)&&(m===0||m===11||m===15)){var v=f.alternate;v?(f.updateQueue=v.updateQueue,f.memoizedState=v.memoizedState,f.lanes=v.lanes):(f.updateQueue=null,f.memoizedState=null)}var A=Hg(o);if(A!==null){A.flags&=-257,Qg(A,o,l,s,e),A.mode&1&&Kg(s,c,e),e=A,u=c;var k=e.updateQueue;if(k===null){var N=new Set;N.add(u),e.updateQueue=N}else k.add(u);break e}else{if(!(e&1)){Kg(s,c,e),zf();break e}u=Error(z(426))}}else if(we&&l.mode&1){var L=Hg(o);if(L!==null){!(L.flags&65536)&&(L.flags|=256),Qg(L,o,l,s,e),Ef(ps(u,l));break e}}s=u=ps(u,l),Ue!==4&&(Ue=2),Vo===null?Vo=[s]:Vo.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var R=Rv(s,u,e);zg(s,R);break e;case 1:l=u;var S=s.type,T=s.stateNode;if(!(s.flags&128)&&(typeof S.getDerivedStateFromError=="function"||T!==null&&typeof T.componentDidCatch=="function"&&(ar===null||!ar.has(T)))){s.flags|=65536,e&=-e,s.lanes|=e;var d=Cv(s,l,e);zg(s,d);break e}}s=s.return}while(s!==null)}Hv(n)}catch(g){e=g,Be===n&&n!==null&&(Be=n=n.return);continue}break}while(!0)}function Wv(){var t=hu.current;return hu.current=cu,t===null?cu:t}function zf(){(Ue===0||Ue===3||Ue===2)&&(Ue=4),Ke===null||!(oi&268435455)&&!(Wu&268435455)||Yn(Ke,tt)}function pu(t,e){var n=oe;oe|=2;var r=Wv();(Ke!==t||tt!==e)&&(Tn=null,ei(t,e));do try{rS();break}catch(i){Gv(t,i)}while(!0);if(Tf(),oe=n,hu.current=r,Be!==null)throw Error(z(261));return Ke=null,tt=0,Ue}function rS(){for(;Be!==null;)Kv(Be)}function iS(){for(;Be!==null&&!CT();)Kv(Be)}function Kv(t){var e=Yv(t.alternate,t,Vt);t.memoizedProps=t.pendingProps,e===null?Hv(t):Be=e,Lf.current=null}function Hv(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=Xx(n,e),n!==null){n.flags&=32767,Be=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Ue=6,Be=null;return}}else if(n=Yx(n,e,Vt),n!==null){Be=n;return}if(e=e.sibling,e!==null){Be=e;return}Be=e=t}while(e!==null);Ue===0&&(Ue=5)}function jr(t,e,n){var r=ce,i=Gt.transition;try{Gt.transition=null,ce=1,sS(t,e,n,r)}finally{Gt.transition=i,ce=r}return null}function sS(t,e,n,r){do os();while(er!==null);if(oe&6)throw Error(z(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(z(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(BT(t,s),t===Ke&&(Be=Ke=null,tt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||yl||(yl=!0,Xv(Ql,function(){return os(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Gt.transition,Gt.transition=null;var o=ce;ce=1;var l=oe;oe|=4,Lf.current=null,Zx(t,n),Uv(n,t),Sx(Qh),Xl=!!Hh,Qh=Hh=null,t.current=n,eS(n),bT(),oe=l,ce=o,Gt.transition=s}else t.current=n;if(yl&&(yl=!1,er=t,fu=i),s=t.pendingLanes,s===0&&(ar=null),NT(n.stateNode),kt(t,Me()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(du)throw du=!1,t=md,md=null,t;return fu&1&&t.tag!==0&&os(),s=t.pendingLanes,s&1?t===gd?Mo++:(Mo=0,gd=t):Mo=0,Pr(),null}function os(){if(er!==null){var t=R0(fu),e=Gt.transition,n=ce;try{if(Gt.transition=null,ce=16>t?16:t,er===null)var r=!1;else{if(t=er,er=null,fu=0,oe&6)throw Error(z(331));var i=oe;for(oe|=4,K=t.current;K!==null;){var s=K,o=s.child;if(K.flags&16){var l=s.deletions;if(l!==null){for(var u=0;u<l.length;u++){var c=l[u];for(K=c;K!==null;){var f=K;switch(f.tag){case 0:case 11:case 15:No(8,f,s)}var m=f.child;if(m!==null)m.return=f,K=m;else for(;K!==null;){f=K;var v=f.sibling,A=f.return;if(Bv(f),f===c){K=null;break}if(v!==null){v.return=A,K=v;break}K=A}}}var k=s.alternate;if(k!==null){var N=k.child;if(N!==null){k.child=null;do{var L=N.sibling;N.sibling=null,N=L}while(N!==null)}}K=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,K=o;else e:for(;K!==null;){if(s=K,s.flags&2048)switch(s.tag){case 0:case 11:case 15:No(9,s,s.return)}var R=s.sibling;if(R!==null){R.return=s.return,K=R;break e}K=s.return}}var S=t.current;for(K=S;K!==null;){o=K;var T=o.child;if(o.subtreeFlags&2064&&T!==null)T.return=o,K=T;else e:for(o=S;K!==null;){if(l=K,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Gu(9,l)}}catch(g){ke(l,l.return,g)}if(l===o){K=null;break e}var d=l.sibling;if(d!==null){d.return=l.return,K=d;break e}K=l.return}}if(oe=i,Pr(),cn&&typeof cn.onPostCommitFiberRoot=="function")try{cn.onPostCommitFiberRoot(Ou,t)}catch{}r=!0}return r}finally{ce=n,Gt.transition=e}}return!1}function ly(t,e,n){e=ps(n,e),e=Rv(t,e,1),t=or(t,e,1),e=gt(),t!==null&&(Ia(t,1,e),kt(t,e))}function ke(t,e,n){if(t.tag===3)ly(t,t,n);else for(;e!==null;){if(e.tag===3){ly(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(ar===null||!ar.has(r))){t=ps(n,t),t=Cv(e,t,1),e=or(e,t,1),t=gt(),e!==null&&(Ia(e,1,t),kt(e,t));break}}e=e.return}}function oS(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=gt(),t.pingedLanes|=t.suspendedLanes&n,Ke===t&&(tt&n)===n&&(Ue===4||Ue===3&&(tt&130023424)===tt&&500>Me()-Ff?ei(t,0):Of|=n),kt(t,e)}function Qv(t,e){e===0&&(t.mode&1?(e=al,al<<=1,!(al&130023424)&&(al=4194304)):e=1);var n=gt();t=Dn(t,e),t!==null&&(Ia(t,e,n),kt(t,n))}function aS(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Qv(t,n)}function lS(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(z(314))}r!==null&&r.delete(e),Qv(t,n)}var Yv;Yv=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Ct.current)St=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return St=!1,Qx(t,e,n);St=!!(t.flags&131072)}else St=!1,we&&e.flags&1048576&&ev(e,iu,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Nl(t,e),t=e.pendingProps;var i=cs(e,ct.current);ss(e,n),i=kf(null,e,r,t,i,n);var s=Df();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,bt(r)?(s=!0,nu(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Pf(e),i.updater=qu,e.stateNode=i,i._reactInternals=e,id(e,r,t,n),e=ad(null,e,r,!0,s,n)):(e.tag=0,we&&s&&vf(e),ft(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Nl(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=cS(r),t=Xt(r,t),i){case 0:e=od(null,e,r,t,n);break e;case 1:e=Jg(null,e,r,t,n);break e;case 11:e=Yg(null,e,r,t,n);break e;case 14:e=Xg(null,e,r,Xt(r.type,t),n);break e}throw Error(z(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Xt(r,i),od(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Xt(r,i),Jg(t,e,r,i,n);case 3:e:{if(Nv(e),t===null)throw Error(z(387));r=e.pendingProps,s=e.memoizedState,i=s.element,ov(t,e),au(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=ps(Error(z(423)),e),e=Zg(t,e,r,n,i);break e}else if(r!==i){i=ps(Error(z(424)),e),e=Zg(t,e,r,n,i);break e}else for(Mt=sr(e.stateNode.containerInfo.firstChild),Lt=e,we=!0,Zt=null,n=iv(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(hs(),r===i){e=Nn(t,e,n);break e}ft(t,e,r,n)}e=e.child}return e;case 5:return av(e),t===null&&td(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,Yh(r,i)?o=null:s!==null&&Yh(r,s)&&(e.flags|=32),Dv(t,e),ft(t,e,o,n),e.child;case 6:return t===null&&td(e),null;case 13:return Vv(t,e,n);case 4:return Af(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=ds(e,null,r,n):ft(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Xt(r,i),Yg(t,e,r,i,n);case 7:return ft(t,e,e.pendingProps,n),e.child;case 8:return ft(t,e,e.pendingProps.children,n),e.child;case 12:return ft(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,pe(su,r._currentValue),r._currentValue=o,s!==null)if(nn(s.value,o)){if(s.children===i.children&&!Ct.current){e=Nn(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var l=s.dependencies;if(l!==null){o=s.child;for(var u=l.firstContext;u!==null;){if(u.context===r){if(s.tag===1){u=Rn(-1,n&-n),u.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var f=c.pending;f===null?u.next=u:(u.next=f.next,f.next=u),c.pending=u}}s.lanes|=n,u=s.alternate,u!==null&&(u.lanes|=n),nd(s.return,n,e),l.lanes|=n;break}u=u.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(z(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),nd(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}ft(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,ss(e,n),i=Kt(i),r=r(i),e.flags|=1,ft(t,e,r,n),e.child;case 14:return r=e.type,i=Xt(r,e.pendingProps),i=Xt(r.type,i),Xg(t,e,r,i,n);case 15:return bv(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Xt(r,i),Nl(t,e),e.tag=1,bt(r)?(t=!0,nu(e)):t=!1,ss(e,n),Av(e,r,i),id(e,r,i,n),ad(null,e,r,!0,t,n);case 19:return Mv(t,e,n);case 22:return kv(t,e,n)}throw Error(z(156,e.tag))};function Xv(t,e){return x0(t,e)}function uS(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function $t(t,e,n,r){return new uS(t,e,n,r)}function Uf(t){return t=t.prototype,!(!t||!t.isReactComponent)}function cS(t){if(typeof t=="function")return Uf(t)?1:0;if(t!=null){if(t=t.$$typeof,t===af)return 11;if(t===lf)return 14}return 2}function ur(t,e){var n=t.alternate;return n===null?(n=$t(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Ll(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")Uf(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case $i:return ti(n.children,i,s,e);case of:o=8,i|=8;break;case Rh:return t=$t(12,n,e,i|2),t.elementType=Rh,t.lanes=s,t;case Ch:return t=$t(13,n,e,i),t.elementType=Ch,t.lanes=s,t;case bh:return t=$t(19,n,e,i),t.elementType=bh,t.lanes=s,t;case a0:return Ku(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case s0:o=10;break e;case o0:o=9;break e;case af:o=11;break e;case lf:o=14;break e;case Kn:o=16,r=null;break e}throw Error(z(130,t==null?t:typeof t,""))}return e=$t(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function ti(t,e,n,r){return t=$t(7,t,r,e),t.lanes=n,t}function Ku(t,e,n,r){return t=$t(22,t,r,e),t.elementType=a0,t.lanes=n,t.stateNode={isHidden:!1},t}function ph(t,e,n){return t=$t(6,t,null,e),t.lanes=n,t}function mh(t,e,n){return e=$t(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function hS(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Qc(0),this.expirationTimes=Qc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Qc(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function $f(t,e,n,r,i,s,o,l,u){return t=new hS(t,e,n,l,u),e===1?(e=1,s===!0&&(e|=8)):e=0,s=$t(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Pf(s),t}function dS(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ui,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function Jv(t){if(!t)return fr;t=t._reactInternals;e:{if(wi(t)!==t||t.tag!==1)throw Error(z(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(bt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(z(171))}if(t.tag===1){var n=t.type;if(bt(n))return J0(t,n,e)}return e}function Zv(t,e,n,r,i,s,o,l,u){return t=$f(n,r,!0,t,i,s,o,l,u),t.context=Jv(null),n=t.current,r=gt(),i=lr(n),s=Rn(r,i),s.callback=e??null,or(n,s,i),t.current.lanes=i,Ia(t,i,r),kt(t,r),t}function Hu(t,e,n,r){var i=e.current,s=gt(),o=lr(i);return n=Jv(n),e.context===null?e.context=n:e.pendingContext=n,e=Rn(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=or(i,e,o),t!==null&&(tn(t,i,o,s),bl(t,i,o)),o}function mu(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function uy(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function qf(t,e){uy(t,e),(t=t.alternate)&&uy(t,e)}function fS(){return null}var ew=typeof reportError=="function"?reportError:function(t){console.error(t)};function Gf(t){this._internalRoot=t}Qu.prototype.render=Gf.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(z(409));Hu(t,e,null,null)};Qu.prototype.unmount=Gf.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;ai(function(){Hu(null,t,null,null)}),e[kn]=null}};function Qu(t){this._internalRoot=t}Qu.prototype.unstable_scheduleHydration=function(t){if(t){var e=k0();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Qn.length&&e!==0&&e<Qn[n].priority;n++);Qn.splice(n,0,t),n===0&&N0(t)}};function Wf(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Yu(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function cy(){}function pS(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=mu(o);s.call(c)}}var o=Zv(e,r,t,0,null,!1,!1,"",cy);return t._reactRootContainer=o,t[kn]=o.current,Yo(t.nodeType===8?t.parentNode:t),ai(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var l=r;r=function(){var c=mu(u);l.call(c)}}var u=$f(t,0,!1,null,null,!1,!1,"",cy);return t._reactRootContainer=u,t[kn]=u.current,Yo(t.nodeType===8?t.parentNode:t),ai(function(){Hu(e,u,n,r)}),u}function Xu(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var l=i;i=function(){var u=mu(o);l.call(u)}}Hu(e,o,t,i)}else o=pS(n,e,t,i,r);return mu(o)}C0=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Eo(e.pendingLanes);n!==0&&(hf(e,n|1),kt(e,Me()),!(oe&6)&&(ms=Me()+500,Pr()))}break;case 13:ai(function(){var r=Dn(t,1);if(r!==null){var i=gt();tn(r,t,1,i)}}),qf(t,1)}};df=function(t){if(t.tag===13){var e=Dn(t,134217728);if(e!==null){var n=gt();tn(e,t,134217728,n)}qf(t,134217728)}};b0=function(t){if(t.tag===13){var e=lr(t),n=Dn(t,e);if(n!==null){var r=gt();tn(n,t,e,r)}qf(t,e)}};k0=function(){return ce};D0=function(t,e){var n=ce;try{return ce=t,e()}finally{ce=n}};jh=function(t,e,n){switch(e){case"input":if(Nh(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=zu(r);if(!i)throw Error(z(90));u0(r),Nh(r,i)}}}break;case"textarea":h0(t,n);break;case"select":e=n.value,e!=null&&ts(t,!!n.multiple,e,!1)}};_0=Bf;v0=ai;var mS={usingClientEntryPoint:!1,Events:[xa,Ki,zu,g0,y0,Bf]},fo={findFiberByHostInstance:Hr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},gS={bundleType:fo.bundleType,version:fo.version,rendererPackageName:fo.rendererPackageName,rendererConfig:fo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ln.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=I0(t),t===null?null:t.stateNode},findFiberByHostInstance:fo.findFiberByHostInstance||fS,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var _l=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!_l.isDisabled&&_l.supportsFiber)try{Ou=_l.inject(gS),cn=_l}catch{}}Bt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=mS;Bt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Wf(e))throw Error(z(200));return dS(t,e,null,n)};Bt.createRoot=function(t,e){if(!Wf(t))throw Error(z(299));var n=!1,r="",i=ew;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=$f(t,1,!1,null,null,n,!1,r,i),t[kn]=e.current,Yo(t.nodeType===8?t.parentNode:t),new Gf(e)};Bt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(z(188)):(t=Object.keys(t).join(","),Error(z(268,t)));return t=I0(e),t=t===null?null:t.stateNode,t};Bt.flushSync=function(t){return ai(t)};Bt.hydrate=function(t,e,n){if(!Yu(e))throw Error(z(200));return Xu(null,t,e,!0,n)};Bt.hydrateRoot=function(t,e,n){if(!Wf(t))throw Error(z(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=ew;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=Zv(e,null,t,1,n??null,i,!1,s,o),t[kn]=e.current,Yo(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Qu(e)};Bt.render=function(t,e,n){if(!Yu(e))throw Error(z(200));return Xu(null,t,e,!1,n)};Bt.unmountComponentAtNode=function(t){if(!Yu(t))throw Error(z(40));return t._reactRootContainer?(ai(function(){Xu(null,null,t,!1,function(){t._reactRootContainer=null,t[kn]=null})}),!0):!1};Bt.unstable_batchedUpdates=Bf;Bt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Yu(n))throw Error(z(200));if(t==null||t._reactInternals===void 0)throw Error(z(38));return Xu(t,e,n,!1,r)};Bt.version="18.3.1-next-f1338f8080-20240426";function tw(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(tw)}catch(t){console.error(t)}}tw(),t0.exports=Bt;var yS=t0.exports,hy=yS;Ph.createRoot=hy.createRoot,Ph.hydrateRoot=hy.hydrateRoot;/**
 * @remix-run/router v1.18.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function gu(){return gu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},gu.apply(this,arguments)}var Xr;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Xr||(Xr={}));const dy="popstate";function _S(t){t===void 0&&(t={});function e(r,i){let{pathname:s,search:o,hash:l}=r.location;return vd("",{pathname:s,search:o,hash:l},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:nw(i)}return wS(e,n,null,t)}function Kf(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function vS(){return Math.random().toString(36).substr(2,8)}function fy(t,e){return{usr:t.state,key:t.key,idx:e}}function vd(t,e,n,r){return n===void 0&&(n=null),gu({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?rw(e):e,{state:n,key:e&&e.key||r||vS()})}function nw(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function rw(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function wS(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,l=Xr.Pop,u=null,c=f();c==null&&(c=0,o.replaceState(gu({},o.state,{idx:c}),""));function f(){return(o.state||{idx:null}).idx}function m(){l=Xr.Pop;let L=f(),R=L==null?null:L-c;c=L,u&&u({action:l,location:N.location,delta:R})}function v(L,R){l=Xr.Push;let S=vd(N.location,L,R);c=f()+1;let T=fy(S,c),d=N.createHref(S);try{o.pushState(T,"",d)}catch(g){if(g instanceof DOMException&&g.name==="DataCloneError")throw g;i.location.assign(d)}s&&u&&u({action:l,location:N.location,delta:1})}function A(L,R){l=Xr.Replace;let S=vd(N.location,L,R);c=f();let T=fy(S,c),d=N.createHref(S);o.replaceState(T,"",d),s&&u&&u({action:l,location:N.location,delta:0})}function k(L){let R=i.location.origin!=="null"?i.location.origin:i.location.href,S=typeof L=="string"?L:nw(L);return S=S.replace(/ $/,"%20"),Kf(R,"No window.location.(origin|href) available to create URL for href: "+S),new URL(S,R)}let N={get action(){return l},get location(){return t(i,o)},listen(L){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(dy,m),u=L,()=>{i.removeEventListener(dy,m),u=null}},createHref(L){return e(i,L)},createURL:k,encodeLocation(L){let R=k(L);return{pathname:R.pathname,search:R.search,hash:R.hash}},push:v,replace:A,go(L){return o.go(L)}};return N}var py;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(py||(py={}));function ES(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}const iw=["post","put","patch","delete"];new Set(iw);const IS=["get",...iw];new Set(IS);/**
 * React Router v6.25.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function wd(){return wd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},wd.apply(this,arguments)}const TS=H.createContext(null),Hf=H.createContext(null);function sw(){return H.useContext(Hf)!=null}function xS(){return sw()||Kf(!1),H.useContext(Hf).location}function SS(t){let{basename:e="/",children:n=null,location:r,navigationType:i=Xr.Pop,navigator:s,static:o=!1,future:l}=t;sw()&&Kf(!1);let u=e.replace(/^\/*/,"/"),c=H.useMemo(()=>({basename:u,navigator:s,static:o,future:wd({v7_relativeSplatPath:!1},l)}),[u,l,s,o]);typeof r=="string"&&(r=rw(r));let{pathname:f="/",search:m="",hash:v="",state:A=null,key:k="default"}=r,N=H.useMemo(()=>{let L=ES(f,u);return L==null?null:{location:{pathname:L,search:m,hash:v,state:A,key:k},navigationType:i}},[u,f,m,v,A,k,i]);return N==null?null:H.createElement(TS.Provider,{value:c},H.createElement(Hf.Provider,{children:n,value:N}))}new Promise(()=>{});/**
 * React Router DOM v6.25.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const PS="6";try{window.__reactRouterVersion=PS}catch{}const AS="startTransition",my=oT[AS];function RS(t){let{basename:e,children:n,future:r,window:i}=t,s=H.useRef();s.current==null&&(s.current=_S({window:i,v5Compat:!0}));let o=s.current,[l,u]=H.useState({action:o.action,location:o.location}),{v7_startTransition:c}=r||{},f=H.useCallback(m=>{c&&my?my(()=>u(m)):u(m)},[u,c]);return H.useLayoutEffect(()=>o.listen(f),[o,f]),H.createElement(SS,{basename:e,children:n,location:l.location,navigationType:l.action,navigator:o,future:r})}var gy;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(gy||(gy={}));var yy;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(yy||(yy={}));var Ed={exports:{}};(function(t,e){(function(n,r){r(e)})($I,function(n){class r{constructor(d,g){this.state={angle:0,area:[],position:{x:0,y:0},hardAngle:0,hardDrawingAngle:0},this.createdDensity=g,this.nowDrawingDensity=this.createdDensity,this.render=d}setDensity(d){this.createdDensity=d,this.nowDrawingDensity=d}setDrawingDensity(d){this.nowDrawingDensity=d}setPosition(d){this.state.position=d}setAngle(d){this.state.angle=d}setArea(d){this.state.area=d}setHardDrawingAngle(d){this.state.hardDrawingAngle=d}setHardAngle(d){this.state.hardAngle=d,this.state.hardDrawingAngle=d}setOrientation(d){this.orientation=d}getDrawingDensity(){return this.nowDrawingDensity}getDensity(){return this.createdDensity}getHardAngle(){return this.state.hardAngle}}class i extends r{constructor(d,g,I){super(d,I),this.image=null,this.isLoad=!1,this.loadingAngle=0,this.image=new Image,this.image.src=g}draw(d){const g=this.render.getContext(),I=this.render.convertToGlobal(this.state.position),_=this.render.getRect().pageWidth,y=this.render.getRect().height;g.save(),g.translate(I.x,I.y),g.beginPath();for(let w of this.state.area)w!==null&&(w=this.render.convertToGlobal(w),g.lineTo(w.x-I.x,w.y-I.y));g.rotate(this.state.angle),g.clip(),this.isLoad?g.drawImage(this.image,0,0,_,y):this.drawLoader(g,{x:0,y:0},_,y),g.restore()}simpleDraw(d){const g=this.render.getRect(),I=this.render.getContext(),_=g.pageWidth,y=g.height,w=d===1?g.left+g.pageWidth:g.left,x=g.top;this.isLoad?I.drawImage(this.image,w,x,_,y):this.drawLoader(I,{x:w,y:x},_,y)}drawLoader(d,g,I,_){d.beginPath(),d.strokeStyle="rgb(200, 200, 200)",d.fillStyle="rgb(255, 255, 255)",d.lineWidth=1,d.rect(g.x+1,g.y+1,I-1,_-1),d.stroke(),d.fill();const y={x:g.x+I/2,y:g.y+_/2};d.beginPath(),d.lineWidth=10,d.arc(y.x,y.y,20,this.loadingAngle,3*Math.PI/2+this.loadingAngle),d.stroke(),d.closePath(),this.loadingAngle+=.07,this.loadingAngle>=2*Math.PI&&(this.loadingAngle=0)}load(){this.isLoad||(this.image.onload=()=>{this.isLoad=!0})}newTemporaryCopy(){return this}getTemporaryCopy(){return this}hideTemporaryCopy(){}}class s{constructor(d,g){this.pages=[],this.currentPageIndex=0,this.currentSpreadIndex=0,this.landscapeSpread=[],this.portraitSpread=[],this.render=g,this.app=d,this.currentPageIndex=0,this.isShowCover=this.app.getSettings().showCover}destroy(){this.pages=[]}createSpread(){this.landscapeSpread=[],this.portraitSpread=[];for(let g=0;g<this.pages.length;g++)this.portraitSpread.push([g]);let d=0;this.isShowCover&&(this.pages[0].setDensity("hard"),this.landscapeSpread.push([d]),d++);for(let g=d;g<this.pages.length;g+=2)g<this.pages.length-1?this.landscapeSpread.push([g,g+1]):(this.landscapeSpread.push([g]),this.pages[g].setDensity("hard"))}getSpread(){return this.render.getOrientation()==="landscape"?this.landscapeSpread:this.portraitSpread}getSpreadIndexByPage(d){const g=this.getSpread();for(let I=0;I<g.length;I++)if(d===g[I][0]||d===g[I][1])return I;return null}getPageCount(){return this.pages.length}getPages(){return this.pages}getPage(d){if(d>=0&&d<this.pages.length)return this.pages[d];throw new Error("Invalid page number")}nextBy(d){const g=this.pages.indexOf(d);return g<this.pages.length-1?this.pages[g+1]:null}prevBy(d){const g=this.pages.indexOf(d);return g>0?this.pages[g-1]:null}getFlippingPage(d){const g=this.currentSpreadIndex;if(this.render.getOrientation()==="portrait")return d===0?this.pages[g].newTemporaryCopy():this.pages[g-1];{const I=d===0?this.getSpread()[g+1]:this.getSpread()[g-1];return I.length===1||d===0?this.pages[I[0]]:this.pages[I[1]]}}getBottomPage(d){const g=this.currentSpreadIndex;if(this.render.getOrientation()==="portrait")return d===0?this.pages[g+1]:this.pages[g-1];{const I=d===0?this.getSpread()[g+1]:this.getSpread()[g-1];return I.length===1?this.pages[I[0]]:d===0?this.pages[I[1]]:this.pages[I[0]]}}showNext(){this.currentSpreadIndex<this.getSpread().length&&(this.currentSpreadIndex++,this.showSpread())}showPrev(){this.currentSpreadIndex>0&&(this.currentSpreadIndex--,this.showSpread())}getCurrentPageIndex(){return this.currentPageIndex}show(d=null){if(d===null&&(d=this.currentPageIndex),d<0||d>=this.pages.length)return;const g=this.getSpreadIndexByPage(d);g!==null&&(this.currentSpreadIndex=g,this.showSpread())}getCurrentSpreadIndex(){return this.currentSpreadIndex}setCurrentSpreadIndex(d){if(!(d>=0&&d<this.getSpread().length))throw new Error("Invalid page");this.currentSpreadIndex=d}showSpread(){const d=this.getSpread()[this.currentSpreadIndex];d.length===2?(this.render.setLeftPage(this.pages[d[0]]),this.render.setRightPage(this.pages[d[1]])):this.render.getOrientation()==="landscape"&&d[0]===this.pages.length-1?(this.render.setLeftPage(this.pages[d[0]]),this.render.setRightPage(null)):(this.render.setLeftPage(null),this.render.setRightPage(this.pages[d[0]])),this.currentPageIndex=d[0],this.app.updatePageIndex(this.currentPageIndex)}}class o extends s{constructor(d,g,I){super(d,g),this.imagesHref=I}load(){for(const d of this.imagesHref){const g=new i(this.render,d,"soft");g.load(),this.pages.push(g)}this.createSpread()}}class l{static GetDistanceBetweenTwoPoint(d,g){return d===null||g===null?1/0:Math.sqrt(Math.pow(g.x-d.x,2)+Math.pow(g.y-d.y,2))}static GetSegmentLength(d){return l.GetDistanceBetweenTwoPoint(d[0],d[1])}static GetAngleBetweenTwoLine(d,g){const I=d[0].y-d[1].y,_=g[0].y-g[1].y,y=d[1].x-d[0].x,w=g[1].x-g[0].x;return Math.acos((I*_+y*w)/(Math.sqrt(I*I+y*y)*Math.sqrt(_*_+w*w)))}static PointInRect(d,g){return g===null?null:g.x>=d.left&&g.x<=d.width+d.left&&g.y>=d.top&&g.y<=d.top+d.height?g:null}static GetRotatedPoint(d,g,I){return{x:d.x*Math.cos(I)+d.y*Math.sin(I)+g.x,y:d.y*Math.cos(I)-d.x*Math.sin(I)+g.y}}static LimitPointToCircle(d,g,I){if(l.GetDistanceBetweenTwoPoint(d,I)<=g)return I;const _=d.x,y=d.y,w=I.x,x=I.y;let C=Math.sqrt(Math.pow(g,2)*Math.pow(_-w,2)/(Math.pow(_-w,2)+Math.pow(y-x,2)))+_;I.x<0&&(C*=-1);let D=(C-_)*(y-x)/(_-w)+y;return _-w+y===0&&(D=g),{x:C,y:D}}static GetIntersectBetweenTwoSegment(d,g,I){return l.PointInRect(d,l.GetIntersectBeetwenTwoLine(g,I))}static GetIntersectBeetwenTwoLine(d,g){const I=d[0].y-d[1].y,_=g[0].y-g[1].y,y=d[1].x-d[0].x,w=g[1].x-g[0].x,x=d[0].x*d[1].y-d[1].x*d[0].y,C=g[0].x*g[1].y-g[1].x*g[0].y,D=I*C-_*x,P=y*C-w*x,xe=-(x*w-C*y)/(I*w-_*y),Dt=-(I*C-_*x)/(I*w-_*y);if(isFinite(xe)&&isFinite(Dt))return{x:xe,y:Dt};if(Math.abs(D-P)<.1)throw new Error("Segment included");return null}static GetCordsFromTwoPoint(d,g){const I=Math.abs(d.x-g.x),_=Math.abs(d.y-g.y),y=Math.max(I,_),w=[d];function x(C,D,P,xe,Dt){return D>C?C+Dt*(P/xe):D<C?C-Dt*(P/xe):C}for(let C=1;C<=y;C+=1)w.push({x:x(d.x,g.x,I,y,C),y:x(d.y,g.y,_,y,C)});return w}}class u extends r{constructor(d,g,I){super(d,I),this.copiedElement=null,this.temporaryCopy=null,this.isLoad=!1,this.element=g,this.element.classList.add("stf__item"),this.element.classList.add("--"+I)}newTemporaryCopy(){return this.nowDrawingDensity==="hard"?this:(this.temporaryCopy===null&&(this.copiedElement=this.element.cloneNode(!0),this.element.parentElement.appendChild(this.copiedElement),this.temporaryCopy=new u(this.render,this.copiedElement,this.nowDrawingDensity)),this.getTemporaryCopy())}getTemporaryCopy(){return this.temporaryCopy}hideTemporaryCopy(){this.temporaryCopy!==null&&(this.copiedElement.remove(),this.copiedElement=null,this.temporaryCopy=null)}draw(d){const g=d||this.nowDrawingDensity,I=this.render.convertToGlobal(this.state.position),_=this.render.getRect().pageWidth,y=this.render.getRect().height;this.element.classList.remove("--simple");const w=`
            display: block;
            z-index: ${this.element.style.zIndex};
            left: 0;
            top: 0;
            width: ${_}px;
            height: ${y}px;
        `;g==="hard"?this.drawHard(w):this.drawSoft(I,w)}drawHard(d=""){const g=this.render.getRect().left+this.render.getRect().width/2,I=this.state.hardDrawingAngle,_=d+`
                backface-visibility: hidden;
                -webkit-backface-visibility: hidden;
                clip-path: none;
                -webkit-clip-path: none;
            `+(this.orientation===0?`transform-origin: ${this.render.getRect().pageWidth}px 0; 
                   transform: translate3d(0, 0, 0) rotateY(${I}deg);`:`transform-origin: 0 0; 
                   transform: translate3d(${g}px, 0, 0) rotateY(${I}deg);`);this.element.style.cssText=_}drawSoft(d,g=""){let I="polygon( ";for(const y of this.state.area)if(y!==null){let w=this.render.getDirection()===1?{x:-y.x+this.state.position.x,y:y.y-this.state.position.y}:{x:y.x-this.state.position.x,y:y.y-this.state.position.y};w=l.GetRotatedPoint(w,{x:0,y:0},this.state.angle),I+=w.x+"px "+w.y+"px, "}I=I.slice(0,-2),I+=")";const _=g+`transform-origin: 0 0; clip-path: ${I}; -webkit-clip-path: ${I};`+(this.render.isSafari()&&this.state.angle===0?`transform: translate(${d.x}px, ${d.y}px);`:`transform: translate3d(${d.x}px, ${d.y}px, 0) rotate(${this.state.angle}rad);`);this.element.style.cssText=_}simpleDraw(d){const g=this.render.getRect(),I=g.pageWidth,_=g.height,y=d===1?g.left+g.pageWidth:g.left,w=g.top;this.element.classList.add("--simple"),this.element.style.cssText=`
            position: absolute; 
            display: block; 
            height: ${_}px; 
            left: ${y}px; 
            top: ${w}px; 
            width: ${I}px; 
            z-index: ${this.render.getSettings().startZIndex+1};`}getElement(){return this.element}load(){this.isLoad=!0}setOrientation(d){super.setOrientation(d),this.element.classList.remove("--left","--right"),this.element.classList.add(d===1?"--right":"--left")}setDrawingDensity(d){this.element.classList.remove("--soft","--hard"),this.element.classList.add("--"+d),super.setDrawingDensity(d)}}class c extends s{constructor(d,g,I,_){super(d,g),this.element=I,this.pagesElement=_}load(){for(const d of this.pagesElement){const g=new u(this.render,d,d.dataset.density==="hard"?"hard":"soft");g.load(),this.pages.push(g)}this.createSpread()}}class f{constructor(d,g,I,_){this.direction=d,this.corner=g,this.topIntersectPoint=null,this.sideIntersectPoint=null,this.bottomIntersectPoint=null,this.pageWidth=parseInt(I,10),this.pageHeight=parseInt(_,10)}calc(d){try{return this.position=this.calcAngleAndPosition(d),this.calculateIntersectPoint(this.position),!0}catch{return!1}}getFlippingClipArea(){const d=[];let g=!1;return d.push(this.rect.topLeft),d.push(this.topIntersectPoint),this.sideIntersectPoint===null?g=!0:(d.push(this.sideIntersectPoint),this.bottomIntersectPoint===null&&(g=!1)),d.push(this.bottomIntersectPoint),(g||this.corner==="bottom")&&d.push(this.rect.bottomLeft),d}getBottomClipArea(){const d=[];return d.push(this.topIntersectPoint),this.corner==="top"?d.push({x:this.pageWidth,y:0}):(this.topIntersectPoint!==null&&d.push({x:this.pageWidth,y:0}),d.push({x:this.pageWidth,y:this.pageHeight})),this.sideIntersectPoint!==null?l.GetDistanceBetweenTwoPoint(this.sideIntersectPoint,this.topIntersectPoint)>=10&&d.push(this.sideIntersectPoint):this.corner==="top"&&d.push({x:this.pageWidth,y:this.pageHeight}),d.push(this.bottomIntersectPoint),d.push(this.topIntersectPoint),d}getAngle(){return this.direction===0?-this.angle:this.angle}getRect(){return this.rect}getPosition(){return this.position}getActiveCorner(){return this.direction===0?this.rect.topLeft:this.rect.topRight}getDirection(){return this.direction}getFlippingProgress(){return Math.abs((this.position.x-this.pageWidth)/(2*this.pageWidth)*100)}getCorner(){return this.corner}getBottomPagePosition(){return this.direction===1?{x:this.pageWidth,y:0}:{x:0,y:0}}getShadowStartPoint(){return this.corner==="top"?this.topIntersectPoint:this.sideIntersectPoint!==null?this.sideIntersectPoint:this.topIntersectPoint}getShadowAngle(){const d=l.GetAngleBetweenTwoLine(this.getSegmentToShadowLine(),[{x:0,y:0},{x:this.pageWidth,y:0}]);return this.direction===0?d:Math.PI-d}calcAngleAndPosition(d){let g=d;if(this.updateAngleAndGeometry(g),g=this.corner==="top"?this.checkPositionAtCenterLine(g,{x:0,y:0},{x:0,y:this.pageHeight}):this.checkPositionAtCenterLine(g,{x:0,y:this.pageHeight},{x:0,y:0}),Math.abs(g.x-this.pageWidth)<1&&Math.abs(g.y)<1)throw new Error("Point is too small");return g}updateAngleAndGeometry(d){this.angle=this.calculateAngle(d),this.rect=this.getPageRect(d)}calculateAngle(d){const g=this.pageWidth-d.x+1,I=this.corner==="bottom"?this.pageHeight-d.y:d.y;let _=2*Math.acos(g/Math.sqrt(I*I+g*g));I<0&&(_=-_);const y=Math.PI-_;if(!isFinite(_)||y>=0&&y<.003)throw new Error("The G point is too small");return this.corner==="bottom"&&(_=-_),_}getPageRect(d){return this.corner==="top"?this.getRectFromBasePoint([{x:0,y:0},{x:this.pageWidth,y:0},{x:0,y:this.pageHeight},{x:this.pageWidth,y:this.pageHeight}],d):this.getRectFromBasePoint([{x:0,y:-this.pageHeight},{x:this.pageWidth,y:-this.pageHeight},{x:0,y:0},{x:this.pageWidth,y:0}],d)}getRectFromBasePoint(d,g){return{topLeft:this.getRotatedPoint(d[0],g),topRight:this.getRotatedPoint(d[1],g),bottomLeft:this.getRotatedPoint(d[2],g),bottomRight:this.getRotatedPoint(d[3],g)}}getRotatedPoint(d,g){return{x:d.x*Math.cos(this.angle)+d.y*Math.sin(this.angle)+g.x,y:d.y*Math.cos(this.angle)-d.x*Math.sin(this.angle)+g.y}}calculateIntersectPoint(d){const g={left:-1,top:-1,width:this.pageWidth+2,height:this.pageHeight+2};this.corner==="top"?(this.topIntersectPoint=l.GetIntersectBetweenTwoSegment(g,[d,this.rect.topRight],[{x:0,y:0},{x:this.pageWidth,y:0}]),this.sideIntersectPoint=l.GetIntersectBetweenTwoSegment(g,[d,this.rect.bottomLeft],[{x:this.pageWidth,y:0},{x:this.pageWidth,y:this.pageHeight}]),this.bottomIntersectPoint=l.GetIntersectBetweenTwoSegment(g,[this.rect.bottomLeft,this.rect.bottomRight],[{x:0,y:this.pageHeight},{x:this.pageWidth,y:this.pageHeight}])):(this.topIntersectPoint=l.GetIntersectBetweenTwoSegment(g,[this.rect.topLeft,this.rect.topRight],[{x:0,y:0},{x:this.pageWidth,y:0}]),this.sideIntersectPoint=l.GetIntersectBetweenTwoSegment(g,[d,this.rect.topLeft],[{x:this.pageWidth,y:0},{x:this.pageWidth,y:this.pageHeight}]),this.bottomIntersectPoint=l.GetIntersectBetweenTwoSegment(g,[this.rect.bottomLeft,this.rect.bottomRight],[{x:0,y:this.pageHeight},{x:this.pageWidth,y:this.pageHeight}]))}checkPositionAtCenterLine(d,g,I){let _=d;const y=l.LimitPointToCircle(g,this.pageWidth,_);_!==y&&(_=y,this.updateAngleAndGeometry(_));const w=Math.sqrt(Math.pow(this.pageWidth,2)+Math.pow(this.pageHeight,2));let x=this.rect.bottomRight,C=this.rect.topLeft;if(this.corner==="bottom"&&(x=this.rect.topRight,C=this.rect.bottomLeft),x.x<=0){const D=l.LimitPointToCircle(I,w,C);D!==_&&(_=D,this.updateAngleAndGeometry(_))}return _}getSegmentToShadowLine(){const d=this.getShadowStartPoint();return[d,d!==this.sideIntersectPoint&&this.sideIntersectPoint!==null?this.sideIntersectPoint:this.bottomIntersectPoint]}}class m{constructor(d,g){this.flippingPage=null,this.bottomPage=null,this.calc=null,this.state="read",this.render=d,this.app=g}fold(d){this.setState("user_fold"),this.calc===null&&this.start(d),this.do(this.render.convertToPage(d))}flip(d){if(this.app.getSettings().disableFlipByClick&&!this.isPointOnCorners(d)||(this.calc!==null&&this.render.finishAnimation(),!this.start(d)))return;const g=this.getBoundsRect();this.setState("flipping");const I=g.height/10,_=this.calc.getCorner()==="bottom"?g.height-I:I,y=this.calc.getCorner()==="bottom"?g.height:0;this.calc.calc({x:g.pageWidth-I,y:_}),this.animateFlippingTo({x:g.pageWidth-I,y:_},{x:-g.pageWidth,y},!0)}start(d){this.reset();const g=this.render.convertToBook(d),I=this.getBoundsRect(),_=this.getDirectionByPoint(g),y=g.y>=I.height/2?"bottom":"top";if(!this.checkDirection(_))return!1;try{if(this.flippingPage=this.app.getPageCollection().getFlippingPage(_),this.bottomPage=this.app.getPageCollection().getBottomPage(_),this.render.getOrientation()==="landscape")if(_===1){const w=this.app.getPageCollection().nextBy(this.flippingPage);w!==null&&this.flippingPage.getDensity()!==w.getDensity()&&(this.flippingPage.setDrawingDensity("hard"),w.setDrawingDensity("hard"))}else{const w=this.app.getPageCollection().prevBy(this.flippingPage);w!==null&&this.flippingPage.getDensity()!==w.getDensity()&&(this.flippingPage.setDrawingDensity("hard"),w.setDrawingDensity("hard"))}return this.render.setDirection(_),this.calc=new f(_,y,I.pageWidth.toString(10),I.height.toString(10)),!0}catch{return!1}}do(d){if(this.calc!==null&&this.calc.calc(d)){const g=this.calc.getFlippingProgress();this.bottomPage.setArea(this.calc.getBottomClipArea()),this.bottomPage.setPosition(this.calc.getBottomPagePosition()),this.bottomPage.setAngle(0),this.bottomPage.setHardAngle(0),this.flippingPage.setArea(this.calc.getFlippingClipArea()),this.flippingPage.setPosition(this.calc.getActiveCorner()),this.flippingPage.setAngle(this.calc.getAngle()),this.calc.getDirection()===0?this.flippingPage.setHardAngle(90*(200-2*g)/100):this.flippingPage.setHardAngle(-90*(200-2*g)/100),this.render.setPageRect(this.calc.getRect()),this.render.setBottomPage(this.bottomPage),this.render.setFlippingPage(this.flippingPage),this.render.setShadowData(this.calc.getShadowStartPoint(),this.calc.getShadowAngle(),g,this.calc.getDirection())}}flipToPage(d,g){const I=this.app.getPageCollection().getCurrentSpreadIndex(),_=this.app.getPageCollection().getSpreadIndexByPage(d);try{_>I&&(this.app.getPageCollection().setCurrentSpreadIndex(_-1),this.flipNext(g)),_<I&&(this.app.getPageCollection().setCurrentSpreadIndex(_+1),this.flipPrev(g))}catch{}}flipNext(d){this.flip({x:this.render.getRect().left+2*this.render.getRect().pageWidth-10,y:d==="top"?1:this.render.getRect().height-2})}flipPrev(d){this.flip({x:10,y:d==="top"?1:this.render.getRect().height-2})}stopMove(){if(this.calc===null)return;const d=this.calc.getPosition(),g=this.getBoundsRect(),I=this.calc.getCorner()==="bottom"?g.height:0;d.x<=0?this.animateFlippingTo(d,{x:-g.pageWidth,y:I},!0):this.animateFlippingTo(d,{x:g.pageWidth,y:I},!1)}showCorner(d){if(!this.checkState("read","fold_corner"))return;const g=this.getBoundsRect(),I=g.pageWidth;if(this.isPointOnCorners(d))if(this.calc===null){if(!this.start(d))return;this.setState("fold_corner"),this.calc.calc({x:I-1,y:1});const _=50,y=this.calc.getCorner()==="bottom"?g.height-1:1,w=this.calc.getCorner()==="bottom"?g.height-_:_;this.animateFlippingTo({x:I-1,y},{x:I-_,y:w},!1,!1)}else this.do(this.render.convertToPage(d));else this.setState("read"),this.render.finishAnimation(),this.stopMove()}animateFlippingTo(d,g,I,_=!0){const y=l.GetCordsFromTwoPoint(d,g),w=[];for(const C of y)w.push(()=>this.do(C));const x=this.getAnimationDuration(y.length);this.render.startAnimation(w,x,()=>{this.calc&&(I&&(this.calc.getDirection()===1?this.app.turnToPrevPage():this.app.turnToNextPage()),_&&(this.render.setBottomPage(null),this.render.setFlippingPage(null),this.render.clearShadow(),this.setState("read"),this.reset()))})}getCalculation(){return this.calc}getState(){return this.state}setState(d){this.state!==d&&(this.app.updateState(d),this.state=d)}getDirectionByPoint(d){const g=this.getBoundsRect();if(this.render.getOrientation()==="portrait"){if(d.x-g.pageWidth<=g.width/5)return 1}else if(d.x<g.width/2)return 1;return 0}getAnimationDuration(d){const g=this.app.getSettings().flippingTime;return d>=1e3?g:d/1e3*g}checkDirection(d){return d===0?this.app.getCurrentPageIndex()<this.app.getPageCount()-1:this.app.getCurrentPageIndex()>=1}reset(){this.calc=null,this.flippingPage=null,this.bottomPage=null}getBoundsRect(){return this.render.getRect()}checkState(...d){for(const g of d)if(this.state===g)return!0;return!1}isPointOnCorners(d){const g=this.getBoundsRect(),I=g.pageWidth,_=Math.sqrt(Math.pow(I,2)+Math.pow(g.height,2))/5,y=this.render.convertToBook(d);return y.x>0&&y.y>0&&y.x<g.width&&y.y<g.height&&(y.x<_||y.x>g.width-_)&&(y.y<_||y.y>g.height-_)}}class v{constructor(d,g){this.leftPage=null,this.rightPage=null,this.flippingPage=null,this.bottomPage=null,this.direction=null,this.orientation=null,this.shadow=null,this.animation=null,this.pageRect=null,this.boundsRect=null,this.timer=0,this.safari=!1,this.setting=g,this.app=d;const I=new RegExp("Version\\/[\\d\\.]+.*Safari/");this.safari=I.exec(window.navigator.userAgent)!==null}render(d){if(this.animation!==null){const g=Math.round((d-this.animation.startedAt)/this.animation.durationFrame);g<this.animation.frames.length?this.animation.frames[g]():(this.animation.onAnimateEnd(),this.animation=null)}this.timer=d,this.drawFrame()}start(){this.update();const d=g=>{this.render(g),requestAnimationFrame(d)};requestAnimationFrame(d)}startAnimation(d,g,I){this.finishAnimation(),this.animation={frames:d,duration:g,durationFrame:g/d.length,onAnimateEnd:I,startedAt:this.timer}}finishAnimation(){this.animation!==null&&(this.animation.frames[this.animation.frames.length-1](),this.animation.onAnimateEnd!==null&&this.animation.onAnimateEnd()),this.animation=null}update(){this.boundsRect=null;const d=this.calculateBoundsRect();this.orientation!==d&&(this.orientation=d,this.app.updateOrientation(d))}calculateBoundsRect(){let d="landscape";const g=this.getBlockWidth(),I=g/2,_=this.getBlockHeight()/2,y=this.setting.width/this.setting.height;let w=this.setting.width,x=this.setting.height,C=I-w;return this.setting.size==="stretch"?(g<2*this.setting.minWidth&&this.app.getSettings().usePortrait&&(d="portrait"),w=d==="portrait"?this.getBlockWidth():this.getBlockWidth()/2,w>this.setting.maxWidth&&(w=this.setting.maxWidth),x=w/y,x>this.getBlockHeight()&&(x=this.getBlockHeight(),w=x*y),C=d==="portrait"?I-w/2-w:I-w):g<2*w&&this.app.getSettings().usePortrait&&(d="portrait",C=I-w/2-w),this.boundsRect={left:C,top:_-x/2,width:2*w,height:x,pageWidth:w},d}setShadowData(d,g,I,_){if(!this.app.getSettings().drawShadow)return;const y=100*this.getSettings().maxShadowOpacity;this.shadow={pos:d,angle:g,width:3*this.getRect().pageWidth/4*I/100,opacity:(100-I)*y/100/100,direction:_,progress:2*I}}clearShadow(){this.shadow=null}getBlockWidth(){return this.app.getUI().getDistElement().offsetWidth}getBlockHeight(){return this.app.getUI().getDistElement().offsetHeight}getDirection(){return this.direction}getRect(){return this.boundsRect===null&&this.calculateBoundsRect(),this.boundsRect}getSettings(){return this.app.getSettings()}getOrientation(){return this.orientation}setPageRect(d){this.pageRect=d}setDirection(d){this.direction=d}setRightPage(d){d!==null&&d.setOrientation(1),this.rightPage=d}setLeftPage(d){d!==null&&d.setOrientation(0),this.leftPage=d}setBottomPage(d){d!==null&&d.setOrientation(this.direction===1?0:1),this.bottomPage=d}setFlippingPage(d){d!==null&&d.setOrientation(this.direction===0&&this.orientation!=="portrait"?0:1),this.flippingPage=d}convertToBook(d){const g=this.getRect();return{x:d.x-g.left,y:d.y-g.top}}isSafari(){return this.safari}convertToPage(d,g){g||(g=this.direction);const I=this.getRect();return{x:g===0?d.x-I.left-I.width/2:I.width/2-d.x+I.left,y:d.y-I.top}}convertToGlobal(d,g){if(g||(g=this.direction),d==null)return null;const I=this.getRect();return{x:g===0?d.x+I.left+I.width/2:I.width/2-d.x+I.left,y:d.y+I.top}}convertRectToGlobal(d,g){return g||(g=this.direction),{topLeft:this.convertToGlobal(d.topLeft,g),topRight:this.convertToGlobal(d.topRight,g),bottomLeft:this.convertToGlobal(d.bottomLeft,g),bottomRight:this.convertToGlobal(d.bottomRight,g)}}}class A extends v{constructor(d,g,I){super(d,g),this.canvas=I,this.ctx=I.getContext("2d")}getContext(){return this.ctx}reload(){}drawFrame(){this.clear(),this.orientation!=="portrait"&&this.leftPage!=null&&this.leftPage.simpleDraw(0),this.rightPage!=null&&this.rightPage.simpleDraw(1),this.bottomPage!=null&&this.bottomPage.draw(),this.drawBookShadow(),this.flippingPage!=null&&this.flippingPage.draw(),this.shadow!=null&&(this.drawOuterShadow(),this.drawInnerShadow());const d=this.getRect();this.orientation==="portrait"&&(this.ctx.beginPath(),this.ctx.rect(d.left+d.pageWidth,d.top,d.width,d.height),this.ctx.clip())}drawBookShadow(){const d=this.getRect();this.ctx.save(),this.ctx.beginPath();const g=d.width/20;this.ctx.rect(d.left,d.top,d.width,d.height);const I={x:d.left+d.width/2-g/2,y:0};this.ctx.translate(I.x,I.y);const _=this.ctx.createLinearGradient(0,0,g,0);_.addColorStop(0,"rgba(0, 0, 0, 0)"),_.addColorStop(.4,"rgba(0, 0, 0, 0.2)"),_.addColorStop(.49,"rgba(0, 0, 0, 0.1)"),_.addColorStop(.5,"rgba(0, 0, 0, 0.5)"),_.addColorStop(.51,"rgba(0, 0, 0, 0.4)"),_.addColorStop(1,"rgba(0, 0, 0, 0)"),this.ctx.clip(),this.ctx.fillStyle=_,this.ctx.fillRect(0,0,g,2*d.height),this.ctx.restore()}drawOuterShadow(){const d=this.getRect();this.ctx.save(),this.ctx.beginPath(),this.ctx.rect(d.left,d.top,d.width,d.height);const g=this.convertToGlobal({x:this.shadow.pos.x,y:this.shadow.pos.y});this.ctx.translate(g.x,g.y),this.ctx.rotate(Math.PI+this.shadow.angle+Math.PI/2);const I=this.ctx.createLinearGradient(0,0,this.shadow.width,0);this.shadow.direction===0?(this.ctx.translate(0,-100),I.addColorStop(0,"rgba(0, 0, 0, "+this.shadow.opacity+")"),I.addColorStop(1,"rgba(0, 0, 0, 0)")):(this.ctx.translate(-this.shadow.width,-100),I.addColorStop(0,"rgba(0, 0, 0, 0)"),I.addColorStop(1,"rgba(0, 0, 0, "+this.shadow.opacity+")")),this.ctx.clip(),this.ctx.fillStyle=I,this.ctx.fillRect(0,0,this.shadow.width,2*d.height),this.ctx.restore()}drawInnerShadow(){const d=this.getRect();this.ctx.save(),this.ctx.beginPath();const g=this.convertToGlobal({x:this.shadow.pos.x,y:this.shadow.pos.y}),I=this.convertRectToGlobal(this.pageRect);this.ctx.moveTo(I.topLeft.x,I.topLeft.y),this.ctx.lineTo(I.topRight.x,I.topRight.y),this.ctx.lineTo(I.bottomRight.x,I.bottomRight.y),this.ctx.lineTo(I.bottomLeft.x,I.bottomLeft.y),this.ctx.translate(g.x,g.y),this.ctx.rotate(Math.PI+this.shadow.angle+Math.PI/2);const _=3*this.shadow.width/4,y=this.ctx.createLinearGradient(0,0,_,0);this.shadow.direction===0?(this.ctx.translate(-_,-100),y.addColorStop(1,"rgba(0, 0, 0, "+this.shadow.opacity+")"),y.addColorStop(.9,"rgba(0, 0, 0, 0.05)"),y.addColorStop(.7,"rgba(0, 0, 0, "+this.shadow.opacity+")"),y.addColorStop(0,"rgba(0, 0, 0, 0)")):(this.ctx.translate(0,-100),y.addColorStop(0,"rgba(0, 0, 0, "+this.shadow.opacity+")"),y.addColorStop(.1,"rgba(0, 0, 0, 0.05)"),y.addColorStop(.3,"rgba(0, 0, 0, "+this.shadow.opacity+")"),y.addColorStop(1,"rgba(0, 0, 0, 0)")),this.ctx.clip(),this.ctx.fillStyle=y,this.ctx.fillRect(0,0,_,2*d.height),this.ctx.restore()}clear(){this.ctx.fillStyle="white",this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height)}}class k{constructor(d,g,I){this.touchPoint=null,this.swipeTimeout=250,this.onResize=()=>{this.update()},this.onMouseDown=y=>{if(this.checkTarget(y.target)){const w=this.getMousePos(y.clientX,y.clientY);this.app.startUserTouch(w),y.preventDefault()}},this.onTouchStart=y=>{if(this.checkTarget(y.target)&&y.changedTouches.length>0){const w=y.changedTouches[0],x=this.getMousePos(w.clientX,w.clientY);this.touchPoint={point:x,time:Date.now()},setTimeout(()=>{this.touchPoint!==null&&this.app.startUserTouch(x)},this.swipeTimeout),this.app.getSettings().mobileScrollSupport||y.preventDefault()}},this.onMouseUp=y=>{const w=this.getMousePos(y.clientX,y.clientY);this.app.userStop(w)},this.onMouseMove=y=>{const w=this.getMousePos(y.clientX,y.clientY);this.app.userMove(w,!1)},this.onTouchMove=y=>{if(y.changedTouches.length>0){const w=y.changedTouches[0],x=this.getMousePos(w.clientX,w.clientY);this.app.getSettings().mobileScrollSupport?(this.touchPoint!==null&&(Math.abs(this.touchPoint.point.x-x.x)>10||this.app.getState()!=="read")&&y.cancelable&&this.app.userMove(x,!0),this.app.getState()!=="read"&&y.preventDefault()):this.app.userMove(x,!0)}},this.onTouchEnd=y=>{if(y.changedTouches.length>0){const w=y.changedTouches[0],x=this.getMousePos(w.clientX,w.clientY);let C=!1;if(this.touchPoint!==null){const D=x.x-this.touchPoint.point.x,P=Math.abs(x.y-this.touchPoint.point.y);Math.abs(D)>this.swipeDistance&&P<2*this.swipeDistance&&Date.now()-this.touchPoint.time<this.swipeTimeout&&(D>0?this.app.flipPrev(this.touchPoint.point.y<this.app.getRender().getRect().height/2?"top":"bottom"):this.app.flipNext(this.touchPoint.point.y<this.app.getRender().getRect().height/2?"top":"bottom"),C=!0),this.touchPoint=null}this.app.userStop(x,C)}},this.parentElement=d,d.classList.add("stf__parent"),d.insertAdjacentHTML("afterbegin",'<div class="stf__wrapper"></div>'),this.wrapper=d.querySelector(".stf__wrapper"),this.app=g;const _=this.app.getSettings().usePortrait?1:2;d.style.minWidth=I.minWidth*_+"px",d.style.minHeight=I.minHeight+"px",I.size==="fixed"&&(d.style.minWidth=I.width*_+"px",d.style.minHeight=I.height+"px"),I.autoSize&&(d.style.width="100%",d.style.maxWidth=2*I.maxWidth+"px"),d.style.display="block",window.addEventListener("resize",this.onResize,!1),this.swipeDistance=I.swipeDistance}destroy(){this.app.getSettings().useMouseEvents&&this.removeHandlers(),this.distElement.remove(),this.wrapper.remove()}getDistElement(){return this.distElement}getWrapper(){return this.wrapper}setOrientationStyle(d){this.wrapper.classList.remove("--portrait","--landscape"),d==="portrait"?(this.app.getSettings().autoSize&&(this.wrapper.style.paddingBottom=this.app.getSettings().height/this.app.getSettings().width*100+"%"),this.wrapper.classList.add("--portrait")):(this.app.getSettings().autoSize&&(this.wrapper.style.paddingBottom=this.app.getSettings().height/(2*this.app.getSettings().width)*100+"%"),this.wrapper.classList.add("--landscape")),this.update()}removeHandlers(){window.removeEventListener("resize",this.onResize),this.distElement.removeEventListener("mousedown",this.onMouseDown),this.distElement.removeEventListener("touchstart",this.onTouchStart),window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("touchmove",this.onTouchMove),window.removeEventListener("mouseup",this.onMouseUp),window.removeEventListener("touchend",this.onTouchEnd)}setHandlers(){window.addEventListener("resize",this.onResize,!1),this.app.getSettings().useMouseEvents&&(this.distElement.addEventListener("mousedown",this.onMouseDown),this.distElement.addEventListener("touchstart",this.onTouchStart),window.addEventListener("mousemove",this.onMouseMove),window.addEventListener("touchmove",this.onTouchMove,{passive:!this.app.getSettings().mobileScrollSupport}),window.addEventListener("mouseup",this.onMouseUp),window.addEventListener("touchend",this.onTouchEnd))}getMousePos(d,g){const I=this.distElement.getBoundingClientRect();return{x:d-I.left,y:g-I.top}}checkTarget(d){return!this.app.getSettings().clickEventForward||!["a","button"].includes(d.tagName.toLowerCase())}}class N extends k{constructor(d,g,I,_){super(d,g,I),this.wrapper.insertAdjacentHTML("afterbegin",'<div class="stf__block"></div>'),this.distElement=d.querySelector(".stf__block"),this.items=_;for(const y of _)this.distElement.appendChild(y);this.setHandlers()}clear(){for(const d of this.items)this.parentElement.appendChild(d)}updateItems(d){this.removeHandlers(),this.distElement.innerHTML="";for(const g of d)this.distElement.appendChild(g);this.items=d,this.setHandlers()}update(){this.app.getRender().update()}}class L extends k{constructor(d,g,I){super(d,g,I),this.wrapper.innerHTML='<canvas class="stf__canvas"></canvas>',this.canvas=d.querySelectorAll("canvas")[0],this.distElement=this.canvas,this.resizeCanvas(),this.setHandlers()}resizeCanvas(){const d=getComputedStyle(this.canvas),g=parseInt(d.getPropertyValue("width"),10),I=parseInt(d.getPropertyValue("height"),10);this.canvas.width=g,this.canvas.height=I}getCanvas(){return this.canvas}update(){this.resizeCanvas(),this.app.getRender().update()}}class R extends v{constructor(d,g,I){super(d,g),this.outerShadow=null,this.innerShadow=null,this.hardShadow=null,this.hardInnerShadow=null,this.element=I,this.createShadows()}createShadows(){this.element.insertAdjacentHTML("beforeend",`<div class="stf__outerShadow"></div>
             <div class="stf__innerShadow"></div>
             <div class="stf__hardShadow"></div>
             <div class="stf__hardInnerShadow"></div>`),this.outerShadow=this.element.querySelector(".stf__outerShadow"),this.innerShadow=this.element.querySelector(".stf__innerShadow"),this.hardShadow=this.element.querySelector(".stf__hardShadow"),this.hardInnerShadow=this.element.querySelector(".stf__hardInnerShadow")}clearShadow(){super.clearShadow(),this.outerShadow.style.cssText="display: none",this.innerShadow.style.cssText="display: none",this.hardShadow.style.cssText="display: none",this.hardInnerShadow.style.cssText="display: none"}reload(){this.element.querySelector(".stf__outerShadow")||this.createShadows()}drawHardInnerShadow(){const d=this.getRect(),g=this.shadow.progress>100?200-this.shadow.progress:this.shadow.progress;let I=(100-g)*(2.5*d.pageWidth)/100+20;I>d.pageWidth&&(I=d.pageWidth);let _=`
            display: block;
            z-index: ${(this.getSettings().startZIndex+5).toString(10)};
            width: ${I}px;
            height: ${d.height}px;
            background: linear-gradient(to right,
                rgba(0, 0, 0, ${this.shadow.opacity*g/100}) 5%,
                rgba(0, 0, 0, 0) 100%);
            left: ${d.left+d.width/2}px;
            transform-origin: 0 0;
        `;_+=this.getDirection()===0&&this.shadow.progress>100||this.getDirection()===1&&this.shadow.progress<=100?"transform: translate3d(0, 0, 0);":"transform: translate3d(0, 0, 0) rotateY(180deg);",this.hardInnerShadow.style.cssText=_}drawHardOuterShadow(){const d=this.getRect();let g=(100-(this.shadow.progress>100?200-this.shadow.progress:this.shadow.progress))*(2.5*d.pageWidth)/100+20;g>d.pageWidth&&(g=d.pageWidth);let I=`
            display: block;
            z-index: ${(this.getSettings().startZIndex+4).toString(10)};
            width: ${g}px;
            height: ${d.height}px;
            background: linear-gradient(to left, rgba(0, 0, 0, ${this.shadow.opacity}) 5%, rgba(0, 0, 0, 0) 100%);
            left: ${d.left+d.width/2}px;
            transform-origin: 0 0;
        `;I+=this.getDirection()===0&&this.shadow.progress>100||this.getDirection()===1&&this.shadow.progress<=100?"transform: translate3d(0, 0, 0) rotateY(180deg);":"transform: translate3d(0, 0, 0);",this.hardShadow.style.cssText=I}drawInnerShadow(){const d=this.getRect(),g=3*this.shadow.width/4,I=this.getDirection()===0?g:0,_=this.getDirection()===0?"to left":"to right",y=this.convertToGlobal(this.shadow.pos),w=this.shadow.angle+3*Math.PI/2,x=[this.pageRect.topLeft,this.pageRect.topRight,this.pageRect.bottomRight,this.pageRect.bottomLeft];let C="polygon( ";for(const P of x){let xe=this.getDirection()===1?{x:-P.x+this.shadow.pos.x,y:P.y-this.shadow.pos.y}:{x:P.x-this.shadow.pos.x,y:P.y-this.shadow.pos.y};xe=l.GetRotatedPoint(xe,{x:I,y:100},w),C+=xe.x+"px "+xe.y+"px, "}C=C.slice(0,-2),C+=")";const D=`
            display: block;
            z-index: ${(this.getSettings().startZIndex+10).toString(10)};
            width: ${g}px;
            height: ${2*d.height}px;
            background: linear-gradient(${_},
                rgba(0, 0, 0, ${this.shadow.opacity}) 5%,
                rgba(0, 0, 0, 0.05) 15%,
                rgba(0, 0, 0, ${this.shadow.opacity}) 35%,
                rgba(0, 0, 0, 0) 100%);
            transform-origin: ${I}px 100px;
            transform: translate3d(${y.x-I}px, ${y.y-100}px, 0) rotate(${w}rad);
            clip-path: ${C};
            -webkit-clip-path: ${C};
        `;this.innerShadow.style.cssText=D}drawOuterShadow(){const d=this.getRect(),g=this.convertToGlobal({x:this.shadow.pos.x,y:this.shadow.pos.y}),I=this.shadow.angle+3*Math.PI/2,_=this.getDirection()===1?this.shadow.width:0,y=this.getDirection()===0?"to right":"to left",w=[{x:0,y:0},{x:d.pageWidth,y:0},{x:d.pageWidth,y:d.height},{x:0,y:d.height}];let x="polygon( ";for(const D of w)if(D!==null){let P=this.getDirection()===1?{x:-D.x+this.shadow.pos.x,y:D.y-this.shadow.pos.y}:{x:D.x-this.shadow.pos.x,y:D.y-this.shadow.pos.y};P=l.GetRotatedPoint(P,{x:_,y:100},I),x+=P.x+"px "+P.y+"px, "}x=x.slice(0,-2),x+=")";const C=`
            display: block;
            z-index: ${(this.getSettings().startZIndex+10).toString(10)};
            width: ${this.shadow.width}px;
            height: ${2*d.height}px;
            background: linear-gradient(${y}, rgba(0, 0, 0, ${this.shadow.opacity}), rgba(0, 0, 0, 0));
            transform-origin: ${_}px 100px;
            transform: translate3d(${g.x-_}px, ${g.y-100}px, 0) rotate(${I}rad);
            clip-path: ${x};
            -webkit-clip-path: ${x};
        `;this.outerShadow.style.cssText=C}drawLeftPage(){this.orientation!=="portrait"&&this.leftPage!==null&&(this.direction===1&&this.flippingPage!==null&&this.flippingPage.getDrawingDensity()==="hard"?(this.leftPage.getElement().style.zIndex=(this.getSettings().startZIndex+5).toString(10),this.leftPage.setHardDrawingAngle(180+this.flippingPage.getHardAngle()),this.leftPage.draw(this.flippingPage.getDrawingDensity())):this.leftPage.simpleDraw(0))}drawRightPage(){this.rightPage!==null&&(this.direction===0&&this.flippingPage!==null&&this.flippingPage.getDrawingDensity()==="hard"?(this.rightPage.getElement().style.zIndex=(this.getSettings().startZIndex+5).toString(10),this.rightPage.setHardDrawingAngle(180+this.flippingPage.getHardAngle()),this.rightPage.draw(this.flippingPage.getDrawingDensity())):this.rightPage.simpleDraw(1))}drawBottomPage(){if(this.bottomPage===null)return;const d=this.flippingPage!=null?this.flippingPage.getDrawingDensity():null;this.orientation==="portrait"&&this.direction===1||(this.bottomPage.getElement().style.zIndex=(this.getSettings().startZIndex+3).toString(10),this.bottomPage.draw(d))}drawFrame(){this.clear(),this.drawLeftPage(),this.drawRightPage(),this.drawBottomPage(),this.flippingPage!=null&&(this.flippingPage.getElement().style.zIndex=(this.getSettings().startZIndex+5).toString(10),this.flippingPage.draw()),this.shadow!=null&&this.flippingPage!==null&&(this.flippingPage.getDrawingDensity()==="soft"?(this.drawOuterShadow(),this.drawInnerShadow()):(this.drawHardOuterShadow(),this.drawHardInnerShadow()))}clear(){for(const d of this.app.getPageCollection().getPages())d!==this.leftPage&&d!==this.rightPage&&d!==this.flippingPage&&d!==this.bottomPage&&(d.getElement().style.cssText="display: none"),d.getTemporaryCopy()!==this.flippingPage&&d.hideTemporaryCopy()}update(){super.update(),this.rightPage!==null&&this.rightPage.setOrientation(1),this.leftPage!==null&&this.leftPage.setOrientation(0)}}class S{constructor(){this._default={startPage:0,size:"fixed",width:0,height:0,minWidth:0,maxWidth:0,minHeight:0,maxHeight:0,drawShadow:!0,flippingTime:1e3,usePortrait:!0,startZIndex:0,autoSize:!0,maxShadowOpacity:1,showCover:!1,mobileScrollSupport:!0,swipeDistance:30,clickEventForward:!0,useMouseEvents:!0,showPageCorners:!0,disableFlipByClick:!1}}getSettings(d){const g=this._default;if(Object.assign(g,d),g.size!=="stretch"&&g.size!=="fixed")throw new Error('Invalid size type. Available only "fixed" and "stretch" value');if(g.width<=0||g.height<=0)throw new Error("Invalid width or height");if(g.flippingTime<=0)throw new Error("Invalid flipping time");return g.size==="stretch"?(g.minWidth<=0&&(g.minWidth=100),g.maxWidth<g.minWidth&&(g.maxWidth=2e3),g.minHeight<=0&&(g.minHeight=100),g.maxHeight<g.minHeight&&(g.maxHeight=2e3)):(g.minWidth=g.width,g.maxWidth=g.width,g.minHeight=g.height,g.maxHeight=g.height),g}}(function(T,d){d===void 0&&(d={});var g=d.insertAt;if(typeof document<"u"){var I=document.head||document.getElementsByTagName("head")[0],_=document.createElement("style");_.type="text/css",g==="top"&&I.firstChild?I.insertBefore(_,I.firstChild):I.appendChild(_),_.styleSheet?_.styleSheet.cssText=T:_.appendChild(document.createTextNode(T))}})(`.stf__parent {
  position: relative;
  display: block;
  box-sizing: border-box;
  transform: translateZ(0);

  -ms-touch-action: pan-y;
  touch-action: pan-y;
}

.sft__wrapper {
  position: relative;
  width: 100%;
  box-sizing: border-box;
}

.stf__parent canvas {
  position: absolute;
  width: 100%;
  height: 100%;
  left: 0;
  top: 0;
}

.stf__block {
  position: absolute;
  width: 100%;
  height: 100%;
  box-sizing: border-box;
  perspective: 2000px;
}

.stf__item {
  display: none;
  position: absolute;
  transform-style: preserve-3d;
}

.stf__outerShadow {
  position: absolute;
  left: 0;
  top: 0;
}

.stf__innerShadow {
  position: absolute;
  left: 0;
  top: 0;
}

.stf__hardShadow {
  position: absolute;
  left: 0;
  top: 0;
}

.stf__hardInnerShadow {
  position: absolute;
  left: 0;
  top: 0;
}`),n.PageFlip=class extends class{constructor(){this.events=new Map}on(T,d){return this.events.has(T)?this.events.get(T).push(d):this.events.set(T,[d]),this}off(T){this.events.delete(T)}trigger(T,d,g=null){if(this.events.has(T))for(const I of this.events.get(T))I({data:g,object:d})}}{constructor(T,d){super(),this.isUserTouch=!1,this.isUserMove=!1,this.setting=null,this.pages=null,this.setting=new S().getSettings(d),this.block=T}destroy(){this.ui.destroy(),this.block.remove()}update(){this.render.update(),this.pages.show()}loadFromImages(T){this.ui=new L(this.block,this,this.setting);const d=this.ui.getCanvas();this.render=new A(this,this.setting,d),this.flipController=new m(this.render,this),this.pages=new o(this,this.render,T),this.pages.load(),this.render.start(),this.pages.show(this.setting.startPage),setTimeout(()=>{this.ui.update(),this.trigger("init",this,{page:this.setting.startPage,mode:this.render.getOrientation()})},1)}loadFromHTML(T){this.ui=new N(this.block,this,this.setting,T),this.render=new R(this,this.setting,this.ui.getDistElement()),this.flipController=new m(this.render,this),this.pages=new c(this,this.render,this.ui.getDistElement(),T),this.pages.load(),this.render.start(),this.pages.show(this.setting.startPage),setTimeout(()=>{this.ui.update(),this.trigger("init",this,{page:this.setting.startPage,mode:this.render.getOrientation()})},1)}updateFromImages(T){const d=this.pages.getCurrentPageIndex();this.pages.destroy(),this.pages=new o(this,this.render,T),this.pages.load(),this.pages.show(d),this.trigger("update",this,{page:d,mode:this.render.getOrientation()})}updateFromHtml(T){const d=this.pages.getCurrentPageIndex();this.pages.destroy(),this.pages=new c(this,this.render,this.ui.getDistElement(),T),this.pages.load(),this.ui.updateItems(T),this.render.reload(),this.pages.show(d),this.trigger("update",this,{page:d,mode:this.render.getOrientation()})}clear(){this.pages.destroy(),this.ui.clear()}turnToPrevPage(){this.pages.showPrev()}turnToNextPage(){this.pages.showNext()}turnToPage(T){this.pages.show(T)}flipNext(T="top"){this.flipController.flipNext(T)}flipPrev(T="top"){this.flipController.flipPrev(T)}flip(T,d="top"){this.flipController.flipToPage(T,d)}updateState(T){this.trigger("changeState",this,T)}updatePageIndex(T){this.trigger("flip",this,T)}updateOrientation(T){this.ui.setOrientationStyle(T),this.update(),this.trigger("changeOrientation",this,T)}getPageCount(){return this.pages.getPageCount()}getCurrentPageIndex(){return this.pages.getCurrentPageIndex()}getPage(T){return this.pages.getPage(T)}getRender(){return this.render}getFlipController(){return this.flipController}getOrientation(){return this.render.getOrientation()}getBoundsRect(){return this.render.getRect()}getSettings(){return this.setting}getUI(){return this.ui}getState(){return this.flipController.getState()}getPageCollection(){return this.pages}startUserTouch(T){this.mousePosition=T,this.isUserTouch=!0,this.isUserMove=!1}userMove(T,d){this.isUserTouch||d||!this.setting.showPageCorners?this.isUserTouch&&l.GetDistanceBetweenTwoPoint(this.mousePosition,T)>5&&(this.isUserMove=!0,this.flipController.fold(T)):this.flipController.showCorner(T)}userStop(T,d=!1){this.isUserTouch&&(this.isUserTouch=!1,d||(this.isUserMove?this.flipController.stopMove():this.flipController.flip(T)))}},Object.defineProperty(n,"__esModule",{value:!0})})})(Ed,Ed.exports);var CS=Ed.exports;const bS=xt.forwardRef((t,e)=>{const n=H.useRef(null),r=H.useRef([]),i=H.useRef(),[s,o]=H.useState([]);H.useImperativeHandle(e,()=>({pageFlip:()=>i.current}));const l=H.useCallback(()=>{i.current&&i.current.clear()},[]),u=H.useCallback(()=>{const c=i.current;c&&(c.off("flip"),c.off("changeOrientation"),c.off("changeState"),c.off("init"),c.off("update"))},[]);return H.useEffect(()=>{if(r.current=[],t.children){const c=xt.Children.map(t.children,f=>xt.cloneElement(f,{ref:m=>{m&&r.current.push(m)}}));(!t.renderOnlyPageLengthChange||s.length!==c.length)&&(c.length<s.length&&l(),o(c))}},[t.children]),H.useEffect(()=>{const c=()=>{const f=i.current;f&&(t.onFlip&&f.on("flip",m=>t.onFlip(m)),t.onChangeOrientation&&f.on("changeOrientation",m=>t.onChangeOrientation(m)),t.onChangeState&&f.on("changeState",m=>t.onChangeState(m)),t.onInit&&f.on("init",m=>t.onInit(m)),t.onUpdate&&f.on("update",m=>t.onUpdate(m)))};s.length>0&&r.current.length>0&&(u(),n.current&&!i.current&&(i.current=new CS.PageFlip(n.current,t)),i.current.getFlipController()?i.current.updateFromHtml(r.current):i.current.loadFromHTML(r.current),c())},[s]),xt.createElement("div",{ref:n,className:t.className,style:t.style},s)}),kS=xt.memo(bS),DS="/undang-aku/assets/book-logo-DTSrELaQ.png",ow="/undang-aku/assets/flower-doodle-Ban8amwV.avif",aw=H.forwardRef((t,e)=>{const r=new URLSearchParams(window.location.search).get("sebagai");return b.jsxs("div",{ref:e,className:"flex flex-col items-center justify-center p-8 border bg-[#F4ECE8] border-gray-300 shadow-lg h-full w-full mx-auto text-center relative",children:[b.jsx("div",{className:"absolute inset-0 bg-repeat bg-center opacity-5 -z-10",style:{backgroundImage:`url(${ow})`,backgroundSize:"500px"}}),b.jsx("div",{className:"relative w-full max-w-2xl p-4 mx-auto lg:max-w-x",children:b.jsxs("svg",{viewBox:"0 0 500 200",className:"w-full h-auto lg:h-40",children:[b.jsx("path",{id:"curve",d:"M10,150 Q250,50 490,150",fill:"transparent"}),b.jsx("text",{children:b.jsx("textPath",{href:"#curve",startOffset:"50%",textAnchor:"middle",className:"text-5xl font-dancing text-gray-800",children:"Undangan Pernikahan"})})]})}),b.jsx("img",{src:DS,alt:"Wedding Image",className:"mb-6 max-w-[280px] h-auto mx-auto"}),b.jsx("h1",{className:"text-4xl font-bold mb-5 font-dancing",children:"Thariq & Sherly"}),b.jsx("h1",{className:"text-xl font-bold mb-20 font-dancing",children:"Agustus 2024"}),b.jsx("h3",{className:"text-xxl mb-2 font-montserrat",children:"Kepada :"}),b.jsx("h3",{className:"text-2xl font-montserrat",children:r||"Orang baik"}),b.jsx("div",{className:"block absolute bottom-4 right-5 transform -translate-x-1/2 text-gray-600 text-sm hint mr-1 lg:right-0",children:b.jsx("p",{children:"Klik untuk buka ..."})})]})});aw.displayName="Cover";const NS="/undang-aku/assets/frame-top-BTgHTAFD.png",VS="/undang-aku/assets/frame-bottom-C04TXqWn.png",lw=H.forwardRef((t,e)=>b.jsxs("div",{ref:e,className:"flex flex-col items-center p-8 border bg-[#F4ECE8] border-gray-300 shadow-lg h-full w-full",children:[b.jsx("img",{src:NS,alt:"Flower",className:"absolute -top-7 -right-5  w-80"}),b.jsx("h1",{className:"text-3xl font-bold mb-12 font-playfair",children:"Pasangan Penganten"}),b.jsx("div",{className:"w-20 h-[1px] bg-gray-400 mb-12"}),b.jsxs("div",{className:"flex flex-col  w-full space-x-8",children:[b.jsxs("div",{className:"flex-1 flex flex-col items-start text-left mb-10 ",children:[b.jsx("h2",{className:"text-2xl mb-2 font-playfair",children:"Mempelai Pria"}),b.jsx("h3",{className:"text-xl font-extrabold font-montserrat",children:"Thariq Ramadhan"}),b.jsx("h3",{className:"text-xl font-extrabold font-montserrat mb-2",children:"Alchandra Yasrial"}),b.jsx("h4",{className:"text-xs font-semibold mb-1",children:"Putra pertama dari"}),b.jsx("h4",{className:"text-xs",children:"Bpk. H. Yasrial Yasin & Ibu Hj. Teti Chandrayanti"})]}),b.jsxs("div",{className:"flex items-center mb-10",children:[b.jsx("div",{className:"flex-1 h-[1px] bg-gray-400"}),b.jsx("span",{className:"px-4 text-gray-600 font-semibold font-dancing",children:"dan"}),b.jsx("div",{className:"flex-1 h-[1px] bg-gray-400"})]}),b.jsxs("div",{className:"flex-1 flex flex-col items-end text-right mb-6",children:[b.jsx("h2",{className:"text-2xl font-semibold mb-2 font-playfair",children:"Mempelai Wanita"}),b.jsx("h3",{className:"text-xl font-extrabold font-montserrat mb-2",children:"Sherly Ekaputri Arnas"}),b.jsx("h4",{className:"text-xs font-semibold mb-1",children:"Putri pertama dari"}),b.jsx("h4",{className:"text-xs",children:"Bpk. Anasril & Ibu Armaini"})]})]}),b.jsx("div",{className:"block absolute bottom-4 left-5 transform -translate-x-1/2 text-gray-600 text-sm pulse-animation",children:b.jsx("p",{children:"Back..."})}),b.jsx("div",{className:"block absolute bottom-4 right-5 transform -translate-x-1/2 text-gray-600 text-sm pulse-animation",children:b.jsx("p",{children:"Next..."})}),b.jsx("img",{src:VS,alt:"FlowerBottom",className:"absolute -bottom-0 -left-5  w-80"})]}));lw.displayName="Couple";var uw={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},_y=xt.createContext&&xt.createContext(uw),MS=["attr","size","title"];function LS(t,e){if(t==null)return{};var n=OS(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function OS(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function yu(){return yu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},yu.apply(this,arguments)}function vy(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function _u(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?vy(Object(n),!0).forEach(function(r){FS(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):vy(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function FS(t,e,n){return e=BS(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function BS(t){var e=jS(t,"string");return typeof e=="symbol"?e:e+""}function jS(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function cw(t){return t&&t.map((e,n)=>xt.createElement(e.tag,_u({key:n},e.attr),cw(e.child)))}function Ar(t){return e=>xt.createElement(zS,yu({attr:_u({},t.attr)},e),cw(t.child))}function zS(t){var e=n=>{var{attr:r,size:i,title:s}=t,o=LS(t,MS),l=i||n.size||"1em",u;return n.className&&(u=n.className),t.className&&(u=(u?u+" ":"")+t.className),xt.createElement("svg",yu({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,o,{className:u,style:_u(_u({color:t.color||n.color},n.style),t.style),height:l,width:l,xmlns:"http://www.w3.org/2000/svg"}),s&&xt.createElement("title",null,s),t.children)};return _y!==void 0?xt.createElement(_y.Consumer,null,n=>e(n)):e(uw)}function wy(t){return Ar({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M320 448v40c0 13.255-10.745 24-24 24H24c-13.255 0-24-10.745-24-24V120c0-13.255 10.745-24 24-24h72v296c0 30.879 25.121 56 56 56h168zm0-344V0H152c-13.255 0-24 10.745-24 24v368c0 13.255 10.745 24 24 24h272c13.255 0 24-10.745 24-24V128H344c-13.2 0-24-10.8-24-24zm120.971-31.029L375.029 7.029A24 24 0 0 0 358.059 0H352v96h96v-6.059a24 24 0 0 0-7.029-16.97z"},child:[]}]})(t)}function Id(t){return Ar({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M288 0c-69.59 0-126 56.41-126 126 0 56.26 82.35 158.8 113.9 196.02 6.39 7.54 17.82 7.54 24.2 0C331.65 284.8 414 182.26 414 126 414 56.41 357.59 0 288 0zm0 168c-23.2 0-42-18.8-42-42s18.8-42 42-42 42 18.8 42 42-18.8 42-42 42zM20.12 215.95A32.006 32.006 0 0 0 0 245.66v250.32c0 11.32 11.43 19.06 21.94 14.86L160 448V214.92c-8.84-15.98-16.07-31.54-21.25-46.42L20.12 215.95zM288 359.67c-14.07 0-27.38-6.18-36.51-16.96-19.66-23.2-40.57-49.62-59.49-76.72v182l192 64V266c-18.92 27.09-39.82 53.52-59.49 76.72-9.13 10.77-22.44 16.95-36.51 16.95zm266.06-198.51L416 224v288l139.88-55.95A31.996 31.996 0 0 0 576 426.34V176.02c0-11.32-11.43-19.06-21.94-14.86z"},child:[]}]})(t)}function US(t){return Ar({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M215.03 71.05L126.06 160H24c-13.26 0-24 10.74-24 24v144c0 13.25 10.74 24 24 24h102.06l88.97 88.95c15.03 15.03 40.97 4.47 40.97-16.97V88.02c0-21.46-25.96-31.98-40.97-16.97zM461.64 256l45.64-45.64c6.3-6.3 6.3-16.52 0-22.82l-22.82-22.82c-6.3-6.3-16.52-6.3-22.82 0L416 210.36l-45.64-45.64c-6.3-6.3-16.52-6.3-22.82 0l-22.82 22.82c-6.3 6.3-6.3 16.52 0 22.82L370.36 256l-45.63 45.63c-6.3 6.3-6.3 16.52 0 22.82l22.82 22.82c6.3 6.3 16.52 6.3 22.82 0L416 301.64l45.64 45.64c6.3 6.3 16.52 6.3 22.82 0l22.82-22.82c6.3-6.3 6.3-16.52 0-22.82L461.64 256z"},child:[]}]})(t)}function $S(t){return Ar({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M215.03 71.05L126.06 160H24c-13.26 0-24 10.74-24 24v144c0 13.25 10.74 24 24 24h102.06l88.97 88.95c15.03 15.03 40.97 4.47 40.97-16.97V88.02c0-21.46-25.96-31.98-40.97-16.97zm233.32-51.08c-11.17-7.33-26.18-4.24-33.51 6.95-7.34 11.17-4.22 26.18 6.95 33.51 66.27 43.49 105.82 116.6 105.82 195.58 0 78.98-39.55 152.09-105.82 195.58-11.17 7.32-14.29 22.34-6.95 33.5 7.04 10.71 21.93 14.56 33.51 6.95C528.27 439.58 576 351.33 576 256S528.27 72.43 448.35 19.97zM480 256c0-63.53-32.06-121.94-85.77-156.24-11.19-7.14-26.03-3.82-33.12 7.46s-3.78 26.21 7.41 33.36C408.27 165.97 432 209.11 432 256s-23.73 90.03-63.48 115.42c-11.19 7.14-14.5 22.07-7.41 33.36 6.51 10.36 21.12 15.14 33.12 7.46C447.94 377.94 480 319.54 480 256zm-141.77-76.87c-11.58-6.33-26.19-2.16-32.61 9.45-6.39 11.61-2.16 26.2 9.45 32.61C327.98 228.28 336 241.63 336 256c0 14.38-8.02 27.72-20.92 34.81-11.61 6.41-15.84 21-9.45 32.61 6.43 11.66 21.05 15.8 32.61 9.45 28.23-15.55 45.77-45 45.77-76.88s-17.54-61.32-45.78-76.86z"},child:[]}]})(t)}function qS(t){return Ar({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M201.837 53.087L177.547 21h55.676zM278.766 21l30.82 31.465L333.065 21h-54.298zm12.428 38.12L256 23.18l-35.25 35.985h70.5zm82.091 0l-23.511-30.855-23.003 30.9h46.57zM161.096 28.683L138.5 59.188h45.746zm51.248 48.242L256 196.821l43.69-119.896h-87.38zm-73.166 0l90.384 99.017-36.153-99.017h-54.231zm233.712 0h-54.23l-36.076 99.017zm-19.455 48.142l-29.059 31.838a154.298 154.298 0 0 1 85.786 138.119C410.14 380.008 340.995 449.197 256 449.197s-154.14-69.144-154.14-154.14a154.298 154.298 0 0 1 85.787-138.119L158.588 125.1a196.044 196.044 0 0 0-98.53 169.924C60.057 403.056 147.955 491 256 491c108.044 0 195.943-87.899 195.943-195.943a196.044 196.044 0 0 0-98.542-169.99z"},child:[]}]})(t)}function hw(t){return Ar({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M267.375 14.688c-17.09 6.94-30.576 17.288-38.75 29.593l-14.813-27.593c-9.017 49.344-12.52 95.085 32 109.563-10.734 36.94-17.187 73.9-20.687 110.813l-20.563-38.344c-2.848-14.713-9.618-30.698-17.343-47l-17.376 74.124c-7.214-22.468-16.496-44.677-28.47-66.47 24.46-43.217 16.134-70.568-31.093-79.28-.515 3.04-.56 9.344-.56 9.344l-19.876-8.75L87.5 100.53l-9.344-4.655c-5.433 42.254-.12 74.946 46.625 72.094 3.705 6.717 7.128 13.47 10.314 20.28L29.22 156.312c31.263 45.247 64.173 82.76 112.53 47.094 10.985 26.656 18.485 53.944 23.75 81.72l-64.78-40.188c12.872 36.068 28.203 67.286 66.936 52.437 1.237 7.446 2.306 14.926 3.28 22.438h18.876c-2.757-21.95-6.533-43.82-11.906-65.5 8.208-4.095 14.35-8.853 18.75-14.188 3.693 11.197 11.61 19.643 26.438 23.594-1.097 18.71-1.506 37.414-1.438 56.092h18.688c-.014-4.07-.003-8.12.03-12.187 41.888-6.813 39.48-42.478 32.407-81.188l-31.967 59.625c.765-23.7 2.492-47.326 5.593-70.906 52.515 5.043 61.144-38.783 65.125-87.78l-61.81 65.843c3.47-20.563 8.06-41.09 14-61.564 37.544 4.596 76.884-35.765 75.28-70l-12.438 7.72c-1.053-11.96-6.674-25.51-17.125-40.69-7.535 5.354-14.003 12.573-19.843 20.44L285.5 31.03l-11.688 14.595c-.32-10.47-2.17-20.77-6.437-30.938zm182.22 99.25c-4.994.008-10.98.86-18.25 2.906-13.336 3.754-27.52 12.25-22.376 37.625-24.488 13.127-45.408 31.122-62.25 53.155h-.19c.03.045.067.08.095.125-.8 1.05-1.593 2.09-2.375 3.156l23.063-76.344c-45.938 31.743-83.94 65.165-45.438 114.75-9.69 21.296-16.536 44.94-20.313 70.5h38.032c24.53-7.376 29.6-36.436 32.187-68.25l-48.155 51.282c6.766-30.55 18.424-57.235 34.406-79.47 36.727 42.145 77.18 14.898 118.033-19.81l-104.594 3.28c13.094-14.284 28.35-26.198 45.56-35.5 11.388 14.74 28.402 14.172 40.595 7.812 25.338-13.216 17.442-27.84 38.28-45.906-20.892 5.264-19.352-19.358-46.31-19.313zM152.936 338.5l26.032 154.594h143.593L348.969 338.5H152.936z"},child:[]}]})(t)}const Di={title:"Akad Nikah",location:"Masjid Islamic Center Padang Panjang",mapLink:"https://maps.app.goo.gl/fVgW4v1e6qL9A9kq7",date:"24 Agustus 2024",time:"09:00 - 10:00 WIB",icon:b.jsx(qS,{className:"text-4xl text-[#E0C9C2]"})},dw=H.forwardRef((t,e)=>b.jsx("div",{ref:e,className:"flex items-center justify-center p-8 border bg-[#F4ECE8] border-gray-300 shadow-lg h-full w-full",children:b.jsxs("div",{className:"flex flex-col items-center justify-center text-center",children:[b.jsx("h1",{className:"text-3xl font-bold mb-5 font-playfair",children:"Save The Date"}),b.jsx("div",{className:"w-20 h-[1px] bg-gray-400 mb-5"}),b.jsx("div",{className:"relative p-4 shadow-md border border-gray-300 bg-white rounded-t-full",children:b.jsxs("div",{className:"bg-white mt-20",children:[b.jsxs("div",{className:"flex flex-col items-center",children:[b.jsx("h2",{className:"text-4xl font-semibold font-playfair mb-8",children:Di.title}),b.jsx("div",{className:"mb-6",children:Di.icon}),b.jsx("p",{className:"text-2xl mb-3 font-serif",children:Di.location}),b.jsx("p",{className:"text-xl mb-3 font-serif",children:Di.date}),b.jsx("p",{className:"text-xl mb-16 font-serif",children:Di.time})]}),b.jsx("div",{children:b.jsx("button",{className:"bg-[#E0C9C2] text-black btn btn-wide border border-gray-300 rounded-lg p-2 mb-10",children:b.jsxs("a",{href:Di.mapLink,target:"_blank",rel:"noopener noreferrer",className:"flex items-center",children:["Buka di Google Maps",b.jsx(Id,{className:"ml-2 text-2xl"})]})})})]})})]})}));dw.displayName="AgendaWeddContract";const Lr={title:"Resepsi Pernikahan I",location:"Rumah Keluarga Sherly",locationDetail:"JL. A R Hakim Balai-Balai Padang Panjang Barat",mapLink:"https://maps.app.goo.gl/7eX1JcCKzwL91sap7",date:"24 Agustus 2024",time:"11:00 - 16:00 WIB",icon:b.jsx(hw,{className:"text-xl text-[#E0C9C2]"})},Or={title:"Resepsi Pernikahan II",location:"Gedung Engku Syafe'i",mapLink:"https://maps.app.goo.gl/RitypTG4tTfu9QMA7",locationDetail:"BBPMP SUMBAR, Komplek Perguruan Tinggi UNP, Air Tawar Bar., Kec. Padang Utara",date:"31 Agustus 2024",time:"10:00 - 15:30 WIB",icon:b.jsx(hw,{className:"text-xl text-[#E0C9C2]"})},fw=H.forwardRef((t,e)=>b.jsx("div",{ref:e,className:"flex items-center justify-center p-8 border bg-[#F4ECE8] border-gray-300 shadow-lg h-full w-full",children:b.jsxs("div",{className:"flex flex-col items-center justify-center text-center",children:[b.jsx("h1",{className:"text-3xl font-bold mb-5 font-playfair",children:"Save The Date"}),b.jsx("div",{className:"w-20 h-[1px] bg-gray-400 mb-5"}),b.jsx("div",{className:"relative p-4 shadow-md border border-gray-300 bg-white rounded-t-3xl  w-72",children:b.jsxs("div",{className:"flex flex-col items-center",children:[b.jsx("h2",{className:"text-2xl font-semibold font-playfair mb-2",children:Lr.title}),b.jsx("div",{className:"mb-2",children:Lr.icon}),b.jsx("p",{className:"text-xs mb-1 font-semibold font-serif",children:Lr.location}),b.jsx("p",{className:"text-xs mb-1 mx-10 font-serif",children:Lr.locationDetail}),b.jsx("p",{className:"text-xs mb-1 font-serif",children:Lr.date}),b.jsx("p",{className:"text-xs mb-5 font-serif",children:Lr.time}),b.jsx("button",{className:"bg-[#E0C9C2] text-black btn btn-wide border border-gray-300 rounded-lg p-2 mb-1",children:b.jsxs("a",{href:Lr.mapLink,target:"_blank",rel:"noopener noreferrer",className:"flex items-center",children:["Buka di Google Maps",b.jsx(Id,{className:"ml-2 text-2xl"})]})})]})}),b.jsx("div",{className:"relative p-4 shadow-md border border-gray-300 bg-white rounded-b-3xl w-72  mt-5",children:b.jsxs("div",{className:"flex flex-col items-center",children:[b.jsx("h2",{className:"text-2xl font-semibold font-playfair mb-2",children:Or.title}),b.jsx("div",{className:"mb-2",children:Or.icon}),b.jsx("p",{className:"text-xs mb-1 font-semibold font-serif",children:Or.location}),b.jsx("p",{className:"text-xs mb-1 mx-5 font-serif",children:Or.locationDetail}),b.jsx("p",{className:"text-xs mb-1 font-serif",children:Or.date}),b.jsx("p",{className:"text-xs mb-5 font-serif",children:Or.time}),b.jsx("button",{className:"bg-[#E0C9C2] text-black btn btn-wide border border-gray-300 rounded-lg p-2",children:b.jsxs("a",{href:Or.mapLink,target:"_blank",rel:"noopener noreferrer",className:"flex items-center",children:["Buka di Google Maps",b.jsx(Id,{className:"ml-2 text-2xl"})]})})]})})]})}));fw.displayName="AgendaWeddReception";const GS="/undang-aku/assets/illustration-DqdqqhmN.png",pw=H.forwardRef((t,e)=>b.jsxs("div",{ref:e,className:"flex flex-col items-center justify-center p-8 border bg-[#F4ECE8] border-gray-300 shadow-lg h-full w-full",children:[b.jsxs("p",{className:"text-center text-lg font-serif leading-relaxed mt-24 mb-10",children:["***",b.jsx("br",{}),"Hari ini kau membuka buku.",b.jsx("br",{}),"Tidak ada susunan kata.",b.jsx("br",{}),"Melainkan semerbak aroma dari hamparan bunga.",b.jsx("br",{}),"Di halaman kedua kau bertanya, orang gila mana yang menanam mawar merah di alenia pertama.",b.jsx("br",{}),"Tapi kau tetap membaca.",b.jsx("br",{}),"***"]}),b.jsx("img",{src:GS,alt:"Ilustration Image",className:"max-w-[200px] h-auto mx-auto"})]}));pw.displayName="Poem";const WS="/undang-aku/assets/ocbc-logo-BvNnMprH.jpg",KS="/undang-aku/assets/bni-logo-C7LRVx0C.png",HS="/undang-aku/assets/bri-logo-1iw9aMQc.png",QS="/undang-aku/assets/gopay-logo-8U_dE6_r.jpg",YS=({message:t,show:e})=>b.jsx("div",{className:`fixed inset-0 flex items-center justify-center bg-black bg-opacity-20 transition-opacity duration-300 ${e?"opacity-100":"opacity-0 pointer-events-none"}`,children:b.jsx("div",{className:"bg-gray-800 text-white p-4 m-4 rounded-md whitespace-pre-line text-center",children:t})}),mw=H.forwardRef((t,e)=>{const[n,r]=H.useState(""),[i,s]=H.useState(!1),o=f=>{r(f),s(!0),setTimeout(()=>{s(!1)},1e3)},l=f=>{navigator.clipboard.writeText(f).then(()=>{o(`Alamat berhasil disalin:
`+f)}).catch(m=>{console.error("Failed to copy text: ",m)})},u=f=>{navigator.clipboard.writeText(f).then(()=>{o(`No Akun berhasil disalin:
`+f)}).catch(m=>{console.error("Failed to copy text: ",m)})},c=({accountLogo:f,accountNumber:m,accountType:v})=>b.jsxs("div",{className:"border p-4 rounded-lg mb-4 flex items-center justify-between bg-white",onClick:()=>u(m),children:[b.jsx("img",{src:f,alt:"Bank Logo",className:"w-10"}),b.jsx("div",{className:"flex items-center justify-center",children:b.jsxs("div",{children:[b.jsxs("h3",{className:"text-xs font-semibold",children:[v,":"]}),b.jsx("p",{className:"text-xs font-semibold",children:m})]})}),b.jsx(wy,{className:"cursor-pointer text-gray-500"})]});return b.jsxs("div",{ref:e,className:"flex flex-col items-center justify-center p-8 border bg-[#F4ECE8] border-gray-300 shadow-lg h-full w-full",children:[b.jsx(YS,{message:n,show:i}),b.jsxs("div",{className:"flex flex-col items-center justify-center text-center",children:[b.jsx("h1",{className:"text-3xl font-bold mb-5 font-playfair",children:"Hadiah Pernikahan"}),b.jsx("div",{className:"w-20 h-[1px] bg-gray-400 mb-5"}),b.jsxs("div",{className:"mb-2",children:[b.jsx("h2",{className:"text-2xl font-semibold mb-4 font-playfair",children:"Tranfer Bank / E-Wallet"}),b.jsx(c,{accountLogo:WS,accountNumber:"6938-1398-9623",accountType:"Thariq Ramadhan"}),b.jsx(c,{accountLogo:KS,accountNumber:"0455053170",accountType:"Thariq Ramadhan"}),b.jsx(c,{accountLogo:HS,accountNumber:"5460-0101-3623-539",accountType:"Sherly Ekaputri"}),b.jsx(c,{accountLogo:QS,accountNumber:"081266654235",accountType:"Sherly Ekaputri"})]}),b.jsx("div",{className:"w-20 h-[1px] bg-gray-400 mb-2"}),b.jsxs("div",{children:[b.jsx("h2",{className:"text-2xl font-semibold m-4 font-playfair",children:"Kirim ke Alamat"}),b.jsxs("div",{className:"border bg-white p-3 rounded-lg mb-4 flex items-center justify-between text-xs",onClick:()=>l(" Rumah Keluarga Sherly, JL. A R Hakim Balai-Balai Padang Panjang Barat"),children:[b.jsx("p",{children:"Rumah Keluarga Sherly, JL. A R Hakim Balai-Balai Padang Panjang Barat"}),b.jsx(wy,{className:"cursor-pointer text-gray-500"})]})]})]})]})});mw.displayName="Gift";function XS(t){return Ar({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{fill:"none",strokeLinecap:"round",strokeMiterlimit:"10",strokeWidth:"32",d:"M87.48 380c1.2-4.38-1.43-10.47-3.94-14.86a42.63 42.63 0 0 0-2.54-3.8 199.81 199.81 0 0 1-33-110C47.64 139.09 140.72 48 255.82 48 356.2 48 440 117.54 459.57 209.85a199 199 0 0 1 4.43 41.64c0 112.41-89.49 204.93-204.59 204.93-18.31 0-43-4.6-56.47-8.37s-26.92-8.77-30.39-10.11a31.14 31.14 0 0 0-11.13-2.07 30.7 30.7 0 0 0-12.08 2.43L81.5 462.78a15.92 15.92 0 0 1-4.66 1.22 9.61 9.61 0 0 1-9.58-9.74 15.85 15.85 0 0 1 .6-3.29z"},child:[]},{tag:"circle",attr:{cx:"160",cy:"256",r:"32"},child:[]},{tag:"circle",attr:{cx:"256",cy:"256",r:"32"},child:[]},{tag:"circle",attr:{cx:"352",cy:"256",r:"32"},child:[]}]})(t)}var Ey={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gw=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},JS=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],l=t[n++],u=((i&7)<<18|(s&63)<<12|(o&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},yw={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,l=o?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,f=s>>2,m=(s&3)<<4|l>>4;let v=(l&15)<<2|c>>6,A=c&63;u||(A=64,o||(v=64)),r.push(n[f],n[m],n[v],n[A])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(gw(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):JS(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],l=i<t.length?n[t.charAt(i)]:0;++i;const c=i<t.length?n[t.charAt(i)]:64;++i;const m=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||l==null||c==null||m==null)throw new ZS;const v=s<<2|l>>4;if(r.push(v),c!==64){const A=l<<4&240|c>>2;if(r.push(A),m!==64){const k=c<<6&192|m;r.push(k)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class ZS extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const eP=function(t){const e=gw(t);return yw.encodeByteArray(e,!0)},vu=function(t){return eP(t).replace(/\./g,"")},tP=function(t){try{return yw.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function wu(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!nP(n)||(t[n]=wu(t[n],e[n]));return t}function nP(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rP(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iP=()=>rP().__FIREBASE_DEFAULTS__,sP=()=>{if(typeof process>"u"||typeof Ey>"u")return;const t=Ey.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},oP=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&tP(t[1]);return e&&JSON.parse(e)},_w=()=>{try{return iP()||sP()||oP()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},vw=()=>{var t;return(t=_w())===null||t===void 0?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aP{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lP(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[vu(JSON.stringify(n)),vu(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Eu(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function uP(){var t;const e=(t=_w())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function ww(){return typeof window<"u"||Ew()}function Ew(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function Iw(){return!uP()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Tw(){try{return typeof indexedDB=="object"}catch{return!1}}function cP(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hP="FirebaseError";class Ei extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=hP,Object.setPrototypeOf(this,Ei.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ju.prototype.create)}}class Ju{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?dP(s,r):"Error",l=`${this.serviceName}: ${o} (${i}).`;return new Ei(i,l,r)}}function dP(t,e){return t.replace(fP,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const fP=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Iy(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function sa(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(Ty(s)&&Ty(o)){if(!sa(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function Ty(t){return t!==null&&typeof t=="object"}function pP(t,e){const n=new mP(t,e);return n.subscribe.bind(n)}class mP{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");gP(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=gh),i.error===void 0&&(i.error=gh),i.complete===void 0&&(i.complete=gh);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function gP(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function gh(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function je(t){return t&&t._delegate?t._delegate:t}class li{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yP{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new aP;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(vP(e))try{this.getOrInitializeService({instanceIdentifier:zr})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=zr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=zr){return this.instances.has(e)}getOptions(e=zr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(s);r===l&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:_P(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=zr){return this.component?this.component.multipleInstances?e:zr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function _P(t){return t===zr?void 0:t}function vP(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xw{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new yP(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qf=[];var ie;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ie||(ie={}));const Sw={debug:ie.DEBUG,verbose:ie.VERBOSE,info:ie.INFO,warn:ie.WARN,error:ie.ERROR,silent:ie.SILENT},wP=ie.INFO,EP={[ie.DEBUG]:"log",[ie.VERBOSE]:"log",[ie.INFO]:"info",[ie.WARN]:"warn",[ie.ERROR]:"error"},IP=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=EP[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Yf{constructor(e){this.name=e,this._logLevel=wP,this._logHandler=IP,this._userLogHandler=null,Qf.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ie))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Sw[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ie.DEBUG,...e),this._logHandler(this,ie.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ie.VERBOSE,...e),this._logHandler(this,ie.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ie.INFO,...e),this._logHandler(this,ie.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ie.WARN,...e),this._logHandler(this,ie.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ie.ERROR,...e),this._logHandler(this,ie.ERROR,...e)}}function TP(t){Qf.forEach(e=>{e.setLogLevel(t)})}function xP(t,e){for(const n of Qf){let r=null;e&&e.level&&(r=Sw[e.level]),t===null?n.userLogHandler=null:n.userLogHandler=(i,s,...o)=>{const l=o.map(u=>{if(u==null)return null;if(typeof u=="string")return u;if(typeof u=="number"||typeof u=="boolean")return u.toString();if(u instanceof Error)return u.message;try{return JSON.stringify(u)}catch{return null}}).filter(u=>u).join(" ");s>=(r??i.logLevel)&&t({level:ie[s].toLowerCase(),message:l,args:o,type:i.name})}}}const SP=(t,e)=>e.some(n=>t instanceof n);let xy,Sy;function PP(){return xy||(xy=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function AP(){return Sy||(Sy=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Pw=new WeakMap,Td=new WeakMap,Aw=new WeakMap,yh=new WeakMap,Xf=new WeakMap;function RP(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(cr(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&Pw.set(n,t)}).catch(()=>{}),Xf.set(e,t),e}function CP(t){if(Td.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});Td.set(t,e)}let xd={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Td.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Aw.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return cr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function bP(t){xd=t(xd)}function kP(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(_h(this),e,...n);return Aw.set(r,e.sort?e.sort():[e]),cr(r)}:AP().includes(t)?function(...e){return t.apply(_h(this),e),cr(Pw.get(this))}:function(...e){return cr(t.apply(_h(this),e))}}function DP(t){return typeof t=="function"?kP(t):(t instanceof IDBTransaction&&CP(t),SP(t,PP())?new Proxy(t,xd):t)}function cr(t){if(t instanceof IDBRequest)return RP(t);if(yh.has(t))return yh.get(t);const e=DP(t);return e!==t&&(yh.set(t,e),Xf.set(e,t)),e}const _h=t=>Xf.get(t);function NP(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),l=cr(o);return r&&o.addEventListener("upgradeneeded",u=>{r(cr(o.result),u.oldVersion,u.newVersion,cr(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),l.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),l}const VP=["get","getKey","getAll","getAllKeys","count"],MP=["put","add","delete","clear"],vh=new Map;function Py(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(vh.get(e))return vh.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=MP.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||VP.includes(n)))return;const s=async function(o,...l){const u=this.transaction(o,i?"readwrite":"readonly");let c=u.store;return r&&(c=c.index(l.shift())),(await Promise.all([c[n](...l),i&&u.done]))[0]};return vh.set(e,s),s}bP(t=>({...t,get:(e,n,r)=>Py(e,n)||t.get(e,n,r),has:(e,n)=>!!Py(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LP{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(OP(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function OP(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Iu="@firebase/app",Sd="0.10.7";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ui=new Yf("@firebase/app"),FP="@firebase/app-compat",BP="@firebase/analytics-compat",jP="@firebase/analytics",zP="@firebase/app-check-compat",UP="@firebase/app-check",$P="@firebase/auth",qP="@firebase/auth-compat",GP="@firebase/database",WP="@firebase/database-compat",KP="@firebase/functions",HP="@firebase/functions-compat",QP="@firebase/installations",YP="@firebase/installations-compat",XP="@firebase/messaging",JP="@firebase/messaging-compat",ZP="@firebase/performance",eA="@firebase/performance-compat",tA="@firebase/remote-config",nA="@firebase/remote-config-compat",rA="@firebase/storage",iA="@firebase/storage-compat",sA="@firebase/firestore",oA="@firebase/vertexai-preview",aA="@firebase/firestore-compat",lA="firebase",uA="10.12.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pr="[DEFAULT]",cA={[Iu]:"fire-core",[FP]:"fire-core-compat",[jP]:"fire-analytics",[BP]:"fire-analytics-compat",[UP]:"fire-app-check",[zP]:"fire-app-check-compat",[$P]:"fire-auth",[qP]:"fire-auth-compat",[GP]:"fire-rtdb",[WP]:"fire-rtdb-compat",[KP]:"fire-fn",[HP]:"fire-fn-compat",[QP]:"fire-iid",[YP]:"fire-iid-compat",[XP]:"fire-fcm",[JP]:"fire-fcm-compat",[ZP]:"fire-perf",[eA]:"fire-perf-compat",[tA]:"fire-rc",[nA]:"fire-rc-compat",[rA]:"fire-gcs",[iA]:"fire-gcs-compat",[sA]:"fire-fst",[aA]:"fire-fst-compat",[oA]:"fire-vertex","fire-js":"fire-js",[lA]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mr=new Map,gs=new Map,ys=new Map;function oa(t,e){try{t.container.addComponent(e)}catch(n){ui.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Rw(t,e){t.container.addOrOverwriteComponent(e)}function _s(t){const e=t.name;if(ys.has(e))return ui.debug(`There were multiple attempts to register component ${e}.`),!1;ys.set(e,t);for(const n of mr.values())oa(n,t);for(const n of gs.values())oa(n,t);return!0}function Cw(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function hA(t,e,n=pr){Cw(t,e).clearInstance(n)}function bw(t){return t.options!==void 0}function dA(t){return t.settings!==void 0}function fA(){ys.clear()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pA={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Wt=new Ju("app","Firebase",pA);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let kw=class{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new li("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Wt.create("app-deleted",{appName:this._name})}};/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mA extends kw{constructor(e,n,r,i){const s=n.automaticDataCollectionEnabled!==void 0?n.automaticDataCollectionEnabled:!1,o={name:r,automaticDataCollectionEnabled:s};if(e.apiKey!==void 0)super(e,o,i);else{const l=e;super(l.options,o,i)}this._serverConfig=Object.assign({automaticDataCollectionEnabled:s},n),this._finalizationRegistry=null,typeof FinalizationRegistry<"u"&&(this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,n.releaseOnDeref=void 0,Cn(Iu,Sd,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(e){this.isDeleted||(this._refCount++,e!==void 0&&this._finalizationRegistry!==null&&this._finalizationRegistry.register(e,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){ep(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw Wt.create("server-app-deleted")}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jf=uA;function Zf(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:pr,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Wt.create("bad-app-name",{appName:String(i)});if(n||(n=vw()),!n)throw Wt.create("no-options");const s=mr.get(i);if(s){if(sa(n,s.options)&&sa(r,s.config))return s;throw Wt.create("duplicate-app",{appName:i})}const o=new xw(i);for(const u of ys.values())o.addComponent(u);const l=new kw(n,r,o);return mr.set(i,l),l}function gA(t,e){if(ww()&&!Ew())throw Wt.create("invalid-server-app-environment");e.automaticDataCollectionEnabled===void 0&&(e.automaticDataCollectionEnabled=!1);let n;bw(t)?n=t.options:n=t;const r=Object.assign(Object.assign({},e),n);r.releaseOnDeref!==void 0&&delete r.releaseOnDeref;const i=c=>[...c].reduce((f,m)=>Math.imul(31,f)+m.charCodeAt(0)|0,0);if(e.releaseOnDeref!==void 0&&typeof FinalizationRegistry>"u")throw Wt.create("finalization-registry-not-supported",{});const s=""+i(JSON.stringify(r)),o=gs.get(s);if(o)return o.incRefCount(e.releaseOnDeref),o;const l=new xw(s);for(const c of ys.values())l.addComponent(c);const u=new mA(n,e,s,l);return gs.set(s,u),u}function yA(t=pr){const e=mr.get(t);if(!e&&t===pr&&vw())return Zf();if(!e)throw Wt.create("no-app",{appName:t});return e}function _A(){return Array.from(mr.values())}async function ep(t){let e=!1;const n=t.name;mr.has(n)?(e=!0,mr.delete(n)):gs.has(n)&&t.decRefCount()<=0&&(gs.delete(n),e=!0),e&&(await Promise.all(t.container.getProviders().map(r=>r.delete())),t.isDeleted=!0)}function Cn(t,e,n){var r;let i=(r=cA[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const l=[`Unable to register library "${i}" with version "${e}":`];s&&l.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&l.push("and"),o&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ui.warn(l.join(" "));return}_s(new li(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}function Dw(t,e){if(t!==null&&typeof t!="function")throw Wt.create("invalid-log-argument");xP(t,e)}function Nw(t){TP(t)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vA="firebase-heartbeat-database",wA=1,aa="firebase-heartbeat-store";let wh=null;function Vw(){return wh||(wh=NP(vA,wA,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(aa)}catch(n){console.warn(n)}}}}).catch(t=>{throw Wt.create("idb-open",{originalErrorMessage:t.message})})),wh}async function EA(t){try{const n=(await Vw()).transaction(aa),r=await n.objectStore(aa).get(Mw(t));return await n.done,r}catch(e){if(e instanceof Ei)ui.warn(e.message);else{const n=Wt.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ui.warn(n.message)}}}async function Ay(t,e){try{const r=(await Vw()).transaction(aa,"readwrite");await r.objectStore(aa).put(e,Mw(t)),await r.done}catch(n){if(n instanceof Ei)ui.warn(n.message);else{const r=Wt.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});ui.warn(r.message)}}}function Mw(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IA=1024,TA=30*24*60*60*1e3;class xA{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new PA(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Ry();if(!(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)))return this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const l=new Date(o.date).valueOf();return Date.now()-l<=TA}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var e;if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Ry(),{heartbeatsToSend:r,unsentEntries:i}=SA(this._heartbeatsCache.heartbeats),s=vu(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}}function Ry(){return new Date().toISOString().substring(0,10)}function SA(t,e=IA){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),Cy(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Cy(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class PA{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Tw()?cP().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await EA(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Ay(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Ay(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function Cy(t){return vu(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AA(t){_s(new li("platform-logger",e=>new LP(e),"PRIVATE")),_s(new li("heartbeat",e=>new xA(e),"PRIVATE")),Cn(Iu,Sd,t),Cn(Iu,Sd,"esm2017"),Cn("fire-js","")}AA("");const RA=Object.freeze(Object.defineProperty({__proto__:null,FirebaseError:Ei,SDK_VERSION:Jf,_DEFAULT_ENTRY_NAME:pr,_addComponent:oa,_addOrOverwriteComponent:Rw,_apps:mr,_clearComponents:fA,_components:ys,_getProvider:Cw,_isFirebaseApp:bw,_isFirebaseServerApp:dA,_registerComponent:_s,_removeServiceInstance:hA,_serverApps:gs,deleteApp:ep,getApp:yA,getApps:_A,initializeApp:Zf,initializeServerApp:gA,onLog:Dw,registerVersion:Cn,setLogLevel:Nw},Symbol.toStringTag,{value:"Module"}));var by=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ni,Lw;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(_,y){function w(){}w.prototype=y.prototype,_.D=y.prototype,_.prototype=new w,_.prototype.constructor=_,_.C=function(x,C,D){for(var P=Array(arguments.length-2),xe=2;xe<arguments.length;xe++)P[xe-2]=arguments[xe];return y.prototype[C].apply(x,P)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(_,y,w){w||(w=0);var x=Array(16);if(typeof y=="string")for(var C=0;16>C;++C)x[C]=y.charCodeAt(w++)|y.charCodeAt(w++)<<8|y.charCodeAt(w++)<<16|y.charCodeAt(w++)<<24;else for(C=0;16>C;++C)x[C]=y[w++]|y[w++]<<8|y[w++]<<16|y[w++]<<24;y=_.g[0],w=_.g[1],C=_.g[2];var D=_.g[3],P=y+(D^w&(C^D))+x[0]+3614090360&4294967295;y=w+(P<<7&4294967295|P>>>25),P=D+(C^y&(w^C))+x[1]+3905402710&4294967295,D=y+(P<<12&4294967295|P>>>20),P=C+(w^D&(y^w))+x[2]+606105819&4294967295,C=D+(P<<17&4294967295|P>>>15),P=w+(y^C&(D^y))+x[3]+3250441966&4294967295,w=C+(P<<22&4294967295|P>>>10),P=y+(D^w&(C^D))+x[4]+4118548399&4294967295,y=w+(P<<7&4294967295|P>>>25),P=D+(C^y&(w^C))+x[5]+1200080426&4294967295,D=y+(P<<12&4294967295|P>>>20),P=C+(w^D&(y^w))+x[6]+2821735955&4294967295,C=D+(P<<17&4294967295|P>>>15),P=w+(y^C&(D^y))+x[7]+4249261313&4294967295,w=C+(P<<22&4294967295|P>>>10),P=y+(D^w&(C^D))+x[8]+1770035416&4294967295,y=w+(P<<7&4294967295|P>>>25),P=D+(C^y&(w^C))+x[9]+2336552879&4294967295,D=y+(P<<12&4294967295|P>>>20),P=C+(w^D&(y^w))+x[10]+4294925233&4294967295,C=D+(P<<17&4294967295|P>>>15),P=w+(y^C&(D^y))+x[11]+2304563134&4294967295,w=C+(P<<22&4294967295|P>>>10),P=y+(D^w&(C^D))+x[12]+1804603682&4294967295,y=w+(P<<7&4294967295|P>>>25),P=D+(C^y&(w^C))+x[13]+4254626195&4294967295,D=y+(P<<12&4294967295|P>>>20),P=C+(w^D&(y^w))+x[14]+2792965006&4294967295,C=D+(P<<17&4294967295|P>>>15),P=w+(y^C&(D^y))+x[15]+1236535329&4294967295,w=C+(P<<22&4294967295|P>>>10),P=y+(C^D&(w^C))+x[1]+4129170786&4294967295,y=w+(P<<5&4294967295|P>>>27),P=D+(w^C&(y^w))+x[6]+3225465664&4294967295,D=y+(P<<9&4294967295|P>>>23),P=C+(y^w&(D^y))+x[11]+643717713&4294967295,C=D+(P<<14&4294967295|P>>>18),P=w+(D^y&(C^D))+x[0]+3921069994&4294967295,w=C+(P<<20&4294967295|P>>>12),P=y+(C^D&(w^C))+x[5]+3593408605&4294967295,y=w+(P<<5&4294967295|P>>>27),P=D+(w^C&(y^w))+x[10]+38016083&4294967295,D=y+(P<<9&4294967295|P>>>23),P=C+(y^w&(D^y))+x[15]+3634488961&4294967295,C=D+(P<<14&4294967295|P>>>18),P=w+(D^y&(C^D))+x[4]+3889429448&4294967295,w=C+(P<<20&4294967295|P>>>12),P=y+(C^D&(w^C))+x[9]+568446438&4294967295,y=w+(P<<5&4294967295|P>>>27),P=D+(w^C&(y^w))+x[14]+3275163606&4294967295,D=y+(P<<9&4294967295|P>>>23),P=C+(y^w&(D^y))+x[3]+4107603335&4294967295,C=D+(P<<14&4294967295|P>>>18),P=w+(D^y&(C^D))+x[8]+1163531501&4294967295,w=C+(P<<20&4294967295|P>>>12),P=y+(C^D&(w^C))+x[13]+2850285829&4294967295,y=w+(P<<5&4294967295|P>>>27),P=D+(w^C&(y^w))+x[2]+4243563512&4294967295,D=y+(P<<9&4294967295|P>>>23),P=C+(y^w&(D^y))+x[7]+1735328473&4294967295,C=D+(P<<14&4294967295|P>>>18),P=w+(D^y&(C^D))+x[12]+2368359562&4294967295,w=C+(P<<20&4294967295|P>>>12),P=y+(w^C^D)+x[5]+4294588738&4294967295,y=w+(P<<4&4294967295|P>>>28),P=D+(y^w^C)+x[8]+2272392833&4294967295,D=y+(P<<11&4294967295|P>>>21),P=C+(D^y^w)+x[11]+1839030562&4294967295,C=D+(P<<16&4294967295|P>>>16),P=w+(C^D^y)+x[14]+4259657740&4294967295,w=C+(P<<23&4294967295|P>>>9),P=y+(w^C^D)+x[1]+2763975236&4294967295,y=w+(P<<4&4294967295|P>>>28),P=D+(y^w^C)+x[4]+1272893353&4294967295,D=y+(P<<11&4294967295|P>>>21),P=C+(D^y^w)+x[7]+4139469664&4294967295,C=D+(P<<16&4294967295|P>>>16),P=w+(C^D^y)+x[10]+3200236656&4294967295,w=C+(P<<23&4294967295|P>>>9),P=y+(w^C^D)+x[13]+681279174&4294967295,y=w+(P<<4&4294967295|P>>>28),P=D+(y^w^C)+x[0]+3936430074&4294967295,D=y+(P<<11&4294967295|P>>>21),P=C+(D^y^w)+x[3]+3572445317&4294967295,C=D+(P<<16&4294967295|P>>>16),P=w+(C^D^y)+x[6]+76029189&4294967295,w=C+(P<<23&4294967295|P>>>9),P=y+(w^C^D)+x[9]+3654602809&4294967295,y=w+(P<<4&4294967295|P>>>28),P=D+(y^w^C)+x[12]+3873151461&4294967295,D=y+(P<<11&4294967295|P>>>21),P=C+(D^y^w)+x[15]+530742520&4294967295,C=D+(P<<16&4294967295|P>>>16),P=w+(C^D^y)+x[2]+3299628645&4294967295,w=C+(P<<23&4294967295|P>>>9),P=y+(C^(w|~D))+x[0]+4096336452&4294967295,y=w+(P<<6&4294967295|P>>>26),P=D+(w^(y|~C))+x[7]+1126891415&4294967295,D=y+(P<<10&4294967295|P>>>22),P=C+(y^(D|~w))+x[14]+2878612391&4294967295,C=D+(P<<15&4294967295|P>>>17),P=w+(D^(C|~y))+x[5]+4237533241&4294967295,w=C+(P<<21&4294967295|P>>>11),P=y+(C^(w|~D))+x[12]+1700485571&4294967295,y=w+(P<<6&4294967295|P>>>26),P=D+(w^(y|~C))+x[3]+2399980690&4294967295,D=y+(P<<10&4294967295|P>>>22),P=C+(y^(D|~w))+x[10]+4293915773&4294967295,C=D+(P<<15&4294967295|P>>>17),P=w+(D^(C|~y))+x[1]+2240044497&4294967295,w=C+(P<<21&4294967295|P>>>11),P=y+(C^(w|~D))+x[8]+1873313359&4294967295,y=w+(P<<6&4294967295|P>>>26),P=D+(w^(y|~C))+x[15]+4264355552&4294967295,D=y+(P<<10&4294967295|P>>>22),P=C+(y^(D|~w))+x[6]+2734768916&4294967295,C=D+(P<<15&4294967295|P>>>17),P=w+(D^(C|~y))+x[13]+1309151649&4294967295,w=C+(P<<21&4294967295|P>>>11),P=y+(C^(w|~D))+x[4]+4149444226&4294967295,y=w+(P<<6&4294967295|P>>>26),P=D+(w^(y|~C))+x[11]+3174756917&4294967295,D=y+(P<<10&4294967295|P>>>22),P=C+(y^(D|~w))+x[2]+718787259&4294967295,C=D+(P<<15&4294967295|P>>>17),P=w+(D^(C|~y))+x[9]+3951481745&4294967295,_.g[0]=_.g[0]+y&4294967295,_.g[1]=_.g[1]+(C+(P<<21&4294967295|P>>>11))&4294967295,_.g[2]=_.g[2]+C&4294967295,_.g[3]=_.g[3]+D&4294967295}r.prototype.u=function(_,y){y===void 0&&(y=_.length);for(var w=y-this.blockSize,x=this.B,C=this.h,D=0;D<y;){if(C==0)for(;D<=w;)i(this,_,D),D+=this.blockSize;if(typeof _=="string"){for(;D<y;)if(x[C++]=_.charCodeAt(D++),C==this.blockSize){i(this,x),C=0;break}}else for(;D<y;)if(x[C++]=_[D++],C==this.blockSize){i(this,x),C=0;break}}this.h=C,this.o+=y},r.prototype.v=function(){var _=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);_[0]=128;for(var y=1;y<_.length-8;++y)_[y]=0;var w=8*this.o;for(y=_.length-8;y<_.length;++y)_[y]=w&255,w/=256;for(this.u(_),_=Array(16),y=w=0;4>y;++y)for(var x=0;32>x;x+=8)_[w++]=this.g[y]>>>x&255;return _};function s(_,y){var w=l;return Object.prototype.hasOwnProperty.call(w,_)?w[_]:w[_]=y(_)}function o(_,y){this.h=y;for(var w=[],x=!0,C=_.length-1;0<=C;C--){var D=_[C]|0;x&&D==y||(w[C]=D,x=!1)}this.g=w}var l={};function u(_){return-128<=_&&128>_?s(_,function(y){return new o([y|0],0>y?-1:0)}):new o([_|0],0>_?-1:0)}function c(_){if(isNaN(_)||!isFinite(_))return m;if(0>_)return L(c(-_));for(var y=[],w=1,x=0;_>=w;x++)y[x]=_/w|0,w*=4294967296;return new o(y,0)}function f(_,y){if(_.length==0)throw Error("number format error: empty string");if(y=y||10,2>y||36<y)throw Error("radix out of range: "+y);if(_.charAt(0)=="-")return L(f(_.substring(1),y));if(0<=_.indexOf("-"))throw Error('number format error: interior "-" character');for(var w=c(Math.pow(y,8)),x=m,C=0;C<_.length;C+=8){var D=Math.min(8,_.length-C),P=parseInt(_.substring(C,C+D),y);8>D?(D=c(Math.pow(y,D)),x=x.j(D).add(c(P))):(x=x.j(w),x=x.add(c(P)))}return x}var m=u(0),v=u(1),A=u(16777216);t=o.prototype,t.m=function(){if(N(this))return-L(this).m();for(var _=0,y=1,w=0;w<this.g.length;w++){var x=this.i(w);_+=(0<=x?x:4294967296+x)*y,y*=4294967296}return _},t.toString=function(_){if(_=_||10,2>_||36<_)throw Error("radix out of range: "+_);if(k(this))return"0";if(N(this))return"-"+L(this).toString(_);for(var y=c(Math.pow(_,6)),w=this,x="";;){var C=d(w,y).g;w=R(w,C.j(y));var D=((0<w.g.length?w.g[0]:w.h)>>>0).toString(_);if(w=C,k(w))return D+x;for(;6>D.length;)D="0"+D;x=D+x}},t.i=function(_){return 0>_?0:_<this.g.length?this.g[_]:this.h};function k(_){if(_.h!=0)return!1;for(var y=0;y<_.g.length;y++)if(_.g[y]!=0)return!1;return!0}function N(_){return _.h==-1}t.l=function(_){return _=R(this,_),N(_)?-1:k(_)?0:1};function L(_){for(var y=_.g.length,w=[],x=0;x<y;x++)w[x]=~_.g[x];return new o(w,~_.h).add(v)}t.abs=function(){return N(this)?L(this):this},t.add=function(_){for(var y=Math.max(this.g.length,_.g.length),w=[],x=0,C=0;C<=y;C++){var D=x+(this.i(C)&65535)+(_.i(C)&65535),P=(D>>>16)+(this.i(C)>>>16)+(_.i(C)>>>16);x=P>>>16,D&=65535,P&=65535,w[C]=P<<16|D}return new o(w,w[w.length-1]&-2147483648?-1:0)};function R(_,y){return _.add(L(y))}t.j=function(_){if(k(this)||k(_))return m;if(N(this))return N(_)?L(this).j(L(_)):L(L(this).j(_));if(N(_))return L(this.j(L(_)));if(0>this.l(A)&&0>_.l(A))return c(this.m()*_.m());for(var y=this.g.length+_.g.length,w=[],x=0;x<2*y;x++)w[x]=0;for(x=0;x<this.g.length;x++)for(var C=0;C<_.g.length;C++){var D=this.i(x)>>>16,P=this.i(x)&65535,xe=_.i(C)>>>16,Dt=_.i(C)&65535;w[2*x+2*C]+=P*Dt,S(w,2*x+2*C),w[2*x+2*C+1]+=D*Dt,S(w,2*x+2*C+1),w[2*x+2*C+1]+=P*xe,S(w,2*x+2*C+1),w[2*x+2*C+2]+=D*xe,S(w,2*x+2*C+2)}for(x=0;x<y;x++)w[x]=w[2*x+1]<<16|w[2*x];for(x=y;x<2*y;x++)w[x]=0;return new o(w,0)};function S(_,y){for(;(_[y]&65535)!=_[y];)_[y+1]+=_[y]>>>16,_[y]&=65535,y++}function T(_,y){this.g=_,this.h=y}function d(_,y){if(k(y))throw Error("division by zero");if(k(_))return new T(m,m);if(N(_))return y=d(L(_),y),new T(L(y.g),L(y.h));if(N(y))return y=d(_,L(y)),new T(L(y.g),y.h);if(30<_.g.length){if(N(_)||N(y))throw Error("slowDivide_ only works with positive integers.");for(var w=v,x=y;0>=x.l(_);)w=g(w),x=g(x);var C=I(w,1),D=I(x,1);for(x=I(x,2),w=I(w,2);!k(x);){var P=D.add(x);0>=P.l(_)&&(C=C.add(w),D=P),x=I(x,1),w=I(w,1)}return y=R(_,C.j(y)),new T(C,y)}for(C=m;0<=_.l(y);){for(w=Math.max(1,Math.floor(_.m()/y.m())),x=Math.ceil(Math.log(w)/Math.LN2),x=48>=x?1:Math.pow(2,x-48),D=c(w),P=D.j(y);N(P)||0<P.l(_);)w-=x,D=c(w),P=D.j(y);k(D)&&(D=v),C=C.add(D),_=R(_,P)}return new T(C,_)}t.A=function(_){return d(this,_).h},t.and=function(_){for(var y=Math.max(this.g.length,_.g.length),w=[],x=0;x<y;x++)w[x]=this.i(x)&_.i(x);return new o(w,this.h&_.h)},t.or=function(_){for(var y=Math.max(this.g.length,_.g.length),w=[],x=0;x<y;x++)w[x]=this.i(x)|_.i(x);return new o(w,this.h|_.h)},t.xor=function(_){for(var y=Math.max(this.g.length,_.g.length),w=[],x=0;x<y;x++)w[x]=this.i(x)^_.i(x);return new o(w,this.h^_.h)};function g(_){for(var y=_.g.length+1,w=[],x=0;x<y;x++)w[x]=_.i(x)<<1|_.i(x-1)>>>31;return new o(w,_.h)}function I(_,y){var w=y>>5;y%=32;for(var x=_.g.length-w,C=[],D=0;D<x;D++)C[D]=0<y?_.i(D+w)>>>y|_.i(D+w+1)<<32-y:_.i(D+w);return new o(C,_.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Lw=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=f,ni=o}).apply(typeof by<"u"?by:typeof self<"u"?self:typeof window<"u"?window:{});var vl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ow,Fw,To,Bw,Ol,Pd,jw,zw,Uw;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,h,p){return a==Array.prototype||a==Object.prototype||(a[h]=p.value),a};function n(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof vl=="object"&&vl];for(var h=0;h<a.length;++h){var p=a[h];if(p&&p.Math==Math)return p}throw Error("Cannot find global object")}var r=n(this);function i(a,h){if(h)e:{var p=r;a=a.split(".");for(var E=0;E<a.length-1;E++){var V=a[E];if(!(V in p))break e;p=p[V]}a=a[a.length-1],E=p[a],h=h(E),h!=E&&h!=null&&e(p,a,{configurable:!0,writable:!0,value:h})}}function s(a,h){a instanceof String&&(a+="");var p=0,E=!1,V={next:function(){if(!E&&p<a.length){var F=p++;return{value:h(F,a[F]),done:!1}}return E=!0,{done:!0,value:void 0}}};return V[Symbol.iterator]=function(){return V},V}i("Array.prototype.values",function(a){return a||function(){return s(this,function(h,p){return p})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},l=this||self;function u(a){var h=typeof a;return h=h!="object"?h:a?Array.isArray(a)?"array":h:"null",h=="array"||h=="object"&&typeof a.length=="number"}function c(a){var h=typeof a;return h=="object"&&a!=null||h=="function"}function f(a,h,p){return a.call.apply(a.bind,arguments)}function m(a,h,p){if(!a)throw Error();if(2<arguments.length){var E=Array.prototype.slice.call(arguments,2);return function(){var V=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(V,E),a.apply(h,V)}}return function(){return a.apply(h,arguments)}}function v(a,h,p){return v=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?f:m,v.apply(null,arguments)}function A(a,h){var p=Array.prototype.slice.call(arguments,1);return function(){var E=p.slice();return E.push.apply(E,arguments),a.apply(this,E)}}function k(a,h){function p(){}p.prototype=h.prototype,a.aa=h.prototype,a.prototype=new p,a.prototype.constructor=a,a.Qb=function(E,V,F){for(var U=Array(arguments.length-2),fe=2;fe<arguments.length;fe++)U[fe-2]=arguments[fe];return h.prototype[V].apply(E,U)}}function N(a){const h=a.length;if(0<h){const p=Array(h);for(let E=0;E<h;E++)p[E]=a[E];return p}return[]}function L(a,h){for(let p=1;p<arguments.length;p++){const E=arguments[p];if(u(E)){const V=a.length||0,F=E.length||0;a.length=V+F;for(let U=0;U<F;U++)a[V+U]=E[U]}else a.push(E)}}class R{constructor(h,p){this.i=h,this.j=p,this.h=0,this.g=null}get(){let h;return 0<this.h?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function S(a){return/^[\s\xa0]*$/.test(a)}function T(){var a=l.navigator;return a&&(a=a.userAgent)?a:""}function d(a){return d[" "](a),a}d[" "]=function(){};var g=T().indexOf("Gecko")!=-1&&!(T().toLowerCase().indexOf("webkit")!=-1&&T().indexOf("Edge")==-1)&&!(T().indexOf("Trident")!=-1||T().indexOf("MSIE")!=-1)&&T().indexOf("Edge")==-1;function I(a,h,p){for(const E in a)h.call(p,a[E],E,a)}function _(a,h){for(const p in a)h.call(void 0,a[p],p,a)}function y(a){const h={};for(const p in a)h[p]=a[p];return h}const w="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function x(a,h){let p,E;for(let V=1;V<arguments.length;V++){E=arguments[V];for(p in E)a[p]=E[p];for(let F=0;F<w.length;F++)p=w[F],Object.prototype.hasOwnProperty.call(E,p)&&(a[p]=E[p])}}function C(a){var h=1;a=a.split(":");const p=[];for(;0<h&&a.length;)p.push(a.shift()),h--;return a.length&&p.push(a.join(":")),p}function D(a){l.setTimeout(()=>{throw a},0)}function P(){var a=X;let h=null;return a.g&&(h=a.g,a.g=a.g.next,a.g||(a.h=null),h.next=null),h}class xe{constructor(){this.h=this.g=null}add(h,p){const E=Dt.get();E.set(h,p),this.h?this.h.next=E:this.g=E,this.h=E}}var Dt=new R(()=>new qs,a=>a.reset());class qs{constructor(){this.next=this.g=this.h=null}set(h,p){this.h=h,this.g=p,this.next=null}reset(){this.next=this.g=this.h=null}}let gn,G=!1,X=new xe,ee=()=>{const a=l.Promise.resolve(void 0);gn=()=>{a.then(Se)}};var Se=()=>{for(var a;a=P();){try{a.h.call(a.g)}catch(p){D(p)}var h=Dt;h.j(a),100>h.h&&(h.h++,a.next=h.g,h.g=a)}G=!1};function de(){this.s=this.s,this.C=this.C}de.prototype.s=!1,de.prototype.ma=function(){this.s||(this.s=!0,this.N())},de.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Ve(a,h){this.type=a,this.g=this.target=h,this.defaultPrevented=!1}Ve.prototype.h=function(){this.defaultPrevented=!0};var yn=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var a=!1,h=Object.defineProperty({},"passive",{get:function(){a=!0}});try{const p=()=>{};l.addEventListener("test",p,h),l.removeEventListener("test",p,h)}catch{}return a}();function _n(a,h){if(Ve.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a){var p=this.type=a.type,E=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.g=h,h=a.relatedTarget){if(g){e:{try{d(h.nodeName);var V=!0;break e}catch{}V=!1}V||(h=null)}}else p=="mouseover"?h=a.fromElement:p=="mouseout"&&(h=a.toElement);this.relatedTarget=h,E?(this.clientX=E.clientX!==void 0?E.clientX:E.pageX,this.clientY=E.clientY!==void 0?E.clientY:E.pageY,this.screenX=E.screenX||0,this.screenY=E.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=typeof a.pointerType=="string"?a.pointerType:vn[a.pointerType]||"",this.state=a.state,this.i=a,a.defaultPrevented&&_n.aa.h.call(this)}}k(_n,Ve);var vn={2:"touch",3:"pen",4:"mouse"};_n.prototype.h=function(){_n.aa.h.call(this);var a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var wn="closure_listenable_"+(1e6*Math.random()|0),hI=0;function dI(a,h,p,E,V){this.listener=a,this.proxy=null,this.src=h,this.type=p,this.capture=!!E,this.ha=V,this.key=++hI,this.da=this.fa=!1}function Ba(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function ja(a){this.src=a,this.g={},this.h=0}ja.prototype.add=function(a,h,p,E,V){var F=a.toString();a=this.g[F],a||(a=this.g[F]=[],this.h++);var U=Ic(a,h,E,V);return-1<U?(h=a[U],p||(h.fa=!1)):(h=new dI(h,this.src,F,!!E,V),h.fa=p,a.push(h)),h};function Ec(a,h){var p=h.type;if(p in a.g){var E=a.g[p],V=Array.prototype.indexOf.call(E,h,void 0),F;(F=0<=V)&&Array.prototype.splice.call(E,V,1),F&&(Ba(h),a.g[p].length==0&&(delete a.g[p],a.h--))}}function Ic(a,h,p,E){for(var V=0;V<a.length;++V){var F=a[V];if(!F.da&&F.listener==h&&F.capture==!!p&&F.ha==E)return V}return-1}var Tc="closure_lm_"+(1e6*Math.random()|0),xc={};function im(a,h,p,E,V){if(Array.isArray(h)){for(var F=0;F<h.length;F++)im(a,h[F],p,E,V);return null}return p=am(p),a&&a[wn]?a.K(h,p,c(E)?!!E.capture:!!E,V):fI(a,h,p,!1,E,V)}function fI(a,h,p,E,V,F){if(!h)throw Error("Invalid event type");var U=c(V)?!!V.capture:!!V,fe=Pc(a);if(fe||(a[Tc]=fe=new ja(a)),p=fe.add(h,p,E,U,F),p.proxy)return p;if(E=pI(),p.proxy=E,E.src=a,E.listener=p,a.addEventListener)yn||(V=U),V===void 0&&(V=!1),a.addEventListener(h.toString(),E,V);else if(a.attachEvent)a.attachEvent(om(h.toString()),E);else if(a.addListener&&a.removeListener)a.addListener(E);else throw Error("addEventListener and attachEvent are unavailable.");return p}function pI(){function a(p){return h.call(a.src,a.listener,p)}const h=mI;return a}function sm(a,h,p,E,V){if(Array.isArray(h))for(var F=0;F<h.length;F++)sm(a,h[F],p,E,V);else E=c(E)?!!E.capture:!!E,p=am(p),a&&a[wn]?(a=a.i,h=String(h).toString(),h in a.g&&(F=a.g[h],p=Ic(F,p,E,V),-1<p&&(Ba(F[p]),Array.prototype.splice.call(F,p,1),F.length==0&&(delete a.g[h],a.h--)))):a&&(a=Pc(a))&&(h=a.g[h.toString()],a=-1,h&&(a=Ic(h,p,E,V)),(p=-1<a?h[a]:null)&&Sc(p))}function Sc(a){if(typeof a!="number"&&a&&!a.da){var h=a.src;if(h&&h[wn])Ec(h.i,a);else{var p=a.type,E=a.proxy;h.removeEventListener?h.removeEventListener(p,E,a.capture):h.detachEvent?h.detachEvent(om(p),E):h.addListener&&h.removeListener&&h.removeListener(E),(p=Pc(h))?(Ec(p,a),p.h==0&&(p.src=null,h[Tc]=null)):Ba(a)}}}function om(a){return a in xc?xc[a]:xc[a]="on"+a}function mI(a,h){if(a.da)a=!0;else{h=new _n(h,this);var p=a.listener,E=a.ha||a.src;a.fa&&Sc(a),a=p.call(E,h)}return a}function Pc(a){return a=a[Tc],a instanceof ja?a:null}var Ac="__closure_events_fn_"+(1e9*Math.random()>>>0);function am(a){return typeof a=="function"?a:(a[Ac]||(a[Ac]=function(h){return a.handleEvent(h)}),a[Ac])}function rt(){de.call(this),this.i=new ja(this),this.M=this,this.F=null}k(rt,de),rt.prototype[wn]=!0,rt.prototype.removeEventListener=function(a,h,p,E){sm(this,a,h,p,E)};function ht(a,h){var p,E=a.F;if(E)for(p=[];E;E=E.F)p.push(E);if(a=a.M,E=h.type||h,typeof h=="string")h=new Ve(h,a);else if(h instanceof Ve)h.target=h.target||a;else{var V=h;h=new Ve(E,a),x(h,V)}if(V=!0,p)for(var F=p.length-1;0<=F;F--){var U=h.g=p[F];V=za(U,E,!0,h)&&V}if(U=h.g=a,V=za(U,E,!0,h)&&V,V=za(U,E,!1,h)&&V,p)for(F=0;F<p.length;F++)U=h.g=p[F],V=za(U,E,!1,h)&&V}rt.prototype.N=function(){if(rt.aa.N.call(this),this.i){var a=this.i,h;for(h in a.g){for(var p=a.g[h],E=0;E<p.length;E++)Ba(p[E]);delete a.g[h],a.h--}}this.F=null},rt.prototype.K=function(a,h,p,E){return this.i.add(String(a),h,!1,p,E)},rt.prototype.L=function(a,h,p,E){return this.i.add(String(a),h,!0,p,E)};function za(a,h,p,E){if(h=a.i.g[String(h)],!h)return!0;h=h.concat();for(var V=!0,F=0;F<h.length;++F){var U=h[F];if(U&&!U.da&&U.capture==p){var fe=U.listener,Xe=U.ha||U.src;U.fa&&Ec(a.i,U),V=fe.call(Xe,E)!==!1&&V}}return V&&!E.defaultPrevented}function lm(a,h,p){if(typeof a=="function")p&&(a=v(a,p));else if(a&&typeof a.handleEvent=="function")a=v(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(h)?-1:l.setTimeout(a,h||0)}function um(a){a.g=lm(()=>{a.g=null,a.i&&(a.i=!1,um(a))},a.l);const h=a.h;a.h=null,a.m.apply(null,h)}class gI extends de{constructor(h,p){super(),this.m=h,this.l=p,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:um(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Gs(a){de.call(this),this.h=a,this.g={}}k(Gs,de);var cm=[];function hm(a){I(a.g,function(h,p){this.g.hasOwnProperty(p)&&Sc(h)},a),a.g={}}Gs.prototype.N=function(){Gs.aa.N.call(this),hm(this)},Gs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Rc=l.JSON.stringify,yI=l.JSON.parse,_I=class{stringify(a){return l.JSON.stringify(a,void 0)}parse(a){return l.JSON.parse(a,void 0)}};function Cc(){}Cc.prototype.h=null;function dm(a){return a.h||(a.h=a.i())}function fm(){}var Ws={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function bc(){Ve.call(this,"d")}k(bc,Ve);function kc(){Ve.call(this,"c")}k(kc,Ve);var Dr={},pm=null;function Ua(){return pm=pm||new rt}Dr.La="serverreachability";function mm(a){Ve.call(this,Dr.La,a)}k(mm,Ve);function Ks(a){const h=Ua();ht(h,new mm(h))}Dr.STAT_EVENT="statevent";function gm(a,h){Ve.call(this,Dr.STAT_EVENT,a),this.stat=h}k(gm,Ve);function dt(a){const h=Ua();ht(h,new gm(h,a))}Dr.Ma="timingevent";function ym(a,h){Ve.call(this,Dr.Ma,a),this.size=h}k(ym,Ve);function Hs(a,h){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){a()},h)}function Qs(){this.g=!0}Qs.prototype.xa=function(){this.g=!1};function vI(a,h,p,E,V,F){a.info(function(){if(a.g)if(F)for(var U="",fe=F.split("&"),Xe=0;Xe<fe.length;Xe++){var le=fe[Xe].split("=");if(1<le.length){var it=le[0];le=le[1];var st=it.split("_");U=2<=st.length&&st[1]=="type"?U+(it+"="+le+"&"):U+(it+"=redacted&")}}else U=null;else U=F;return"XMLHTTP REQ ("+E+") [attempt "+V+"]: "+h+`
`+p+`
`+U})}function wI(a,h,p,E,V,F,U){a.info(function(){return"XMLHTTP RESP ("+E+") [ attempt "+V+"]: "+h+`
`+p+`
`+F+" "+U})}function Ai(a,h,p,E){a.info(function(){return"XMLHTTP TEXT ("+h+"): "+II(a,p)+(E?" "+E:"")})}function EI(a,h){a.info(function(){return"TIMEOUT: "+h})}Qs.prototype.info=function(){};function II(a,h){if(!a.g)return h;if(!h)return null;try{var p=JSON.parse(h);if(p){for(a=0;a<p.length;a++)if(Array.isArray(p[a])){var E=p[a];if(!(2>E.length)){var V=E[1];if(Array.isArray(V)&&!(1>V.length)){var F=V[0];if(F!="noop"&&F!="stop"&&F!="close")for(var U=1;U<V.length;U++)V[U]=""}}}}return Rc(p)}catch{return h}}var $a={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},_m={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Dc;function qa(){}k(qa,Cc),qa.prototype.g=function(){return new XMLHttpRequest},qa.prototype.i=function(){return{}},Dc=new qa;function jn(a,h,p,E){this.j=a,this.i=h,this.l=p,this.R=E||1,this.U=new Gs(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new vm}function vm(){this.i=null,this.g="",this.h=!1}var wm={},Nc={};function Vc(a,h,p){a.L=1,a.v=Ha(En(h)),a.m=p,a.P=!0,Em(a,null)}function Em(a,h){a.F=Date.now(),Ga(a),a.A=En(a.v);var p=a.A,E=a.R;Array.isArray(E)||(E=[String(E)]),Mm(p.i,"t",E),a.C=0,p=a.j.J,a.h=new vm,a.g=Zm(a.j,p?h:null,!a.m),0<a.O&&(a.M=new gI(v(a.Y,a,a.g),a.O)),h=a.U,p=a.g,E=a.ca;var V="readystatechange";Array.isArray(V)||(V&&(cm[0]=V.toString()),V=cm);for(var F=0;F<V.length;F++){var U=im(p,V[F],E||h.handleEvent,!1,h.h||h);if(!U)break;h.g[U.key]=U}h=a.H?y(a.H):{},a.m?(a.u||(a.u="POST"),h["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.A,a.u,a.m,h)):(a.u="GET",a.g.ea(a.A,a.u,null,h)),Ks(),vI(a.i,a.u,a.A,a.l,a.R,a.m)}jn.prototype.ca=function(a){a=a.target;const h=this.M;h&&In(a)==3?h.j():this.Y(a)},jn.prototype.Y=function(a){try{if(a==this.g)e:{const st=In(this.g);var h=this.g.Ba();const bi=this.g.Z();if(!(3>st)&&(st!=3||this.g&&(this.h.h||this.g.oa()||Um(this.g)))){this.J||st!=4||h==7||(h==8||0>=bi?Ks(3):Ks(2)),Mc(this);var p=this.g.Z();this.X=p;t:if(Im(this)){var E=Um(this.g);a="";var V=E.length,F=In(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Nr(this),Ys(this);var U="";break t}this.h.i=new l.TextDecoder}for(h=0;h<V;h++)this.h.h=!0,a+=this.h.i.decode(E[h],{stream:!(F&&h==V-1)});E.length=0,this.h.g+=a,this.C=0,U=this.h.g}else U=this.g.oa();if(this.o=p==200,wI(this.i,this.u,this.A,this.l,this.R,st,p),this.o){if(this.T&&!this.K){t:{if(this.g){var fe,Xe=this.g;if((fe=Xe.g?Xe.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!S(fe)){var le=fe;break t}}le=null}if(p=le)Ai(this.i,this.l,p,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Lc(this,p);else{this.o=!1,this.s=3,dt(12),Nr(this),Ys(this);break e}}if(this.P){p=!0;let Qt;for(;!this.J&&this.C<U.length;)if(Qt=TI(this,U),Qt==Nc){st==4&&(this.s=4,dt(14),p=!1),Ai(this.i,this.l,null,"[Incomplete Response]");break}else if(Qt==wm){this.s=4,dt(15),Ai(this.i,this.l,U,"[Invalid Chunk]"),p=!1;break}else Ai(this.i,this.l,Qt,null),Lc(this,Qt);if(Im(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),st!=4||U.length!=0||this.h.h||(this.s=1,dt(16),p=!1),this.o=this.o&&p,!p)Ai(this.i,this.l,U,"[Invalid Chunked Response]"),Nr(this),Ys(this);else if(0<U.length&&!this.W){this.W=!0;var it=this.j;it.g==this&&it.ba&&!it.M&&(it.j.info("Great, no buffering proxy detected. Bytes received: "+U.length),Uc(it),it.M=!0,dt(11))}}else Ai(this.i,this.l,U,null),Lc(this,U);st==4&&Nr(this),this.o&&!this.J&&(st==4?Qm(this.j,this):(this.o=!1,Ga(this)))}else jI(this.g),p==400&&0<U.indexOf("Unknown SID")?(this.s=3,dt(12)):(this.s=0,dt(13)),Nr(this),Ys(this)}}}catch{}finally{}};function Im(a){return a.g?a.u=="GET"&&a.L!=2&&a.j.Ca:!1}function TI(a,h){var p=a.C,E=h.indexOf(`
`,p);return E==-1?Nc:(p=Number(h.substring(p,E)),isNaN(p)?wm:(E+=1,E+p>h.length?Nc:(h=h.slice(E,E+p),a.C=E+p,h)))}jn.prototype.cancel=function(){this.J=!0,Nr(this)};function Ga(a){a.S=Date.now()+a.I,Tm(a,a.I)}function Tm(a,h){if(a.B!=null)throw Error("WatchDog timer not null");a.B=Hs(v(a.ba,a),h)}function Mc(a){a.B&&(l.clearTimeout(a.B),a.B=null)}jn.prototype.ba=function(){this.B=null;const a=Date.now();0<=a-this.S?(EI(this.i,this.A),this.L!=2&&(Ks(),dt(17)),Nr(this),this.s=2,Ys(this)):Tm(this,this.S-a)};function Ys(a){a.j.G==0||a.J||Qm(a.j,a)}function Nr(a){Mc(a);var h=a.M;h&&typeof h.ma=="function"&&h.ma(),a.M=null,hm(a.U),a.g&&(h=a.g,a.g=null,h.abort(),h.ma())}function Lc(a,h){try{var p=a.j;if(p.G!=0&&(p.g==a||Oc(p.h,a))){if(!a.K&&Oc(p.h,a)&&p.G==3){try{var E=p.Da.g.parse(h)}catch{E=null}if(Array.isArray(E)&&E.length==3){var V=E;if(V[0]==0){e:if(!p.u){if(p.g)if(p.g.F+3e3<a.F)Za(p),Xa(p);else break e;zc(p),dt(18)}}else p.za=V[1],0<p.za-p.T&&37500>V[2]&&p.F&&p.v==0&&!p.C&&(p.C=Hs(v(p.Za,p),6e3));if(1>=Pm(p.h)&&p.ca){try{p.ca()}catch{}p.ca=void 0}}else Mr(p,11)}else if((a.K||p.g==a)&&Za(p),!S(h))for(V=p.Da.g.parse(h),h=0;h<V.length;h++){let le=V[h];if(p.T=le[0],le=le[1],p.G==2)if(le[0]=="c"){p.K=le[1],p.ia=le[2];const it=le[3];it!=null&&(p.la=it,p.j.info("VER="+p.la));const st=le[4];st!=null&&(p.Aa=st,p.j.info("SVER="+p.Aa));const bi=le[5];bi!=null&&typeof bi=="number"&&0<bi&&(E=1.5*bi,p.L=E,p.j.info("backChannelRequestTimeoutMs_="+E)),E=p;const Qt=a.g;if(Qt){const tl=Qt.g?Qt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(tl){var F=E.h;F.g||tl.indexOf("spdy")==-1&&tl.indexOf("quic")==-1&&tl.indexOf("h2")==-1||(F.j=F.l,F.g=new Set,F.h&&(Fc(F,F.h),F.h=null))}if(E.D){const $c=Qt.g?Qt.g.getResponseHeader("X-HTTP-Session-Id"):null;$c&&(E.ya=$c,ge(E.I,E.D,$c))}}p.G=3,p.l&&p.l.ua(),p.ba&&(p.R=Date.now()-a.F,p.j.info("Handshake RTT: "+p.R+"ms")),E=p;var U=a;if(E.qa=Jm(E,E.J?E.ia:null,E.W),U.K){Am(E.h,U);var fe=U,Xe=E.L;Xe&&(fe.I=Xe),fe.B&&(Mc(fe),Ga(fe)),E.g=U}else Km(E);0<p.i.length&&Ja(p)}else le[0]!="stop"&&le[0]!="close"||Mr(p,7);else p.G==3&&(le[0]=="stop"||le[0]=="close"?le[0]=="stop"?Mr(p,7):jc(p):le[0]!="noop"&&p.l&&p.l.ta(le),p.v=0)}}Ks(4)}catch{}}var xI=class{constructor(a,h){this.g=a,this.map=h}};function xm(a){this.l=a||10,l.PerformanceNavigationTiming?(a=l.performance.getEntriesByType("navigation"),a=0<a.length&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Sm(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function Pm(a){return a.h?1:a.g?a.g.size:0}function Oc(a,h){return a.h?a.h==h:a.g?a.g.has(h):!1}function Fc(a,h){a.g?a.g.add(h):a.h=h}function Am(a,h){a.h&&a.h==h?a.h=null:a.g&&a.g.has(h)&&a.g.delete(h)}xm.prototype.cancel=function(){if(this.i=Rm(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const a of this.g.values())a.cancel();this.g.clear()}};function Rm(a){if(a.h!=null)return a.i.concat(a.h.D);if(a.g!=null&&a.g.size!==0){let h=a.i;for(const p of a.g.values())h=h.concat(p.D);return h}return N(a.i)}function SI(a){if(a.V&&typeof a.V=="function")return a.V();if(typeof Map<"u"&&a instanceof Map||typeof Set<"u"&&a instanceof Set)return Array.from(a.values());if(typeof a=="string")return a.split("");if(u(a)){for(var h=[],p=a.length,E=0;E<p;E++)h.push(a[E]);return h}h=[],p=0;for(E in a)h[p++]=a[E];return h}function PI(a){if(a.na&&typeof a.na=="function")return a.na();if(!a.V||typeof a.V!="function"){if(typeof Map<"u"&&a instanceof Map)return Array.from(a.keys());if(!(typeof Set<"u"&&a instanceof Set)){if(u(a)||typeof a=="string"){var h=[];a=a.length;for(var p=0;p<a;p++)h.push(p);return h}h=[],p=0;for(const E in a)h[p++]=E;return h}}}function Cm(a,h){if(a.forEach&&typeof a.forEach=="function")a.forEach(h,void 0);else if(u(a)||typeof a=="string")Array.prototype.forEach.call(a,h,void 0);else for(var p=PI(a),E=SI(a),V=E.length,F=0;F<V;F++)h.call(void 0,E[F],p&&p[F],a)}var bm=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function AI(a,h){if(a){a=a.split("&");for(var p=0;p<a.length;p++){var E=a[p].indexOf("="),V=null;if(0<=E){var F=a[p].substring(0,E);V=a[p].substring(E+1)}else F=a[p];h(F,V?decodeURIComponent(V.replace(/\+/g," ")):"")}}}function Vr(a){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,a instanceof Vr){this.h=a.h,Wa(this,a.j),this.o=a.o,this.g=a.g,Ka(this,a.s),this.l=a.l;var h=a.i,p=new Zs;p.i=h.i,h.g&&(p.g=new Map(h.g),p.h=h.h),km(this,p),this.m=a.m}else a&&(h=String(a).match(bm))?(this.h=!1,Wa(this,h[1]||"",!0),this.o=Xs(h[2]||""),this.g=Xs(h[3]||"",!0),Ka(this,h[4]),this.l=Xs(h[5]||"",!0),km(this,h[6]||"",!0),this.m=Xs(h[7]||"")):(this.h=!1,this.i=new Zs(null,this.h))}Vr.prototype.toString=function(){var a=[],h=this.j;h&&a.push(Js(h,Dm,!0),":");var p=this.g;return(p||h=="file")&&(a.push("//"),(h=this.o)&&a.push(Js(h,Dm,!0),"@"),a.push(encodeURIComponent(String(p)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p=this.s,p!=null&&a.push(":",String(p))),(p=this.l)&&(this.g&&p.charAt(0)!="/"&&a.push("/"),a.push(Js(p,p.charAt(0)=="/"?bI:CI,!0))),(p=this.i.toString())&&a.push("?",p),(p=this.m)&&a.push("#",Js(p,DI)),a.join("")};function En(a){return new Vr(a)}function Wa(a,h,p){a.j=p?Xs(h,!0):h,a.j&&(a.j=a.j.replace(/:$/,""))}function Ka(a,h){if(h){if(h=Number(h),isNaN(h)||0>h)throw Error("Bad port number "+h);a.s=h}else a.s=null}function km(a,h,p){h instanceof Zs?(a.i=h,NI(a.i,a.h)):(p||(h=Js(h,kI)),a.i=new Zs(h,a.h))}function ge(a,h,p){a.i.set(h,p)}function Ha(a){return ge(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),a}function Xs(a,h){return a?h?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function Js(a,h,p){return typeof a=="string"?(a=encodeURI(a).replace(h,RI),p&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function RI(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var Dm=/[#\/\?@]/g,CI=/[#\?:]/g,bI=/[#\?]/g,kI=/[#\?@]/g,DI=/#/g;function Zs(a,h){this.h=this.g=null,this.i=a||null,this.j=!!h}function zn(a){a.g||(a.g=new Map,a.h=0,a.i&&AI(a.i,function(h,p){a.add(decodeURIComponent(h.replace(/\+/g," ")),p)}))}t=Zs.prototype,t.add=function(a,h){zn(this),this.i=null,a=Ri(this,a);var p=this.g.get(a);return p||this.g.set(a,p=[]),p.push(h),this.h+=1,this};function Nm(a,h){zn(a),h=Ri(a,h),a.g.has(h)&&(a.i=null,a.h-=a.g.get(h).length,a.g.delete(h))}function Vm(a,h){return zn(a),h=Ri(a,h),a.g.has(h)}t.forEach=function(a,h){zn(this),this.g.forEach(function(p,E){p.forEach(function(V){a.call(h,V,E,this)},this)},this)},t.na=function(){zn(this);const a=Array.from(this.g.values()),h=Array.from(this.g.keys()),p=[];for(let E=0;E<h.length;E++){const V=a[E];for(let F=0;F<V.length;F++)p.push(h[E])}return p},t.V=function(a){zn(this);let h=[];if(typeof a=="string")Vm(this,a)&&(h=h.concat(this.g.get(Ri(this,a))));else{a=Array.from(this.g.values());for(let p=0;p<a.length;p++)h=h.concat(a[p])}return h},t.set=function(a,h){return zn(this),this.i=null,a=Ri(this,a),Vm(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[h]),this.h+=1,this},t.get=function(a,h){return a?(a=this.V(a),0<a.length?String(a[0]):h):h};function Mm(a,h,p){Nm(a,h),0<p.length&&(a.i=null,a.g.set(Ri(a,h),N(p)),a.h+=p.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const a=[],h=Array.from(this.g.keys());for(var p=0;p<h.length;p++){var E=h[p];const F=encodeURIComponent(String(E)),U=this.V(E);for(E=0;E<U.length;E++){var V=F;U[E]!==""&&(V+="="+encodeURIComponent(String(U[E]))),a.push(V)}}return this.i=a.join("&")};function Ri(a,h){return h=String(h),a.j&&(h=h.toLowerCase()),h}function NI(a,h){h&&!a.j&&(zn(a),a.i=null,a.g.forEach(function(p,E){var V=E.toLowerCase();E!=V&&(Nm(this,E),Mm(this,V,p))},a)),a.j=h}function VI(a,h){const p=new Qs;if(l.Image){const E=new Image;E.onload=A(Un,p,"TestLoadImage: loaded",!0,h,E),E.onerror=A(Un,p,"TestLoadImage: error",!1,h,E),E.onabort=A(Un,p,"TestLoadImage: abort",!1,h,E),E.ontimeout=A(Un,p,"TestLoadImage: timeout",!1,h,E),l.setTimeout(function(){E.ontimeout&&E.ontimeout()},1e4),E.src=a}else h(!1)}function MI(a,h){const p=new Qs,E=new AbortController,V=setTimeout(()=>{E.abort(),Un(p,"TestPingServer: timeout",!1,h)},1e4);fetch(a,{signal:E.signal}).then(F=>{clearTimeout(V),F.ok?Un(p,"TestPingServer: ok",!0,h):Un(p,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(V),Un(p,"TestPingServer: error",!1,h)})}function Un(a,h,p,E,V){try{V&&(V.onload=null,V.onerror=null,V.onabort=null,V.ontimeout=null),E(p)}catch{}}function LI(){this.g=new _I}function OI(a,h,p){const E=p||"";try{Cm(a,function(V,F){let U=V;c(V)&&(U=Rc(V)),h.push(E+F+"="+encodeURIComponent(U))})}catch(V){throw h.push(E+"type="+encodeURIComponent("_badmap")),V}}function eo(a){this.l=a.Ub||null,this.j=a.eb||!1}k(eo,Cc),eo.prototype.g=function(){return new Qa(this.l,this.j)},eo.prototype.i=function(a){return function(){return a}}({});function Qa(a,h){rt.call(this),this.D=a,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}k(Qa,rt),t=Qa.prototype,t.open=function(a,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=a,this.A=h,this.readyState=1,no(this)},t.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const h={headers:this.u,method:this.B,credentials:this.m,cache:void 0};a&&(h.body=a),(this.D||l).fetch(new Request(this.A,h)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,to(this)),this.readyState=0},t.Sa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,no(this)),this.g&&(this.readyState=3,no(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Lm(this)}else a.text().then(this.Ra.bind(this),this.ga.bind(this))};function Lm(a){a.j.read().then(a.Pa.bind(a)).catch(a.ga.bind(a))}t.Pa=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var h=a.value?a.value:new Uint8Array(0);(h=this.v.decode(h,{stream:!a.done}))&&(this.response=this.responseText+=h)}a.done?to(this):no(this),this.readyState==3&&Lm(this)}},t.Ra=function(a){this.g&&(this.response=this.responseText=a,to(this))},t.Qa=function(a){this.g&&(this.response=a,to(this))},t.ga=function(){this.g&&to(this)};function to(a){a.readyState=4,a.l=null,a.j=null,a.v=null,no(a)}t.setRequestHeader=function(a,h){this.u.append(a,h)},t.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const a=[],h=this.h.entries();for(var p=h.next();!p.done;)p=p.value,a.push(p[0]+": "+p[1]),p=h.next();return a.join(`\r
`)};function no(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(Qa.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function Om(a){let h="";return I(a,function(p,E){h+=E,h+=":",h+=p,h+=`\r
`}),h}function Bc(a,h,p){e:{for(E in p){var E=!1;break e}E=!0}E||(p=Om(p),typeof a=="string"?p!=null&&encodeURIComponent(String(p)):ge(a,h,p))}function be(a){rt.call(this),this.headers=new Map,this.o=a||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}k(be,rt);var FI=/^https?$/i,BI=["POST","PUT"];t=be.prototype,t.Ha=function(a){this.J=a},t.ea=function(a,h,p,E){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);h=h?h.toUpperCase():"GET",this.D=a,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Dc.g(),this.v=this.o?dm(this.o):dm(Dc),this.g.onreadystatechange=v(this.Ea,this);try{this.B=!0,this.g.open(h,String(a),!0),this.B=!1}catch(F){Fm(this,F);return}if(a=p||"",p=new Map(this.headers),E)if(Object.getPrototypeOf(E)===Object.prototype)for(var V in E)p.set(V,E[V]);else if(typeof E.keys=="function"&&typeof E.get=="function")for(const F of E.keys())p.set(F,E.get(F));else throw Error("Unknown input type for opt_headers: "+String(E));E=Array.from(p.keys()).find(F=>F.toLowerCase()=="content-type"),V=l.FormData&&a instanceof l.FormData,!(0<=Array.prototype.indexOf.call(BI,h,void 0))||E||V||p.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[F,U]of p)this.g.setRequestHeader(F,U);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{zm(this),this.u=!0,this.g.send(a),this.u=!1}catch(F){Fm(this,F)}};function Fm(a,h){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=h,a.m=5,Bm(a),Ya(a)}function Bm(a){a.A||(a.A=!0,ht(a,"complete"),ht(a,"error"))}t.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=a||7,ht(this,"complete"),ht(this,"abort"),Ya(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ya(this,!0)),be.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?jm(this):this.bb())},t.bb=function(){jm(this)};function jm(a){if(a.h&&typeof o<"u"&&(!a.v[1]||In(a)!=4||a.Z()!=2)){if(a.u&&In(a)==4)lm(a.Ea,0,a);else if(ht(a,"readystatechange"),In(a)==4){a.h=!1;try{const U=a.Z();e:switch(U){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var p;if(!(p=h)){var E;if(E=U===0){var V=String(a.D).match(bm)[1]||null;!V&&l.self&&l.self.location&&(V=l.self.location.protocol.slice(0,-1)),E=!FI.test(V?V.toLowerCase():"")}p=E}if(p)ht(a,"complete"),ht(a,"success");else{a.m=6;try{var F=2<In(a)?a.g.statusText:""}catch{F=""}a.l=F+" ["+a.Z()+"]",Bm(a)}}finally{Ya(a)}}}}function Ya(a,h){if(a.g){zm(a);const p=a.g,E=a.v[0]?()=>{}:null;a.g=null,a.v=null,h||ht(a,"ready");try{p.onreadystatechange=E}catch{}}}function zm(a){a.I&&(l.clearTimeout(a.I),a.I=null)}t.isActive=function(){return!!this.g};function In(a){return a.g?a.g.readyState:0}t.Z=function(){try{return 2<In(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(a){if(this.g){var h=this.g.responseText;return a&&h.indexOf(a)==0&&(h=h.substring(a.length)),yI(h)}};function Um(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.H){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function jI(a){const h={};a=(a.g&&2<=In(a)&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let E=0;E<a.length;E++){if(S(a[E]))continue;var p=C(a[E]);const V=p[0];if(p=p[1],typeof p!="string")continue;p=p.trim();const F=h[V]||[];h[V]=F,F.push(p)}_(h,function(E){return E.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ro(a,h,p){return p&&p.internalChannelParams&&p.internalChannelParams[a]||h}function $m(a){this.Aa=0,this.i=[],this.j=new Qs,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ro("failFast",!1,a),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ro("baseRetryDelayMs",5e3,a),this.cb=ro("retryDelaySeedMs",1e4,a),this.Wa=ro("forwardChannelMaxRetries",2,a),this.wa=ro("forwardChannelRequestTimeoutMs",2e4,a),this.pa=a&&a.xmlHttpFactory||void 0,this.Xa=a&&a.Tb||void 0,this.Ca=a&&a.useFetchStreams||!1,this.L=void 0,this.J=a&&a.supportsCrossDomainXhr||!1,this.K="",this.h=new xm(a&&a.concurrentRequestLimit),this.Da=new LI,this.P=a&&a.fastHandshake||!1,this.O=a&&a.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=a&&a.Rb||!1,a&&a.xa&&this.j.xa(),a&&a.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&a&&a.detectBufferingProxy||!1,this.ja=void 0,a&&a.longPollingTimeout&&0<a.longPollingTimeout&&(this.ja=a.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=$m.prototype,t.la=8,t.G=1,t.connect=function(a,h,p,E){dt(0),this.W=a,this.H=h||{},p&&E!==void 0&&(this.H.OSID=p,this.H.OAID=E),this.F=this.X,this.I=Jm(this,null,this.W),Ja(this)};function jc(a){if(qm(a),a.G==3){var h=a.U++,p=En(a.I);if(ge(p,"SID",a.K),ge(p,"RID",h),ge(p,"TYPE","terminate"),io(a,p),h=new jn(a,a.j,h),h.L=2,h.v=Ha(En(p)),p=!1,l.navigator&&l.navigator.sendBeacon)try{p=l.navigator.sendBeacon(h.v.toString(),"")}catch{}!p&&l.Image&&(new Image().src=h.v,p=!0),p||(h.g=Zm(h.j,null),h.g.ea(h.v)),h.F=Date.now(),Ga(h)}Xm(a)}function Xa(a){a.g&&(Uc(a),a.g.cancel(),a.g=null)}function qm(a){Xa(a),a.u&&(l.clearTimeout(a.u),a.u=null),Za(a),a.h.cancel(),a.s&&(typeof a.s=="number"&&l.clearTimeout(a.s),a.s=null)}function Ja(a){if(!Sm(a.h)&&!a.s){a.s=!0;var h=a.Ga;gn||ee(),G||(gn(),G=!0),X.add(h,a),a.B=0}}function zI(a,h){return Pm(a.h)>=a.h.j-(a.s?1:0)?!1:a.s?(a.i=h.D.concat(a.i),!0):a.G==1||a.G==2||a.B>=(a.Va?0:a.Wa)?!1:(a.s=Hs(v(a.Ga,a,h),Ym(a,a.B)),a.B++,!0)}t.Ga=function(a){if(this.s)if(this.s=null,this.G==1){if(!a){this.U=Math.floor(1e5*Math.random()),a=this.U++;const V=new jn(this,this.j,a);let F=this.o;if(this.S&&(F?(F=y(F),x(F,this.S)):F=this.S),this.m!==null||this.O||(V.H=F,F=null),this.P)e:{for(var h=0,p=0;p<this.i.length;p++){t:{var E=this.i[p];if("__data__"in E.map&&(E=E.map.__data__,typeof E=="string")){E=E.length;break t}E=void 0}if(E===void 0)break;if(h+=E,4096<h){h=p;break e}if(h===4096||p===this.i.length-1){h=p+1;break e}}h=1e3}else h=1e3;h=Wm(this,V,h),p=En(this.I),ge(p,"RID",a),ge(p,"CVER",22),this.D&&ge(p,"X-HTTP-Session-Id",this.D),io(this,p),F&&(this.O?h="headers="+encodeURIComponent(String(Om(F)))+"&"+h:this.m&&Bc(p,this.m,F)),Fc(this.h,V),this.Ua&&ge(p,"TYPE","init"),this.P?(ge(p,"$req",h),ge(p,"SID","null"),V.T=!0,Vc(V,p,null)):Vc(V,p,h),this.G=2}}else this.G==3&&(a?Gm(this,a):this.i.length==0||Sm(this.h)||Gm(this))};function Gm(a,h){var p;h?p=h.l:p=a.U++;const E=En(a.I);ge(E,"SID",a.K),ge(E,"RID",p),ge(E,"AID",a.T),io(a,E),a.m&&a.o&&Bc(E,a.m,a.o),p=new jn(a,a.j,p,a.B+1),a.m===null&&(p.H=a.o),h&&(a.i=h.D.concat(a.i)),h=Wm(a,p,1e3),p.I=Math.round(.5*a.wa)+Math.round(.5*a.wa*Math.random()),Fc(a.h,p),Vc(p,E,h)}function io(a,h){a.H&&I(a.H,function(p,E){ge(h,E,p)}),a.l&&Cm({},function(p,E){ge(h,E,p)})}function Wm(a,h,p){p=Math.min(a.i.length,p);var E=a.l?v(a.l.Na,a.l,a):null;e:{var V=a.i;let F=-1;for(;;){const U=["count="+p];F==-1?0<p?(F=V[0].g,U.push("ofs="+F)):F=0:U.push("ofs="+F);let fe=!0;for(let Xe=0;Xe<p;Xe++){let le=V[Xe].g;const it=V[Xe].map;if(le-=F,0>le)F=Math.max(0,V[Xe].g-100),fe=!1;else try{OI(it,U,"req"+le+"_")}catch{E&&E(it)}}if(fe){E=U.join("&");break e}}}return a=a.i.splice(0,p),h.D=a,E}function Km(a){if(!a.g&&!a.u){a.Y=1;var h=a.Fa;gn||ee(),G||(gn(),G=!0),X.add(h,a),a.v=0}}function zc(a){return a.g||a.u||3<=a.v?!1:(a.Y++,a.u=Hs(v(a.Fa,a),Ym(a,a.v)),a.v++,!0)}t.Fa=function(){if(this.u=null,Hm(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var a=2*this.R;this.j.info("BP detection timer enabled: "+a),this.A=Hs(v(this.ab,this),a)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,dt(10),Xa(this),Hm(this))};function Uc(a){a.A!=null&&(l.clearTimeout(a.A),a.A=null)}function Hm(a){a.g=new jn(a,a.j,"rpc",a.Y),a.m===null&&(a.g.H=a.o),a.g.O=0;var h=En(a.qa);ge(h,"RID","rpc"),ge(h,"SID",a.K),ge(h,"AID",a.T),ge(h,"CI",a.F?"0":"1"),!a.F&&a.ja&&ge(h,"TO",a.ja),ge(h,"TYPE","xmlhttp"),io(a,h),a.m&&a.o&&Bc(h,a.m,a.o),a.L&&(a.g.I=a.L);var p=a.g;a=a.ia,p.L=1,p.v=Ha(En(h)),p.m=null,p.P=!0,Em(p,a)}t.Za=function(){this.C!=null&&(this.C=null,Xa(this),zc(this),dt(19))};function Za(a){a.C!=null&&(l.clearTimeout(a.C),a.C=null)}function Qm(a,h){var p=null;if(a.g==h){Za(a),Uc(a),a.g=null;var E=2}else if(Oc(a.h,h))p=h.D,Am(a.h,h),E=1;else return;if(a.G!=0){if(h.o)if(E==1){p=h.m?h.m.length:0,h=Date.now()-h.F;var V=a.B;E=Ua(),ht(E,new ym(E,p)),Ja(a)}else Km(a);else if(V=h.s,V==3||V==0&&0<h.X||!(E==1&&zI(a,h)||E==2&&zc(a)))switch(p&&0<p.length&&(h=a.h,h.i=h.i.concat(p)),V){case 1:Mr(a,5);break;case 4:Mr(a,10);break;case 3:Mr(a,6);break;default:Mr(a,2)}}}function Ym(a,h){let p=a.Ta+Math.floor(Math.random()*a.cb);return a.isActive()||(p*=2),p*h}function Mr(a,h){if(a.j.info("Error code "+h),h==2){var p=v(a.fb,a),E=a.Xa;const V=!E;E=new Vr(E||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||Wa(E,"https"),Ha(E),V?VI(E.toString(),p):MI(E.toString(),p)}else dt(2);a.G=0,a.l&&a.l.sa(h),Xm(a),qm(a)}t.fb=function(a){a?(this.j.info("Successfully pinged google.com"),dt(2)):(this.j.info("Failed to ping google.com"),dt(1))};function Xm(a){if(a.G=0,a.ka=[],a.l){const h=Rm(a.h);(h.length!=0||a.i.length!=0)&&(L(a.ka,h),L(a.ka,a.i),a.h.i.length=0,N(a.i),a.i.length=0),a.l.ra()}}function Jm(a,h,p){var E=p instanceof Vr?En(p):new Vr(p);if(E.g!="")h&&(E.g=h+"."+E.g),Ka(E,E.s);else{var V=l.location;E=V.protocol,h=h?h+"."+V.hostname:V.hostname,V=+V.port;var F=new Vr(null);E&&Wa(F,E),h&&(F.g=h),V&&Ka(F,V),p&&(F.l=p),E=F}return p=a.D,h=a.ya,p&&h&&ge(E,p,h),ge(E,"VER",a.la),io(a,E),E}function Zm(a,h,p){if(h&&!a.J)throw Error("Can't create secondary domain capable XhrIo object.");return h=a.Ca&&!a.pa?new be(new eo({eb:p})):new be(a.pa),h.Ha(a.J),h}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function eg(){}t=eg.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function el(){}el.prototype.g=function(a,h){return new Nt(a,h)};function Nt(a,h){rt.call(this),this.g=new $m(h),this.l=a,this.h=h&&h.messageUrlParams||null,a=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(a?a["X-WebChannel-Content-Type"]=h.messageContentType:a={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.va&&(a?a["X-WebChannel-Client-Profile"]=h.va:a={"X-WebChannel-Client-Profile":h.va}),this.g.S=a,(a=h&&h.Sb)&&!S(a)&&(this.g.m=a),this.v=h&&h.supportsCrossDomainXhr||!1,this.u=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!S(h)&&(this.g.D=h,a=this.h,a!==null&&h in a&&(a=this.h,h in a&&delete a[h])),this.j=new Ci(this)}k(Nt,rt),Nt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Nt.prototype.close=function(){jc(this.g)},Nt.prototype.o=function(a){var h=this.g;if(typeof a=="string"){var p={};p.__data__=a,a=p}else this.u&&(p={},p.__data__=Rc(a),a=p);h.i.push(new xI(h.Ya++,a)),h.G==3&&Ja(h)},Nt.prototype.N=function(){this.g.l=null,delete this.j,jc(this.g),delete this.g,Nt.aa.N.call(this)};function tg(a){bc.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var h=a.__sm__;if(h){e:{for(const p in h){a=p;break e}a=void 0}(this.i=a)&&(a=this.i,h=h!==null&&a in h?h[a]:void 0),this.data=h}else this.data=a}k(tg,bc);function ng(){kc.call(this),this.status=1}k(ng,kc);function Ci(a){this.g=a}k(Ci,eg),Ci.prototype.ua=function(){ht(this.g,"a")},Ci.prototype.ta=function(a){ht(this.g,new tg(a))},Ci.prototype.sa=function(a){ht(this.g,new ng)},Ci.prototype.ra=function(){ht(this.g,"b")},el.prototype.createWebChannel=el.prototype.g,Nt.prototype.send=Nt.prototype.o,Nt.prototype.open=Nt.prototype.m,Nt.prototype.close=Nt.prototype.close,Uw=function(){return new el},zw=function(){return Ua()},jw=Dr,Pd={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},$a.NO_ERROR=0,$a.TIMEOUT=8,$a.HTTP_ERROR=6,Ol=$a,_m.COMPLETE="complete",Bw=_m,fm.EventType=Ws,Ws.OPEN="a",Ws.CLOSE="b",Ws.ERROR="c",Ws.MESSAGE="d",rt.prototype.listen=rt.prototype.K,To=fm,Fw=eo,be.prototype.listenOnce=be.prototype.L,be.prototype.getLastError=be.prototype.Ka,be.prototype.getLastErrorCode=be.prototype.Ba,be.prototype.getStatus=be.prototype.Z,be.prototype.getResponseJson=be.prototype.Oa,be.prototype.getResponseText=be.prototype.oa,be.prototype.send=be.prototype.ea,be.prototype.setWithCredentials=be.prototype.Ha,Ow=be}).apply(typeof vl<"u"?vl:typeof self<"u"?self:typeof window<"u"?window:{});const ky="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class We{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}We.UNAUTHENTICATED=new We(null),We.GOOGLE_CREDENTIALS=new We("google-credentials-uid"),We.FIRST_PARTY=new We("first-party-uid"),We.MOCK_USER=new We("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ls="10.12.3";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gr=new Yf("@firebase/firestore");function Oi(){return gr.logLevel}function CA(t){gr.setLogLevel(t)}function j(t,...e){if(gr.logLevel<=ie.DEBUG){const n=e.map(tp);gr.debug(`Firestore (${Ls}): ${t}`,...n)}}function Le(t,...e){if(gr.logLevel<=ie.ERROR){const n=e.map(tp);gr.error(`Firestore (${Ls}): ${t}`,...n)}}function rn(t,...e){if(gr.logLevel<=ie.WARN){const n=e.map(tp);gr.warn(`Firestore (${Ls}): ${t}`,...n)}}function tp(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W(t="Unexpected state"){const e=`FIRESTORE (${Ls}) INTERNAL ASSERTION FAILED: `+t;throw Le(e),new Error(e)}function Q(t,e){t||W()}function bA(t,e){t||W()}function q(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class B extends Ei{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class He{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $w{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class kA{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(We.UNAUTHENTICATED))}shutdown(){}}class DA{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class NA{constructor(e){this.t=e,this.currentUser=We.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i;const i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let s=new He;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new He,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const u=s;e.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},l=u=>{j("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):(j("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new He)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(j("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Q(typeof r.accessToken=="string"),new $w(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Q(e===null||typeof e=="string"),new We(e)}}class VA{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=We.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class MA{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new VA(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(We.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class LA{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class OA{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){const r=s=>{s.error!=null&&j("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,j("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{j("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):j("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Q(typeof n.token=="string"),this.R=n.token,new LA(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FA(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qw{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=FA(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}}function J(t,e){return t<e?-1:t>e?1:0}function vs(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}function Gw(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Te{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new B(O.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new B(O.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new B(O.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new B(O.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Te.fromMillis(Date.now())}static fromDate(e){return Te.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Te(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?J(this.nanoseconds,e.nanoseconds):J(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Y(e)}static min(){return new Y(new Te(0,0))}static max(){return new Y(new Te(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class la{constructor(e,n,r){n===void 0?n=0:n>e.length&&W(),r===void 0?r=e.length-n:r>e.length-n&&W(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return la.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof la?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class ne extends la{construct(e,n,r){return new ne(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new B(O.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new ne(n)}static emptyPath(){return new ne([])}}const BA=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ee extends la{construct(e,n,r){return new Ee(e,n,r)}static isValidIdentifier(e){return BA.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ee.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Ee(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new B(O.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const l=e[i];if(l==="\\"){if(i+1===e.length)throw new B(O.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new B(O.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else l==="`"?(o=!o,i++):l!=="."||o?(r+=l,i++):(s(),i++)}if(s(),o)throw new B(O.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ee(n)}static emptyPath(){return new Ee([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ${constructor(e){this.path=e}static fromPath(e){return new $(ne.fromString(e))}static fromName(e){return new $(ne.fromString(e).popFirst(5))}static empty(){return new $(ne.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ne.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return ne.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new $(new ne(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tu{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}}function Ad(t){return t.fields.find(e=>e.kind===2)}function Ur(t){return t.fields.filter(e=>e.kind!==2)}Tu.UNKNOWN_ID=-1;class Fl{constructor(e,n){this.fieldPath=e,this.kind=n}}class ua{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new ua(0,Ft.min())}}function Ww(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=Y.fromTimestamp(r===1e9?new Te(n+1,0):new Te(n,r));return new Ft(i,$.empty(),e)}function Kw(t){return new Ft(t.readTime,t.key,-1)}class Ft{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Ft(Y.min(),$.empty(),-1)}static max(){return new Ft(Y.max(),$.empty(),-1)}}function np(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=$.comparator(t.documentKey,e.documentKey),n!==0?n:J(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hw="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Qw{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Rr(t){if(t.code!==O.FAILED_PRECONDITION||t.message!==Hw)throw t;j("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&W(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new M((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof M?n:M.resolve(n)}catch(n){return M.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):M.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):M.reject(n)}static resolve(e){return new M((n,r)=>{n(e)})}static reject(e){return new M((n,r)=>{r(e)})}static waitFor(e){return new M((n,r)=>{let i=0,s=0,o=!1;e.forEach(l=>{++i,l.next(()=>{++s,o&&s===i&&n()},u=>r(u))}),o=!0,s===i&&n()})}static or(e){let n=M.resolve(!1);for(const r of e)n=n.next(i=>i?M.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new M((r,i)=>{const s=e.length,o=new Array(s);let l=0;for(let u=0;u<s;u++){const c=u;n(e[c]).next(f=>{o[c]=f,++l,l===s&&r(o)},f=>i(f))}})}static doWhile(e,n){return new M((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zu{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.V=new He,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{n.error?this.V.reject(new Lo(e,n.error)):this.V.resolve()},this.transaction.onerror=r=>{const i=rp(r.target.error);this.V.reject(new Lo(e,i))}}static open(e,n,r,i){try{return new Zu(n,e.transaction(i,r))}catch(s){throw new Lo(n,s)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(j("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const n=this.transaction.objectStore(e);return new zA(n)}}class dn{constructor(e,n,r){this.name=e,this.version=n,this.p=r,dn.S(Eu())===12.2&&Le("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return j("SimpleDb","Removing database:",e),$r(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!Tw())return!1;if(dn.C())return!0;const e=Eu(),n=dn.S(e),r=0<n&&n<10,i=Yw(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static C(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.v)==="YES"}static F(e,n){return e.store(n)}static S(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}async M(e){return this.db||(j("SimpleDb","Opening database:",this.name),this.db=await new Promise((n,r)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=s=>{const o=s.target.result;n(o)},i.onblocked=()=>{r(new Lo(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=s=>{const o=s.target.error;o.name==="VersionError"?r(new B(O.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?r(new B(O.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):r(new Lo(e,o))},i.onupgradeneeded=s=>{j("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);const o=s.target.result;this.p.O(o,i.transaction,s.oldVersion,this.version).next(()=>{j("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=n=>this.N(n)),this.db}L(e){this.N=e,this.db&&(this.db.onversionchange=n=>e(n))}async runTransaction(e,n,r,i){const s=n==="readonly";let o=0;for(;;){++o;try{this.db=await this.M(e);const l=Zu.open(this.db,e,s?"readonly":"readwrite",r),u=i(l).next(c=>(l.g(),c)).catch(c=>(l.abort(c),M.reject(c))).toPromise();return u.catch(()=>{}),await l.m,u}catch(l){const u=l,c=u.name!=="FirebaseError"&&o<3;if(j("SimpleDb","Transaction failed with error:",u.message,"Retrying:",c),this.close(),!c)return Promise.reject(u)}}}close(){this.db&&this.db.close(),this.db=void 0}}function Yw(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}class jA{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return $r(this.B.delete())}}class Lo extends B{constructor(e,n){super(O.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function Cr(t){return t.name==="IndexedDbTransactionError"}class zA{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(j("SimpleDb","PUT",this.store.name,e,n),r=this.store.put(n,e)):(j("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),$r(r)}add(e){return j("SimpleDb","ADD",this.store.name,e,e),$r(this.store.add(e))}get(e){return $r(this.store.get(e)).next(n=>(n===void 0&&(n=null),j("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return j("SimpleDb","DELETE",this.store.name,e),$r(this.store.delete(e))}count(){return j("SimpleDb","COUNT",this.store.name),$r(this.store.count())}U(e,n){const r=this.options(e,n),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){const s=i.getAll(r.range);return new M((o,l)=>{s.onerror=u=>{l(u.target.error)},s.onsuccess=u=>{o(u.target.result)}})}{const s=this.cursor(r),o=[];return this.W(s,(l,u)=>{o.push(u)}).next(()=>o)}}G(e,n){const r=this.store.getAll(e,n===null?void 0:n);return new M((i,s)=>{r.onerror=o=>{s(o.target.error)},r.onsuccess=o=>{i(o.target.result)}})}j(e,n){j("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,n);r.H=!1;const i=this.cursor(r);return this.W(i,(s,o,l)=>l.delete())}J(e,n){let r;n?r=e:(r={},n=e);const i=this.cursor(r);return this.W(i,n)}Y(e){const n=this.cursor({});return new M((r,i)=>{n.onerror=s=>{const o=rp(s.target.error);i(o)},n.onsuccess=s=>{const o=s.target.result;o?e(o.primaryKey,o.value).next(l=>{l?o.continue():r()}):r()}})}W(e,n){const r=[];return new M((i,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{const l=o.target.result;if(!l)return void i();const u=new jA(l),c=n(l.primaryKey,l.value,u);if(c instanceof M){const f=c.catch(m=>(u.done(),M.reject(m)));r.push(f)}u.isDone?i():u.K===null?l.continue():l.continue(u.K)}}).next(()=>M.waitFor(r))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function $r(t){return new M((e,n)=>{t.onsuccess=r=>{const i=r.target.result;e(i)},t.onerror=r=>{const i=rp(r.target.error);n(i)}})}let Dy=!1;function rp(t){const e=dn.S(Eu());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const r=new B("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Dy||(Dy=!0,setTimeout(()=>{throw r},0)),r}}return t}class UA{constructor(e,n){this.asyncQueue=e,this.Z=n,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){j("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{j("IndexBackfiller",`Documents written: ${await this.Z.ee()}`)}catch(n){Cr(n)?j("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",n):await Rr(n)}await this.X(6e4)})}}class $A{constructor(e,n){this.localStore=e,this.persistence=n}async ee(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>this.te(n,e))}te(e,n){const r=new Set;let i=n,s=!0;return M.doWhile(()=>s===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(o!==null&&!r.has(o))return j("IndexBackfiller",`Processing collection: ${o}`),this.ne(e,o,i).next(l=>{i-=l,r.add(o)});s=!1})).next(()=>n-i)}ne(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(i=>this.localStore.localDocuments.getNextDocuments(e,n,i,r).next(s=>{const o=s.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this.re(i,s)).next(l=>(j("IndexBackfiller",`Updating offset: ${l}`),this.localStore.indexManager.updateCollectionGroup(e,n,l))).next(()=>o.size)}))}re(e,n){let r=e;return n.changes.forEach((i,s)=>{const o=Kw(s);np(o,r)>0&&(r=o)}),new Ft(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pt{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Pt.oe=-1;function Pa(t){return t==null}function ca(t){return t===0&&1/t==-1/0}function Xw(t){return typeof t=="number"&&Number.isInteger(t)&&!ca(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yt(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=Ny(e)),e=qA(t.get(n),e);return Ny(e)}function qA(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const s=t.charAt(i);switch(s){case"\0":n+="";break;case"":n+="";break;default:n+=s}}return n}function Ny(t){return t+""}function ln(t){const e=t.length;if(Q(e>=2),e===2)return Q(t.charAt(0)===""&&t.charAt(1)===""),ne.emptyPath();const n=e-2,r=[];let i="";for(let s=0;s<e;){const o=t.indexOf("",s);switch((o<0||o>n)&&W(),t.charAt(o+1)){case"":const l=t.substring(s,o);let u;i.length===0?u=l:(i+=l,u=i,i=""),r.push(u);break;case"":i+=t.substring(s,o),i+="\0";break;case"":i+=t.substring(s,o+1);break;default:W()}s=o+2}return new ne(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vy=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bl(t,e){return[t,yt(e)]}function Jw(t,e,n){return[t,yt(e),n]}const GA={},WA=["prefixPath","collectionGroup","readTime","documentId"],KA=["prefixPath","collectionGroup","documentId"],HA=["collectionGroup","readTime","prefixPath","documentId"],QA=["canonicalId","targetId"],YA=["targetId","path"],XA=["path","targetId"],JA=["collectionId","parent"],ZA=["indexId","uid"],e2=["uid","sequenceNumber"],t2=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],n2=["indexId","uid","orderedDocumentKey"],r2=["userId","collectionPath","documentId"],i2=["userId","collectionPath","largestBatchId"],s2=["userId","collectionGroup","largestBatchId"],Zw=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],o2=[...Zw,"documentOverlays"],e1=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],t1=e1,n1=[...t1,"indexConfiguration","indexState","indexEntries"],a2=n1;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rd extends Qw{constructor(e,n){super(),this._e=e,this.currentSequenceNumber=n}}function Qe(t,e){const n=q(t);return dn.F(n._e,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function My(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Ii(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function r1(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class me{constructor(e,n){this.comparator=e,this.root=n||Ze.EMPTY}insert(e,n){return new me(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Ze.BLACK,null,null))}remove(e){return new me(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ze.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new wl(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new wl(this.root,e,this.comparator,!1)}getReverseIterator(){return new wl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new wl(this.root,e,this.comparator,!0)}}class wl{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ze{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??Ze.RED,this.left=i??Ze.EMPTY,this.right=s??Ze.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new Ze(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Ze.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return Ze.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ze.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ze.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw W();const e=this.left.check();if(e!==this.right.check())throw W();return e+(this.isRed()?0:1)}}Ze.EMPTY=null,Ze.RED=!0,Ze.BLACK=!1;Ze.EMPTY=new class{constructor(){this.size=0}get key(){throw W()}get value(){throw W()}get color(){throw W()}get left(){throw W()}get right(){throw W()}copy(e,n,r,i,s){return this}insert(e,n,r){return new Ze(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class he{constructor(e){this.comparator=e,this.data=new me(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Ly(this.data.getIterator())}getIteratorFrom(e){return new Ly(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof he)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new he(this.comparator);return n.data=e,n}}class Ly{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Ni(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class At{constructor(e){this.fields=e,e.sort(Ee.comparator)}static empty(){return new At([])}unionWith(e){let n=new he(Ee.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new At(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return vs(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i1 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l2(){return typeof atob<"u"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $e{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new i1("Invalid base64 string: "+s):s}}(e);return new $e(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new $e(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return J(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}$e.EMPTY_BYTE_STRING=new $e("");const u2=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Vn(t){if(Q(!!t),typeof t=="string"){let e=0;const n=u2.exec(t);if(Q(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:De(t.seconds),nanos:De(t.nanos)}}function De(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function yr(t){return typeof t=="string"?$e.fromBase64String(t):$e.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ec(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function ip(t){const e=t.mapValue.fields.__previous_value__;return ec(e)?ip(e):e}function ha(t){const e=Vn(t.mapValue.fields.__local_write_time__.timestampValue);return new Te(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c2{constructor(e,n,r,i,s,o,l,u,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=c}}class _r{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new _r("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof _r&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tr={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},jl={nullValue:"NULL_VALUE"};function ci(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?ec(t)?4:s1(t)?9007199254740991:10:W()}function pn(t,e){if(t===e)return!0;const n=ci(t);if(n!==ci(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return ha(t).isEqual(ha(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=Vn(i.timestampValue),l=Vn(s.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return yr(i.bytesValue).isEqual(yr(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return De(i.geoPointValue.latitude)===De(s.geoPointValue.latitude)&&De(i.geoPointValue.longitude)===De(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return De(i.integerValue)===De(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=De(i.doubleValue),l=De(s.doubleValue);return o===l?ca(o)===ca(l):isNaN(o)&&isNaN(l)}return!1}(t,e);case 9:return vs(t.arrayValue.values||[],e.arrayValue.values||[],pn);case 10:return function(i,s){const o=i.mapValue.fields||{},l=s.mapValue.fields||{};if(My(o)!==My(l))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(l[u]===void 0||!pn(o[u],l[u])))return!1;return!0}(t,e);default:return W()}}function da(t,e){return(t.values||[]).find(n=>pn(n,e))!==void 0}function vr(t,e){if(t===e)return 0;const n=ci(t),r=ci(e);if(n!==r)return J(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return J(t.booleanValue,e.booleanValue);case 2:return function(s,o){const l=De(s.integerValue||s.doubleValue),u=De(o.integerValue||o.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1}(t,e);case 3:return Oy(t.timestampValue,e.timestampValue);case 4:return Oy(ha(t),ha(e));case 5:return J(t.stringValue,e.stringValue);case 6:return function(s,o){const l=yr(s),u=yr(o);return l.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const l=s.split("/"),u=o.split("/");for(let c=0;c<l.length&&c<u.length;c++){const f=J(l[c],u[c]);if(f!==0)return f}return J(l.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const l=J(De(s.latitude),De(o.latitude));return l!==0?l:J(De(s.longitude),De(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(s,o){const l=s.values||[],u=o.values||[];for(let c=0;c<l.length&&c<u.length;++c){const f=vr(l[c],u[c]);if(f)return f}return J(l.length,u.length)}(t.arrayValue,e.arrayValue);case 10:return function(s,o){if(s===tr.mapValue&&o===tr.mapValue)return 0;if(s===tr.mapValue)return 1;if(o===tr.mapValue)return-1;const l=s.fields||{},u=Object.keys(l),c=o.fields||{},f=Object.keys(c);u.sort(),f.sort();for(let m=0;m<u.length&&m<f.length;++m){const v=J(u[m],f[m]);if(v!==0)return v;const A=vr(l[u[m]],c[f[m]]);if(A!==0)return A}return J(u.length,f.length)}(t.mapValue,e.mapValue);default:throw W()}}function Oy(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return J(t,e);const n=Vn(t),r=Vn(e),i=J(n.seconds,r.seconds);return i!==0?i:J(n.nanos,r.nanos)}function ws(t){return Cd(t)}function Cd(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Vn(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return yr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return $.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=Cd(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${Cd(n.fields[o])}`;return i+"}"}(t.mapValue):W()}function hi(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function bd(t){return!!t&&"integerValue"in t}function fa(t){return!!t&&"arrayValue"in t}function Fy(t){return!!t&&"nullValue"in t}function By(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function zl(t){return!!t&&"mapValue"in t}function Oo(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Ii(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Oo(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Oo(t.arrayValue.values[n]);return e}return Object.assign({},t)}function s1(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}function h2(t){return"nullValue"in t?jl:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?hi(_r.empty(),$.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?{mapValue:{}}:W()}function d2(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?hi(_r.empty(),$.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?{mapValue:{}}:"mapValue"in t?tr:W()}function jy(t,e){const n=vr(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function zy(t,e){const n=vr(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class et{constructor(e){this.value=e}static empty(){return new et({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!zl(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Oo(n)}setAll(e){let n=Ee.emptyPath(),r={},i=[];e.forEach((o,l)=>{if(!n.isImmediateParentOf(l)){const u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=l.popLast()}o?r[l.lastSegment()]=Oo(o):i.push(l.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());zl(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return pn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];zl(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Ii(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new et(Oo(this.value))}}function o1(t){const e=[];return Ii(t.fields,(n,r)=>{const i=new Ee([n]);if(zl(r)){const s=o1(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new At(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _e{constructor(e,n,r,i,s,o,l){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=l}static newInvalidDocument(e){return new _e(e,0,Y.min(),Y.min(),Y.min(),et.empty(),0)}static newFoundDocument(e,n,r,i){return new _e(e,1,n,Y.min(),r,i,0)}static newNoDocument(e,n){return new _e(e,2,n,Y.min(),Y.min(),et.empty(),0)}static newUnknownDocument(e,n){return new _e(e,3,n,Y.min(),Y.min(),et.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Y.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=et.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=et.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Y.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof _e&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new _e(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wr{constructor(e,n){this.position=e,this.inclusive=n}}function Uy(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=$.comparator($.fromName(o.referenceValue),n.key):r=vr(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function $y(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!pn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pa{constructor(e,n="asc"){this.field=e,this.dir=n}}function f2(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a1{}class re extends a1{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new p2(e,n,r):n==="array-contains"?new y2(e,r):n==="in"?new f1(e,r):n==="not-in"?new _2(e,r):n==="array-contains-any"?new v2(e,r):new re(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new m2(e,r):new g2(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(vr(n,this.value)):n!==null&&ci(this.value)===ci(n)&&this.matchesComparison(vr(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return W()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ue extends a1{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new ue(e,n)}matches(e){return Es(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Es(t){return t.op==="and"}function kd(t){return t.op==="or"}function sp(t){return l1(t)&&Es(t)}function l1(t){for(const e of t.filters)if(e instanceof ue)return!1;return!0}function Dd(t){if(t instanceof re)return t.field.canonicalString()+t.op.toString()+ws(t.value);if(sp(t))return t.filters.map(e=>Dd(e)).join(",");{const e=t.filters.map(n=>Dd(n)).join(",");return`${t.op}(${e})`}}function u1(t,e){return t instanceof re?function(r,i){return i instanceof re&&r.op===i.op&&r.field.isEqual(i.field)&&pn(r.value,i.value)}(t,e):t instanceof ue?function(r,i){return i instanceof ue&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,l)=>s&&u1(o,i.filters[l]),!0):!1}(t,e):void W()}function c1(t,e){const n=t.filters.concat(e);return ue.create(n,t.op)}function h1(t){return t instanceof re?function(n){return`${n.field.canonicalString()} ${n.op} ${ws(n.value)}`}(t):t instanceof ue?function(n){return n.op.toString()+" {"+n.getFilters().map(h1).join(" ,")+"}"}(t):"Filter"}class p2 extends re{constructor(e,n,r){super(e,n,r),this.key=$.fromName(r.referenceValue)}matches(e){const n=$.comparator(e.key,this.key);return this.matchesComparison(n)}}class m2 extends re{constructor(e,n){super(e,"in",n),this.keys=d1("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class g2 extends re{constructor(e,n){super(e,"not-in",n),this.keys=d1("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function d1(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>$.fromName(r.referenceValue))}class y2 extends re{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return fa(n)&&da(n.arrayValue,this.value)}}class f1 extends re{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&da(this.value.arrayValue,n)}}class _2 extends re{constructor(e,n){super(e,"not-in",n)}matches(e){if(da(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!da(this.value.arrayValue,n)}}class v2 extends re{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!fa(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>da(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w2{constructor(e,n=null,r=[],i=[],s=null,o=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=l,this.ue=null}}function Nd(t,e=null,n=[],r=[],i=null,s=null,o=null){return new w2(t,e,n,r,i,s,o)}function di(t){const e=q(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Dd(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),Pa(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>ws(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>ws(r)).join(",")),e.ue=n}return e.ue}function Aa(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!f2(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!u1(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!$y(t.startAt,e.startAt)&&$y(t.endAt,e.endAt)}function xu(t){return $.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function Su(t,e){return t.filters.filter(n=>n instanceof re&&n.field.isEqual(e))}function qy(t,e,n){let r=jl,i=!0;for(const s of Su(t,e)){let o=jl,l=!0;switch(s.op){case"<":case"<=":o=h2(s.value);break;case"==":case"in":case">=":o=s.value;break;case">":o=s.value,l=!1;break;case"!=":case"not-in":o=jl}jy({value:r,inclusive:i},{value:o,inclusive:l})<0&&(r=o,i=l)}if(n!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const o=n.position[s];jy({value:r,inclusive:i},{value:o,inclusive:n.inclusive})<0&&(r=o,i=n.inclusive);break}}return{value:r,inclusive:i}}function Gy(t,e,n){let r=tr,i=!0;for(const s of Su(t,e)){let o=tr,l=!0;switch(s.op){case">=":case">":o=d2(s.value),l=!1;break;case"==":case"in":case"<=":o=s.value;break;case"<":o=s.value,l=!1;break;case"!=":case"not-in":o=tr}zy({value:r,inclusive:i},{value:o,inclusive:l})>0&&(r=o,i=l)}if(n!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const o=n.position[s];zy({value:r,inclusive:i},{value:o,inclusive:n.inclusive})>0&&(r=o,i=n.inclusive);break}}return{value:r,inclusive:i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class On{constructor(e,n=null,r=[],i=[],s=null,o="F",l=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=l,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function p1(t,e,n,r,i,s,o,l){return new On(t,e,n,r,i,s,o,l)}function Os(t){return new On(t)}function Wy(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function op(t){return t.collectionGroup!==null}function as(t){const e=q(t);if(e.ce===null){e.ce=[];const n=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new he(Ee.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(c=>{c.isInequality()&&(l=l.add(c.field))})}),l})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new pa(s,r))}),n.has(Ee.keyField().canonicalString())||e.ce.push(new pa(Ee.keyField(),r))}return e.ce}function _t(t){const e=q(t);return e.le||(e.le=E2(e,as(t))),e.le}function E2(t,e){if(t.limitType==="F")return Nd(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new pa(i.field,s)});const n=t.endAt?new wr(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new wr(t.startAt.position,t.startAt.inclusive):null;return Nd(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Vd(t,e){const n=t.filters.concat([e]);return new On(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Pu(t,e,n){return new On(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Ra(t,e){return Aa(_t(t),_t(e))&&t.limitType===e.limitType}function m1(t){return`${di(_t(t))}|lt:${t.limitType}`}function Fi(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>h1(i)).join(", ")}]`),Pa(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>ws(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>ws(i)).join(",")),`Target(${r})`}(_t(t))}; limitType=${t.limitType})`}function Ca(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):$.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of as(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,l,u){const c=Uy(o,l,u);return o.inclusive?c<=0:c<0}(r.startAt,as(r),i)||r.endAt&&!function(o,l,u){const c=Uy(o,l,u);return o.inclusive?c>=0:c>0}(r.endAt,as(r),i))}(t,e)}function g1(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function y1(t){return(e,n)=>{let r=!1;for(const i of as(t)){const s=I2(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function I2(t,e,n){const r=t.field.isKeyField()?$.comparator(e.key,n.key):function(s,o,l){const u=o.data.field(s),c=l.data.field(s);return u!==null&&c!==null?vr(u,c):W()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return W()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class br{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Ii(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return r1(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T2=new me($.comparator);function Rt(){return T2}const _1=new me($.comparator);function xo(...t){let e=_1;for(const n of t)e=e.insert(n.key,n);return e}function v1(t){let e=_1;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function un(){return Fo()}function w1(){return Fo()}function Fo(){return new br(t=>t.toString(),(t,e)=>t.isEqual(e))}const x2=new me($.comparator),S2=new he($.comparator);function Z(...t){let e=S2;for(const n of t)e=e.add(n);return e}const P2=new he(J);function ap(){return P2}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E1(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ca(e)?"-0":e}}function I1(t){return{integerValue:""+t}}function T1(t,e){return Xw(e)?I1(e):E1(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tc{constructor(){this._=void 0}}function A2(t,e,n){return t instanceof Is?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&ec(s)&&(s=ip(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof fi?S1(t,e):t instanceof pi?P1(t,e):function(i,s){const o=x1(i,s),l=Ky(o)+Ky(i.Pe);return bd(o)&&bd(i.Pe)?I1(l):E1(i.serializer,l)}(t,e)}function R2(t,e,n){return t instanceof fi?S1(t,e):t instanceof pi?P1(t,e):n}function x1(t,e){return t instanceof Ts?function(r){return bd(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class Is extends tc{}class fi extends tc{constructor(e){super(),this.elements=e}}function S1(t,e){const n=A1(e);for(const r of t.elements)n.some(i=>pn(i,r))||n.push(r);return{arrayValue:{values:n}}}class pi extends tc{constructor(e){super(),this.elements=e}}function P1(t,e){let n=A1(e);for(const r of t.elements)n=n.filter(i=>!pn(i,r));return{arrayValue:{values:n}}}class Ts extends tc{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function Ky(t){return De(t.integerValue||t.doubleValue)}function A1(t){return fa(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ba{constructor(e,n){this.field=e,this.transform=n}}function C2(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof fi&&i instanceof fi||r instanceof pi&&i instanceof pi?vs(r.elements,i.elements,pn):r instanceof Ts&&i instanceof Ts?pn(r.Pe,i.Pe):r instanceof Is&&i instanceof Is}(t.transform,e.transform)}class b2{constructor(e,n){this.version=e,this.transformResults=n}}class Ie{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Ie}static exists(e){return new Ie(void 0,e)}static updateTime(e){return new Ie(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ul(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class nc{}function R1(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Bs(t.key,Ie.none()):new Fs(t.key,t.data,Ie.none());{const n=t.data,r=et.empty();let i=new he(Ee.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Fn(t.key,r,new At(i.toArray()),Ie.none())}}function k2(t,e,n){t instanceof Fs?function(i,s,o){const l=i.value.clone(),u=Qy(i.fieldTransforms,s,o.transformResults);l.setAll(u),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):t instanceof Fn?function(i,s,o){if(!Ul(i.precondition,s))return void s.convertToUnknownDocument(o.version);const l=Qy(i.fieldTransforms,s,o.transformResults),u=s.data;u.setAll(C1(i)),u.setAll(l),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Bo(t,e,n,r){return t instanceof Fs?function(s,o,l,u){if(!Ul(s.precondition,o))return l;const c=s.value.clone(),f=Yy(s.fieldTransforms,u,o);return c.setAll(f),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof Fn?function(s,o,l,u){if(!Ul(s.precondition,o))return l;const c=Yy(s.fieldTransforms,u,o),f=o.data;return f.setAll(C1(s)),f.setAll(c),o.convertToFoundDocument(o.version,f).setHasLocalMutations(),l===null?null:l.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(m=>m.field))}(t,e,n,r):function(s,o,l){return Ul(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(t,e,n)}function D2(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=x1(r.transform,i||null);s!=null&&(n===null&&(n=et.empty()),n.set(r.field,s))}return n||null}function Hy(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&vs(r,i,(s,o)=>C2(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Fs extends nc{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Fn extends nc{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function C1(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function Qy(t,e,n){const r=new Map;Q(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,l=e.data.field(s.field);r.set(s.field,R2(o,l,n[i]))}return r}function Yy(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,A2(s,o,e))}return r}class Bs extends nc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class lp extends nc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class up{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&k2(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Bo(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Bo(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=w1();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let l=this.applyToLocalView(o,s.mutatedFields);l=n.has(i.key)?null:l;const u=R1(o,l);u!==null&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(Y.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Z())}isEqual(e){return this.batchId===e.batchId&&vs(this.mutations,e.mutations,(n,r)=>Hy(n,r))&&vs(this.baseMutations,e.baseMutations,(n,r)=>Hy(n,r))}}class cp{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Q(e.mutations.length===r.length);let i=function(){return x2}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new cp(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hp{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N2{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Fe,se;function b1(t){switch(t){default:return W();case O.CANCELLED:case O.UNKNOWN:case O.DEADLINE_EXCEEDED:case O.RESOURCE_EXHAUSTED:case O.INTERNAL:case O.UNAVAILABLE:case O.UNAUTHENTICATED:return!1;case O.INVALID_ARGUMENT:case O.NOT_FOUND:case O.ALREADY_EXISTS:case O.PERMISSION_DENIED:case O.FAILED_PRECONDITION:case O.ABORTED:case O.OUT_OF_RANGE:case O.UNIMPLEMENTED:case O.DATA_LOSS:return!0}}function k1(t){if(t===void 0)return Le("GRPC error has no .code"),O.UNKNOWN;switch(t){case Fe.OK:return O.OK;case Fe.CANCELLED:return O.CANCELLED;case Fe.UNKNOWN:return O.UNKNOWN;case Fe.DEADLINE_EXCEEDED:return O.DEADLINE_EXCEEDED;case Fe.RESOURCE_EXHAUSTED:return O.RESOURCE_EXHAUSTED;case Fe.INTERNAL:return O.INTERNAL;case Fe.UNAVAILABLE:return O.UNAVAILABLE;case Fe.UNAUTHENTICATED:return O.UNAUTHENTICATED;case Fe.INVALID_ARGUMENT:return O.INVALID_ARGUMENT;case Fe.NOT_FOUND:return O.NOT_FOUND;case Fe.ALREADY_EXISTS:return O.ALREADY_EXISTS;case Fe.PERMISSION_DENIED:return O.PERMISSION_DENIED;case Fe.FAILED_PRECONDITION:return O.FAILED_PRECONDITION;case Fe.ABORTED:return O.ABORTED;case Fe.OUT_OF_RANGE:return O.OUT_OF_RANGE;case Fe.UNIMPLEMENTED:return O.UNIMPLEMENTED;case Fe.DATA_LOSS:return O.DATA_LOSS;default:return W()}}(se=Fe||(Fe={}))[se.OK=0]="OK",se[se.CANCELLED=1]="CANCELLED",se[se.UNKNOWN=2]="UNKNOWN",se[se.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",se[se.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",se[se.NOT_FOUND=5]="NOT_FOUND",se[se.ALREADY_EXISTS=6]="ALREADY_EXISTS",se[se.PERMISSION_DENIED=7]="PERMISSION_DENIED",se[se.UNAUTHENTICATED=16]="UNAUTHENTICATED",se[se.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",se[se.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",se[se.ABORTED=10]="ABORTED",se[se.OUT_OF_RANGE=11]="OUT_OF_RANGE",se[se.UNIMPLEMENTED=12]="UNIMPLEMENTED",se[se.INTERNAL=13]="INTERNAL",se[se.UNAVAILABLE=14]="UNAVAILABLE",se[se.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D1(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V2=new ni([4294967295,4294967295],0);function Xy(t){const e=D1().encode(t),n=new Lw;return n.update(e),new Uint8Array(n.digest())}function Jy(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new ni([n,r],0),new ni([i,s],0)]}class dp{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new So(`Invalid padding: ${n}`);if(r<0)throw new So(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new So(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new So(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=ni.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(ni.fromNumber(r)));return i.compare(V2)===1&&(i=new ni([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=Xy(e),[r,i]=Jy(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new dp(s,i,n);return r.forEach(l=>o.insert(l)),o}insert(e){if(this.Ie===0)return;const n=Xy(e),[r,i]=Jy(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class So extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ka{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Da.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new ka(Y.min(),i,new me(J),Rt(),Z())}}class Da{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Da(r,n,Z(),Z(),Z())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $l{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}}class N1{constructor(e,n){this.targetId=e,this.me=n}}class V1{constructor(e,n,r=$e.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class Zy{constructor(){this.fe=0,this.ge=t_(),this.pe=$e.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}Ce(){let e=Z(),n=Z(),r=Z();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:W()}}),new Da(this.pe,this.ye,e,n,r)}ve(){this.we=!1,this.ge=t_()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Q(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class M2{constructor(e){this.Le=e,this.Be=new Map,this.ke=Rt(),this.qe=e_(),this.Qe=new me(J)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.ve(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:W()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){const n=e.targetId,r=e.me.count,i=this.Je(n);if(i){const s=i.target;if(xu(s))if(r===0){const o=new $(s.path);this.Ue(n,o,_e.newNoDocument(o,Y.min()))}else Q(r===1);else{const o=this.Ye(n);if(o!==r){const l=this.Ze(e),u=l?this.Xe(l,e,o):1;if(u!==0){this.je(n);const c=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,c)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,l;try{o=yr(r).toUint8Array()}catch(u){if(u instanceof i1)return rn("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{l=new dp(o,i,s)}catch(u){return rn(u instanceof So?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return l.Ie===0?null:l}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Le.tt(),l=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(l)||(this.Ue(n,s,null),i++)}),i}rt(e){const n=new Map;this.Be.forEach((s,o)=>{const l=this.Je(o);if(l){if(s.current&&xu(l.target)){const u=new $(l.target.path);this.ke.get(u)!==null||this.it(o,u)||this.Ue(o,u,_e.newNoDocument(u,e))}s.be&&(n.set(o,s.Ce()),s.ve())}});let r=Z();this.qe.forEach((s,o)=>{let l=!0;o.forEachWhile(u=>{const c=this.Je(u);return!c||c.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));const i=new ka(e,n,this.Qe,this.ke,r);return this.ke=Rt(),this.qe=e_(),this.Qe=new me(J),i}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).Ce();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new Zy,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new he(J),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||j("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Zy),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function e_(){return new me($.comparator)}function t_(){return new me($.comparator)}const L2={asc:"ASCENDING",desc:"DESCENDING"},O2={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},F2={and:"AND",or:"OR"};class B2{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Md(t,e){return t.useProto3Json||Pa(e)?e:{value:e}}function xs(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function M1(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function j2(t,e){return xs(t,e.toTimestamp())}function Oe(t){return Q(!!t),Y.fromTimestamp(function(n){const r=Vn(n);return new Te(r.seconds,r.nanos)}(t))}function fp(t,e){return Ld(t,e).canonicalString()}function Ld(t,e){const n=function(i){return new ne(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function L1(t){const e=ne.fromString(t);return Q(W1(e)),e}function ma(t,e){return fp(t.databaseId,e.path)}function fn(t,e){const n=L1(e);if(n.get(1)!==t.databaseId.projectId)throw new B(O.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new B(O.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new $(B1(n))}function O1(t,e){return fp(t.databaseId,e)}function F1(t){const e=L1(t);return e.length===4?ne.emptyPath():B1(e)}function Od(t){return new ne(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function B1(t){return Q(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function n_(t,e,n){return{name:ma(t,e),fields:n.value.mapValue.fields}}function j1(t,e,n){const r=fn(t,e.name),i=Oe(e.updateTime),s=e.createTime?Oe(e.createTime):Y.min(),o=new et({mapValue:{fields:e.fields}}),l=_e.newFoundDocument(r,i,s,o);return n&&l.setHasCommittedMutations(),n?l.setHasCommittedMutations():l}function z2(t,e){return"found"in e?function(r,i){Q(!!i.found),i.found.name,i.found.updateTime;const s=fn(r,i.found.name),o=Oe(i.found.updateTime),l=i.found.createTime?Oe(i.found.createTime):Y.min(),u=new et({mapValue:{fields:i.found.fields}});return _e.newFoundDocument(s,o,l,u)}(t,e):"missing"in e?function(r,i){Q(!!i.missing),Q(!!i.readTime);const s=fn(r,i.missing),o=Oe(i.readTime);return _e.newNoDocument(s,o)}(t,e):W()}function U2(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:W()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(c,f){return c.useProto3Json?(Q(f===void 0||typeof f=="string"),$e.fromBase64String(f||"")):(Q(f===void 0||f instanceof Buffer||f instanceof Uint8Array),$e.fromUint8Array(f||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&function(c){const f=c.code===void 0?O.UNKNOWN:k1(c.code);return new B(f,c.message||"")}(o);n=new V1(r,i,s,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=fn(t,r.document.name),s=Oe(r.document.updateTime),o=r.document.createTime?Oe(r.document.createTime):Y.min(),l=new et({mapValue:{fields:r.document.fields}}),u=_e.newFoundDocument(i,s,o,l),c=r.targetIds||[],f=r.removedTargetIds||[];n=new $l(c,f,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=fn(t,r.document),s=r.readTime?Oe(r.readTime):Y.min(),o=_e.newNoDocument(i,s),l=r.removedTargetIds||[];n=new $l([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=fn(t,r.document),s=r.removedTargetIds||[];n=new $l([],s,i,null)}else{if(!("filter"in e))return W();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new N2(i,s),l=r.targetId;n=new N1(l,o)}}return n}function ga(t,e){let n;if(e instanceof Fs)n={update:n_(t,e.key,e.value)};else if(e instanceof Bs)n={delete:ma(t,e.key)};else if(e instanceof Fn)n={update:n_(t,e.key,e.data),updateMask:H2(e.fieldMask)};else{if(!(e instanceof lp))return W();n={verify:ma(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const l=o.transform;if(l instanceof Is)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof fi)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof pi)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Ts)return{fieldPath:o.field.canonicalString(),increment:l.Pe};throw W()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:j2(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:W()}(t,e.precondition)),n}function Fd(t,e){const n=e.currentDocument?function(s){return s.updateTime!==void 0?Ie.updateTime(Oe(s.updateTime)):s.exists!==void 0?Ie.exists(s.exists):Ie.none()}(e.currentDocument):Ie.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(o,l){let u=null;if("setToServerValue"in l)Q(l.setToServerValue==="REQUEST_TIME"),u=new Is;else if("appendMissingElements"in l){const f=l.appendMissingElements.values||[];u=new fi(f)}else if("removeAllFromArray"in l){const f=l.removeAllFromArray.values||[];u=new pi(f)}else"increment"in l?u=new Ts(o,l.increment):W();const c=Ee.fromServerFormat(l.fieldPath);return new ba(c,u)}(t,i)):[];if(e.update){e.update.name;const i=fn(t,e.update.name),s=new et({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=function(u){const c=u.fieldPaths||[];return new At(c.map(f=>Ee.fromServerFormat(f)))}(e.updateMask);return new Fn(i,s,o,n,r)}return new Fs(i,s,n,r)}if(e.delete){const i=fn(t,e.delete);return new Bs(i,n)}if(e.verify){const i=fn(t,e.verify);return new lp(i,n)}return W()}function $2(t,e){return t&&t.length>0?(Q(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?Oe(i.updateTime):Oe(s);return o.isEqual(Y.min())&&(o=Oe(s)),new b2(o,i.transformResults||[])}(n,e))):[]}function z1(t,e){return{documents:[O1(t,e.path)]}}function U1(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=O1(t,i);const s=function(c){if(c.length!==0)return G1(ue.create(c,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(c){if(c.length!==0)return c.map(f=>function(v){return{field:Bi(v.field),direction:G2(v.dir)}}(f))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const l=Md(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{_t:n,parent:i}}function $1(t){let e=F1(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Q(r===1);const f=n.from[0];f.allDescendants?i=f.collectionId:e=e.child(f.collectionId)}let s=[];n.where&&(s=function(m){const v=q1(m);return v instanceof ue&&sp(v)?v.getFilters():[v]}(n.where));let o=[];n.orderBy&&(o=function(m){return m.map(v=>function(k){return new pa(ji(k.field),function(L){switch(L){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(k.direction))}(v))}(n.orderBy));let l=null;n.limit&&(l=function(m){let v;return v=typeof m=="object"?m.value:m,Pa(v)?null:v}(n.limit));let u=null;n.startAt&&(u=function(m){const v=!!m.before,A=m.values||[];return new wr(A,v)}(n.startAt));let c=null;return n.endAt&&(c=function(m){const v=!m.before,A=m.values||[];return new wr(A,v)}(n.endAt)),p1(e,i,o,s,l,"F",u,c)}function q2(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return W()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function q1(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=ji(n.unaryFilter.field);return re.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=ji(n.unaryFilter.field);return re.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=ji(n.unaryFilter.field);return re.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=ji(n.unaryFilter.field);return re.create(o,"!=",{nullValue:"NULL_VALUE"});default:return W()}}(t):t.fieldFilter!==void 0?function(n){return re.create(ji(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return W()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return ue.create(n.compositeFilter.filters.map(r=>q1(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return W()}}(n.compositeFilter.op))}(t):W()}function G2(t){return L2[t]}function W2(t){return O2[t]}function K2(t){return F2[t]}function Bi(t){return{fieldPath:t.canonicalString()}}function ji(t){return Ee.fromServerFormat(t.fieldPath)}function G1(t){return t instanceof re?function(n){if(n.op==="=="){if(By(n.value))return{unaryFilter:{field:Bi(n.field),op:"IS_NAN"}};if(Fy(n.value))return{unaryFilter:{field:Bi(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(By(n.value))return{unaryFilter:{field:Bi(n.field),op:"IS_NOT_NAN"}};if(Fy(n.value))return{unaryFilter:{field:Bi(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Bi(n.field),op:W2(n.op),value:n.value}}}(t):t instanceof ue?function(n){const r=n.getFilters().map(i=>G1(i));return r.length===1?r[0]:{compositeFilter:{op:K2(n.op),filters:r}}}(t):W()}function H2(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function W1(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class An{constructor(e,n,r,i,s=Y.min(),o=Y.min(),l=$e.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(e){return new An(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new An(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new An(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new An(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K1{constructor(e){this.ct=e}}function Q2(t,e){let n;if(e.document)n=j1(t.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=$.fromSegments(e.noDocument.path),i=gi(e.noDocument.readTime);n=_e.newNoDocument(r,i),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return W();{const r=$.fromSegments(e.unknownDocument.path),i=gi(e.unknownDocument.version);n=_e.newUnknownDocument(r,i)}}return e.readTime&&n.setReadTime(function(i){const s=new Te(i[0],i[1]);return Y.fromTimestamp(s)}(e.readTime)),n}function r_(t,e){const n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Au(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(s,o){return{name:ma(s,o.key),fields:o.data.value.mapValue.fields,updateTime:xs(s,o.version.toTimestamp()),createTime:xs(s,o.createTime.toTimestamp())}}(t.ct,e);else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:mi(e.version)};else{if(!e.isUnknownDocument())return W();r.unknownDocument={path:n.path.toArray(),version:mi(e.version)}}return r}function Au(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function mi(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function gi(t){const e=new Te(t.seconds,t.nanoseconds);return Y.fromTimestamp(e)}function qr(t,e){const n=(e.baseMutations||[]).map(s=>Fd(t.ct,s));for(let s=0;s<e.mutations.length-1;++s){const o=e.mutations[s];if(s+1<e.mutations.length&&e.mutations[s+1].transform!==void 0){const l=e.mutations[s+1];o.updateTransforms=l.transform.fieldTransforms,e.mutations.splice(s+1,1),++s}}const r=e.mutations.map(s=>Fd(t.ct,s)),i=Te.fromMillis(e.localWriteTimeMs);return new up(e.batchId,i,n,r)}function Po(t){const e=gi(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?gi(t.lastLimboFreeSnapshotVersion):Y.min();let r;return r=function(s){return s.documents!==void 0}(t.query)?function(s){return Q(s.documents.length===1),_t(Os(F1(s.documents[0])))}(t.query):function(s){return _t($1(s))}(t.query),new An(r,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,$e.fromBase64String(t.resumeToken))}function H1(t,e){const n=mi(e.snapshotVersion),r=mi(e.lastLimboFreeSnapshotVersion);let i;i=xu(e.target)?z1(t.ct,e.target):U1(t.ct,e.target)._t;const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:di(e.target),readTime:n,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function pp(t){const e=$1({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Pu(e,e.limit,"L"):e}function Eh(t,e){return new hp(e.largestBatchId,Fd(t.ct,e.overlayMutation))}function i_(t,e){const n=e.path.lastSegment();return[t,yt(e.path.popLast()),n]}function s_(t,e,n,r){return{indexId:t,uid:e,sequenceNumber:n,readTime:mi(r.readTime),documentKey:yt(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y2{getBundleMetadata(e,n){return o_(e).get(n).next(r=>{if(r)return function(s){return{id:s.bundleId,createTime:gi(s.createTime),version:s.version}}(r)})}saveBundleMetadata(e,n){return o_(e).put(function(i){return{bundleId:i.id,createTime:mi(Oe(i.createTime)),version:i.version}}(n))}getNamedQuery(e,n){return a_(e).get(n).next(r=>{if(r)return function(s){return{name:s.name,query:pp(s.bundledQuery),readTime:gi(s.readTime)}}(r)})}saveNamedQuery(e,n){return a_(e).put(function(i){return{name:i.name,readTime:mi(Oe(i.readTime)),bundledQuery:i.bundledQuery}}(n))}}function o_(t){return Qe(t,"bundles")}function a_(t){return Qe(t,"namedQueries")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rc{constructor(e,n){this.serializer=e,this.userId=n}static lt(e,n){const r=n.uid||"";return new rc(e,r)}getOverlay(e,n){return po(e).get(i_(this.userId,n)).next(r=>r?Eh(this.serializer,r):null)}getOverlays(e,n){const r=un();return M.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){const i=[];return r.forEach((s,o)=>{const l=new hp(n,o);i.push(this.ht(e,l))}),M.waitFor(i)}removeOverlaysForBatchId(e,n,r){const i=new Set;n.forEach(o=>i.add(yt(o.getCollectionPath())));const s=[];return i.forEach(o=>{const l=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);s.push(po(e).j("collectionPathOverlayIndex",l))}),M.waitFor(s)}getOverlaysForCollection(e,n,r){const i=un(),s=yt(n),o=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return po(e).U("collectionPathOverlayIndex",o).next(l=>{for(const u of l){const c=Eh(this.serializer,u);i.set(c.getKey(),c)}return i})}getOverlaysForCollectionGroup(e,n,r,i){const s=un();let o;const l=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return po(e).J({index:"collectionGroupOverlayIndex",range:l},(u,c,f)=>{const m=Eh(this.serializer,c);s.size()<i||m.largestBatchId===o?(s.set(m.getKey(),m),o=m.largestBatchId):f.done()}).next(()=>s)}ht(e,n){return po(e).put(function(i,s,o){const[l,u,c]=i_(s,o.mutation.key);return{userId:s,collectionPath:u,documentId:c,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:ga(i.ct,o.mutation)}}(this.serializer,this.userId,n))}}function po(t){return Qe(t,"documentOverlays")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gr{constructor(){}Pt(e,n){this.It(e,n),n.Tt()}It(e,n){if("nullValue"in e)this.Et(n,5);else if("booleanValue"in e)this.Et(n,10),n.dt(e.booleanValue?1:0);else if("integerValue"in e)this.Et(n,15),n.dt(De(e.integerValue));else if("doubleValue"in e){const r=De(e.doubleValue);isNaN(r)?this.Et(n,13):(this.Et(n,15),ca(r)?n.dt(0):n.dt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Et(n,20),typeof r=="string"&&(r=Vn(r)),n.At(`${r.seconds||""}`),n.dt(r.nanos||0)}else if("stringValue"in e)this.Rt(e.stringValue,n),this.Vt(n);else if("bytesValue"in e)this.Et(n,30),n.ft(yr(e.bytesValue)),this.Vt(n);else if("referenceValue"in e)this.gt(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.Et(n,45),n.dt(r.latitude||0),n.dt(r.longitude||0)}else"mapValue"in e?s1(e)?this.Et(n,Number.MAX_SAFE_INTEGER):(this.yt(e.mapValue,n),this.Vt(n)):"arrayValue"in e?(this.wt(e.arrayValue,n),this.Vt(n)):W()}Rt(e,n){this.Et(n,25),this.St(e,n)}St(e,n){n.At(e)}yt(e,n){const r=e.fields||{};this.Et(n,55);for(const i of Object.keys(r))this.Rt(i,n),this.It(r[i],n)}wt(e,n){const r=e.values||[];this.Et(n,50);for(const i of r)this.It(i,n)}gt(e,n){this.Et(n,37),$.fromName(e).path.forEach(r=>{this.Et(n,60),this.St(r,n)})}Et(e,n){e.dt(n)}Vt(e){e.dt(2)}}Gr.bt=new Gr;function X2(t){if(t===0)return 8;let e=0;return!(t>>4)&&(e+=4,t<<=4),!(t>>6)&&(e+=2,t<<=2),!(t>>7)&&(e+=1),e}function l_(t){const e=64-function(r){let i=0;for(let s=0;s<8;++s){const o=X2(255&r[s]);if(i+=o,o!==8)break}return i}(t);return Math.ceil(e/8)}class J2{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Dt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Ct(r.value),r=n.next();this.vt()}Ft(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Mt(r.value),r=n.next();this.xt()}Ot(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Ct(r);else if(r<2048)this.Ct(960|r>>>6),this.Ct(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Ct(480|r>>>12),this.Ct(128|63&r>>>6),this.Ct(128|63&r);else{const i=n.codePointAt(0);this.Ct(240|i>>>18),this.Ct(128|63&i>>>12),this.Ct(128|63&i>>>6),this.Ct(128|63&i)}}this.vt()}Nt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Mt(r);else if(r<2048)this.Mt(960|r>>>6),this.Mt(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Mt(480|r>>>12),this.Mt(128|63&r>>>6),this.Mt(128|63&r);else{const i=n.codePointAt(0);this.Mt(240|i>>>18),this.Mt(128|63&i>>>12),this.Mt(128|63&i>>>6),this.Mt(128|63&i)}}this.xt()}Lt(e){const n=this.Bt(e),r=l_(n);this.kt(1+r),this.buffer[this.position++]=255&r;for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=255&n[i]}qt(e){const n=this.Bt(e),r=l_(n);this.kt(1+r),this.buffer[this.position++]=~(255&r);for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=~(255&n[i])}Qt(){this.Kt(255),this.Kt(255)}$t(){this.Ut(255),this.Ut(255)}reset(){this.position=0}seed(e){this.kt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Wt(){return this.buffer.slice(0,this.position)}Bt(e){const n=function(s){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,s,!1),new Uint8Array(o.buffer)}(e),r=(128&n[0])!=0;n[0]^=r?255:128;for(let i=1;i<n.length;++i)n[i]^=r?255:0;return n}Ct(e){const n=255&e;n===0?(this.Kt(0),this.Kt(255)):n===255?(this.Kt(255),this.Kt(0)):this.Kt(n)}Mt(e){const n=255&e;n===0?(this.Ut(0),this.Ut(255)):n===255?(this.Ut(255),this.Ut(0)):this.Ut(e)}vt(){this.Kt(0),this.Kt(1)}xt(){this.Ut(0),this.Ut(1)}Kt(e){this.kt(1),this.buffer[this.position++]=e}Ut(e){this.kt(1),this.buffer[this.position++]=~e}kt(e){const n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class Z2{constructor(e){this.Gt=e}ft(e){this.Gt.Dt(e)}At(e){this.Gt.Ot(e)}dt(e){this.Gt.Lt(e)}Tt(){this.Gt.Qt()}}class eR{constructor(e){this.Gt=e}ft(e){this.Gt.Ft(e)}At(e){this.Gt.Nt(e)}dt(e){this.Gt.qt(e)}Tt(){this.Gt.$t()}}class mo{constructor(){this.Gt=new J2,this.zt=new Z2(this.Gt),this.jt=new eR(this.Gt)}seed(e){this.Gt.seed(e)}Ht(e){return e===0?this.zt:this.jt}Wt(){return this.Gt.Wt()}reset(){this.Gt.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wr{constructor(e,n,r,i){this.indexId=e,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}Jt(){const e=this.directionalValue.length,n=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Wr(this.indexId,this.documentKey,this.arrayValue,r)}}function qn(t,e){let n=t.indexId-e.indexId;return n!==0?n:(n=u_(t.arrayValue,e.arrayValue),n!==0?n:(n=u_(t.directionalValue,e.directionalValue),n!==0?n:$.comparator(t.documentKey,e.documentKey)))}function u_(t,e){for(let n=0;n<t.length&&n<e.length;++n){const r=t[n]-e[n];if(r!==0)return r}return t.length-e.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c_{constructor(e){this.Yt=new he((n,r)=>Ee.comparator(n.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.Zt=e.orderBy,this.Xt=[];for(const n of e.filters){const r=n;r.isInequality()?this.Yt=this.Yt.add(r):this.Xt.push(r)}}get en(){return this.Yt.size>1}tn(e){if(Q(e.collectionGroup===this.collectionId),this.en)return!1;const n=Ad(e);if(n!==void 0&&!this.nn(n))return!1;const r=Ur(e);let i=new Set,s=0,o=0;for(;s<r.length&&this.nn(r[s]);++s)i=i.add(r[s].fieldPath.canonicalString());if(s===r.length)return!0;if(this.Yt.size>0){const l=this.Yt.getIterator().getNext();if(!i.has(l.field.canonicalString())){const u=r[s];if(!this.rn(l,u)||!this.sn(this.Zt[o++],u))return!1}++s}for(;s<r.length;++s){const l=r[s];if(o>=this.Zt.length||!this.sn(this.Zt[o++],l))return!1}return!0}on(){if(this.en)return null;let e=new he(Ee.comparator);const n=[];for(const r of this.Xt)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")n.push(new Fl(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),n.push(new Fl(r.field,0))}for(const r of this.Zt)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),n.push(new Fl(r.field,r.dir==="asc"?0:1)));return new Tu(Tu.UNKNOWN_ID,this.collectionId,n,ua.empty())}nn(e){for(const n of this.Xt)if(this.rn(n,e))return!0;return!1}rn(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===r}sn(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q1(t){var e,n;if(Q(t instanceof re||t instanceof ue),t instanceof re){if(t instanceof f1){const i=((n=(e=t.value.arrayValue)===null||e===void 0?void 0:e.values)===null||n===void 0?void 0:n.map(s=>re.create(t.field,"==",s)))||[];return ue.create(i,"or")}return t}const r=t.filters.map(i=>Q1(i));return ue.create(r,t.op)}function tR(t){if(t.getFilters().length===0)return[];const e=zd(Q1(t));return Q(Y1(e)),Bd(e)||jd(e)?[e]:e.getFilters()}function Bd(t){return t instanceof re}function jd(t){return t instanceof ue&&sp(t)}function Y1(t){return Bd(t)||jd(t)||function(n){if(n instanceof ue&&kd(n)){for(const r of n.getFilters())if(!Bd(r)&&!jd(r))return!1;return!0}return!1}(t)}function zd(t){if(Q(t instanceof re||t instanceof ue),t instanceof re)return t;if(t.filters.length===1)return zd(t.filters[0]);const e=t.filters.map(r=>zd(r));let n=ue.create(e,t.op);return n=Ru(n),Y1(n)?n:(Q(n instanceof ue),Q(Es(n)),Q(n.filters.length>1),n.filters.reduce((r,i)=>mp(r,i)))}function mp(t,e){let n;return Q(t instanceof re||t instanceof ue),Q(e instanceof re||e instanceof ue),n=t instanceof re?e instanceof re?function(i,s){return ue.create([i,s],"and")}(t,e):h_(t,e):e instanceof re?h_(e,t):function(i,s){if(Q(i.filters.length>0&&s.filters.length>0),Es(i)&&Es(s))return c1(i,s.getFilters());const o=kd(i)?i:s,l=kd(i)?s:i,u=o.filters.map(c=>mp(c,l));return ue.create(u,"or")}(t,e),Ru(n)}function h_(t,e){if(Es(e))return c1(e,t.getFilters());{const n=e.filters.map(r=>mp(t,r));return ue.create(n,"or")}}function Ru(t){if(Q(t instanceof re||t instanceof ue),t instanceof re)return t;const e=t.getFilters();if(e.length===1)return Ru(e[0]);if(l1(t))return t;const n=e.map(i=>Ru(i)),r=[];return n.forEach(i=>{i instanceof re?r.push(i):i instanceof ue&&(i.op===t.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:ue.create(r,t.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nR{constructor(){this._n=new gp}addToCollectionParentIndex(e,n){return this._n.add(n),M.resolve()}getCollectionParents(e,n){return M.resolve(this._n.getEntries(n))}addFieldIndex(e,n){return M.resolve()}deleteFieldIndex(e,n){return M.resolve()}deleteAllFieldIndexes(e){return M.resolve()}createTargetIndexes(e,n){return M.resolve()}getDocumentsMatchingTarget(e,n){return M.resolve(null)}getIndexType(e,n){return M.resolve(0)}getFieldIndexes(e,n){return M.resolve([])}getNextCollectionGroupToUpdate(e){return M.resolve(null)}getMinOffset(e,n){return M.resolve(Ft.min())}getMinOffsetFromCollectionGroup(e,n){return M.resolve(Ft.min())}updateCollectionGroup(e,n,r){return M.resolve()}updateIndexEntries(e,n){return M.resolve()}}class gp{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new he(ne.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new he(ne.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const El=new Uint8Array(0);class rR{constructor(e,n){this.databaseId=n,this.an=new gp,this.un=new br(r=>di(r),(r,i)=>Aa(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.an.has(n)){const r=n.lastSegment(),i=n.popLast();e.addOnCommittedListener(()=>{this.an.add(n)});const s={collectionId:r,parent:yt(i)};return d_(e).put(s)}return M.resolve()}getCollectionParents(e,n){const r=[],i=IDBKeyRange.bound([n,""],[Gw(n),""],!1,!0);return d_(e).U(i).next(s=>{for(const o of s){if(o.collectionId!==n)break;r.push(ln(o.parent))}return r})}addFieldIndex(e,n){const r=go(e),i=function(l){return{indexId:l.indexId,collectionGroup:l.collectionGroup,fields:l.fields.map(u=>[u.fieldPath.canonicalString(),u.kind])}}(n);delete i.indexId;const s=r.add(i);if(n.indexState){const o=Mi(e);return s.next(l=>{o.put(s_(l,this.uid,n.indexState.sequenceNumber,n.indexState.offset))})}return s.next()}deleteFieldIndex(e,n){const r=go(e),i=Mi(e),s=Vi(e);return r.delete(n.indexId).next(()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const n=go(e),r=Vi(e),i=Mi(e);return n.j().next(()=>r.j()).next(()=>i.j())}createTargetIndexes(e,n){return M.forEach(this.cn(n),r=>this.getIndexType(e,r).next(i=>{if(i===0||i===1){const s=new c_(r).on();if(s!=null)return this.addFieldIndex(e,s)}}))}getDocumentsMatchingTarget(e,n){const r=Vi(e);let i=!0;const s=new Map;return M.forEach(this.cn(n),o=>this.ln(e,o).next(l=>{i&&(i=!!l),s.set(o,l)})).next(()=>{if(i){let o=Z();const l=[];return M.forEach(s,(u,c)=>{j("IndexedDbIndexManager",`Using index ${function(T){return`id=${T.indexId}|cg=${T.collectionGroup}|f=${T.fields.map(d=>`${d.fieldPath}:${d.kind}`).join(",")}`}(u)} to execute ${di(n)}`);const f=function(T,d){const g=Ad(d);if(g===void 0)return null;for(const I of Su(T,g.fieldPath))switch(I.op){case"array-contains-any":return I.value.arrayValue.values||[];case"array-contains":return[I.value]}return null}(c,u),m=function(T,d){const g=new Map;for(const I of Ur(d))for(const _ of Su(T,I.fieldPath))switch(_.op){case"==":case"in":g.set(I.fieldPath.canonicalString(),_.value);break;case"not-in":case"!=":return g.set(I.fieldPath.canonicalString(),_.value),Array.from(g.values())}return null}(c,u),v=function(T,d){const g=[];let I=!0;for(const _ of Ur(d)){const y=_.kind===0?qy(T,_.fieldPath,T.startAt):Gy(T,_.fieldPath,T.startAt);g.push(y.value),I&&(I=y.inclusive)}return new wr(g,I)}(c,u),A=function(T,d){const g=[];let I=!0;for(const _ of Ur(d)){const y=_.kind===0?Gy(T,_.fieldPath,T.endAt):qy(T,_.fieldPath,T.endAt);g.push(y.value),I&&(I=y.inclusive)}return new wr(g,I)}(c,u),k=this.hn(u,c,v),N=this.hn(u,c,A),L=this.Pn(u,c,m),R=this.In(u.indexId,f,k,v.inclusive,N,A.inclusive,L);return M.forEach(R,S=>r.G(S,n.limit).next(T=>{T.forEach(d=>{const g=$.fromSegments(d.documentKey);o.has(g)||(o=o.add(g),l.push(g))})}))}).next(()=>l)}return M.resolve(null)})}cn(e){let n=this.un.get(e);return n||(e.filters.length===0?n=[e]:n=tR(ue.create(e.filters,"and")).map(r=>Nd(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,n),n)}In(e,n,r,i,s,o,l){const u=(n!=null?n.length:1)*Math.max(r.length,s.length),c=u/(n!=null?n.length:1),f=[];for(let m=0;m<u;++m){const v=n?this.Tn(n[m/c]):El,A=this.En(e,v,r[m%c],i),k=this.dn(e,v,s[m%c],o),N=l.map(L=>this.En(e,v,L,!0));f.push(...this.createRange(A,k,N))}return f}En(e,n,r,i){const s=new Wr(e,$.empty(),n,r);return i?s:s.Jt()}dn(e,n,r,i){const s=new Wr(e,$.empty(),n,r);return i?s.Jt():s}ln(e,n){const r=new c_(n),i=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,i).next(s=>{let o=null;for(const l of s)r.tn(l)&&(!o||l.fields.length>o.fields.length)&&(o=l);return o})}getIndexType(e,n){let r=2;const i=this.cn(n);return M.forEach(i,s=>this.ln(e,s).next(o=>{o?r!==0&&o.fields.length<function(u){let c=new he(Ee.comparator),f=!1;for(const m of u.filters)for(const v of m.getFlattenedFilters())v.field.isKeyField()||(v.op==="array-contains"||v.op==="array-contains-any"?f=!0:c=c.add(v.field));for(const m of u.orderBy)m.field.isKeyField()||(c=c.add(m.field));return c.size+(f?1:0)}(s)&&(r=1):r=0})).next(()=>function(o){return o.limit!==null}(n)&&i.length>1&&r===2?1:r)}An(e,n){const r=new mo;for(const i of Ur(e)){const s=n.data.field(i.fieldPath);if(s==null)return null;const o=r.Ht(i.kind);Gr.bt.Pt(s,o)}return r.Wt()}Tn(e){const n=new mo;return Gr.bt.Pt(e,n.Ht(0)),n.Wt()}Rn(e,n){const r=new mo;return Gr.bt.Pt(hi(this.databaseId,n),r.Ht(function(s){const o=Ur(s);return o.length===0?0:o[o.length-1].kind}(e))),r.Wt()}Pn(e,n,r){if(r===null)return[];let i=[];i.push(new mo);let s=0;for(const o of Ur(e)){const l=r[s++];for(const u of i)if(this.Vn(n,o.fieldPath)&&fa(l))i=this.mn(i,o,l);else{const c=u.Ht(o.kind);Gr.bt.Pt(l,c)}}return this.fn(i)}hn(e,n,r){return this.Pn(e,n,r.position)}fn(e){const n=[];for(let r=0;r<e.length;++r)n[r]=e[r].Wt();return n}mn(e,n,r){const i=[...e],s=[];for(const o of r.arrayValue.values||[])for(const l of i){const u=new mo;u.seed(l.Wt()),Gr.bt.Pt(o,u.Ht(n.kind)),s.push(u)}return s}Vn(e,n){return!!e.filters.find(r=>r instanceof re&&r.field.isEqual(n)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,n){const r=go(e),i=Mi(e);return(n?r.U("collectionGroupIndex",IDBKeyRange.bound(n,n)):r.U()).next(s=>{const o=[];return M.forEach(s,l=>i.get([l.indexId,this.uid]).next(u=>{o.push(function(f,m){const v=m?new ua(m.sequenceNumber,new Ft(gi(m.readTime),new $(ln(m.documentKey)),m.largestBatchId)):ua.empty(),A=f.fields.map(([k,N])=>new Fl(Ee.fromServerFormat(k),N));return new Tu(f.indexId,f.collectionGroup,A,v)}(l,u))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>n.length===0?null:(n.sort((r,i)=>{const s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return s!==0?s:J(r.collectionGroup,i.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,r){const i=go(e),s=Mi(e);return this.gn(e).next(o=>i.U("collectionGroupIndex",IDBKeyRange.bound(n,n)).next(l=>M.forEach(l,u=>s.put(s_(u.indexId,this.uid,o,r)))))}updateIndexEntries(e,n){const r=new Map;return M.forEach(n,(i,s)=>{const o=r.get(i.collectionGroup);return(o?M.resolve(o):this.getFieldIndexes(e,i.collectionGroup)).next(l=>(r.set(i.collectionGroup,l),M.forEach(l,u=>this.pn(e,i,u).next(c=>{const f=this.yn(s,u);return c.isEqual(f)?M.resolve():this.wn(e,s,u,c,f)}))))})}Sn(e,n,r,i){return Vi(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.Rn(r,n.key),documentKey:n.key.path.toArray()})}bn(e,n,r,i){return Vi(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.Rn(r,n.key),n.key.path.toArray()])}pn(e,n,r){const i=Vi(e);let s=new he(qn);return i.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.Rn(r,n)])},(o,l)=>{s=s.add(new Wr(r.indexId,n,l.arrayValue,l.directionalValue))}).next(()=>s)}yn(e,n){let r=new he(qn);const i=this.An(n,e);if(i==null)return r;const s=Ad(n);if(s!=null){const o=e.data.field(s.fieldPath);if(fa(o))for(const l of o.arrayValue.values||[])r=r.add(new Wr(n.indexId,e.key,this.Tn(l),i))}else r=r.add(new Wr(n.indexId,e.key,El,i));return r}wn(e,n,r,i,s){j("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);const o=[];return function(u,c,f,m,v){const A=u.getIterator(),k=c.getIterator();let N=Ni(A),L=Ni(k);for(;N||L;){let R=!1,S=!1;if(N&&L){const T=f(N,L);T<0?S=!0:T>0&&(R=!0)}else N!=null?S=!0:R=!0;R?(m(L),L=Ni(k)):S?(v(N),N=Ni(A)):(N=Ni(A),L=Ni(k))}}(i,s,qn,l=>{o.push(this.Sn(e,n,r,l))},l=>{o.push(this.bn(e,n,r,l))}),M.waitFor(o)}gn(e){let n=1;return Mi(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,s)=>{s.done(),n=i.sequenceNumber+1}).next(()=>n)}createRange(e,n,r){r=r.sort((o,l)=>qn(o,l)).filter((o,l,u)=>!l||qn(o,u[l-1])!==0);const i=[];i.push(e);for(const o of r){const l=qn(o,e),u=qn(o,n);if(l===0)i[0]=e.Jt();else if(l>0&&u<0)i.push(o),i.push(o.Jt());else if(u>0)break}i.push(n);const s=[];for(let o=0;o<i.length;o+=2){if(this.Dn(i[o],i[o+1]))return[];const l=[i[o].indexId,this.uid,i[o].arrayValue,i[o].directionalValue,El,[]],u=[i[o+1].indexId,this.uid,i[o+1].arrayValue,i[o+1].directionalValue,El,[]];s.push(IDBKeyRange.bound(l,u))}return s}Dn(e,n){return qn(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(f_)}getMinOffset(e,n){return M.mapArray(this.cn(n),r=>this.ln(e,r).next(i=>i||W())).next(f_)}}function d_(t){return Qe(t,"collectionParents")}function Vi(t){return Qe(t,"indexEntries")}function go(t){return Qe(t,"indexConfiguration")}function Mi(t){return Qe(t,"indexState")}function f_(t){Q(t.length!==0);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){const i=t[r].indexState.offset;np(i,e)<0&&(e=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new Ft(e.readTime,e.documentKey,n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p_={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class It{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new It(e,It.DEFAULT_COLLECTION_PERCENTILE,It.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X1(t,e,n){const r=t.store("mutations"),i=t.store("documentMutations"),s=[],o=IDBKeyRange.only(n.batchId);let l=0;const u=r.J({range:o},(f,m,v)=>(l++,v.delete()));s.push(u.next(()=>{Q(l===1)}));const c=[];for(const f of n.mutations){const m=Jw(e,f.key.path,n.batchId);s.push(i.delete(m)),c.push(f.key)}return M.waitFor(s).next(()=>c)}function Cu(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw W();e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */It.DEFAULT_COLLECTION_PERCENTILE=10,It.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,It.DEFAULT=new It(41943040,It.DEFAULT_COLLECTION_PERCENTILE,It.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),It.DISABLED=new It(-1,0,0);class ic{constructor(e,n,r,i){this.userId=e,this.serializer=n,this.indexManager=r,this.referenceDelegate=i,this.Cn={}}static lt(e,n,r,i){Q(e.uid!=="");const s=e.isAuthenticated()?e.uid:"";return new ic(s,n,r,i)}checkEmpty(e){let n=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Gn(e).J({index:"userMutationsIndex",range:r},(i,s,o)=>{n=!1,o.done()}).next(()=>n)}addMutationBatch(e,n,r,i){const s=zi(e),o=Gn(e);return o.add({}).next(l=>{Q(typeof l=="number");const u=new up(l,n,r,i),c=function(A,k,N){const L=N.baseMutations.map(S=>ga(A.ct,S)),R=N.mutations.map(S=>ga(A.ct,S));return{userId:k,batchId:N.batchId,localWriteTimeMs:N.localWriteTime.toMillis(),baseMutations:L,mutations:R}}(this.serializer,this.userId,u),f=[];let m=new he((v,A)=>J(v.canonicalString(),A.canonicalString()));for(const v of i){const A=Jw(this.userId,v.key.path,l);m=m.add(v.key.path.popLast()),f.push(o.put(c)),f.push(s.put(A,GA))}return m.forEach(v=>{f.push(this.indexManager.addToCollectionParentIndex(e,v))}),e.addOnCommittedListener(()=>{this.Cn[l]=u.keys()}),M.waitFor(f).next(()=>u)})}lookupMutationBatch(e,n){return Gn(e).get(n).next(r=>r?(Q(r.userId===this.userId),qr(this.serializer,r)):null)}vn(e,n){return this.Cn[n]?M.resolve(this.Cn[n]):this.lookupMutationBatch(e,n).next(r=>{if(r){const i=r.keys();return this.Cn[n]=i,i}return null})}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=IDBKeyRange.lowerBound([this.userId,r]);let s=null;return Gn(e).J({index:"userMutationsIndex",range:i},(o,l,u)=>{l.userId===this.userId&&(Q(l.batchId>=r),s=qr(this.serializer,l)),u.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Gn(e).J({index:"userMutationsIndex",range:n,reverse:!0},(i,s,o)=>{r=s.batchId,o.done()}).next(()=>r)}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Gn(e).U("userMutationsIndex",n).next(r=>r.map(i=>qr(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,n){const r=Bl(this.userId,n.path),i=IDBKeyRange.lowerBound(r),s=[];return zi(e).J({range:i},(o,l,u)=>{const[c,f,m]=o,v=ln(f);if(c===this.userId&&n.path.isEqual(v))return Gn(e).get(m).next(A=>{if(!A)throw W();Q(A.userId===this.userId),s.push(qr(this.serializer,A))});u.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new he(J);const i=[];return n.forEach(s=>{const o=Bl(this.userId,s.path),l=IDBKeyRange.lowerBound(o),u=zi(e).J({range:l},(c,f,m)=>{const[v,A,k]=c,N=ln(A);v===this.userId&&s.path.isEqual(N)?r=r.add(k):m.done()});i.push(u)}),M.waitFor(i).next(()=>this.Fn(e,r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1,s=Bl(this.userId,r),o=IDBKeyRange.lowerBound(s);let l=new he(J);return zi(e).J({range:o},(u,c,f)=>{const[m,v,A]=u,k=ln(v);m===this.userId&&r.isPrefixOf(k)?k.length===i&&(l=l.add(A)):f.done()}).next(()=>this.Fn(e,l))}Fn(e,n){const r=[],i=[];return n.forEach(s=>{i.push(Gn(e).get(s).next(o=>{if(o===null)throw W();Q(o.userId===this.userId),r.push(qr(this.serializer,o))}))}),M.waitFor(i).next(()=>r)}removeMutationBatch(e,n){return X1(e._e,this.userId,n).next(r=>(e.addOnCommittedListener(()=>{this.Mn(n.batchId)}),M.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}Mn(e){delete this.Cn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return M.resolve();const r=IDBKeyRange.lowerBound(function(o){return[o]}(this.userId)),i=[];return zi(e).J({range:r},(s,o,l)=>{if(s[0]===this.userId){const u=ln(s[1]);i.push(u)}else l.done()}).next(()=>{Q(i.length===0)})})}containsKey(e,n){return J1(e,this.userId,n)}xn(e){return Z1(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function J1(t,e,n){const r=Bl(e,n.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return zi(t).J({range:s,H:!0},(l,u,c)=>{const[f,m,v]=l;f===e&&m===i&&(o=!0),c.done()}).next(()=>o)}function Gn(t){return Qe(t,"mutations")}function zi(t){return Qe(t,"documentMutations")}function Z1(t){return Qe(t,"mutationQueues")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yi{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new yi(0)}static Ln(){return new yi(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iR{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.Bn(e).next(n=>{const r=new yi(n.highestTargetId);return n.highestTargetId=r.next(),this.kn(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Bn(e).next(n=>Y.fromTimestamp(new Te(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Bn(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,r){return this.Bn(e).next(i=>(i.highestListenSequenceNumber=n,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),n>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=n),this.kn(e,i)))}addTargetData(e,n){return this.qn(e,n).next(()=>this.Bn(e).next(r=>(r.targetCount+=1,this.Qn(n,r),this.kn(e,r))))}updateTargetData(e,n){return this.qn(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>Li(e).delete(n.targetId)).next(()=>this.Bn(e)).next(r=>(Q(r.targetCount>0),r.targetCount-=1,this.kn(e,r)))}removeTargets(e,n,r){let i=0;const s=[];return Li(e).J((o,l)=>{const u=Po(l);u.sequenceNumber<=n&&r.get(u.targetId)===null&&(i++,s.push(this.removeTargetData(e,u)))}).next(()=>M.waitFor(s)).next(()=>i)}forEachTarget(e,n){return Li(e).J((r,i)=>{const s=Po(i);n(s)})}Bn(e){return m_(e).get("targetGlobalKey").next(n=>(Q(n!==null),n))}kn(e,n){return m_(e).put("targetGlobalKey",n)}qn(e,n){return Li(e).put(H1(this.serializer,n))}Qn(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Bn(e).next(n=>n.targetCount)}getTargetData(e,n){const r=di(n),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let s=null;return Li(e).J({range:i,index:"queryTargetsIndex"},(o,l,u)=>{const c=Po(l);Aa(n,c.target)&&(s=c,u.done())}).next(()=>s)}addMatchingKeys(e,n,r){const i=[],s=Xn(e);return n.forEach(o=>{const l=yt(o.path);i.push(s.put({targetId:r,path:l})),i.push(this.referenceDelegate.addReference(e,r,o))}),M.waitFor(i)}removeMatchingKeys(e,n,r){const i=Xn(e);return M.forEach(n,s=>{const o=yt(s.path);return M.waitFor([i.delete([r,o]),this.referenceDelegate.removeReference(e,r,s)])})}removeMatchingKeysForTargetId(e,n){const r=Xn(e),i=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,n){const r=IDBKeyRange.bound([n],[n+1],!1,!0),i=Xn(e);let s=Z();return i.J({range:r,H:!0},(o,l,u)=>{const c=ln(o[1]),f=new $(c);s=s.add(f)}).next(()=>s)}containsKey(e,n){const r=yt(n.path),i=IDBKeyRange.bound([r],[Gw(r)],!1,!0);let s=0;return Xn(e).J({index:"documentTargetsIndex",H:!0,range:i},([o,l],u,c)=>{o!==0&&(s++,c.done())}).next(()=>s>0)}ot(e,n){return Li(e).get(n).next(r=>r?Po(r):null)}}function Li(t){return Qe(t,"targets")}function m_(t){return Qe(t,"targetGlobal")}function Xn(t){return Qe(t,"targetDocuments")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g_([t,e],[n,r]){const i=J(t,n);return i===0?J(e,r):i}class sR{constructor(e){this.Kn=e,this.buffer=new he(g_),this.$n=0}Un(){return++this.$n}Wn(e){const n=[e,this.Un()];if(this.buffer.size<this.Kn)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();g_(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class oR{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Gn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.zn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return this.Gn!==null}zn(e){j("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Gn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Cr(n)?j("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n):await Rr(n)}await this.zn(3e5)})}}class aR{constructor(e,n){this.jn=e,this.params=n}calculateTargetCount(e,n){return this.jn.Hn(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return M.resolve(Pt.oe);const r=new sR(n);return this.jn.forEachTarget(e,i=>r.Wn(i.sequenceNumber)).next(()=>this.jn.Jn(e,i=>r.Wn(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.jn.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.jn.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(j("LruGarbageCollector","Garbage collection skipped; disabled"),M.resolve(p_)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(j("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),p_):this.Yn(e,n))}getCacheSize(e){return this.jn.getCacheSize(e)}Yn(e,n){let r,i,s,o,l,u,c;const f=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(m=>(m>this.params.maximumSequenceNumbersToCollect?(j("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${m}`),i=this.params.maximumSequenceNumbersToCollect):i=m,o=Date.now(),this.nthSequenceNumber(e,i))).next(m=>(r=m,l=Date.now(),this.removeTargets(e,r,n))).next(m=>(s=m,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(m=>(c=Date.now(),Oi()<=ie.DEBUG&&j("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-f}ms
	Determined least recently used ${i} in `+(l-o)+`ms
	Removed ${s} targets in `+(u-l)+`ms
	Removed ${m} documents in `+(c-u)+`ms
Total Duration: ${c-f}ms`),M.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:m})))}}function lR(t,e){return new aR(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uR{constructor(e,n){this.db=e,this.garbageCollector=lR(this,n)}Hn(e){const n=this.Zn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}Zn(e){let n=0;return this.Jn(e,r=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}Jn(e,n){return this.Xn(e,(r,i)=>n(i))}addReference(e,n,r){return Il(e,r)}removeReference(e,n,r){return Il(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return Il(e,n)}er(e,n){return function(i,s){let o=!1;return Z1(i).Y(l=>J1(i,l,s).next(u=>(u&&(o=!0),M.resolve(!u)))).next(()=>o)}(e,n)}removeOrphanedDocuments(e,n){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.Xn(e,(o,l)=>{if(l<=n){const u=this.er(e,o).next(c=>{if(!c)return s++,r.getEntry(e,o).next(()=>(r.removeEntry(o,Y.min()),Xn(e).delete(function(m){return[0,yt(m.path)]}(o))))});i.push(u)}}).next(()=>M.waitFor(i)).next(()=>r.apply(e)).next(()=>s)}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return Il(e,n)}Xn(e,n){const r=Xn(e);let i,s=Pt.oe;return r.J({index:"documentTargetsIndex"},([o,l],{path:u,sequenceNumber:c})=>{o===0?(s!==Pt.oe&&n(new $(ln(i)),s),s=c,i=u):s=Pt.oe}).next(()=>{s!==Pt.oe&&n(new $(ln(i)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Il(t,e){return Xn(t).put(function(r,i){return{targetId:0,path:yt(r.path),sequenceNumber:i}}(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eE{constructor(){this.changes=new br(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,_e.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?M.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cR{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return Fr(e).put(r)}removeEntry(e,n,r){return Fr(e).delete(function(s,o){const l=s.path.toArray();return[l.slice(0,l.length-2),l[l.length-2],Au(o),l[l.length-1]]}(n,r))}updateMetadata(e,n){return this.getMetadata(e).next(r=>(r.byteSize+=n,this.tr(e,r)))}getEntry(e,n){let r=_e.newInvalidDocument(n);return Fr(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(yo(n))},(i,s)=>{r=this.nr(n,s)}).next(()=>r)}rr(e,n){let r={size:0,document:_e.newInvalidDocument(n)};return Fr(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(yo(n))},(i,s)=>{r={document:this.nr(n,s),size:Cu(s)}}).next(()=>r)}getEntries(e,n){let r=Rt();return this.ir(e,n,(i,s)=>{const o=this.nr(i,s);r=r.insert(i,o)}).next(()=>r)}sr(e,n){let r=Rt(),i=new me($.comparator);return this.ir(e,n,(s,o)=>{const l=this.nr(s,o);r=r.insert(s,l),i=i.insert(s,Cu(o))}).next(()=>({documents:r,_r:i}))}ir(e,n,r){if(n.isEmpty())return M.resolve();let i=new he(v_);n.forEach(u=>i=i.add(u));const s=IDBKeyRange.bound(yo(i.first()),yo(i.last())),o=i.getIterator();let l=o.getNext();return Fr(e).J({index:"documentKeyIndex",range:s},(u,c,f)=>{const m=$.fromSegments([...c.prefixPath,c.collectionGroup,c.documentId]);for(;l&&v_(l,m)<0;)r(l,null),l=o.getNext();l&&l.isEqual(m)&&(r(l,c),l=o.hasNext()?o.getNext():null),l?f.$(yo(l)):f.done()}).next(()=>{for(;l;)r(l,null),l=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,n,r,i,s){const o=n.path,l=[o.popLast().toArray(),o.lastSegment(),Au(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Fr(e).U(IDBKeyRange.bound(l,u,!0)).next(c=>{s==null||s.incrementDocumentReadCount(c.length);let f=Rt();for(const m of c){const v=this.nr($.fromSegments(m.prefixPath.concat(m.collectionGroup,m.documentId)),m);v.isFoundDocument()&&(Ca(n,v)||i.has(v.key))&&(f=f.insert(v.key,v))}return f})}getAllFromCollectionGroup(e,n,r,i){let s=Rt();const o=__(n,r),l=__(n,Ft.max());return Fr(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,l,!0)},(u,c,f)=>{const m=this.nr($.fromSegments(c.prefixPath.concat(c.collectionGroup,c.documentId)),c);s=s.insert(m.key,m),s.size===i&&f.done()}).next(()=>s)}newChangeBuffer(e){return new hR(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return y_(e).get("remoteDocumentGlobalKey").next(n=>(Q(!!n),n))}tr(e,n){return y_(e).put("remoteDocumentGlobalKey",n)}nr(e,n){if(n){const r=Q2(this.serializer,n);if(!(r.isNoDocument()&&r.version.isEqual(Y.min())))return r}return _e.newInvalidDocument(e)}}function tE(t){return new cR(t)}class hR extends eE{constructor(e,n){super(),this.ar=e,this.trackRemovals=n,this.ur=new br(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const n=[];let r=0,i=new he((s,o)=>J(s.canonicalString(),o.canonicalString()));return this.changes.forEach((s,o)=>{const l=this.ur.get(s);if(n.push(this.ar.removeEntry(e,s,l.readTime)),o.isValidDocument()){const u=r_(this.ar.serializer,o);i=i.add(s.path.popLast());const c=Cu(u);r+=c-l.size,n.push(this.ar.addEntry(e,s,u))}else if(r-=l.size,this.trackRemovals){const u=r_(this.ar.serializer,o.convertToNoDocument(Y.min()));n.push(this.ar.addEntry(e,s,u))}}),i.forEach(s=>{n.push(this.ar.indexManager.addToCollectionParentIndex(e,s))}),n.push(this.ar.updateMetadata(e,r)),M.waitFor(n)}getFromCache(e,n){return this.ar.rr(e,n).next(r=>(this.ur.set(n,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,n){return this.ar.sr(e,n).next(({documents:r,_r:i})=>(i.forEach((s,o)=>{this.ur.set(s,{size:o,readTime:r.get(s).readTime})}),r))}}function y_(t){return Qe(t,"remoteDocumentGlobal")}function Fr(t){return Qe(t,"remoteDocumentsV14")}function yo(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function __(t,e){const n=e.documentKey.path.toArray();return[t,Au(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function v_(t,e){const n=t.path.toArray(),r=e.path.toArray();let i=0;for(let s=0;s<n.length-2&&s<r.length-2;++s)if(i=J(n[s],r[s]),i)return i;return i=J(n.length,r.length),i||(i=J(n[n.length-2],r[r.length-2]),i||J(n[n.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dR{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nE{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Bo(r.mutation,i,At.empty(),Te.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Z()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Z()){const i=un();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=xo();return s.forEach((l,u)=>{o=o.insert(l,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=un();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Z()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,l)=>{n.set(o,l)})})}computeViews(e,n,r,i){let s=Rt();const o=Fo(),l=function(){return Fo()}();return n.forEach((u,c)=>{const f=r.get(c.key);i.has(c.key)&&(f===void 0||f.mutation instanceof Fn)?s=s.insert(c.key,c):f!==void 0?(o.set(c.key,f.mutation.getFieldMask()),Bo(f.mutation,c,f.mutation.getFieldMask(),Te.now())):o.set(c.key,At.empty())}),this.recalculateAndSaveOverlays(e,s).next(u=>(u.forEach((c,f)=>o.set(c,f)),n.forEach((c,f)=>{var m;return l.set(c,new dR(f,(m=o.get(c))!==null&&m!==void 0?m:null))}),l))}recalculateAndSaveOverlays(e,n){const r=Fo();let i=new me((o,l)=>o-l),s=Z();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const l of o)l.keys().forEach(u=>{const c=n.get(u);if(c===null)return;let f=r.get(u)||At.empty();f=l.applyToLocalView(c,f),r.set(u,f);const m=(i.get(l.batchId)||Z()).add(u);i=i.insert(l.batchId,m)})}).next(()=>{const o=[],l=i.getReverseIterator();for(;l.hasNext();){const u=l.getNext(),c=u.key,f=u.value,m=w1();f.forEach(v=>{if(!s.has(v)){const A=R1(n.get(v),r.get(v));A!==null&&m.set(v,A),s=s.add(v)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,m))}return M.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return $.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):op(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):M.resolve(un());let l=-1,u=s;return o.next(c=>M.forEach(c,(f,m)=>(l<m.largestBatchId&&(l=m.largestBatchId),s.get(f)?M.resolve():this.remoteDocumentCache.getEntry(e,f).next(v=>{u=u.insert(f,v)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,u,c,Z())).next(f=>({batchId:l,changes:v1(f)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new $(n)).next(r=>{let i=xo();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=xo();return this.indexManager.getCollectionParents(e,s).next(l=>M.forEach(l,u=>{const c=function(m,v){return new On(v,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)}(n,u.child(s));return this.getDocumentsMatchingCollectionQuery(e,c,r,i).next(f=>{f.forEach((m,v)=>{o=o.insert(m,v)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((u,c)=>{const f=c.getKey();o.get(f)===null&&(o=o.insert(f,_e.newInvalidDocument(f)))});let l=xo();return o.forEach((u,c)=>{const f=s.get(u);f!==void 0&&Bo(f.mutation,c,At.empty(),Te.now()),Ca(n,c)&&(l=l.insert(u,c))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fR{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,n){return M.resolve(this.cr.get(n))}saveBundleMetadata(e,n){return this.cr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Oe(i.createTime)}}(n)),M.resolve()}getNamedQuery(e,n){return M.resolve(this.lr.get(n))}saveNamedQuery(e,n){return this.lr.set(n.name,function(i){return{name:i.name,query:pp(i.bundledQuery),readTime:Oe(i.readTime)}}(n)),M.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pR{constructor(){this.overlays=new me($.comparator),this.hr=new Map}getOverlay(e,n){return M.resolve(this.overlays.get(n))}getOverlays(e,n){const r=un();return M.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ht(e,n,s)}),M.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.hr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.hr.delete(r)),M.resolve()}getOverlaysForCollection(e,n,r){const i=un(),s=n.length+1,o=new $(n.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const u=l.getNext().value,c=u.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return M.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new me((c,f)=>c-f);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let f=s.get(c.largestBatchId);f===null&&(f=un(),s=s.insert(c.largestBatchId,f)),f.set(c.getKey(),c)}}const l=un(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((c,f)=>l.set(c,f)),!(l.size()>=i)););return M.resolve(l)}ht(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.hr.get(i.largestBatchId).delete(r.key);this.hr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new hp(n,r));let s=this.hr.get(n);s===void 0&&(s=Z(),this.hr.set(n,s)),this.hr.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yp{constructor(){this.Pr=new he(qe.Ir),this.Tr=new he(qe.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,n){const r=new qe(e,n);this.Pr=this.Pr.add(r),this.Tr=this.Tr.add(r)}dr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Ar(new qe(e,n))}Rr(e,n){e.forEach(r=>this.removeReference(r,n))}Vr(e){const n=new $(new ne([])),r=new qe(n,e),i=new qe(n,e+1),s=[];return this.Tr.forEachInRange([r,i],o=>{this.Ar(o),s.push(o.key)}),s}mr(){this.Pr.forEach(e=>this.Ar(e))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){const n=new $(new ne([])),r=new qe(n,e),i=new qe(n,e+1);let s=Z();return this.Tr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new qe(e,0),r=this.Pr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class qe{constructor(e,n){this.key=e,this.pr=n}static Ir(e,n){return $.comparator(e.key,n.key)||J(e.pr,n.pr)}static Er(e,n){return J(e.pr,n.pr)||$.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mR{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.yr=1,this.wr=new he(qe.Ir)}checkEmpty(e){return M.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new up(s,n,r,i);this.mutationQueue.push(o);for(const l of i)this.wr=this.wr.add(new qe(l.key,s)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return M.resolve(o)}lookupMutationBatch(e,n){return M.resolve(this.Sr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.br(r),s=i<0?0:i;return M.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return M.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(e){return M.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new qe(n,0),i=new qe(n,Number.POSITIVE_INFINITY),s=[];return this.wr.forEachInRange([r,i],o=>{const l=this.Sr(o.pr);s.push(l)}),M.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new he(J);return n.forEach(i=>{const s=new qe(i,0),o=new qe(i,Number.POSITIVE_INFINITY);this.wr.forEachInRange([s,o],l=>{r=r.add(l.pr)})}),M.resolve(this.Dr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;$.isDocumentKey(s)||(s=s.child(""));const o=new qe(new $(s),0);let l=new he(J);return this.wr.forEachWhile(u=>{const c=u.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(l=l.add(u.pr)),!0)},o),M.resolve(this.Dr(l))}Dr(e){const n=[];return e.forEach(r=>{const i=this.Sr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){Q(this.Cr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.wr;return M.forEach(n.mutations,i=>{const s=new qe(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.wr=r})}Mn(e){}containsKey(e,n){const r=new qe(n,0),i=this.wr.firstAfterOrEqual(r);return M.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,M.resolve()}Cr(e,n){return this.br(e)}br(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Sr(e){const n=this.br(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gR{constructor(e){this.vr=e,this.docs=function(){return new me($.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.vr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return M.resolve(r?r.document.mutableCopy():_e.newInvalidDocument(n))}getEntries(e,n){let r=Rt();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():_e.newInvalidDocument(i))}),M.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=Rt();const o=n.path,l=new $(o.child("")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:c,value:{document:f}}=u.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||np(Kw(f),r)<=0||(i.has(f.key)||Ca(n,f))&&(s=s.insert(f.key,f.mutableCopy()))}return M.resolve(s)}getAllFromCollectionGroup(e,n,r,i){W()}Fr(e,n){return M.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new yR(this)}getSize(e){return M.resolve(this.size)}}class yR extends eE{constructor(e){super(),this.ar=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.ar.addEntry(e,i)):this.ar.removeEntry(r)}),M.waitFor(n)}getFromCache(e,n){return this.ar.getEntry(e,n)}getAllFromCache(e,n){return this.ar.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _R{constructor(e){this.persistence=e,this.Mr=new br(n=>di(n),Aa),this.lastRemoteSnapshotVersion=Y.min(),this.highestTargetId=0,this.Or=0,this.Nr=new yp,this.targetCount=0,this.Lr=yi.Nn()}forEachTarget(e,n){return this.Mr.forEach((r,i)=>n(i)),M.resolve()}getLastRemoteSnapshotVersion(e){return M.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return M.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Lr.next(),M.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Or&&(this.Or=n),M.resolve()}qn(e){this.Mr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Lr=new yi(n),this.highestTargetId=n),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,n){return this.qn(n),this.targetCount+=1,M.resolve()}updateTargetData(e,n){return this.qn(n),M.resolve()}removeTargetData(e,n){return this.Mr.delete(n.target),this.Nr.Vr(n.targetId),this.targetCount-=1,M.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Mr.forEach((o,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.Mr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,l.targetId)),i++)}),M.waitFor(s).next(()=>i)}getTargetCount(e){return M.resolve(this.targetCount)}getTargetData(e,n){const r=this.Mr.get(n)||null;return M.resolve(r)}addMatchingKeys(e,n,r){return this.Nr.dr(n,r),M.resolve()}removeMatchingKeys(e,n,r){this.Nr.Rr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),M.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Nr.Vr(n),M.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Nr.gr(n);return M.resolve(r)}containsKey(e,n){return M.resolve(this.Nr.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rE{constructor(e,n){this.Br={},this.overlays={},this.kr=new Pt(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new _R(this),this.indexManager=new nR,this.remoteDocumentCache=function(i){return new gR(i)}(r=>this.referenceDelegate.Kr(r)),this.serializer=new K1(n),this.$r=new fR(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new pR,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Br[e.toKey()];return r||(r=new mR(n,this.referenceDelegate),this.Br[e.toKey()]=r),r}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,n,r){j("MemoryPersistence","Starting transaction:",e);const i=new vR(this.kr.next());return this.referenceDelegate.Ur(),r(i).next(s=>this.referenceDelegate.Wr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Gr(e,n){return M.or(Object.values(this.Br).map(r=>()=>r.containsKey(e,n)))}}class vR extends Qw{constructor(e){super(),this.currentSequenceNumber=e}}class sc{constructor(e){this.persistence=e,this.zr=new yp,this.jr=null}static Hr(e){return new sc(e)}get Jr(){if(this.jr)return this.jr;throw W()}addReference(e,n,r){return this.zr.addReference(r,n),this.Jr.delete(r.toString()),M.resolve()}removeReference(e,n,r){return this.zr.removeReference(r,n),this.Jr.add(r.toString()),M.resolve()}markPotentiallyOrphaned(e,n){return this.Jr.add(n.toString()),M.resolve()}removeTarget(e,n){this.zr.Vr(n.targetId).forEach(i=>this.Jr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Jr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}Ur(){this.jr=new Set}Wr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return M.forEach(this.Jr,r=>{const i=$.fromPath(r);return this.Yr(e,i).next(s=>{s||n.removeEntry(i,Y.min())})}).next(()=>(this.jr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Yr(e,n).next(r=>{r?this.Jr.delete(n.toString()):this.Jr.add(n.toString())})}Kr(e){return 0}Yr(e,n){return M.or([()=>M.resolve(this.zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Gr(e,n)])}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wR{constructor(e){this.serializer=e}O(e,n,r,i){const s=new Zu("createOrUpgrade",n);r<1&&i>=1&&(function(u){u.createObjectStore("owner")}(e),function(u){u.createObjectStore("mutationQueues",{keyPath:"userId"}),u.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Vy,{unique:!0}),u.createObjectStore("documentMutations")}(e),w_(e),function(u){u.createObjectStore("remoteDocuments")}(e));let o=M.resolve();return r<3&&i>=3&&(r!==0&&(function(u){u.deleteObjectStore("targetDocuments"),u.deleteObjectStore("targets"),u.deleteObjectStore("targetGlobal")}(e),w_(e)),o=o.next(()=>function(u){const c=u.store("targetGlobal"),f={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Y.min().toTimestamp(),targetCount:0};return c.put("targetGlobalKey",f)}(s))),r<4&&i>=4&&(r!==0&&(o=o.next(()=>function(u,c){return c.store("mutations").U().next(f=>{u.deleteObjectStore("mutations"),u.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Vy,{unique:!0});const m=c.store("mutations"),v=f.map(A=>m.put(A));return M.waitFor(v)})}(e,s))),o=o.next(()=>{(function(u){u.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),r<5&&i>=5&&(o=o.next(()=>this.Xr(s))),r<6&&i>=6&&(o=o.next(()=>(function(u){u.createObjectStore("remoteDocumentGlobal")}(e),this.ei(s)))),r<7&&i>=7&&(o=o.next(()=>this.ti(s))),r<8&&i>=8&&(o=o.next(()=>this.ni(e,s))),r<9&&i>=9&&(o=o.next(()=>{(function(u){u.objectStoreNames.contains("remoteDocumentChanges")&&u.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(o=o.next(()=>this.ri(s))),r<11&&i>=11&&(o=o.next(()=>{(function(u){u.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(u){u.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(o=o.next(()=>{(function(u){const c=u.createObjectStore("documentOverlays",{keyPath:r2});c.createIndex("collectionPathOverlayIndex",i2,{unique:!1}),c.createIndex("collectionGroupOverlayIndex",s2,{unique:!1})})(e)})),r<13&&i>=13&&(o=o.next(()=>function(u){const c=u.createObjectStore("remoteDocumentsV14",{keyPath:WA});c.createIndex("documentKeyIndex",KA),c.createIndex("collectionGroupIndex",HA)}(e)).next(()=>this.ii(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(o=o.next(()=>this.si(e,s))),r<15&&i>=15&&(o=o.next(()=>function(u){u.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),u.createObjectStore("indexState",{keyPath:ZA}).createIndex("sequenceNumberIndex",e2,{unique:!1}),u.createObjectStore("indexEntries",{keyPath:t2}).createIndex("documentKeyIndex",n2,{unique:!1})}(e))),r<16&&i>=16&&(o=o.next(()=>{n.objectStore("indexState").clear()}).next(()=>{n.objectStore("indexEntries").clear()})),o}ei(e){let n=0;return e.store("remoteDocuments").J((r,i)=>{n+=Cu(i)}).next(()=>{const r={byteSize:n};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Xr(e){const n=e.store("mutationQueues"),r=e.store("mutations");return n.U().next(i=>M.forEach(i,s=>{const o=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return r.U("userMutationsIndex",o).next(l=>M.forEach(l,u=>{Q(u.userId===s.userId);const c=qr(this.serializer,u);return X1(e,s.userId,c).next(()=>{})}))}))}ti(e){const n=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const s=[];return r.J((o,l)=>{const u=new ne(o),c=function(m){return[0,yt(m)]}(u);s.push(n.get(c).next(f=>f?M.resolve():(m=>n.put({targetId:0,path:yt(m),sequenceNumber:i.highestListenSequenceNumber}))(u)))}).next(()=>M.waitFor(s))})}ni(e,n){e.createObjectStore("collectionParents",{keyPath:JA});const r=n.store("collectionParents"),i=new gp,s=o=>{if(i.add(o)){const l=o.lastSegment(),u=o.popLast();return r.put({collectionId:l,parent:yt(u)})}};return n.store("remoteDocuments").J({H:!0},(o,l)=>{const u=new ne(o);return s(u.popLast())}).next(()=>n.store("documentMutations").J({H:!0},([o,l,u],c)=>{const f=ln(l);return s(f.popLast())}))}ri(e){const n=e.store("targets");return n.J((r,i)=>{const s=Po(i),o=H1(this.serializer,s);return n.put(o)})}ii(e,n){const r=n.store("remoteDocuments"),i=[];return r.J((s,o)=>{const l=n.store("remoteDocumentsV14"),u=function(m){return m.document?new $(ne.fromString(m.document.name).popFirst(5)):m.noDocument?$.fromSegments(m.noDocument.path):m.unknownDocument?$.fromSegments(m.unknownDocument.path):W()}(o).path.toArray(),c={prefixPath:u.slice(0,u.length-2),collectionGroup:u[u.length-2],documentId:u[u.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};i.push(l.put(c))}).next(()=>M.waitFor(i))}si(e,n){const r=n.store("mutations"),i=tE(this.serializer),s=new rE(sc.Hr,this.serializer.ct);return r.U().next(o=>{const l=new Map;return o.forEach(u=>{var c;let f=(c=l.get(u.userId))!==null&&c!==void 0?c:Z();qr(this.serializer,u).keys().forEach(m=>f=f.add(m)),l.set(u.userId,f)}),M.forEach(l,(u,c)=>{const f=new We(c),m=rc.lt(this.serializer,f),v=s.getIndexManager(f),A=ic.lt(f,this.serializer,v,s.referenceDelegate);return new nE(i,A,m,v).recalculateAndSaveOverlaysForDocumentKeys(new Rd(n,Pt.oe),u).next()})})}}function w_(t){t.createObjectStore("targetDocuments",{keyPath:YA}).createIndex("documentTargetsIndex",XA,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",QA,{unique:!0}),t.createObjectStore("targetGlobal")}const Ih="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class _p{constructor(e,n,r,i,s,o,l,u,c,f,m=16){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.oi=s,this.window=o,this.document=l,this._i=c,this.ai=f,this.ui=m,this.kr=null,this.qr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.li=null,this.hi=null,this.Pi=Number.NEGATIVE_INFINITY,this.Ii=v=>Promise.resolve(),!_p.D())throw new B(O.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new uR(this,i),this.Ti=n+"main",this.serializer=new K1(u),this.Ei=new dn(this.Ti,this.ui,new wR(this.serializer)),this.Qr=new iR(this.referenceDelegate,this.serializer),this.remoteDocumentCache=tE(this.serializer),this.$r=new Y2,this.window&&this.window.localStorage?this.di=this.window.localStorage:(this.di=null,f===!1&&Le("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Ai().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new B(O.FAILED_PRECONDITION,Ih);return this.Ri(),this.Vi(),this.mi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Qr.getHighestSequenceNumber(e))}).then(e=>{this.kr=new Pt(e,this._i)}).then(()=>{this.qr=!0}).catch(e=>(this.Ei&&this.Ei.close(),Promise.reject(e)))}fi(e){return this.Ii=async n=>{if(this.started)return e(n)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ei.L(async n=>{n.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.oi.enqueueAndForget(async()=>{this.started&&await this.Ai()}))}Ai(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Tl(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.gi(e).next(n=>{n||(this.isPrimary=!1,this.oi.enqueueRetryable(()=>this.Ii(!1)))})}).next(()=>this.pi(e)).next(n=>this.isPrimary&&!n?this.yi(e).next(()=>!1):!!n&&this.wi(e).next(()=>!0))).catch(e=>{if(Cr(e))return j("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return j("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.oi.enqueueRetryable(()=>this.Ii(e)),this.isPrimary=e})}gi(e){return _o(e).get("owner").next(n=>M.resolve(this.Si(n)))}bi(e){return Tl(e).delete(this.clientId)}async Di(){if(this.isPrimary&&!this.Ci(this.Pi,18e5)){this.Pi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{const r=Qe(n,"clientMetadata");return r.U().next(i=>{const s=this.vi(i,18e5),o=i.filter(l=>s.indexOf(l)===-1);return M.forEach(o,l=>r.delete(l.clientId)).next(()=>o)})}).catch(()=>[]);if(this.di)for(const n of e)this.di.removeItem(this.Fi(n.clientId))}}mi(){this.hi=this.oi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Ai().then(()=>this.Di()).then(()=>this.mi()))}Si(e){return!!e&&e.ownerId===this.clientId}pi(e){return this.ai?M.resolve(!0):_o(e).get("owner").next(n=>{if(n!==null&&this.Ci(n.leaseTimestampMs,5e3)&&!this.Mi(n.ownerId)){if(this.Si(n)&&this.networkEnabled)return!0;if(!this.Si(n)){if(!n.allowTabSynchronization)throw new B(O.FAILED_PRECONDITION,Ih);return!1}}return!(!this.networkEnabled||!this.inForeground)||Tl(e).U().next(r=>this.vi(r,5e3).find(i=>{if(this.clientId!==i.clientId){const s=!this.networkEnabled&&i.networkEnabled,o=!this.inForeground&&i.inForeground,l=this.networkEnabled===i.networkEnabled;if(s||o&&l)return!0}return!1})===void 0)}).next(n=>(this.isPrimary!==n&&j("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}async shutdown(){this.qr=!1,this.xi(),this.hi&&(this.hi.cancel(),this.hi=null),this.Oi(),this.Ni(),await this.Ei.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{const n=new Rd(e,Pt.oe);return this.yi(n).next(()=>this.bi(n))}),this.Ei.close(),this.Li()}vi(e,n){return e.filter(r=>this.Ci(r.updateTimeMs,n)&&!this.Mi(r.clientId))}Bi(){return this.runTransaction("getActiveClients","readonly",e=>Tl(e).U().next(n=>this.vi(n,18e5).map(r=>r.clientId)))}get started(){return this.qr}getMutationQueue(e,n){return ic.lt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new rR(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return rc.lt(this.serializer,e)}getBundleCache(){return this.$r}runTransaction(e,n,r){j("IndexedDbPersistence","Starting transaction:",e);const i=n==="readonly"?"readonly":"readwrite",s=function(u){return u===16?a2:u===15?n1:u===14?t1:u===13?e1:u===12?o2:u===11?Zw:void W()}(this.ui);let o;return this.Ei.runTransaction(e,i,s,l=>(o=new Rd(l,this.kr?this.kr.next():Pt.oe),n==="readwrite-primary"?this.gi(o).next(u=>!!u||this.pi(o)).next(u=>{if(!u)throw Le(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.oi.enqueueRetryable(()=>this.Ii(!1)),new B(O.FAILED_PRECONDITION,Hw);return r(o)}).next(u=>this.wi(o).next(()=>u)):this.ki(o).next(()=>r(o)))).then(l=>(o.raiseOnCommittedEvent(),l))}ki(e){return _o(e).get("owner").next(n=>{if(n!==null&&this.Ci(n.leaseTimestampMs,5e3)&&!this.Mi(n.ownerId)&&!this.Si(n)&&!(this.ai||this.allowTabSynchronization&&n.allowTabSynchronization))throw new B(O.FAILED_PRECONDITION,Ih)})}wi(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return _o(e).put("owner",n)}static D(){return dn.D()}yi(e){const n=_o(e);return n.get("owner").next(r=>this.Si(r)?(j("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):M.resolve())}Ci(e,n){const r=Date.now();return!(e<r-n)&&(!(e>r)||(Le(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Ri(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.li=()=>{this.oi.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.Ai()))},this.document.addEventListener("visibilitychange",this.li),this.inForeground=this.document.visibilityState==="visible")}Oi(){this.li&&(this.document.removeEventListener("visibilitychange",this.li),this.li=null)}Vi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.ci=()=>{this.xi();const n=/(?:Version|Mobile)\/1[456]/;Iw()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.oi.enterRestrictedMode(!0),this.oi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}Ni(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Mi(e){var n;try{const r=((n=this.di)===null||n===void 0?void 0:n.getItem(this.Fi(e)))!==null;return j("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Le("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}xi(){if(this.di)try{this.di.setItem(this.Fi(this.clientId),String(Date.now()))}catch(e){Le("Failed to set zombie client id.",e)}}Li(){if(this.di)try{this.di.removeItem(this.Fi(this.clientId))}catch{}}Fi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function _o(t){return Qe(t,"owner")}function Tl(t){return Qe(t,"clientMetadata")}function vp(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wp{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.qi=r,this.Qi=i}static Ki(e,n){let r=Z(),i=Z();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new wp(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ER{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iE{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=function(){return Iw()?8:Yw(Eu())>0?6:4}()}initialize(e,n){this.zi=e,this.indexManager=n,this.$i=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.ji(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Hi(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new ER;return this.Ji(e,n,o).next(l=>{if(s.result=l,this.Ui)return this.Yi(e,n,o,l.size)})}).next(()=>s.result)}Yi(e,n,r,i){return r.documentReadCount<this.Wi?(Oi()<=ie.DEBUG&&j("QueryEngine","SDK will not create cache indexes for query:",Fi(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),M.resolve()):(Oi()<=ie.DEBUG&&j("QueryEngine","Query:",Fi(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Gi*i?(Oi()<=ie.DEBUG&&j("QueryEngine","The SDK decides to create cache indexes for query:",Fi(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,_t(n))):M.resolve())}ji(e,n){if(Wy(n))return M.resolve(null);let r=_t(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=Pu(n,null,"F"),r=_t(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=Z(...s);return this.zi.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,r).next(u=>{const c=this.Zi(n,l);return this.Xi(n,c,o,u.readTime)?this.ji(e,Pu(n,null,"F")):this.es(e,c,n,u)}))})))}Hi(e,n,r,i){return Wy(n)||i.isEqual(Y.min())?M.resolve(null):this.zi.getDocuments(e,r).next(s=>{const o=this.Zi(n,s);return this.Xi(n,o,r,i)?M.resolve(null):(Oi()<=ie.DEBUG&&j("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Fi(n)),this.es(e,o,n,Ww(i,-1)).next(l=>l))})}Zi(e,n){let r=new he(y1(e));return n.forEach((i,s)=>{Ca(e,s)&&(r=r.add(s))}),r}Xi(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ji(e,n,r){return Oi()<=ie.DEBUG&&j("QueryEngine","Using full collection scan to execute query:",Fi(n)),this.zi.getDocumentsMatchingQuery(e,n,Ft.min(),r)}es(e,n,r,i){return this.zi.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IR{constructor(e,n,r,i){this.persistence=e,this.ts=n,this.serializer=i,this.ns=new me(J),this.rs=new br(s=>di(s),Aa),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(r)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new nE(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.ns))}}function sE(t,e,n,r){return new IR(t,e,n,r)}async function oE(t,e){const n=q(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n._s(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],l=[];let u=Z();for(const c of i){o.push(c.batchId);for(const f of c.mutations)u=u.add(f.key)}for(const c of s){l.push(c.batchId);for(const f of c.mutations)u=u.add(f.key)}return n.localDocuments.getDocuments(r,u).next(c=>({us:c,removedBatchIds:o,addedBatchIds:l}))})})}function TR(t,e){const n=q(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.os.newChangeBuffer({trackRemovals:!0});return function(l,u,c,f){const m=c.batch,v=m.keys();let A=M.resolve();return v.forEach(k=>{A=A.next(()=>f.getEntry(u,k)).next(N=>{const L=c.docVersions.get(k);Q(L!==null),N.version.compareTo(L)<0&&(m.applyToRemoteDocument(N,c),N.isValidDocument()&&(N.setReadTime(c.commitVersion),f.addEntry(N)))})}),A.next(()=>l.mutationQueue.removeMutationBatch(u,m))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let u=Z();for(let c=0;c<l.mutationResults.length;++c)l.mutationResults[c].transformResults.length>0&&(u=u.add(l.batch.mutations[c].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function aE(t){const e=q(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Qr.getLastRemoteSnapshotVersion(n))}function xR(t,e){const n=q(t),r=e.snapshotVersion;let i=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.os.newChangeBuffer({trackRemovals:!0});i=n.ns;const l=[];e.targetChanges.forEach((f,m)=>{const v=i.get(m);if(!v)return;l.push(n.Qr.removeMatchingKeys(s,f.removedDocuments,m).next(()=>n.Qr.addMatchingKeys(s,f.addedDocuments,m)));let A=v.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(m)!==null?A=A.withResumeToken($e.EMPTY_BYTE_STRING,Y.min()).withLastLimboFreeSnapshotVersion(Y.min()):f.resumeToken.approximateByteSize()>0&&(A=A.withResumeToken(f.resumeToken,r)),i=i.insert(m,A),function(N,L,R){return N.resumeToken.approximateByteSize()===0||L.snapshotVersion.toMicroseconds()-N.snapshotVersion.toMicroseconds()>=3e8?!0:R.addedDocuments.size+R.modifiedDocuments.size+R.removedDocuments.size>0}(v,A,f)&&l.push(n.Qr.updateTargetData(s,A))});let u=Rt(),c=Z();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(s,f))}),l.push(lE(s,o,e.documentUpdates).next(f=>{u=f.cs,c=f.ls})),!r.isEqual(Y.min())){const f=n.Qr.getLastRemoteSnapshotVersion(s).next(m=>n.Qr.setTargetsMetadata(s,s.currentSequenceNumber,r));l.push(f)}return M.waitFor(l).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,u,c)).next(()=>u)}).then(s=>(n.ns=i,s))}function lE(t,e,n){let r=Z(),i=Z();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=Rt();return n.forEach((l,u)=>{const c=s.get(l);u.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(l)),u.isNoDocument()&&u.version.isEqual(Y.min())?(e.removeEntry(l,u.readTime),o=o.insert(l,u)):!c.isValidDocument()||u.version.compareTo(c.version)>0||u.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(u),o=o.insert(l,u)):j("LocalStore","Ignoring outdated watch update for ",l,". Current version:",c.version," Watch version:",u.version)}),{cs:o,ls:i}})}function SR(t,e){const n=q(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Ss(t,e){const n=q(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Qr.getTargetData(r,e).next(s=>s?(i=s,M.resolve(i)):n.Qr.allocateTargetId(r).next(o=>(i=new An(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Qr.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.ns.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.ns=n.ns.insert(r.targetId,r),n.rs.set(e,r.targetId)),r})}async function Ps(t,e,n){const r=q(t),i=r.ns.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!Cr(o))throw o;j("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.ns=r.ns.remove(e),r.rs.delete(i.target)}function bu(t,e,n){const r=q(t);let i=Y.min(),s=Z();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,c,f){const m=q(u),v=m.rs.get(f);return v!==void 0?M.resolve(m.ns.get(v)):m.Qr.getTargetData(c,f)}(r,o,_t(e)).next(l=>{if(l)return i=l.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(o,l.targetId).next(u=>{s=u})}).next(()=>r.ts.getDocumentsMatchingQuery(o,e,n?i:Y.min(),n?s:Z())).next(l=>(hE(r,g1(e),l),{documents:l,hs:s})))}function uE(t,e){const n=q(t),r=q(n.Qr),i=n.ns.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",s=>r.ot(s,e).next(o=>o?o.target:null))}function cE(t,e){const n=q(t),r=n.ss.get(e)||Y.min();return n.persistence.runTransaction("Get new document changes","readonly",i=>n.os.getAllFromCollectionGroup(i,e,Ww(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(hE(n,e,i),i))}function hE(t,e,n){let r=t.ss.get(e)||Y.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.ss.set(e,r)}async function PR(t,e,n,r){const i=q(t);let s=Z(),o=Rt();for(const c of n){const f=e.Ps(c.metadata.name);c.document&&(s=s.add(f));const m=e.Is(c);m.setReadTime(e.Ts(c.metadata.readTime)),o=o.insert(f,m)}const l=i.os.newChangeBuffer({trackRemovals:!0}),u=await Ss(i,function(f){return _t(Os(ne.fromString(`__bundle__/docs/${f}`)))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",c=>lE(c,l,o).next(f=>(l.apply(c),f)).next(f=>i.Qr.removeMatchingKeysForTargetId(c,u.targetId).next(()=>i.Qr.addMatchingKeys(c,s,u.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(c,f.cs,f.ls)).next(()=>f.cs)))}async function AR(t,e,n=Z()){const r=await Ss(t,_t(pp(e.bundledQuery))),i=q(t);return i.persistence.runTransaction("Save named query","readwrite",s=>{const o=Oe(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.$r.saveNamedQuery(s,e);const l=r.withResumeToken($e.EMPTY_BYTE_STRING,o);return i.ns=i.ns.insert(l.targetId,l),i.Qr.updateTargetData(s,l).next(()=>i.Qr.removeMatchingKeysForTargetId(s,r.targetId)).next(()=>i.Qr.addMatchingKeys(s,n,r.targetId)).next(()=>i.$r.saveNamedQuery(s,e))})}function E_(t,e){return`firestore_clients_${t}_${e}`}function I_(t,e,n){let r=`firestore_mutations_${t}_${n}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function Th(t,e){return`firestore_targets_${t}_${e}`}class ku{constructor(e,n,r,i){this.user=e,this.batchId=n,this.state=r,this.error=i}static Es(e,n,r){const i=JSON.parse(r);let s,o=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return o&&i.error&&(o=typeof i.error.message=="string"&&typeof i.error.code=="string",o&&(s=new B(i.error.code,i.error.message))),o?new ku(e,n,i.state,s):(Le("SharedClientState",`Failed to parse mutation state for ID '${n}': ${r}`),null)}ds(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class jo{constructor(e,n,r){this.targetId=e,this.state=n,this.error=r}static Es(e,n){const r=JSON.parse(n);let i,s=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return s&&r.error&&(s=typeof r.error.message=="string"&&typeof r.error.code=="string",s&&(i=new B(r.error.code,r.error.message))),s?new jo(e,r.state,i):(Le("SharedClientState",`Failed to parse target state for ID '${e}': ${n}`),null)}ds(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Du{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Es(e,n){const r=JSON.parse(n);let i=typeof r=="object"&&r.activeTargetIds instanceof Array,s=ap();for(let o=0;i&&o<r.activeTargetIds.length;++o)i=Xw(r.activeTargetIds[o]),s=s.add(r.activeTargetIds[o]);return i?new Du(e,s):(Le("SharedClientState",`Failed to parse client data for instance '${e}': ${n}`),null)}}class Ep{constructor(e,n){this.clientId=e,this.onlineState=n}static Es(e){const n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new Ep(n.clientId,n.onlineState):(Le("SharedClientState",`Failed to parse online state: ${e}`),null)}}class Ud{constructor(){this.activeTargetIds=ap()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class xh{constructor(e,n,r,i,s){this.window=e,this.oi=n,this.persistenceKey=r,this.Vs=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.fs=this.gs.bind(this),this.ps=new me(J),this.started=!1,this.ys=[];const o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.ws=E_(this.persistenceKey,this.Vs),this.Ss=function(u){return`firestore_sequence_number_${u}`}(this.persistenceKey),this.ps=this.ps.insert(this.Vs,new Ud),this.bs=new RegExp(`^firestore_clients_${o}_([^_]*)$`),this.Ds=new RegExp(`^firestore_mutations_${o}_(\\d+)(?:_(.*))?$`),this.Cs=new RegExp(`^firestore_targets_${o}_(\\d+)$`),this.vs=function(u){return`firestore_online_state_${u}`}(this.persistenceKey),this.Fs=function(u){return`firestore_bundle_loaded_v2_${u}`}(this.persistenceKey),this.window.addEventListener("storage",this.fs)}static D(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Bi();for(const r of e){if(r===this.Vs)continue;const i=this.getItem(E_(this.persistenceKey,r));if(i){const s=Du.Es(r,i);s&&(this.ps=this.ps.insert(s.clientId,s))}}this.Ms();const n=this.storage.getItem(this.vs);if(n){const r=this.xs(n);r&&this.Os(r)}for(const r of this.ys)this.gs(r);this.ys=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.Ss,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ns(this.ps)}isActiveQueryTarget(e){let n=!1;return this.ps.forEach((r,i)=>{i.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.Ls(e,"pending")}updateMutationState(e,n,r){this.Ls(e,n,r),this.Bs(e)}addLocalQueryTarget(e){let n="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(Th(this.persistenceKey,e));if(r){const i=jo.Es(e,r);i&&(n=i.state)}}return this.ks.As(e),this.Ms(),n}removeLocalQueryTarget(e){this.ks.Rs(e),this.Ms()}isLocalQueryTarget(e){return this.ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Th(this.persistenceKey,e))}updateQueryState(e,n,r){this.qs(e,n,r)}handleUserChange(e,n,r){n.forEach(i=>{this.Bs(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Qs(e)}notifyBundleLoaded(e){this.Ks(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.fs),this.removeItem(this.ws),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return j("SharedClientState","READ",e,n),n}setItem(e,n){j("SharedClientState","SET",e,n),this.storage.setItem(e,n)}removeItem(e){j("SharedClientState","REMOVE",e),this.storage.removeItem(e)}gs(e){const n=e;if(n.storageArea===this.storage){if(j("SharedClientState","EVENT",n.key,n.newValue),n.key===this.ws)return void Le("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.oi.enqueueRetryable(async()=>{if(this.started){if(n.key!==null){if(this.bs.test(n.key)){if(n.newValue==null){const r=this.$s(n.key);return this.Us(r,null)}{const r=this.Ws(n.key,n.newValue);if(r)return this.Us(r.clientId,r)}}else if(this.Ds.test(n.key)){if(n.newValue!==null){const r=this.Gs(n.key,n.newValue);if(r)return this.zs(r)}}else if(this.Cs.test(n.key)){if(n.newValue!==null){const r=this.js(n.key,n.newValue);if(r)return this.Hs(r)}}else if(n.key===this.vs){if(n.newValue!==null){const r=this.xs(n.newValue);if(r)return this.Os(r)}}else if(n.key===this.Ss){const r=function(s){let o=Pt.oe;if(s!=null)try{const l=JSON.parse(s);Q(typeof l=="number"),o=l}catch(l){Le("SharedClientState","Failed to read sequence number from WebStorage",l)}return o}(n.newValue);r!==Pt.oe&&this.sequenceNumberHandler(r)}else if(n.key===this.Fs){const r=this.Js(n.newValue);await Promise.all(r.map(i=>this.syncEngine.Ys(i)))}}}else this.ys.push(n)})}}get ks(){return this.ps.get(this.Vs)}Ms(){this.setItem(this.ws,this.ks.ds())}Ls(e,n,r){const i=new ku(this.currentUser,e,n,r),s=I_(this.persistenceKey,this.currentUser,e);this.setItem(s,i.ds())}Bs(e){const n=I_(this.persistenceKey,this.currentUser,e);this.removeItem(n)}Qs(e){const n={clientId:this.Vs,onlineState:e};this.storage.setItem(this.vs,JSON.stringify(n))}qs(e,n,r){const i=Th(this.persistenceKey,e),s=new jo(e,n,r);this.setItem(i,s.ds())}Ks(e){const n=JSON.stringify(Array.from(e));this.setItem(this.Fs,n)}$s(e){const n=this.bs.exec(e);return n?n[1]:null}Ws(e,n){const r=this.$s(e);return Du.Es(r,n)}Gs(e,n){const r=this.Ds.exec(e),i=Number(r[1]),s=r[2]!==void 0?r[2]:null;return ku.Es(new We(s),i,n)}js(e,n){const r=this.Cs.exec(e),i=Number(r[1]);return jo.Es(i,n)}xs(e){return Ep.Es(e)}Js(e){return JSON.parse(e)}async zs(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Zs(e.batchId,e.state,e.error);j("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)}Hs(e){return this.syncEngine.Xs(e.targetId,e.state,e.error)}Us(e,n){const r=n?this.ps.insert(e,n):this.ps.remove(e),i=this.Ns(this.ps),s=this.Ns(r),o=[],l=[];return s.forEach(u=>{i.has(u)||o.push(u)}),i.forEach(u=>{s.has(u)||l.push(u)}),this.syncEngine.eo(o,l).then(()=>{this.ps=r})}Os(e){this.ps.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ns(e){let n=ap();return e.forEach((r,i)=>{n=n.unionWith(i.activeTargetIds)}),n}}class dE{constructor(){this.no=new Ud,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,n,r){this.ro[e]=n}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new Ud,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RR{io(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T_{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){j("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.uo)e(0)}ao(){j("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.uo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xl=null;function Sh(){return xl===null?xl=function(){return 268435456+Math.round(2147483648*Math.random())}():xl++,"0x"+xl.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CR={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bR{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}Ao(e){this.Ro=e}onMessage(e){this.Vo=e}close(){this.ho()}send(e){this.lo(e)}mo(){this.Io()}fo(){this.Eo()}po(e){this.Ro(e)}yo(e){this.Vo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lt="WebChannelConnection";class kR extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.wo=r+"://"+n.host,this.So=`projects/${i}/databases/${s}`,this.bo=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Do(){return!1}Co(n,r,i,s,o){const l=Sh(),u=this.vo(n,r.toUriEncodedString());j("RestConnection",`Sending RPC '${n}' ${l}:`,u,i);const c={"google-cloud-resource-prefix":this.So,"x-goog-request-params":this.bo};return this.Fo(c,s,o),this.Mo(n,u,c,i).then(f=>(j("RestConnection",`Received RPC '${n}' ${l}: `,f),f),f=>{throw rn("RestConnection",`RPC '${n}' ${l} failed with error: `,f,"url: ",u,"request:",i),f})}xo(n,r,i,s,o,l){return this.Co(n,r,i,s,o)}Fo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ls}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}vo(n,r){const i=CR[n];return`${this.wo}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Mo(e,n,r,i){const s=Sh();return new Promise((o,l)=>{const u=new Ow;u.setWithCredentials(!0),u.listenOnce(Bw.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Ol.NO_ERROR:const f=u.getResponseJson();j(lt,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(f)),o(f);break;case Ol.TIMEOUT:j(lt,`RPC '${e}' ${s} timed out`),l(new B(O.DEADLINE_EXCEEDED,"Request time out"));break;case Ol.HTTP_ERROR:const m=u.getStatus();if(j(lt,`RPC '${e}' ${s} failed with status:`,m,"response text:",u.getResponseText()),m>0){let v=u.getResponseJson();Array.isArray(v)&&(v=v[0]);const A=v==null?void 0:v.error;if(A&&A.status&&A.message){const k=function(L){const R=L.toLowerCase().replace(/_/g,"-");return Object.values(O).indexOf(R)>=0?R:O.UNKNOWN}(A.status);l(new B(k,A.message))}else l(new B(O.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new B(O.UNAVAILABLE,"Connection failed."));break;default:W()}}finally{j(lt,`RPC '${e}' ${s} completed.`)}});const c=JSON.stringify(i);j(lt,`RPC '${e}' ${s} sending request:`,i),u.send(n,"POST",c,r,15)})}Oo(e,n,r){const i=Sh(),s=[this.wo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=Uw(),l=zw(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(u.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(u.xmlHttpFactory=new Fw({})),this.Fo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const f=s.join("");j(lt,`Creating RPC '${e}' stream ${i}: ${f}`,u);const m=o.createWebChannel(f,u);let v=!1,A=!1;const k=new bR({lo:L=>{A?j(lt,`Not sending because RPC '${e}' stream ${i} is closed:`,L):(v||(j(lt,`Opening RPC '${e}' stream ${i} transport.`),m.open(),v=!0),j(lt,`RPC '${e}' stream ${i} sending:`,L),m.send(L))},ho:()=>m.close()}),N=(L,R,S)=>{L.listen(R,T=>{try{S(T)}catch(d){setTimeout(()=>{throw d},0)}})};return N(m,To.EventType.OPEN,()=>{A||(j(lt,`RPC '${e}' stream ${i} transport opened.`),k.mo())}),N(m,To.EventType.CLOSE,()=>{A||(A=!0,j(lt,`RPC '${e}' stream ${i} transport closed`),k.po())}),N(m,To.EventType.ERROR,L=>{A||(A=!0,rn(lt,`RPC '${e}' stream ${i} transport errored:`,L),k.po(new B(O.UNAVAILABLE,"The operation could not be completed")))}),N(m,To.EventType.MESSAGE,L=>{var R;if(!A){const S=L.data[0];Q(!!S);const T=S,d=T.error||((R=T[0])===null||R===void 0?void 0:R.error);if(d){j(lt,`RPC '${e}' stream ${i} received error:`,d);const g=d.status;let I=function(w){const x=Fe[w];if(x!==void 0)return k1(x)}(g),_=d.message;I===void 0&&(I=O.INTERNAL,_="Unknown error status: "+g+" with message "+d.message),A=!0,k.po(new B(I,_)),m.close()}else j(lt,`RPC '${e}' stream ${i} received:`,S),k.yo(S)}}),N(l,jw.STAT_EVENT,L=>{L.stat===Pd.PROXY?j(lt,`RPC '${e}' stream ${i} detected buffering proxy`):L.stat===Pd.NOPROXY&&j(lt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{k.fo()},0),k}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fE(){return typeof window<"u"?window:null}function ql(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Na(t){return new B2(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ip{constructor(e,n,r=1e3,i=1.5,s=6e4){this.oi=e,this.timerId=n,this.No=r,this.Lo=i,this.Bo=s,this.ko=0,this.qo=null,this.Qo=Date.now(),this.reset()}reset(){this.ko=0}Ko(){this.ko=this.Bo}$o(e){this.cancel();const n=Math.floor(this.ko+this.Uo()),r=Math.max(0,Date.now()-this.Qo),i=Math.max(0,n-r);i>0&&j("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.qo=this.oi.enqueueAfterDelay(this.timerId,i,()=>(this.Qo=Date.now(),e())),this.ko*=this.Lo,this.ko<this.No&&(this.ko=this.No),this.ko>this.Bo&&(this.ko=this.Bo)}Wo(){this.qo!==null&&(this.qo.skipDelay(),this.qo=null)}cancel(){this.qo!==null&&(this.qo.cancel(),this.qo=null)}Uo(){return(Math.random()-.5)*this.ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pE{constructor(e,n,r,i,s,o,l,u){this.oi=e,this.Go=r,this.zo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.jo=0,this.Ho=null,this.Jo=null,this.stream=null,this.Yo=new Ip(e,n)}Zo(){return this.state===1||this.state===5||this.Xo()}Xo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.e_()}async stop(){this.Zo()&&await this.close(0)}t_(){this.state=0,this.Yo.reset()}n_(){this.Xo()&&this.Ho===null&&(this.Ho=this.oi.enqueueAfterDelay(this.Go,6e4,()=>this.r_()))}i_(e){this.s_(),this.stream.send(e)}async r_(){if(this.Xo())return this.close(0)}s_(){this.Ho&&(this.Ho.cancel(),this.Ho=null)}o_(){this.Jo&&(this.Jo.cancel(),this.Jo=null)}async close(e,n){this.s_(),this.o_(),this.Yo.cancel(),this.jo++,e!==4?this.Yo.reset():n&&n.code===O.RESOURCE_EXHAUSTED?(Le(n.toString()),Le("Using maximum backoff delay to prevent overloading the backend."),this.Yo.Ko()):n&&n.code===O.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.__(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Ao(n)}__(){}auth(){this.state=1;const e=this.a_(this.jo),n=this.jo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.jo===n&&this.u_(r,i)},r=>{e(()=>{const i=new B(O.UNKNOWN,"Fetching auth token failed: "+r.message);return this.c_(i)})})}u_(e,n){const r=this.a_(this.jo);this.stream=this.l_(e,n),this.stream.Po(()=>{r(()=>this.listener.Po())}),this.stream.To(()=>{r(()=>(this.state=2,this.Jo=this.oi.enqueueAfterDelay(this.zo,1e4,()=>(this.Xo()&&(this.state=3),Promise.resolve())),this.listener.To()))}),this.stream.Ao(i=>{r(()=>this.c_(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}e_(){this.state=5,this.Yo.$o(async()=>{this.state=0,this.start()})}c_(e){return j("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}a_(e){return n=>{this.oi.enqueueAndForget(()=>this.jo===e?n():(j("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class DR extends pE{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}l_(e,n){return this.connection.Oo("Listen",e,n)}onMessage(e){this.Yo.reset();const n=U2(this.serializer,e),r=function(s){if(!("targetChange"in s))return Y.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?Y.min():o.readTime?Oe(o.readTime):Y.min()}(e);return this.listener.h_(n,r)}P_(e){const n={};n.database=Od(this.serializer),n.addTarget=function(s,o){let l;const u=o.target;if(l=xu(u)?{documents:z1(s,u)}:{query:U1(s,u)._t},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=M1(s,o.resumeToken);const c=Md(s,o.expectedCount);c!==null&&(l.expectedCount=c)}else if(o.snapshotVersion.compareTo(Y.min())>0){l.readTime=xs(s,o.snapshotVersion.toTimestamp());const c=Md(s,o.expectedCount);c!==null&&(l.expectedCount=c)}return l}(this.serializer,e);const r=q2(this.serializer,e);r&&(n.labels=r),this.i_(n)}I_(e){const n={};n.database=Od(this.serializer),n.removeTarget=e,this.i_(n)}}class NR extends pE{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s,this.T_=!1}get E_(){return this.T_}start(){this.T_=!1,this.lastStreamToken=void 0,super.start()}__(){this.T_&&this.d_([])}l_(e,n){return this.connection.Oo("Write",e,n)}onMessage(e){if(Q(!!e.streamToken),this.lastStreamToken=e.streamToken,this.T_){this.Yo.reset();const n=$2(e.writeResults,e.commitTime),r=Oe(e.commitTime);return this.listener.A_(r,n)}return Q(!e.writeResults||e.writeResults.length===0),this.T_=!0,this.listener.R_()}V_(){const e={};e.database=Od(this.serializer),this.i_(e)}d_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>ga(this.serializer,r))};this.i_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VR extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.m_=!1}f_(){if(this.m_)throw new B(O.FAILED_PRECONDITION,"The client has already been terminated.")}Co(e,n,r,i){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Co(e,Ld(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===O.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new B(O.UNKNOWN,s.toString())})}xo(e,n,r,i,s){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.xo(e,Ld(n,r),i,o,l,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===O.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new B(O.UNKNOWN,o.toString())})}terminate(){this.m_=!0,this.connection.terminate()}}class MR{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.g_=0,this.p_=null,this.y_=!0}w_(){this.g_===0&&(this.S_("Unknown"),this.p_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.p_=null,this.b_("Backend didn't respond within 10 seconds."),this.S_("Offline"),Promise.resolve())))}D_(e){this.state==="Online"?this.S_("Unknown"):(this.g_++,this.g_>=1&&(this.C_(),this.b_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.S_("Offline")))}set(e){this.C_(),this.g_=0,e==="Online"&&(this.y_=!1),this.S_(e)}S_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}b_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.y_?(Le(n),this.y_=!1):j("OnlineStateTracker",n)}C_(){this.p_!==null&&(this.p_.cancel(),this.p_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LR{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.v_=[],this.F_=new Map,this.M_=new Set,this.x_=[],this.O_=s,this.O_.io(o=>{r.enqueueAndForget(async()=>{kr(this)&&(j("RemoteStore","Restarting streams for network reachability change."),await async function(u){const c=q(u);c.M_.add(4),await js(c),c.N_.set("Unknown"),c.M_.delete(4),await Va(c)}(this))})}),this.N_=new MR(r,i)}}async function Va(t){if(kr(t))for(const e of t.x_)await e(!0)}async function js(t){for(const e of t.x_)await e(!1)}function oc(t,e){const n=q(t);n.F_.has(e.targetId)||(n.F_.set(e.targetId,e),Sp(n)?xp(n):Us(n).Xo()&&Tp(n,e))}function As(t,e){const n=q(t),r=Us(n);n.F_.delete(e),r.Xo()&&mE(n,e),n.F_.size===0&&(r.Xo()?r.n_():kr(n)&&n.N_.set("Unknown"))}function Tp(t,e){if(t.L_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Y.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Us(t).P_(e)}function mE(t,e){t.L_.xe(e),Us(t).I_(e)}function xp(t){t.L_=new M2({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.F_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Us(t).start(),t.N_.w_()}function Sp(t){return kr(t)&&!Us(t).Zo()&&t.F_.size>0}function kr(t){return q(t).M_.size===0}function gE(t){t.L_=void 0}async function OR(t){t.N_.set("Online")}async function FR(t){t.F_.forEach((e,n)=>{Tp(t,e)})}async function BR(t,e){gE(t),Sp(t)?(t.N_.D_(e),xp(t)):t.N_.set("Unknown")}async function jR(t,e,n){if(t.N_.set("Online"),e instanceof V1&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const l of s.targetIds)i.F_.has(l)&&(await i.remoteSyncer.rejectListen(l,o),i.F_.delete(l),i.L_.removeTarget(l))}(t,e)}catch(r){j("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Nu(t,r)}else if(e instanceof $l?t.L_.Ke(e):e instanceof N1?t.L_.He(e):t.L_.We(e),!n.isEqual(Y.min()))try{const r=await aE(t.localStore);n.compareTo(r)>=0&&await function(s,o){const l=s.L_.rt(o);return l.targetChanges.forEach((u,c)=>{if(u.resumeToken.approximateByteSize()>0){const f=s.F_.get(c);f&&s.F_.set(c,f.withResumeToken(u.resumeToken,o))}}),l.targetMismatches.forEach((u,c)=>{const f=s.F_.get(u);if(!f)return;s.F_.set(u,f.withResumeToken($e.EMPTY_BYTE_STRING,f.snapshotVersion)),mE(s,u);const m=new An(f.target,u,c,f.sequenceNumber);Tp(s,m)}),s.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(r){j("RemoteStore","Failed to raise snapshot:",r),await Nu(t,r)}}async function Nu(t,e,n){if(!Cr(e))throw e;t.M_.add(1),await js(t),t.N_.set("Offline"),n||(n=()=>aE(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{j("RemoteStore","Retrying IndexedDB access"),await n(),t.M_.delete(1),await Va(t)})}function yE(t,e){return e().catch(n=>Nu(t,n,e))}async function zs(t){const e=q(t),n=Er(e);let r=e.v_.length>0?e.v_[e.v_.length-1].batchId:-1;for(;zR(e);)try{const i=await SR(e.localStore,r);if(i===null){e.v_.length===0&&n.n_();break}r=i.batchId,UR(e,i)}catch(i){await Nu(e,i)}_E(e)&&vE(e)}function zR(t){return kr(t)&&t.v_.length<10}function UR(t,e){t.v_.push(e);const n=Er(t);n.Xo()&&n.E_&&n.d_(e.mutations)}function _E(t){return kr(t)&&!Er(t).Zo()&&t.v_.length>0}function vE(t){Er(t).start()}async function $R(t){Er(t).V_()}async function qR(t){const e=Er(t);for(const n of t.v_)e.d_(n.mutations)}async function GR(t,e,n){const r=t.v_.shift(),i=cp.from(r,e,n);await yE(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await zs(t)}async function WR(t,e){e&&Er(t).E_&&await async function(r,i){if(function(o){return b1(o)&&o!==O.ABORTED}(i.code)){const s=r.v_.shift();Er(r).t_(),await yE(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await zs(r)}}(t,e),_E(t)&&vE(t)}async function x_(t,e){const n=q(t);n.asyncQueue.verifyOperationInProgress(),j("RemoteStore","RemoteStore received new credentials");const r=kr(n);n.M_.add(3),await js(n),r&&n.N_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.M_.delete(3),await Va(n)}async function $d(t,e){const n=q(t);e?(n.M_.delete(2),await Va(n)):e||(n.M_.add(2),await js(n),n.N_.set("Unknown"))}function Us(t){return t.B_||(t.B_=function(n,r,i){const s=q(n);return s.f_(),new DR(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Po:OR.bind(null,t),To:FR.bind(null,t),Ao:BR.bind(null,t),h_:jR.bind(null,t)}),t.x_.push(async e=>{e?(t.B_.t_(),Sp(t)?xp(t):t.N_.set("Unknown")):(await t.B_.stop(),gE(t))})),t.B_}function Er(t){return t.k_||(t.k_=function(n,r,i){const s=q(n);return s.f_(),new NR(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Po:()=>Promise.resolve(),To:$R.bind(null,t),Ao:WR.bind(null,t),R_:qR.bind(null,t),A_:GR.bind(null,t)}),t.x_.push(async e=>{e?(t.k_.t_(),await zs(t)):(await t.k_.stop(),t.v_.length>0&&(j("RemoteStore",`Stopping write stream with ${t.v_.length} pending writes`),t.v_=[]))})),t.k_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pp{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new He,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,l=new Pp(e,n,o,i,s);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new B(O.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function $s(t,e){if(Le("AsyncQueue",`${e}: ${t}`),Cr(t))return new B(O.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ls{constructor(e){this.comparator=e?(n,r)=>e(n,r)||$.comparator(n.key,r.key):(n,r)=>$.comparator(n.key,r.key),this.keyedMap=xo(),this.sortedSet=new me(this.comparator)}static emptySet(e){return new ls(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof ls)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new ls;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S_{constructor(){this.q_=new me($.comparator)}track(e){const n=e.doc.key,r=this.q_.get(n);r?e.type!==0&&r.type===3?this.q_=this.q_.insert(n,e):e.type===3&&r.type!==1?this.q_=this.q_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.q_=this.q_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.q_=this.q_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.q_=this.q_.remove(n):e.type===1&&r.type===2?this.q_=this.q_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.q_=this.q_.insert(n,{type:2,doc:e.doc}):W():this.q_=this.q_.insert(n,e)}Q_(){const e=[];return this.q_.inorderTraversal((n,r)=>{e.push(r)}),e}}class Rs{constructor(e,n,r,i,s,o,l,u,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(l=>{o.push({type:0,doc:l})}),new Rs(e,n,ls.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ra(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KR{constructor(){this.K_=void 0,this.U_=[]}W_(){return this.U_.some(e=>e.G_())}}class HR{constructor(){this.queries=new br(e=>m1(e),Ra),this.onlineState="Unknown",this.z_=new Set}}async function Ap(t,e){const n=q(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.W_()&&e.G_()&&(r=2):(s=new KR,r=e.G_()?0:1);try{switch(r){case 0:s.K_=await n.onListen(i,!0);break;case 1:s.K_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const l=$s(o,`Initialization of query '${Fi(e.query)}' failed`);return void e.onError(l)}n.queries.set(i,s),s.U_.push(e),e.j_(n.onlineState),s.K_&&e.H_(s.K_)&&Cp(n)}async function Rp(t,e){const n=q(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const o=s.U_.indexOf(e);o>=0&&(s.U_.splice(o,1),s.U_.length===0?i=e.G_()?0:1:!s.W_()&&e.G_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function QR(t,e){const n=q(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const l of o.U_)l.H_(i)&&(r=!0);o.K_=i}}r&&Cp(n)}function YR(t,e,n){const r=q(t),i=r.queries.get(e);if(i)for(const s of i.U_)s.onError(n);r.queries.delete(e)}function Cp(t){t.z_.forEach(e=>{e.next()})}var qd,P_;(P_=qd||(qd={})).J_="default",P_.Cache="cache";class bp{constructor(e,n,r){this.query=e,this.Y_=n,this.Z_=!1,this.X_=null,this.onlineState="Unknown",this.options=r||{}}H_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Rs(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Z_?this.ea(e)&&(this.Y_.next(e),n=!0):this.ta(e,this.onlineState)&&(this.na(e),n=!0),this.X_=e,n}onError(e){this.Y_.error(e)}j_(e){this.onlineState=e;let n=!1;return this.X_&&!this.Z_&&this.ta(this.X_,e)&&(this.na(this.X_),n=!0),n}ta(e,n){if(!e.fromCache||!this.G_())return!0;const r=n!=="Offline";return(!this.options.ra||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ea(e){if(e.docChanges.length>0)return!0;const n=this.X_&&this.X_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}na(e){e=Rs.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Z_=!0,this.Y_.next(e)}G_(){return this.options.source!==qd.Cache}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XR{constructor(e,n){this.ia=e,this.byteLength=n}sa(){return"metadata"in this.ia}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A_{constructor(e){this.serializer=e}Ps(e){return fn(this.serializer,e)}Is(e){return e.metadata.exists?j1(this.serializer,e.document,!1):_e.newNoDocument(this.Ps(e.metadata.name),this.Ts(e.metadata.readTime))}Ts(e){return Oe(e)}}class JR{constructor(e,n,r){this.oa=e,this.localStore=n,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=wE(e)}_a(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.ia.namedQuery)this.queries.push(e.ia.namedQuery);else if(e.ia.documentMetadata){this.documents.push({metadata:e.ia.documentMetadata}),e.ia.documentMetadata.exists||++n;const r=ne.fromString(e.ia.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.ia.document&&(this.documents[this.documents.length-1].document=e.ia.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,Object.assign({},this.progress)):null}aa(e){const n=new Map,r=new A_(this.serializer);for(const i of e)if(i.metadata.queries){const s=r.Ps(i.metadata.name);for(const o of i.metadata.queries){const l=(n.get(o)||Z()).add(s);n.set(o,l)}}return n}async complete(){const e=await PR(this.localStore,new A_(this.serializer),this.documents,this.oa.id),n=this.aa(this.documents);for(const r of this.queries)await AR(this.localStore,r,n.get(r.name));return this.progress.taskState="Success",{progress:this.progress,ua:this.collectionGroups,ca:e}}}function wE(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EE{constructor(e){this.key=e}}class IE{constructor(e){this.key=e}}class TE{constructor(e,n){this.query=e,this.la=n,this.ha=null,this.hasCachedResults=!1,this.current=!1,this.Pa=Z(),this.mutatedKeys=Z(),this.Ia=y1(e),this.Ta=new ls(this.Ia)}get Ea(){return this.la}da(e,n){const r=n?n.Aa:new S_,i=n?n.Ta:this.Ta;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,l=!1;const u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,c=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((f,m)=>{const v=i.get(f),A=Ca(this.query,m)?m:null,k=!!v&&this.mutatedKeys.has(v.key),N=!!A&&(A.hasLocalMutations||this.mutatedKeys.has(A.key)&&A.hasCommittedMutations);let L=!1;v&&A?v.data.isEqual(A.data)?k!==N&&(r.track({type:3,doc:A}),L=!0):this.Ra(v,A)||(r.track({type:2,doc:A}),L=!0,(u&&this.Ia(A,u)>0||c&&this.Ia(A,c)<0)&&(l=!0)):!v&&A?(r.track({type:0,doc:A}),L=!0):v&&!A&&(r.track({type:1,doc:v}),L=!0,(u||c)&&(l=!0)),L&&(A?(o=o.add(A),s=N?s.add(f):s.delete(f)):(o=o.delete(f),s=s.delete(f)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const f=this.query.limitType==="F"?o.last():o.first();o=o.delete(f.key),s=s.delete(f.key),r.track({type:1,doc:f})}return{Ta:o,Aa:r,Xi:l,mutatedKeys:s}}Ra(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.Ta;this.Ta=e.Ta,this.mutatedKeys=e.mutatedKeys;const o=e.Aa.Q_();o.sort((f,m)=>function(A,k){const N=L=>{switch(L){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return W()}};return N(A)-N(k)}(f.type,m.type)||this.Ia(f.doc,m.doc)),this.Va(r),i=i!=null&&i;const l=n&&!i?this.ma():[],u=this.Pa.size===0&&this.current&&!i?1:0,c=u!==this.ha;return this.ha=u,o.length!==0||c?{snapshot:new Rs(this.query,e.Ta,s,o,e.mutatedKeys,u===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),fa:l}:{fa:l}}j_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ta:this.Ta,Aa:new S_,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{fa:[]}}ga(e){return!this.la.has(e)&&!!this.Ta.has(e)&&!this.Ta.get(e).hasLocalMutations}Va(e){e&&(e.addedDocuments.forEach(n=>this.la=this.la.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.la=this.la.delete(n)),this.current=e.current)}ma(){if(!this.current)return[];const e=this.Pa;this.Pa=Z(),this.Ta.forEach(r=>{this.ga(r.key)&&(this.Pa=this.Pa.add(r.key))});const n=[];return e.forEach(r=>{this.Pa.has(r)||n.push(new IE(r))}),this.Pa.forEach(r=>{e.has(r)||n.push(new EE(r))}),n}pa(e){this.la=e.hs,this.Pa=Z();const n=this.da(e.documents);return this.applyChanges(n,!0)}ya(){return Rs.fromInitialDocuments(this.query,this.Ta,this.mutatedKeys,this.ha===0,this.hasCachedResults)}}class ZR{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class eC{constructor(e){this.key=e,this.wa=!1}}class tC{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Sa={},this.ba=new br(l=>m1(l),Ra),this.Da=new Map,this.Ca=new Set,this.va=new me($.comparator),this.Fa=new Map,this.Ma=new yp,this.xa={},this.Oa=new Map,this.Na=yi.Ln(),this.onlineState="Unknown",this.La=void 0}get isPrimaryClient(){return this.La===!0}}async function nC(t,e,n=!0){const r=ac(t);let i;const s=r.ba.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.ya()):i=await xE(r,e,n,!0),i}async function rC(t,e){const n=ac(t);await xE(n,e,!0,!1)}async function xE(t,e,n,r){const i=await Ss(t.localStore,_t(e)),s=i.targetId,o=n?t.sharedClientState.addLocalQueryTarget(s):"not-current";let l;return r&&(l=await kp(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&oc(t.remoteStore,i),l}async function kp(t,e,n,r,i){t.Ba=(m,v,A)=>async function(N,L,R,S){let T=L.view.da(R);T.Xi&&(T=await bu(N.localStore,L.query,!1).then(({documents:_})=>L.view.da(_,T)));const d=S&&S.targetChanges.get(L.targetId),g=S&&S.targetMismatches.get(L.targetId)!=null,I=L.view.applyChanges(T,N.isPrimaryClient,d,g);return Gd(N,L.targetId,I.fa),I.snapshot}(t,m,v,A);const s=await bu(t.localStore,e,!0),o=new TE(e,s.hs),l=o.da(s.documents),u=Da.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),c=o.applyChanges(l,t.isPrimaryClient,u);Gd(t,n,c.fa);const f=new ZR(e,n,o);return t.ba.set(e,f),t.Da.has(n)?t.Da.get(n).push(e):t.Da.set(n,[e]),c.snapshot}async function iC(t,e,n){const r=q(t),i=r.ba.get(e),s=r.Da.get(i.targetId);if(s.length>1)return r.Da.set(i.targetId,s.filter(o=>!Ra(o,e))),void r.ba.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Ps(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&As(r.remoteStore,i.targetId),Cs(r,i.targetId)}).catch(Rr)):(Cs(r,i.targetId),await Ps(r.localStore,i.targetId,!0))}async function sC(t,e){const n=q(t),r=n.ba.get(e),i=n.Da.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),As(n.remoteStore,r.targetId))}async function oC(t,e,n){const r=Mp(t);try{const i=await function(o,l){const u=q(o),c=Te.now(),f=l.reduce((A,k)=>A.add(k.key),Z());let m,v;return u.persistence.runTransaction("Locally write mutations","readwrite",A=>{let k=Rt(),N=Z();return u.os.getEntries(A,f).next(L=>{k=L,k.forEach((R,S)=>{S.isValidDocument()||(N=N.add(R))})}).next(()=>u.localDocuments.getOverlayedDocuments(A,k)).next(L=>{m=L;const R=[];for(const S of l){const T=D2(S,m.get(S.key).overlayedDocument);T!=null&&R.push(new Fn(S.key,T,o1(T.value.mapValue),Ie.exists(!0)))}return u.mutationQueue.addMutationBatch(A,c,R,l)}).next(L=>{v=L;const R=L.applyToLocalDocumentSet(m,N);return u.documentOverlayCache.saveOverlays(A,L.batchId,R)})}).then(()=>({batchId:v.batchId,changes:v1(m)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,l,u){let c=o.xa[o.currentUser.toKey()];c||(c=new me(J)),c=c.insert(l,u),o.xa[o.currentUser.toKey()]=c}(r,i.batchId,n),await Bn(r,i.changes),await zs(r.remoteStore)}catch(i){const s=$s(i,"Failed to persist write");n.reject(s)}}async function SE(t,e){const n=q(t);try{const r=await xR(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.Fa.get(s);o&&(Q(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.wa=!0:i.modifiedDocuments.size>0?Q(o.wa):i.removedDocuments.size>0&&(Q(o.wa),o.wa=!1))}),await Bn(n,r,e)}catch(r){await Rr(r)}}function R_(t,e,n){const r=q(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.ba.forEach((s,o)=>{const l=o.view.j_(e);l.snapshot&&i.push(l.snapshot)}),function(o,l){const u=q(o);u.onlineState=l;let c=!1;u.queries.forEach((f,m)=>{for(const v of m.U_)v.j_(l)&&(c=!0)}),c&&Cp(u)}(r.eventManager,e),i.length&&r.Sa.h_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function aC(t,e,n){const r=q(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Fa.get(e),s=i&&i.key;if(s){let o=new me($.comparator);o=o.insert(s,_e.newNoDocument(s,Y.min()));const l=Z().add(s),u=new ka(Y.min(),new Map,new me(J),o,l);await SE(r,u),r.va=r.va.remove(s),r.Fa.delete(e),Vp(r)}else await Ps(r.localStore,e,!1).then(()=>Cs(r,e,n)).catch(Rr)}async function lC(t,e){const n=q(t),r=e.batch.batchId;try{const i=await TR(n.localStore,e);Np(n,r,null),Dp(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Bn(n,i)}catch(i){await Rr(i)}}async function uC(t,e,n){const r=q(t);try{const i=await function(o,l){const u=q(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let f;return u.mutationQueue.lookupMutationBatch(c,l).next(m=>(Q(m!==null),f=m.keys(),u.mutationQueue.removeMutationBatch(c,m))).next(()=>u.mutationQueue.performConsistencyCheck(c)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(c,f,l)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,f)).next(()=>u.localDocuments.getDocuments(c,f))})}(r.localStore,e);Np(r,e,n),Dp(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Bn(r,i)}catch(i){await Rr(i)}}async function cC(t,e){const n=q(t);kr(n.remoteStore)||j("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=await function(o){const l=q(o);return l.persistence.runTransaction("Get highest unacknowledged batch id","readonly",u=>l.mutationQueue.getHighestUnacknowledgedBatchId(u))}(n.localStore);if(r===-1)return void e.resolve();const i=n.Oa.get(r)||[];i.push(e),n.Oa.set(r,i)}catch(r){const i=$s(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}function Dp(t,e){(t.Oa.get(e)||[]).forEach(n=>{n.resolve()}),t.Oa.delete(e)}function Np(t,e,n){const r=q(t);let i=r.xa[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.xa[r.currentUser.toKey()]=i}}function Cs(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Da.get(e))t.ba.delete(r),n&&t.Sa.ka(r,n);t.Da.delete(e),t.isPrimaryClient&&t.Ma.Vr(e).forEach(r=>{t.Ma.containsKey(r)||PE(t,r)})}function PE(t,e){t.Ca.delete(e.path.canonicalString());const n=t.va.get(e);n!==null&&(As(t.remoteStore,n),t.va=t.va.remove(e),t.Fa.delete(n),Vp(t))}function Gd(t,e,n){for(const r of n)r instanceof EE?(t.Ma.addReference(r.key,e),hC(t,r)):r instanceof IE?(j("SyncEngine","Document no longer in limbo: "+r.key),t.Ma.removeReference(r.key,e),t.Ma.containsKey(r.key)||PE(t,r.key)):W()}function hC(t,e){const n=e.key,r=n.path.canonicalString();t.va.get(n)||t.Ca.has(r)||(j("SyncEngine","New document in limbo: "+n),t.Ca.add(r),Vp(t))}function Vp(t){for(;t.Ca.size>0&&t.va.size<t.maxConcurrentLimboResolutions;){const e=t.Ca.values().next().value;t.Ca.delete(e);const n=new $(ne.fromString(e)),r=t.Na.next();t.Fa.set(r,new eC(n)),t.va=t.va.insert(n,r),oc(t.remoteStore,new An(_t(Os(n.path)),r,"TargetPurposeLimboResolution",Pt.oe))}}async function Bn(t,e,n){const r=q(t),i=[],s=[],o=[];r.ba.isEmpty()||(r.ba.forEach((l,u)=>{o.push(r.Ba(u,e,n).then(c=>{var f;if((c||n)&&r.isPrimaryClient){const m=c?!c.fromCache:(f=n==null?void 0:n.targetChanges.get(u.targetId))===null||f===void 0?void 0:f.current;r.sharedClientState.updateQueryState(u.targetId,m?"current":"not-current")}if(c){i.push(c);const m=wp.Ki(u.targetId,c);s.push(m)}}))}),await Promise.all(o),r.Sa.h_(i),await async function(u,c){const f=q(u);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>M.forEach(c,v=>M.forEach(v.qi,A=>f.persistence.referenceDelegate.addReference(m,v.targetId,A)).next(()=>M.forEach(v.Qi,A=>f.persistence.referenceDelegate.removeReference(m,v.targetId,A)))))}catch(m){if(!Cr(m))throw m;j("LocalStore","Failed to update sequence numbers: "+m)}for(const m of c){const v=m.targetId;if(!m.fromCache){const A=f.ns.get(v),k=A.snapshotVersion,N=A.withLastLimboFreeSnapshotVersion(k);f.ns=f.ns.insert(v,N)}}}(r.localStore,s))}async function dC(t,e){const n=q(t);if(!n.currentUser.isEqual(e)){j("SyncEngine","User change. New user:",e.toKey());const r=await oE(n.localStore,e);n.currentUser=e,function(s,o){s.Oa.forEach(l=>{l.forEach(u=>{u.reject(new B(O.CANCELLED,o))})}),s.Oa.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Bn(n,r.us)}}function fC(t,e){const n=q(t),r=n.Fa.get(e);if(r&&r.wa)return Z().add(r.key);{let i=Z();const s=n.Da.get(e);if(!s)return i;for(const o of s){const l=n.ba.get(o);i=i.unionWith(l.view.Ea)}return i}}async function pC(t,e){const n=q(t),r=await bu(n.localStore,e.query,!0),i=e.view.pa(r);return n.isPrimaryClient&&Gd(n,e.targetId,i.fa),i}async function mC(t,e){const n=q(t);return cE(n.localStore,e).then(r=>Bn(n,r))}async function gC(t,e,n,r){const i=q(t),s=await function(l,u){const c=q(l),f=q(c.mutationQueue);return c.persistence.runTransaction("Lookup mutation documents","readonly",m=>f.vn(m,u).next(v=>v?c.localDocuments.getDocuments(m,v):M.resolve(null)))}(i.localStore,e);s!==null?(n==="pending"?await zs(i.remoteStore):n==="acknowledged"||n==="rejected"?(Np(i,e,r||null),Dp(i,e),function(l,u){q(q(l).mutationQueue).Mn(u)}(i.localStore,e)):W(),await Bn(i,s)):j("SyncEngine","Cannot apply mutation batch with id: "+e)}async function yC(t,e){const n=q(t);if(ac(n),Mp(n),e===!0&&n.La!==!0){const r=n.sharedClientState.getAllActiveQueryTargets(),i=await C_(n,r.toArray());n.La=!0,await $d(n.remoteStore,!0);for(const s of i)oc(n.remoteStore,s)}else if(e===!1&&n.La!==!1){const r=[];let i=Promise.resolve();n.Da.forEach((s,o)=>{n.sharedClientState.isLocalQueryTarget(o)?r.push(o):i=i.then(()=>(Cs(n,o),Ps(n.localStore,o,!0))),As(n.remoteStore,o)}),await i,await C_(n,r),function(o){const l=q(o);l.Fa.forEach((u,c)=>{As(l.remoteStore,c)}),l.Ma.mr(),l.Fa=new Map,l.va=new me($.comparator)}(n),n.La=!1,await $d(n.remoteStore,!1)}}async function C_(t,e,n){const r=q(t),i=[],s=[];for(const o of e){let l;const u=r.Da.get(o);if(u&&u.length!==0){l=await Ss(r.localStore,_t(u[0]));for(const c of u){const f=r.ba.get(c),m=await pC(r,f);m.snapshot&&s.push(m.snapshot)}}else{const c=await uE(r.localStore,o);l=await Ss(r.localStore,c),await kp(r,AE(c),o,!1,l.resumeToken)}i.push(l)}return r.Sa.h_(s),i}function AE(t){return p1(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function _C(t){return function(n){return q(q(n).persistence).Bi()}(q(t).localStore)}async function vC(t,e,n,r){const i=q(t);if(i.La)return void j("SyncEngine","Ignoring unexpected query state notification.");const s=i.Da.get(e);if(s&&s.length>0)switch(n){case"current":case"not-current":{const o=await cE(i.localStore,g1(s[0])),l=ka.createSynthesizedRemoteEventForCurrentChange(e,n==="current",$e.EMPTY_BYTE_STRING);await Bn(i,o,l);break}case"rejected":await Ps(i.localStore,e,!0),Cs(i,e,r);break;default:W()}}async function wC(t,e,n){const r=ac(t);if(r.La){for(const i of e){if(r.Da.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){j("SyncEngine","Adding an already active target "+i);continue}const s=await uE(r.localStore,i),o=await Ss(r.localStore,s);await kp(r,AE(s),o.targetId,!1,o.resumeToken),oc(r.remoteStore,o)}for(const i of n)r.Da.has(i)&&await Ps(r.localStore,i,!1).then(()=>{As(r.remoteStore,i),Cs(r,i)}).catch(Rr)}}function ac(t){const e=q(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=SE.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=fC.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=aC.bind(null,e),e.Sa.h_=QR.bind(null,e.eventManager),e.Sa.ka=YR.bind(null,e.eventManager),e}function Mp(t){const e=q(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=lC.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=uC.bind(null,e),e}function EC(t,e,n){const r=q(t);(async function(s,o,l){try{const u=await o.getMetadata();if(await function(A,k){const N=q(A),L=Oe(k.createTime);return N.persistence.runTransaction("hasNewerBundle","readonly",R=>N.$r.getBundleMetadata(R,k.id)).then(R=>!!R&&R.createTime.compareTo(L)>=0)}(s.localStore,u))return await o.close(),l._completeWith(function(A){return{taskState:"Success",documentsLoaded:A.totalDocuments,bytesLoaded:A.totalBytes,totalDocuments:A.totalDocuments,totalBytes:A.totalBytes}}(u)),Promise.resolve(new Set);l._updateProgress(wE(u));const c=new JR(u,s.localStore,o.serializer);let f=await o.qa();for(;f;){const v=await c._a(f);v&&l._updateProgress(v),f=await o.qa()}const m=await c.complete();return await Bn(s,m.ca,void 0),await function(A,k){const N=q(A);return N.persistence.runTransaction("Save bundle","readwrite",L=>N.$r.saveBundleMetadata(L,k))}(s.localStore,u),l._completeWith(m.progress),Promise.resolve(m.ua)}catch(u){return rn("SyncEngine",`Loading bundle failed with ${u}`),l._failWith(u),Promise.resolve(new Set)}})(r,e,n).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}class Wd{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=Na(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return sE(this.persistence,new iE,e.initialUser,this.serializer)}createPersistence(e){return new rE(sc.Hr,this.serializer)}createSharedClientState(e){return new dE}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class RE extends Wd{constructor(e,n,r){super(),this.Qa=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Qa.initialize(this,e),await Mp(this.Qa.syncEngine),await zs(this.Qa.remoteStore),await this.persistence.fi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}createLocalStore(e){return sE(this.persistence,new iE,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,n){const r=this.persistence.referenceDelegate.garbageCollector;return new oR(r,e.asyncQueue,n)}createIndexBackfillerScheduler(e,n){const r=new $A(n,this.persistence);return new UA(e.asyncQueue,r)}createPersistence(e){const n=vp(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?It.withCacheSize(this.cacheSizeBytes):It.DEFAULT;return new _p(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,fE(),ql(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new dE}}class IC extends RE{constructor(e,n){super(e,n,!1),this.Qa=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const n=this.Qa.syncEngine;this.sharedClientState instanceof xh&&(this.sharedClientState.syncEngine={Zs:gC.bind(null,n),Xs:vC.bind(null,n),eo:wC.bind(null,n),Bi:_C.bind(null,n),Ys:mC.bind(null,n)},await this.sharedClientState.start()),await this.persistence.fi(async r=>{await yC(this.Qa.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())})}createSharedClientState(e){const n=fE();if(!xh.D(n))throw new B(O.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=vp(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new xh(n,e.asyncQueue,r,e.clientId,e.initialUser)}}class Lp{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>R_(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=dC.bind(null,this.syncEngine),await $d(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new HR}()}createDatastore(e){const n=Na(e.databaseInfo.databaseId),r=function(s){return new kR(s)}(e.databaseInfo);return function(s,o,l,u){return new VR(s,o,l,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,l){return new LR(r,i,s,o,l)}(this.localStore,this.datastore,e.asyncQueue,n=>R_(this.syncEngine,n,0),function(){return T_.D()?new T_:new RR}())}createSyncEngine(e,n){return function(i,s,o,l,u,c,f){const m=new tC(i,s,o,l,u,c);return f&&(m.La=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e;await async function(r){const i=q(r);j("RemoteStore","RemoteStore shutting down."),i.M_.add(5),await js(i),i.O_.shutdown(),i.N_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b_(t,e=10240){let n=0;return{async read(){if(n<t.byteLength){const r={value:t.slice(n,n+e),done:!1};return n+=e,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lc{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ka(this.observer.next,e)}error(e){this.observer.error?this.Ka(this.observer.error,e):Le("Uncaught Error in snapshot listener:",e.toString())}$a(){this.muted=!0}Ka(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TC{constructor(e,n){this.Ua=e,this.serializer=n,this.metadata=new He,this.buffer=new Uint8Array,this.Wa=function(){return new TextDecoder("utf-8")}(),this.Ga().then(r=>{r&&r.sa()?this.metadata.resolve(r.ia.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r==null?void 0:r.ia)}`))},r=>this.metadata.reject(r))}close(){return this.Ua.cancel()}async getMetadata(){return this.metadata.promise}async qa(){return await this.getMetadata(),this.Ga()}async Ga(){const e=await this.za();if(e===null)return null;const n=this.Wa.decode(e),r=Number(n);isNaN(r)&&this.ja(`length string (${n}) is not valid number`);const i=await this.Ha(r);return new XR(JSON.parse(i),e.length+r)}Ja(){return this.buffer.findIndex(e=>e===123)}async za(){for(;this.Ja()<0&&!await this.Ya(););if(this.buffer.length===0)return null;const e=this.Ja();e<0&&this.ja("Reached the end of bundle when a length string is expected.");const n=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),n}async Ha(e){for(;this.buffer.length<e;)await this.Ya()&&this.ja("Reached the end of bundle when more is expected.");const n=this.Wa.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),n}ja(e){throw this.Ua.cancel(),new Error(`Invalid bundle format: ${e}`)}async Ya(){const e=await this.Ua.read();if(!e.done){const n=new Uint8Array(this.buffer.length+e.value.length);n.set(this.buffer),n.set(e.value,this.buffer.length),this.buffer=n}return e.done}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xC{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new B(O.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const n=await async function(i,s){const o=q(i),l={documents:s.map(m=>ma(o.serializer,m))},u=await o.xo("BatchGetDocuments",o.serializer.databaseId,ne.emptyPath(),l,s.length),c=new Map;u.forEach(m=>{const v=z2(o.serializer,m);c.set(v.key.toString(),v)});const f=[];return s.forEach(m=>{const v=c.get(m.toString());Q(!!v),f.push(v)}),f}(this.datastore,e);return n.forEach(r=>this.recordVersion(r)),n}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Bs(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach(n=>{e.delete(n.key.toString())}),e.forEach((n,r)=>{const i=$.fromPath(r);this.mutations.push(new lp(i,this.precondition(i)))}),await async function(r,i){const s=q(r),o={writes:i.map(l=>ga(s.serializer,l))};await s.Co("Commit",s.serializer.databaseId,ne.emptyPath(),o)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw W();n=Y.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!n.isEqual(r))throw new B(O.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(Y.min())?Ie.exists(!1):Ie.updateTime(n):Ie.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(Y.min()))throw new B(O.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Ie.updateTime(n)}return Ie.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SC{constructor(e,n,r,i,s){this.asyncQueue=e,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=s,this.Za=r.maxAttempts,this.Yo=new Ip(this.asyncQueue,"transaction_retry")}Xa(){this.Za-=1,this.eu()}eu(){this.Yo.$o(async()=>{const e=new xC(this.datastore),n=this.tu(e);n&&n.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(i=>{this.nu(i)}))}).catch(r=>{this.nu(r)})})}tu(e){try{const n=this.updateFunction(e);return!Pa(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}nu(e){this.Za>0&&this.ru(e)?(this.Za-=1,this.asyncQueue.enqueueAndForget(()=>(this.eu(),Promise.resolve()))):this.deferred.reject(e)}ru(e){if(e.name==="FirebaseError"){const n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!b1(n)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PC{constructor(e,n,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=We.UNAUTHENTICATED,this.clientId=qw.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async s=>{j("FirestoreClient","Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>(j("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new B(O.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new He;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=$s(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Gl(t,e){t.asyncQueue.verifyOperationInProgress(),j("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await oE(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Kd(t,e){t.asyncQueue.verifyOperationInProgress();const n=await Op(t);j("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>x_(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>x_(e.remoteStore,i)),t._onlineComponents=e}function CE(t){return t.name==="FirebaseError"?t.code===O.FAILED_PRECONDITION||t.code===O.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}async function Op(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){j("FirestoreClient","Using user provided OfflineComponentProvider");try{await Gl(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!CE(n))throw n;rn("Error using user provided cache. Falling back to memory cache: "+n),await Gl(t,new Wd)}}else j("FirestoreClient","Using default OfflineComponentProvider"),await Gl(t,new Wd);return t._offlineComponents}async function uc(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(j("FirestoreClient","Using user provided OnlineComponentProvider"),await Kd(t,t._uninitializedComponentsProvider._online)):(j("FirestoreClient","Using default OnlineComponentProvider"),await Kd(t,new Lp))),t._onlineComponents}function bE(t){return Op(t).then(e=>e.persistence)}function Fp(t){return Op(t).then(e=>e.localStore)}function kE(t){return uc(t).then(e=>e.remoteStore)}function Bp(t){return uc(t).then(e=>e.syncEngine)}function AC(t){return uc(t).then(e=>e.datastore)}async function bs(t){const e=await uc(t),n=e.eventManager;return n.onListen=nC.bind(null,e.syncEngine),n.onUnlisten=iC.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=rC.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=sC.bind(null,e.syncEngine),n}function RC(t){return t.asyncQueue.enqueue(async()=>{const e=await bE(t),n=await kE(t);return e.setNetworkEnabled(!0),function(i){const s=q(i);return s.M_.delete(0),Va(s)}(n)})}function CC(t){return t.asyncQueue.enqueue(async()=>{const e=await bE(t),n=await kE(t);return e.setNetworkEnabled(!1),async function(i){const s=q(i);s.M_.add(0),await js(s),s.N_.set("Offline")}(n)})}function bC(t,e){const n=new He;return t.asyncQueue.enqueueAndForget(async()=>async function(i,s,o){try{const l=await function(c,f){const m=q(c);return m.persistence.runTransaction("read document","readonly",v=>m.localDocuments.getDocument(v,f))}(i,s);l.isFoundDocument()?o.resolve(l):l.isNoDocument()?o.resolve(null):o.reject(new B(O.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(l){const u=$s(l,`Failed to get document '${s} from cache`);o.reject(u)}}(await Fp(t),e,n)),n.promise}function DE(t,e,n={}){const r=new He;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,l,u,c){const f=new lc({next:v=>{o.enqueueAndForget(()=>Rp(s,m));const A=v.docs.has(l);!A&&v.fromCache?c.reject(new B(O.UNAVAILABLE,"Failed to get document because the client is offline.")):A&&v.fromCache&&u&&u.source==="server"?c.reject(new B(O.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(v)},error:v=>c.reject(v)}),m=new bp(Os(l.path),f,{includeMetadataChanges:!0,ra:!0});return Ap(s,m)}(await bs(t),t.asyncQueue,e,n,r)),r.promise}function kC(t,e){const n=new He;return t.asyncQueue.enqueueAndForget(async()=>async function(i,s,o){try{const l=await bu(i,s,!0),u=new TE(s,l.hs),c=u.da(l.documents),f=u.applyChanges(c,!1);o.resolve(f.snapshot)}catch(l){const u=$s(l,`Failed to execute query '${s} against cache`);o.reject(u)}}(await Fp(t),e,n)),n.promise}function NE(t,e,n={}){const r=new He;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,l,u,c){const f=new lc({next:v=>{o.enqueueAndForget(()=>Rp(s,m)),v.fromCache&&u.source==="server"?c.reject(new B(O.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(v)},error:v=>c.reject(v)}),m=new bp(l,f,{includeMetadataChanges:!0,ra:!0});return Ap(s,m)}(await bs(t),t.asyncQueue,e,n,r)),r.promise}function DC(t,e){const n=new lc(e);return t.asyncQueue.enqueueAndForget(async()=>function(i,s){q(i).z_.add(s),s.next()}(await bs(t),n)),()=>{n.$a(),t.asyncQueue.enqueueAndForget(async()=>function(i,s){q(i).z_.delete(s)}(await bs(t),n))}}function NC(t,e,n,r){const i=function(o,l){let u;return u=typeof o=="string"?D1().encode(o):o,function(f,m){return new TC(f,m)}(function(f,m){if(f instanceof Uint8Array)return b_(f,m);if(f instanceof ArrayBuffer)return b_(new Uint8Array(f),m);if(f instanceof ReadableStream)return f.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(u),l)}(n,Na(e));t.asyncQueue.enqueueAndForget(async()=>{EC(await Bp(t),i,r)})}function VC(t,e){return t.asyncQueue.enqueue(async()=>function(r,i){const s=q(r);return s.persistence.runTransaction("Get named query","readonly",o=>s.$r.getNamedQuery(o,i))}(await Fp(t),e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VE(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k_=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jp(t,e,n){if(!n)throw new B(O.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function ME(t,e,n,r){if(e===!0&&r===!0)throw new B(O.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function D_(t){if(!$.isDocumentKey(t))throw new B(O.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function N_(t){if($.isDocumentKey(t))throw new B(O.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function cc(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":W()}function ae(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new B(O.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=cc(t);throw new B(O.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function LE(t,e){if(e<=0)throw new B(O.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V_{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new B(O.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new B(O.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}ME("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=VE((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new B(O.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new B(O.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new B(O.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Ma{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new V_({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new B(O.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new B(O.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new V_(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new kA;switch(r.type){case"firstParty":return new MA(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new B(O.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=k_.get(n);r&&(j("ComponentProvider","Removing Datastore"),k_.delete(n),r.terminate())}(this),Promise.resolve()}}function MC(t,e,n,r={}){var i;const s=(t=ae(t,Ma))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&rn("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let l,u;if(typeof r.mockUserToken=="string")l=r.mockUserToken,u=We.MOCK_USER;else{l=lP(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new B(O.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new We(c)}t._authCredentials=new DA(new $w(l,u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vt=class OE{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new OE(this.firestore,e,this._query)}},Re=class FE{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new hr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new FE(this.firestore,e,this._key)}},hr=class BE extends vt{constructor(e,n,r){super(e,n,Os(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Re(this.firestore,null,new $(e))}withConverter(e){return new BE(this.firestore,e,this._path)}};function jE(t,e,...n){if(t=je(t),jp("collection","path",e),t instanceof Ma){const r=ne.fromString(e,...n);return N_(r),new hr(t,null,r)}{if(!(t instanceof Re||t instanceof hr))throw new B(O.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ne.fromString(e,...n));return N_(r),new hr(t.firestore,null,r)}}function LC(t,e){if(t=ae(t,Ma),jp("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new B(O.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new vt(t,null,function(r){return new On(ne.emptyPath(),r)}(e))}function Vu(t,e,...n){if(t=je(t),arguments.length===1&&(e=qw.newId()),jp("doc","path",e),t instanceof Ma){const r=ne.fromString(e,...n);return D_(r),new Re(t,null,new $(r))}{if(!(t instanceof Re||t instanceof hr))throw new B(O.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ne.fromString(e,...n));return D_(r),new Re(t.firestore,t instanceof hr?t.converter:null,new $(r))}}function zE(t,e){return t=je(t),e=je(e),(t instanceof Re||t instanceof hr)&&(e instanceof Re||e instanceof hr)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function zp(t,e){return t=je(t),e=je(e),t instanceof vt&&e instanceof vt&&t.firestore===e.firestore&&Ra(t._query,e._query)&&t.converter===e.converter}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OC{constructor(){this.iu=Promise.resolve(),this.su=[],this.ou=!1,this._u=[],this.au=null,this.uu=!1,this.cu=!1,this.lu=[],this.Yo=new Ip(this,"async_queue_retry"),this.hu=()=>{const n=ql();n&&j("AsyncQueue","Visibility state changed to "+n.visibilityState),this.Yo.Wo()};const e=ql();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.hu)}get isShuttingDown(){return this.ou}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Pu(),this.Iu(e)}enterRestrictedMode(e){if(!this.ou){this.ou=!0,this.cu=e||!1;const n=ql();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.hu)}}enqueue(e){if(this.Pu(),this.ou)return new Promise(()=>{});const n=new He;return this.Iu(()=>this.ou&&this.cu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.su.push(e),this.Tu()))}async Tu(){if(this.su.length!==0){try{await this.su[0](),this.su.shift(),this.Yo.reset()}catch(e){if(!Cr(e))throw e;j("AsyncQueue","Operation failed with retryable error: "+e)}this.su.length>0&&this.Yo.$o(()=>this.Tu())}}Iu(e){const n=this.iu.then(()=>(this.uu=!0,e().catch(r=>{this.au=r,this.uu=!1;const i=function(o){let l=o.message||"";return o.stack&&(l=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),l}(r);throw Le("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.uu=!1,r))));return this.iu=n,n}enqueueAfterDelay(e,n,r){this.Pu(),this.lu.indexOf(e)>-1&&(n=0);const i=Pp.createAndSchedule(this,e,n,r,s=>this.Eu(s));return this._u.push(i),i}Pu(){this.au&&W()}verifyOperationInProgress(){}async du(){let e;do e=this.iu,await e;while(e!==this.iu)}Au(e){for(const n of this._u)if(n.timerId===e)return!0;return!1}Ru(e){return this.du().then(()=>{this._u.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this._u)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.du()})}Vu(e){this.lu.push(e)}Eu(e){const n=this._u.indexOf(e);this._u.splice(n,1)}}function Hd(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(t,["next","error","complete"])}class FC{constructor(){this._progressObserver={},this._taskCompletionResolver=new He,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,r){this._progressObserver={next:e,error:n,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BC=-1;let Ne=class extends Ma{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=function(){return new OC}(),this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||UE(this),this._firestoreClient.terminate()}};function Ye(t){return t._firestoreClient||UE(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function UE(t){var e,n,r;const i=t._freezeSettings(),s=function(l,u,c,f){return new c2(l,u,c,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,VE(f.experimentalLongPollingOptions),f.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._firestoreClient=new PC(t._authCredentials,t._appCheckCredentials,t._queue,s),!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function jC(t,e){qE(t=ae(t,Ne));const n=Ye(t);if(n._uninitializedComponentsProvider)throw new B(O.FAILED_PRECONDITION,"SDK cache is already specified.");rn("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=t._freezeSettings(),i=new Lp;return $E(n,i,new RE(i,r.cacheSizeBytes,e==null?void 0:e.forceOwnership))}function zC(t){qE(t=ae(t,Ne));const e=Ye(t);if(e._uninitializedComponentsProvider)throw new B(O.FAILED_PRECONDITION,"SDK cache is already specified.");rn("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=t._freezeSettings(),r=new Lp;return $E(e,r,new IC(r,n.cacheSizeBytes))}function $E(t,e,n){const r=new He;return t.asyncQueue.enqueue(async()=>{try{await Gl(t,n),await Kd(t,e),r.resolve()}catch(i){const s=i;if(!CE(s))throw s;rn("Error enabling indexeddb cache. Falling back to memory cache: "+s),r.reject(s)}}).then(()=>r.promise)}function UC(t){if(t._initialized&&!t._terminated)throw new B(O.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new He;return t._queue.enqueueAndForgetEvenWhileRestricted(async()=>{try{await async function(r){if(!dn.D())return Promise.resolve();const i=r+"main";await dn.delete(i)}(vp(t._databaseId,t._persistenceKey)),e.resolve()}catch(n){e.reject(n)}}),e.promise}function $C(t){return function(n){const r=new He;return n.asyncQueue.enqueueAndForget(async()=>cC(await Bp(n),r)),r.promise}(Ye(t=ae(t,Ne)))}function qC(t){return RC(Ye(t=ae(t,Ne)))}function GC(t){return CC(Ye(t=ae(t,Ne)))}function WC(t,e){const n=Ye(t=ae(t,Ne)),r=new FC;return NC(n,t._databaseId,e,r),r}function KC(t,e){return VC(Ye(t=ae(t,Ne)),e).then(n=>n?new vt(t,null,n.query):null)}function qE(t){if(t._initialized||t._terminated)throw new B(O.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new mn($e.fromBase64String(e))}catch(n){throw new B(O.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new mn($e.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ir=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new B(O.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ee(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ti=class{constructor(e){this._methodName=e}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hc{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new B(O.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new B(O.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return J(this._lat,e._lat)||J(this._long,e._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HC=/^__.*__$/;class QC{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Fn(e,this.data,this.fieldMask,n,this.fieldTransforms):new Fs(e,this.data,n,this.fieldTransforms)}}class GE{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Fn(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function WE(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw W()}}class dc{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.mu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get fu(){return this.settings.fu}gu(e){return new dc(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}pu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.gu({path:r,yu:!1});return i.wu(e),i}Su(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.gu({path:r,yu:!1});return i.mu(),i}bu(e){return this.gu({path:void 0,yu:!0})}Du(e){return Mu(e,this.settings.methodName,this.settings.Cu||!1,this.path,this.settings.vu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}mu(){if(this.path)for(let e=0;e<this.path.length;e++)this.wu(this.path.get(e))}wu(e){if(e.length===0)throw this.Du("Document fields must not be empty");if(WE(this.fu)&&HC.test(e))throw this.Du('Document fields cannot begin and end with "__"')}}class YC{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Na(e)}Fu(e,n,r,i=!1){return new dc({fu:e,methodName:n,vu:r,path:Ee.emptyPath(),yu:!1,Cu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function xi(t){const e=t._freezeSettings(),n=Na(t._databaseId);return new YC(t._databaseId,!!e.ignoreUndefinedProperties,n)}function fc(t,e,n,r,i,s={}){const o=t.Fu(s.merge||s.mergeFields?2:0,e,n,i);Hp("Data must be an object, but it was:",o,r);const l=QE(r,o);let u,c;if(s.merge)u=new At(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const f=[];for(const m of s.mergeFields){const v=Qd(e,m,n);if(!o.contains(v))throw new B(O.INVALID_ARGUMENT,`Field '${v}' is specified in your field mask but missing from your input data.`);XE(f,v)||f.push(v)}u=new At(f),c=o.fieldTransforms.filter(m=>u.covers(m.field))}else u=null,c=o.fieldTransforms;return new QC(new et(l),u,c)}class La extends Ti{_toFieldTransform(e){if(e.fu!==2)throw e.fu===1?e.Du(`${this._methodName}() can only appear at the top level of your update data`):e.Du(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof La}}function KE(t,e,n){return new dc({fu:3,vu:e.settings.vu,methodName:t._methodName,yu:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Up extends Ti{_toFieldTransform(e){return new ba(e.path,new Is)}isEqual(e){return e instanceof Up}}class $p extends Ti{constructor(e,n){super(e),this.Mu=n}_toFieldTransform(e){const n=KE(this,e,!0),r=this.Mu.map(s=>Si(s,n)),i=new fi(r);return new ba(e.path,i)}isEqual(e){return e instanceof $p&&sa(this.Mu,e.Mu)}}class qp extends Ti{constructor(e,n){super(e),this.Mu=n}_toFieldTransform(e){const n=KE(this,e,!0),r=this.Mu.map(s=>Si(s,n)),i=new pi(r);return new ba(e.path,i)}isEqual(e){return e instanceof qp&&sa(this.Mu,e.Mu)}}class Gp extends Ti{constructor(e,n){super(e),this.xu=n}_toFieldTransform(e){const n=new Ts(e.serializer,T1(e.serializer,this.xu));return new ba(e.path,n)}isEqual(e){return e instanceof Gp&&this.xu===e.xu}}function Wp(t,e,n,r){const i=t.Fu(1,e,n);Hp("Data must be an object, but it was:",i,r);const s=[],o=et.empty();Ii(r,(u,c)=>{const f=Qp(e,u,n);c=je(c);const m=i.Su(f);if(c instanceof La)s.push(f);else{const v=Si(c,m);v!=null&&(s.push(f),o.set(f,v))}});const l=new At(s);return new GE(o,l,i.fieldTransforms)}function Kp(t,e,n,r,i,s){const o=t.Fu(1,e,n),l=[Qd(e,r,n)],u=[i];if(s.length%2!=0)throw new B(O.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let v=0;v<s.length;v+=2)l.push(Qd(e,s[v])),u.push(s[v+1]);const c=[],f=et.empty();for(let v=l.length-1;v>=0;--v)if(!XE(c,l[v])){const A=l[v];let k=u[v];k=je(k);const N=o.Su(A);if(k instanceof La)c.push(A);else{const L=Si(k,N);L!=null&&(c.push(A),f.set(A,L))}}const m=new At(c);return new GE(f,m,o.fieldTransforms)}function HE(t,e,n,r=!1){return Si(n,t.Fu(r?4:3,e))}function Si(t,e){if(YE(t=je(t)))return Hp("Unsupported field value:",e,t),QE(t,e);if(t instanceof Ti)return function(r,i){if(!WE(i.fu))throw i.Du(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Du(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.yu&&e.fu!==4)throw e.Du("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const l of r){let u=Si(l,i.bu(o));u==null&&(u={nullValue:"NULL_VALUE"}),s.push(u),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=je(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return T1(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=Te.fromDate(r);return{timestampValue:xs(i.serializer,s)}}if(r instanceof Te){const s=new Te(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:xs(i.serializer,s)}}if(r instanceof hc)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof mn)return{bytesValue:M1(i.serializer,r._byteString)};if(r instanceof Re){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Du(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:fp(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.Du(`Unsupported field value: ${cc(r)}`)}(t,e)}function QE(t,e){const n={};return r1(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ii(t,(r,i)=>{const s=Si(i,e.pu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function YE(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Te||t instanceof hc||t instanceof mn||t instanceof Re||t instanceof Ti)}function Hp(t,e,n){if(!YE(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=cc(n);throw r==="an object"?e.Du(t+" a custom object"):e.Du(t+" "+r)}}function Qd(t,e,n){if((e=je(e))instanceof Ir)return e._internalPath;if(typeof e=="string")return Qp(t,e);throw Mu("Field path arguments must be of type string or ",t,!1,void 0,n)}const XC=new RegExp("[~\\*/\\[\\]]");function Qp(t,e,n){if(e.search(XC)>=0)throw Mu(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Ir(...e.split("."))._internalPath}catch{throw Mu(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Mu(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new B(O.INVALID_ARGUMENT,l+t+u)}function XE(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ya{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Re(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new JC(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(pc("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class JC extends ya{data(){return super.data()}}function pc(t,e){return typeof e=="string"?Qp(t,e):e instanceof Ir?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JE(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new B(O.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Yp{}class Oa extends Yp{}function Wn(t,e,...n){let r=[];e instanceof Yp&&r.push(e),r=r.concat(n),function(s){const o=s.filter(u=>u instanceof Xp).length,l=s.filter(u=>u instanceof mc).length;if(o>1||o>0&&l>0)throw new B(O.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class mc extends Oa{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new mc(e,n,r)}_apply(e){const n=this._parse(e);return eI(e._query,n),new vt(e.firestore,e.converter,Vd(e._query,n))}_parse(e){const n=xi(e.firestore);return function(s,o,l,u,c,f,m){let v;if(c.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new B(O.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){L_(m,f);const A=[];for(const k of m)A.push(M_(u,s,k));v={arrayValue:{values:A}}}else v=M_(u,s,m)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||L_(m,f),v=HE(l,o,m,f==="in"||f==="not-in");return re.create(c,f,v)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function ZC(t,e,n){const r=e,i=pc("where",t);return mc._create(i,r,n)}class Xp extends Yp{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Xp(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:ue.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i;const l=s.getFlattenedFilters();for(const u of l)eI(o,u),o=Vd(o,u)}(e._query,n),new vt(e.firestore,e.converter,Vd(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Jp extends Oa{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Jp(e,n)}_apply(e){const n=function(i,s,o){if(i.startAt!==null)throw new B(O.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new B(O.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new pa(s,o)}(e._query,this._field,this._direction);return new vt(e.firestore,e.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new On(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function eb(t,e="asc"){const n=e,r=pc("orderBy",t);return Jp._create(r,n)}class gc extends Oa{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new gc(e,n,r)}_apply(e){return new vt(e.firestore,e.converter,Pu(e._query,this._limit,this._limitType))}}function tb(t){return LE("limit",t),gc._create("limit",t,"F")}function nb(t){return LE("limitToLast",t),gc._create("limitToLast",t,"L")}class yc extends Oa{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new yc(e,n,r)}_apply(e){const n=ZE(e,this.type,this._docOrFields,this._inclusive);return new vt(e.firestore,e.converter,function(i,s){return new On(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,s,i.endAt)}(e._query,n))}}function rb(...t){return yc._create("startAt",t,!0)}function ib(...t){return yc._create("startAfter",t,!1)}class _c extends Oa{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new _c(e,n,r)}_apply(e){const n=ZE(e,this.type,this._docOrFields,this._inclusive);return new vt(e.firestore,e.converter,function(i,s){return new On(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,s)}(e._query,n))}}function sb(...t){return _c._create("endBefore",t,!1)}function ob(...t){return _c._create("endAt",t,!0)}function ZE(t,e,n,r){if(n[0]=je(n[0]),n[0]instanceof ya)return function(s,o,l,u,c){if(!u)throw new B(O.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${l}().`);const f=[];for(const m of as(s))if(m.field.isKeyField())f.push(hi(o,u.key));else{const v=u.data.field(m.field);if(ec(v))throw new B(O.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+m.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(v===null){const A=m.field.canonicalString();throw new B(O.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${A}' (used as the orderBy) does not exist.`)}f.push(v)}return new wr(f,c)}(t._query,t.firestore._databaseId,e,n[0]._document,r);{const i=xi(t.firestore);return function(o,l,u,c,f,m){const v=o.explicitOrderBy;if(f.length>v.length)throw new B(O.INVALID_ARGUMENT,`Too many arguments provided to ${c}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const A=[];for(let k=0;k<f.length;k++){const N=f[k];if(v[k].field.isKeyField()){if(typeof N!="string")throw new B(O.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${c}(), but got a ${typeof N}`);if(!op(o)&&N.indexOf("/")!==-1)throw new B(O.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${c}() must be a plain document ID, but '${N}' contains a slash.`);const L=o.path.child(ne.fromString(N));if(!$.isDocumentKey(L))throw new B(O.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${c}() must result in a valid document path, but '${L}' is not because it contains an odd number of segments.`);const R=new $(L);A.push(hi(l,R))}else{const L=HE(u,c,N);A.push(L)}}return new wr(A,m)}(t._query,t.firestore._databaseId,i,e,n,r)}}function M_(t,e,n){if(typeof(n=je(n))=="string"){if(n==="")throw new B(O.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!op(e)&&n.indexOf("/")!==-1)throw new B(O.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(ne.fromString(n));if(!$.isDocumentKey(r))throw new B(O.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return hi(t,new $(r))}if(n instanceof Re)return hi(t,n._key);throw new B(O.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${cc(n)}.`)}function L_(t,e){if(!Array.isArray(t)||t.length===0)throw new B(O.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function eI(t,e){const n=function(i,s){for(const o of i)for(const l of o.getFlattenedFilters())if(s.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new B(O.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new B(O.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class Zp{convertValue(e,n="none"){switch(ci(e)){case 0:return null;case 1:return e.booleanValue;case 2:return De(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(yr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw W()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Ii(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertGeoPoint(e){return new hc(De(e.latitude),De(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=ip(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(ha(e));default:return null}}convertTimestamp(e){const n=Vn(e);return new Te(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=ne.fromString(e);Q(W1(r));const i=new _r(r.get(1),r.get(3)),s=new $(r.popFirst(5));return i.isEqual(n)||Le(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vc(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class ab extends Zp{constructor(e){super(),this.firestore=e}convertBytes(e){return new mn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Re(this.firestore,null,n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jr{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}let Mn=class extends ya{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new zo(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(pc("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}},zo=class extends Mn{data(e={}){return super.data(e)}},Tr=class{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Jr(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new zo(this._firestore,this._userDataWriter,r.key,r,new Jr(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new B(O.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(l=>{const u=new zo(i._firestore,i._userDataWriter,l.doc.key,l.doc,new Jr(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);return l.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(l=>s||l.type!==3).map(l=>{const u=new zo(i._firestore,i._userDataWriter,l.doc.key,l.doc,new Jr(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);let c=-1,f=-1;return l.type!==0&&(c=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),f=o.indexOf(l.doc.key)),{type:lb(l.type),doc:u,oldIndex:c,newIndex:f}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}};function lb(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return W()}}function tI(t,e){return t instanceof Mn&&e instanceof Mn?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(t._document===null?e._document===null:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof Tr&&e instanceof Tr&&t._firestore===e._firestore&&zp(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ub(t){t=ae(t,Re);const e=ae(t.firestore,Ne);return DE(Ye(e),t._key).then(n=>tm(e,t,n))}class Pi extends Zp{constructor(e){super(),this.firestore=e}convertBytes(e){return new mn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Re(this.firestore,null,n)}}function cb(t){t=ae(t,Re);const e=ae(t.firestore,Ne),n=Ye(e),r=new Pi(e);return bC(n,t._key).then(i=>new Mn(e,r,t._key,i,new Jr(i!==null&&i.hasLocalMutations,!0),t.converter))}function hb(t){t=ae(t,Re);const e=ae(t.firestore,Ne);return DE(Ye(e),t._key,{source:"server"}).then(n=>tm(e,t,n))}function db(t){t=ae(t,vt);const e=ae(t.firestore,Ne),n=Ye(e),r=new Pi(e);return JE(t._query),NE(n,t._query).then(i=>new Tr(e,r,t,i))}function fb(t){t=ae(t,vt);const e=ae(t.firestore,Ne),n=Ye(e),r=new Pi(e);return kC(n,t._query).then(i=>new Tr(e,r,t,i))}function pb(t){t=ae(t,vt);const e=ae(t.firestore,Ne),n=Ye(e),r=new Pi(e);return NE(n,t._query,{source:"server"}).then(i=>new Tr(e,r,t,i))}function O_(t,e,n){t=ae(t,Re);const r=ae(t.firestore,Ne),i=vc(t.converter,e,n);return Fa(r,[fc(xi(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Ie.none())])}function F_(t,e,n,...r){t=ae(t,Re);const i=ae(t.firestore,Ne),s=xi(i);let o;return o=typeof(e=je(e))=="string"||e instanceof Ir?Kp(s,"updateDoc",t._key,e,n,r):Wp(s,"updateDoc",t._key,e),Fa(i,[o.toMutation(t._key,Ie.exists(!0))])}function mb(t){return Fa(ae(t.firestore,Ne),[new Bs(t._key,Ie.none())])}function gb(t,e){const n=ae(t.firestore,Ne),r=Vu(t),i=vc(t.converter,e);return Fa(n,[fc(xi(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,Ie.exists(!1))]).then(()=>r)}function em(t,...e){var n,r,i;t=je(t);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||Hd(e[o])||(s=e[o],o++);const l={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(Hd(e[o])){const m=e[o];e[o]=(n=m.next)===null||n===void 0?void 0:n.bind(m),e[o+1]=(r=m.error)===null||r===void 0?void 0:r.bind(m),e[o+2]=(i=m.complete)===null||i===void 0?void 0:i.bind(m)}let u,c,f;if(t instanceof Re)c=ae(t.firestore,Ne),f=Os(t._key.path),u={next:m=>{e[o]&&e[o](tm(c,t,m))},error:e[o+1],complete:e[o+2]};else{const m=ae(t,vt);c=ae(m.firestore,Ne),f=m._query;const v=new Pi(c);u={next:A=>{e[o]&&e[o](new Tr(c,v,m,A))},error:e[o+1],complete:e[o+2]},JE(t._query)}return function(v,A,k,N){const L=new lc(N),R=new bp(A,L,k);return v.asyncQueue.enqueueAndForget(async()=>Ap(await bs(v),R)),()=>{L.$a(),v.asyncQueue.enqueueAndForget(async()=>Rp(await bs(v),R))}}(Ye(c),f,l,u)}function yb(t,e){return DC(Ye(t=ae(t,Ne)),Hd(e)?e:{next:e})}function Fa(t,e){return function(r,i){const s=new He;return r.asyncQueue.enqueueAndForget(async()=>oC(await Bp(r),i,s)),s.promise}(Ye(t),e)}function tm(t,e,n){const r=n.docs.get(e._key),i=new Pi(t);return new Mn(t,i,e._key,r,new Jr(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _b={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vb=class{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=xi(e)}set(e,n,r){this._verifyNotCommitted();const i=Jn(e,this._firestore),s=vc(i.converter,n,r),o=fc(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,r);return this._mutations.push(o.toMutation(i._key,Ie.none())),this}update(e,n,r,...i){this._verifyNotCommitted();const s=Jn(e,this._firestore);let o;return o=typeof(n=je(n))=="string"||n instanceof Ir?Kp(this._dataReader,"WriteBatch.update",s._key,n,r,i):Wp(this._dataReader,"WriteBatch.update",s._key,n),this._mutations.push(o.toMutation(s._key,Ie.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=Jn(e,this._firestore);return this._mutations=this._mutations.concat(new Bs(n._key,Ie.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new B(O.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function Jn(t,e){if((t=je(t)).firestore!==e)throw new B(O.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let wb=class extends class{constructor(n,r){this._firestore=n,this._transaction=r,this._dataReader=xi(n)}get(n){const r=Jn(n,this._firestore),i=new ab(this._firestore);return this._transaction.lookup([r._key]).then(s=>{if(!s||s.length!==1)return W();const o=s[0];if(o.isFoundDocument())return new ya(this._firestore,i,o.key,o,r.converter);if(o.isNoDocument())return new ya(this._firestore,i,r._key,null,r.converter);throw W()})}set(n,r,i){const s=Jn(n,this._firestore),o=vc(s.converter,r,i),l=fc(this._dataReader,"Transaction.set",s._key,o,s.converter!==null,i);return this._transaction.set(s._key,l),this}update(n,r,i,...s){const o=Jn(n,this._firestore);let l;return l=typeof(r=je(r))=="string"||r instanceof Ir?Kp(this._dataReader,"Transaction.update",o._key,r,i,s):Wp(this._dataReader,"Transaction.update",o._key,r),this._transaction.update(o._key,l),this}delete(n){const r=Jn(n,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=Jn(e,this._firestore),r=new Pi(this._firestore);return super.get(e).then(i=>new Mn(this._firestore,r,n._key,i._document,new Jr(!1,!1),n.converter))}};function Eb(t,e,n){t=ae(t,Ne);const r=Object.assign(Object.assign({},_b),n);return function(s){if(s.maxAttempts<1)throw new B(O.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(s,o,l){const u=new He;return s.asyncQueue.enqueueAndForget(async()=>{const c=await AC(s);new SC(s.asyncQueue,c,l,o,u).Xa()}),u.promise}(Ye(t),i=>e(new wb(t,i)),r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ib(){return new La("deleteField")}function Tb(){return new Up("serverTimestamp")}function xb(...t){return new $p("arrayUnion",t)}function Sb(...t){return new qp("arrayRemove",t)}function Pb(t){return new Gp("increment",t)}(function(e,n=!0){(function(i){Ls=i})(Jf),_s(new li("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),l=new Ne(new NA(r.getProvider("auth-internal")),new OA(r.getProvider("app-check-internal")),function(c,f){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new B(O.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new _r(c.options.projectId,f)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),l._setSettings(s),l},"PUBLIC").setMultipleInstances(!0)),Cn(ky,"4.6.4",e),Cn(ky,"4.6.4","esm2017")})();/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var es=function(){return es=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},es.apply(this,arguments)},nI=function(t){return{loading:t==null,value:t}},Ab=function(){return function(t,e){switch(e.type){case"error":return es(es({},t),{error:e.error,loading:!1,value:void 0});case"reset":return nI(e.defaultValue);case"value":return es(es({},t),{error:void 0,loading:!1,value:e.value});default:return t}}},Rb=function(t){var e=void 0,n=H.useReducer(Ab(),nI(e)),r=n[0],i=n[1],s=H.useCallback(function(){var u=void 0;i({type:"reset",defaultValue:u})},[t]),o=H.useCallback(function(u){i({type:"error",error:u})},[]),l=H.useCallback(function(u){i({type:"value",value:u})},[]);return H.useMemo(function(){return{error:r.error,loading:r.loading,reset:s,setError:o,setValue:l,value:r.value}},[r.error,r.loading,s,o,l,r.value])},Cb=function(t,e,n){var r=H.useRef(t);return H.useEffect(function(){e(t,r.current)||(r.current=t,n&&n())}),r},bb=function(t,e){var n=!t&&!e,r=!!t&&!!e&&zp(t,e);return n||r},kb=function(t,e){return Cb(t,bb,e)},Db=function(t,e){var n=Rb(),r=n.error,i=n.loading,s=n.reset,o=n.setError,l=n.setValue,u=n.value,c=kb(t,s);return H.useEffect(function(){if(!c.current){l(void 0);return}var f=em(c.current,l,o);return function(){f()}},[c.current]),[u,i,r]},Nb=function(t,e){var n=Db(t),r=n[0],i=n[1],s=n[2],o=Vb(r,void 0,void 0);return[o,i,s,r]},Vb=function(t,e,n){return H.useMemo(function(){var r;return(r=t==null?void 0:t.docs.map(function(i){return i.data(e)}))!==null&&r!==void 0?r:n},[t,e])};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mb{constructor(e,n){this._delegate=e,this.firebase=n,oa(e,new li("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),ep(this._delegate)))}_getService(e,n=pr){var r;this._delegate.checkDestroyed();const i=this._delegate.container.getProvider(e);return!i.isInitialized()&&((r=i.getComponent())===null||r===void 0?void 0:r.instantiationMode)==="EXPLICIT"&&i.initialize(),i.getImmediate({identifier:n})}_removeServiceInstance(e,n=pr){this._delegate.container.getProvider(e).clearInstance(n)}_addComponent(e){oa(this._delegate,e)}_addOrOverwriteComponent(e){Rw(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lb={"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."},B_=new Ju("app-compat","Firebase",Lb);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ob(t){const e={},n={__esModule:!0,initializeApp:s,app:i,registerVersion:Cn,setLogLevel:Nw,onLog:Dw,apps:null,SDK_VERSION:Jf,INTERNAL:{registerComponent:l,removeApp:r,useAsService:u,modularAPIs:RA}};n.default=n,Object.defineProperty(n,"apps",{get:o});function r(c){delete e[c]}function i(c){if(c=c||pr,!Iy(e,c))throw B_.create("no-app",{appName:c});return e[c]}i.App=t;function s(c,f={}){const m=Zf(c,f);if(Iy(e,m.name))return e[m.name];const v=new t(m,n);return e[m.name]=v,v}function o(){return Object.keys(e).map(c=>e[c])}function l(c){const f=c.name,m=f.replace("-compat","");if(_s(c)&&c.type==="PUBLIC"){const v=(A=i())=>{if(typeof A[m]!="function")throw B_.create("invalid-app-argument",{appName:f});return A[m]()};c.serviceProps!==void 0&&wu(v,c.serviceProps),n[m]=v,t.prototype[m]=function(...A){return this._getService.bind(this,f).apply(this,c.multipleInstances?A:[])}}return c.type==="PUBLIC"?n[m]:null}function u(c,f){return f==="serverAuth"?null:f}return n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rI(){const t=Ob(Mb);t.INTERNAL=Object.assign(Object.assign({},t.INTERNAL),{createFirebaseNamespace:rI,extendNamespace:e,createSubscribe:pP,ErrorFactory:Ju,deepExtend:wu});function e(n){wu(t,n)}return t}const Fb=rI();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j_=new Yf("@firebase/app-compat"),Bb="@firebase/app-compat",jb="0.2.37";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zb(t){Cn(Bb,jb,t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */if(ww()&&self.firebase!==void 0){j_.warn(`
    Warning: Firebase is already defined in the global scope. Please make sure
    Firebase library is only loaded once.
  `);const t=self.firebase.SDK_VERSION;t&&t.indexOf("LITE")>=0&&j_.warn(`
    Warning: You are trying to load Firebase while using Firebase Performance standalone script.
    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.
    `)}const ks=Fb;zb();var Ub="firebase",$b="10.12.4";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ks.registerVersion(Ub,$b,"app-compat");const qb="@firebase/firestore-compat",Gb="0.3.33";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nm(t,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new B("invalid-argument",`Invalid options passed to function ${t}(): You cannot specify both "merge" and "mergeFields".`);return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z_(){if(typeof Uint8Array>"u")throw new B("unimplemented","Uint8Arrays are not available in this environment.")}function U_(){if(!l2())throw new B("unimplemented","Blobs are unavailable in Firestore in this environment.")}class _a{constructor(e){this._delegate=e}static fromBase64String(e){return U_(),new _a(mn.fromBase64String(e))}static fromUint8Array(e){return z_(),new _a(mn.fromUint8Array(e))}toBase64(){return U_(),this._delegate.toBase64()}toUint8Array(){return z_(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yd(t){return Wb(t,["next","error","complete"])}function Wb(t,e){if(typeof t!="object"||t===null)return!1;const n=t;for(const r of e)if(r in n&&typeof n[r]=="function")return!0;return!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kb{enableIndexedDbPersistence(e,n){return jC(e._delegate,{forceOwnership:n})}enableMultiTabIndexedDbPersistence(e){return zC(e._delegate)}clearIndexedDbPersistence(e){return UC(e._delegate)}}class iI{constructor(e,n,r){this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof _r||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const n=this._delegate._getSettings();!e.merge&&n.host!==e.host&&rn("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},n),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,n,r={}){MC(this._delegate,e,n,r)}enableNetwork(){return qC(this._delegate)}disableNetwork(){return GC(this._delegate)}enablePersistence(e){let n=!1,r=!1;return e&&(n=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,ME("synchronizeTabs",n,"experimentalForceOwningTab",r)),n?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return $C(this._delegate)}onSnapshotsInSync(e){return yb(this._delegate,e)}get app(){if(!this._appCompat)throw new B("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Ds(this,jE(this._delegate,e))}catch(n){throw mt(n,"collection()","Firestore.collection()")}}doc(e){try{return new qt(this,Vu(this._delegate,e))}catch(n){throw mt(n,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new pt(this,LC(this._delegate,e))}catch(n){throw mt(n,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return Eb(this._delegate,n=>e(new sI(this,n)))}batch(){return Ye(this._delegate),new oI(new vb(this._delegate,e=>Fa(this._delegate,e)))}loadBundle(e){return WC(this._delegate,e)}namedQuery(e){return KC(this._delegate,e).then(n=>n?new pt(this,n):null)}}class wc extends Zp{constructor(e){super(),this.firestore=e}convertBytes(e){return new _a(new mn(e))}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return qt.forKey(n,this.firestore,null)}}function Hb(t){CA(t)}class sI{constructor(e,n){this._firestore=e,this._delegate=n,this._userDataWriter=new wc(e)}get(e){const n=Zr(e);return this._delegate.get(n).then(r=>new va(this._firestore,new Mn(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,n.converter)))}set(e,n,r){const i=Zr(e);return r?(nm("Transaction.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){const s=Zr(e);return arguments.length===2?this._delegate.update(s,n):this._delegate.update(s,n,r,...i),this}delete(e){const n=Zr(e);return this._delegate.delete(n),this}}class oI{constructor(e){this._delegate=e}set(e,n,r){const i=Zr(e);return r?(nm("WriteBatch.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){const s=Zr(e);return arguments.length===2?this._delegate.update(s,n):this._delegate.update(s,n,r,...i),this}delete(e){const n=Zr(e);return this._delegate.delete(n),this}commit(){return this._delegate.commit()}}class _i{constructor(e,n,r){this._firestore=e,this._userDataWriter=n,this._delegate=r}fromFirestore(e,n){const r=new zo(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new wa(this._firestore,r),n??{})}toFirestore(e,n){return n?this._delegate.toFirestore(e,n):this._delegate.toFirestore(e)}static getInstance(e,n){const r=_i.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let s=i.get(n);return s||(s=new _i(e,new wc(e),n),i.set(n,s)),s}}_i.INSTANCES=new WeakMap;class qt{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new wc(e)}static forPath(e,n,r){if(e.length%2!==0)throw new B("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new qt(n,new Re(n._delegate,r,new $(e)))}static forKey(e,n,r){return new qt(n,new Re(n._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Ds(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Ds(this.firestore,jE(this._delegate,e))}catch(n){throw mt(n,"collection()","DocumentReference.collection()")}}isEqual(e){return e=je(e),e instanceof Re?zE(this._delegate,e):!1}set(e,n){n=nm("DocumentReference.set",n);try{return n?O_(this._delegate,e,n):O_(this._delegate,e)}catch(r){throw mt(r,"setDoc()","DocumentReference.set()")}}update(e,n,...r){try{return arguments.length===1?F_(this._delegate,e):F_(this._delegate,e,n,...r)}catch(i){throw mt(i,"updateDoc()","DocumentReference.update()")}}delete(){return mb(this._delegate)}onSnapshot(...e){const n=aI(e),r=lI(e,i=>new va(this.firestore,new Mn(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return em(this._delegate,n,r)}get(e){let n;return(e==null?void 0:e.source)==="cache"?n=cb(this._delegate):(e==null?void 0:e.source)==="server"?n=hb(this._delegate):n=ub(this._delegate),n.then(r=>new va(this.firestore,new Mn(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new qt(this.firestore,e?this._delegate.withConverter(_i.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function mt(t,e,n){return t.message=t.message.replace(e,n),t}function aI(t){for(const e of t)if(typeof e=="object"&&!Yd(e))return e;return{}}function lI(t,e){var n,r;let i;return Yd(t[0])?i=t[0]:Yd(t[1])?i=t[1]:typeof t[0]=="function"?i={next:t[0],error:t[1],complete:t[2]}:i={next:t[1],error:t[2],complete:t[3]},{next:s=>{i.next&&i.next(e(s))},error:(n=i.error)===null||n===void 0?void 0:n.bind(i),complete:(r=i.complete)===null||r===void 0?void 0:r.bind(i)}}class va{constructor(e,n){this._firestore=e,this._delegate=n}get ref(){return new qt(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,n){return this._delegate.get(e,n)}isEqual(e){return tI(this._delegate,e._delegate)}}class wa extends va{data(e){const n=this._delegate.data(e);return this._delegate._converter||bA(n!==void 0),n}}class pt{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new wc(e)}where(e,n,r){try{return new pt(this.firestore,Wn(this._delegate,ZC(e,n,r)))}catch(i){throw mt(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,n){try{return new pt(this.firestore,Wn(this._delegate,eb(e,n)))}catch(r){throw mt(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new pt(this.firestore,Wn(this._delegate,tb(e)))}catch(n){throw mt(n,"limit()","Query.limit()")}}limitToLast(e){try{return new pt(this.firestore,Wn(this._delegate,nb(e)))}catch(n){throw mt(n,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new pt(this.firestore,Wn(this._delegate,rb(...e)))}catch(n){throw mt(n,"startAt()","Query.startAt()")}}startAfter(...e){try{return new pt(this.firestore,Wn(this._delegate,ib(...e)))}catch(n){throw mt(n,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new pt(this.firestore,Wn(this._delegate,sb(...e)))}catch(n){throw mt(n,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new pt(this.firestore,Wn(this._delegate,ob(...e)))}catch(n){throw mt(n,"endAt()","Query.endAt()")}}isEqual(e){return zp(this._delegate,e._delegate)}get(e){let n;return(e==null?void 0:e.source)==="cache"?n=fb(this._delegate):(e==null?void 0:e.source)==="server"?n=pb(this._delegate):n=db(this._delegate),n.then(r=>new Xd(this.firestore,new Tr(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const n=aI(e),r=lI(e,i=>new Xd(this.firestore,new Tr(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return em(this._delegate,n,r)}withConverter(e){return new pt(this.firestore,e?this._delegate.withConverter(_i.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}class Qb{constructor(e,n){this._firestore=e,this._delegate=n}get type(){return this._delegate.type}get doc(){return new wa(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class Xd{constructor(e,n){this._firestore=e,this._delegate=n}get query(){return new pt(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new wa(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(n=>new Qb(this._firestore,n))}forEach(e,n){this._delegate.forEach(r=>{e.call(n,new wa(this._firestore,r))})}isEqual(e){return tI(this._delegate,e._delegate)}}class Ds extends pt{constructor(e,n){super(e,n),this.firestore=e,this._delegate=n}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new qt(this.firestore,e):null}doc(e){try{return e===void 0?new qt(this.firestore,Vu(this._delegate)):new qt(this.firestore,Vu(this._delegate,e))}catch(n){throw mt(n,"doc()","CollectionReference.doc()")}}add(e){return gb(this._delegate,e).then(n=>new qt(this.firestore,n))}isEqual(e){return zE(this._delegate,e._delegate)}withConverter(e){return new Ds(this.firestore,e?this._delegate.withConverter(_i.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function Zr(t){return ae(t,Re)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rm{constructor(...e){this._delegate=new Ir(...e)}static documentId(){return new rm(Ee.keyField().canonicalString())}isEqual(e){return e=je(e),e instanceof Ir?this._delegate._internalPath.isEqual(e._internalPath):!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kr{constructor(e){this._delegate=e}static serverTimestamp(){const e=Tb();return e._methodName="FieldValue.serverTimestamp",new Kr(e)}static delete(){const e=Ib();return e._methodName="FieldValue.delete",new Kr(e)}static arrayUnion(...e){const n=xb(...e);return n._methodName="FieldValue.arrayUnion",new Kr(n)}static arrayRemove(...e){const n=Sb(...e);return n._methodName="FieldValue.arrayRemove",new Kr(n)}static increment(e){const n=Pb(e);return n._methodName="FieldValue.increment",new Kr(n)}isEqual(e){return this._delegate.isEqual(e._delegate)}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yb={Firestore:iI,GeoPoint:hc,Timestamp:Te,Blob:_a,Transaction:sI,WriteBatch:oI,DocumentReference:qt,DocumentSnapshot:va,Query:pt,QueryDocumentSnapshot:wa,QuerySnapshot:Xd,CollectionReference:Ds,FieldPath:rm,FieldValue:Kr,setLogLevel:Hb,CACHE_SIZE_UNLIMITED:BC};function Xb(t,e){t.INTERNAL.registerComponent(new li("firestore-compat",n=>{const r=n.getProvider("app-compat").getImmediate(),i=n.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},Yb)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jb(t){Xb(t,(e,n)=>new iI(e,n,new Kb)),t.registerVersion(qb,Gb)}Jb(ks);ks.apps.length||ks.initializeApp({apiKey:"AIzaSyCKyv3D-nJsLkWYxh5ZuFIP8qoB8SkgFv8",authDomain:"undanganku-56e72.firebaseapp.com",projectId:"undanganku-56e72",storageBucket:"undanganku-56e72.appspot.com",messagingSenderId:"805250040859",appId:"1:805250040859:web:45a329e288f04ba65ee4be",measurementId:"G-8JNP42398Q"});const $_=ks.firestore(),Zb=()=>{const[t,e]=H.useState(""),[n,r]=H.useState(""),[i,s,o]=Nb($_.collection("messages").orderBy("createdAt","desc")),[l,u]=H.useState([]),[c,f]=H.useState(null),[m,v]=H.useState(!1),A=async k=>{if(k.preventDefault(),!(!t.trim()||!n.trim())){try{await $_.collection("messages").add({name:t,text:n,createdAt:ks.firestore.FieldValue.serverTimestamp()}),e(""),r(""),f("success"),v(!0),setTimeout(()=>{v(!1)},3e4)}catch(N){console.error("Error adding message: ",N),f("error")}setTimeout(()=>f(null),3e3)}};return H.useEffect(()=>{i&&u(i.slice(0,i.length))},[i]),b.jsxs("div",{className:"flex flex-col items-center justify-center p-8 border bg-gray-400 border-gray-300 shadow-lg h-full w-full relative fade-in-up",children:[c==="success"&&b.jsx("div",{className:"absolute top-4 right-4 bg-green-500 text-white px-4 py-2 rounded shadow-md",children:"Ucapan berhasil dikirim "}),c==="error"&&b.jsx("div",{className:"absolute top-4 right-4 bg-red-500 text-white px-4 py-2 rounded shadow-md",children:"Ucapan gagal dikirim "}),b.jsxs("div",{className:"flex flex-col items-center justify-center text-center",children:[b.jsx("h1",{className:"text-3xl font-bold mb-5 font-playfair",children:"Kirim Ucapan"}),b.jsx("div",{className:"w-20 h-[1px] bg-black mb-5"}),b.jsxs("form",{onSubmit:A,className:"mb-8",children:[b.jsx("input",{type:"text",value:t,onChange:k=>e(k.target.value),placeholder:"Nama kamu ...",className:"w-full px-4 py-2 mb-4 rounded border border-gray-300 focus:outline-none focus:border-gray-400",maxLength:20,disabled:m}),b.jsx("textarea",{value:n,onChange:k=>r(k.target.value),placeholder:"Tulis pesan kamu...",className:"w-full px-4 py-2 mb-4 rounded border border-gray-300 focus:outline-none focus:border-gray-400",rows:"4",maxLength:100,disabled:m}),b.jsx("button",{type:"submit",className:"w-full px-4 py-2 bg-gray-500 text-white rounded hover:bg-gray-600 focus:outline-none",disabled:m,children:"Kirim"})]}),s&&b.jsx("p",{children:"Loading..."}),o&&b.jsxs("p",{children:["Error: ",o.message]}),b.jsx("h1",{className:"text-3xl font-bold mb-5 font-playfair",children:"Kumpulan Ucapan"}),b.jsx("div",{className:"w-20 h-[1px] bg-black mb-5"}),b.jsx("div",{className:"max-h-72 overflow-y-auto w-full",children:l.map((k,N)=>b.jsxs("div",{className:"p-2 m-2 border bg-white border-gray-300 rounded-xl grid grid-cols-[auto_1fr] items-start",children:[b.jsx("div",{className:"flex items-start",children:b.jsx(XS,{className:"text-gray-500 m-1 w-5"})}),b.jsxs("div",{className:"text-left",children:[b.jsx("p",{className:"font-bold",children:k.name}),b.jsx("p",{className:"max-w-xl",children:k.text})]})]},N))})]})]})},uI=H.forwardRef((t,e)=>{const n=[b.jsxs(b.Fragment,{children:[b.jsx("p",{className:"mb-4",children:"Suatu siang, di balik tumpukan tugas kelompok matematika. Dipaksa bertukar suara. Soal demi soal merangkai pertemanan. Hingga terbiasa menjadi teman belajar. Namun tanpa suara. Hanya ada buku, kertas dan sedikit usaha. Untuk menyerahkan buku ke arah meja salah satu siswa yang sejajar dengannya. Hanya berjarak dua meja di kelas itu."}),b.jsx("p",{className:"mb-4",children:"Gadis itu melipat pojok kanan halaman menyerupai segitiga. Menandai bahwa halaman ini yang perlu diperhatikan. Menyelipkan secarik kertas. Berisikan Aku tidak mengerti soal no. 15 dan 27. Bantu jelasin ya. Menutup buku itu. Dan kemudian menyerahkan ke teman di sebelahnya dengan ucapaan Kasih ke Thariq."}),b.jsx("p",{className:"mb-4",children:"Begitulah pertemanan mereka hingga tamat SMA."}),b.jsx("h2",{className:"text-lg font-semibold mb-2",children:"Tahun 2016"}),b.jsx("p",{className:"mb-4",children:"Thariq meneruskan perkuliahan di ITB sedangkan Sherly dihampiri kegalauan. UNPAD atau STMIK Indonesia Padang dengan beasiswa."})]}),b.jsxs(b.Fragment,{children:[b.jsx("p",{className:"mb-4",children:"Gundah tersebut disampaikan pada pembina asramanya, Pak Yamin, yang biasa dipanggil Ayah. Kalau di UNPAD, kalian akan sama-sama di Bandung, kemungkinan untuk bertemu lebih besar. Kalau UNPAD lebih baik menikah dengan biaya dari orang tua masing-masing. Suara ayah lembut."}),b.jsx("p",{className:"mb-4",children:"Gemuruh hadir di dada Sherly ketika ia mendengar kalimat menikah. Rasanya ingin menyampaikan Yah, kami hanya teman."}),b.jsx("p",{className:"mb-4",children:"Sepertinya ayah membaca kerutan di wajah gadis itu. Kemudian ayah melanjutkan ucapannya. Ketika hendak Sidang Asrama kelas 12. Kan teman-teman menuliskan nama yang dianggap melanggar aturan asrama. Ayah menemukan satu pengaduan untuk nama Sherly dan Thariq"}),b.jsx("p",{className:"mb-4",children:"Akhirnya Sherly memutuskan berkuliah di STMIK Indonesia Padang. Di tahun-tahun berikutnya cerita mereka samar. Nyaris hilang."}),b.jsx("h2",{className:"text-lg font-semibold mb-2",children:"Tahun 2020"}),b.jsx("p",{className:"mb-4",children:"Hanya ada cerita di beberapa bulan tahun 2020. Ketika Sherly meminta Thariq menjadi teman diskusi untuk Menyelesaikan Skripsinya."})]}),b.jsxs(b.Fragment,{children:[b.jsx("h2",{className:"text-lg font-semibold mb-2",children:"Pertengahan Tahun 2022"}),b.jsx("p",{className:"mb-4",children:"Ly, mau jadi english speaking partner aku ngga?. Pesan singkat itu dikirim Thariq tanpa basa basi."}),b.jsx("p",{className:"mb-4",children:"Mereka kembali menjadi teman belajar."}),b.jsx("h2",{className:"text-lg font-semibold mb-2",children:"Tahun 2023"}),b.jsx("p",{className:"mb-4",children:"Thariq meminta upgrade pertemanan. Dari sekedar teman belajar menjadi teman belajar seumur hidup."}),b.jsx("p",{className:"mb-4",children:"Maaf, aku belum tuntas dengan mimpiku untuk berkarir di bidang IT, balas Sherly singkat."}),b.jsx("p",{className:"mb-4",children:"Tahun itu juga, Thariq mulai merancang kurikulum belajar untuk Sherly. Memaksa belajar hingga larut malam."}),b.jsx("p",{className:"mb-4",children:"Sebelum tahun berakhir, mimpi itu menghampiri Sherly."}),b.jsx("p",{className:"mb-4",children:"Dan kemudian Thariq menyampaikan. Aku ingin saling merawat agar terus bertumbuh seperti mawar merah yang tumbuh di dalam buku"})]})];return b.jsx(b.Fragment,{children:n.map((r,i)=>b.jsxs("div",{ref:e,className:"flex flex-col items-center justify-center p-8 border bg-[#F4ECE8] border-gray-300 shadow-lg h-full w-full",children:[b.jsx("h1",{className:"text-3xl font-bold mb-2 font-playfair",children:"Our Journey"}),b.jsx("div",{className:"w-20 h-[1px] bg-gray-400 mb-2"}),b.jsx("div",{className:"bg-white p-6 rounded-lg shadow-lg max-w-2xl mx-auto mt-8 text-xs text-justify h-[590px] w-full",children:r},i)]},i))})});uI.displayName="OurJourney";const cI=H.forwardRef((t,e)=>b.jsxs("div",{ref:e,className:"relative flex flex-col items-center justify-center p-8 border bg-[#F4ECE8] border-gray-300 shadow-lg h-full w-full overflow-hidden",children:[b.jsx("div",{className:"absolute inset-0 bg-repeat bg-center opacity-20",style:{backgroundImage:`url(${ow})`,backgroundSize:"500px"}}),b.jsxs("div",{className:"relative z-10 flex flex-col items-center justify-center p-6 bg-[#F4ECE8] shadow-2xl shadow-[#F4ECE8] rounded-3xl max-w-md mx-auto top-44 bg-opacity-50",children:[b.jsx("h1",{className:"text-4xl font-bold mb-4 text-center font-dancing",children:"Epilog"}),b.jsx("p",{className:"text-sm text-center font-montserrat",children:"Kata-kata epilog yang menarik pembaca untuk datang ke acara pernikahan"})]})]}));cI.displayName="BackCover";const ek="/undang-aku/assets/page-flip-Dt8rU8kc.mp3";function tk(){const[t,e]=H.useState(!1),n=H.useRef(null),r=()=>{e(!t)},i=()=>{n.current&&n.current.play()};return b.jsxs("div",{className:"grid place-items-center h-screen gap-2",children:[!t&&b.jsx("div",{className:"fade-in-up",children:b.jsxs(kS,{width:331,height:720,maxShadowOpacity:.5,showCover:!0,onFlip:i,children:[b.jsx(aw,{}),b.jsx(lw,{}),b.jsx(dw,{}),b.jsx(fw,{}),b.jsx(pw,{}),b.jsx(uI,{}),b.jsx(mw,{}),b.jsx(cI,{})]})}),b.jsxs("div",{className:"flex flex-col items-center",children:[b.jsx("button",{className:"btn btn-wide bg-gray-200 mb-10 transition-transform transform hover:scale-105 hover:bg-gray-300",onClick:r,children:t?"Lihat Undangan":"Kirim Ucapan"}),t&&b.jsx("div",{children:b.jsx(Zb,{})})]}),b.jsx("audio",{ref:n,src:ek,preload:"auto"})]})}function nk(t){return Ar({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M22 8a.76.76 0 0 0 0-.21v-.08a.77.77 0 0 0-.07-.16.35.35 0 0 0-.05-.08l-.1-.13-.08-.06-.12-.09-9-5a1 1 0 0 0-1 0l-9 5-.09.07-.11.08a.41.41 0 0 0-.07.11.39.39 0 0 0-.08.1.59.59 0 0 0-.06.14.3.3 0 0 0 0 .1A.76.76 0 0 0 2 8v8a1 1 0 0 0 .52.87l9 5a.75.75 0 0 0 .13.06h.1a1.06 1.06 0 0 0 .5 0h.1l.14-.06 9-5A1 1 0 0 0 22 16V8zm-10 3.87L5.06 8l2.76-1.52 6.83 3.9zm0-7.72L18.94 8 16.7 9.25 9.87 5.34zM4 9.7l7 3.92v5.68l-7-3.89zm9 9.6v-5.68l3-1.68V15l2-1v-3.18l2-1.11v5.7z"},child:[]}]})(t)}const rk=()=>{const[t,e]=H.useState(""),n=H.useRef(),r=xS();return H.useEffect(()=>{const s=new URLSearchParams(r.search).get("sebagai");s&&e(s),n.current&&n.current.showModal()},[r]),b.jsx("dialog",{ref:n,id:"my_modal_5",className:"modal fixed top-14 inset-x-0 bg-transparent flex justify-center items-start pt-4",children:b.jsxs("div",{className:"modal-box bg-white bg-opacity-40 backdrop-blur-sm p-4 rounded-lg shadow-md max-w-xs w-full",children:[b.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[b.jsx(nk,{className:"text-2xl"}),b.jsxs("h3",{className:"font-bold text-xl",children:["Hai, ",t||"Orang Baik","!"]})]}),b.jsxs("p",{className:"py-2 text-sm font-medium",children:["Kamu dikiriman buku nih.",b.jsx("br",{})," Selamat membaca ya..."]}),b.jsx("div",{className:"flex justify-center mt-4",children:b.jsx("form",{method:"dialog",children:b.jsx("button",{className:"btn btn-xs text-xs btn-wide bg-opacity-80",children:"Terima"})})})]})})},ik="/undang-aku/assets/Together_We_Fly-Bo4iheMS.mp3",sk=()=>{const[t,e]=H.useState(!1),[n,r]=H.useState(!1),i=H.useRef(null),s=()=>{e(!t),i.current&&(i.current.muted=!t)},o=()=>{i.current&&!n&&i.current.play().then(()=>r(!0)).catch(l=>{console.log("Playback was prevented by the browser",l)})};return H.useEffect(()=>(document.addEventListener("click",o),document.addEventListener("keydown",o),()=>{document.removeEventListener("click",o),document.removeEventListener("keydown",o)}),[n]),b.jsxs("div",{className:"fixed top-4 right-4 z-50 flex items-center",children:[b.jsx("audio",{ref:i,src:ik,loop:!0}),b.jsx("button",{onClick:s,className:"bg-gray-700 text-white rounded-full p-2 flex items-center justify-center shadow-md",children:t?b.jsx(US,{size:24}):b.jsx($S,{size:24})})]})};function ok(){return b.jsx(RS,{children:b.jsxs("div",{className:"App",children:[b.jsx(rk,{}),b.jsx(tk,{}),b.jsx(sk,{})]})})}Ph.createRoot(document.getElementById("root")).render(b.jsx(xt.StrictMode,{children:b.jsx(ok,{})}));
